define("common/aif/Constants",["core/util/Globals"],(function(docs){"use strict";docs.common.Globals;return docs.aif.Constants={AuthType:{OAUTH:"OAUTH",BASIC:"BASIC"},TriggerType:{SELECT:"SELECT",MENU:"MENU",TENANT_CONFIG:"TENANT_CONFIG",USER_CONFIG:"USER_CONFIG",INFO:"INFO"},ActionType:{DIRECT:"DIRECT",UI:"UI"},ViewType:{WINDOW:"WINDOW",POPUP:"POPUP",CLIENT:"CLIENT"},EndPointCategory:{CUSTOM:"CUSTOM"},HttpMethod:{GET:"GET",POST:"POST",PUT:"PUT",DELETE:"DELETE",HEAD:"HEAD"},UploadDialog:{WIDTH:1e3,HEIGHT:700},UserRole:{VIEWER:"viewer",DOWNLOADER:"downloader",CONTRIBUTOR:"contributor",MANAGER:"manager",OWNER:"owner"},applinkRole:{VIEWER:"viewer",DOWNLOADER:"downloader",CONTRIBUTOR:"contributor"},MessageType:{LOADED:"AIF-LOADED",RESIZED:"AIF-RESIZED",CLOSED:"AIF-CLOSED"},PopupConfig:{DISPLAY_OPTIONS:"status=yes,toolbar=no,location=no,menubar=no,directories=no,resizable=yes,scrollbars=yes",DEFAULT_DLG_WIDTH:500,DEFAULT_DLG_HEIGHT:400,DEFAULT_PANE_WIDTH:300,DEFAULT_PANE_HEIGHT:200,DEFAULT_BAR_WIDTH:300,DEFAULT_BAR_HEIGHT:50,DEFAULT_TENANT_PANE_WIDTH:800,DEFAULT_TENANT_PANE_HEIGHT:600,DEFAULT_USER_PANE_WIDTH:800,DEFAULT_USER_PANE_HEIGHT:600,DEFAULT_INFO_PANE_WIDTH:1e3,DEFAULT_INFO_PANE_HEIGHT:800},allowedExpressions:["in","true","false"],attributeMaps:{item:{id:"item.get('id')",name:"item.get('name')",type:"item.get('type')",parentId:"item.get('parentID')",ownerId:"item.get('ownedBy')",ownerName:"item.get('ownedByName')",creatorId:"item.get('createdBy')",creatorName:"item.get('createdByName')",createdAt:"item.get('createdAt')",lastModifierId:"item.get('modifiedBy')",lastModifierName:"item.get('modifiedByName')",modifiedAt:"item.get('modifiedAt')",size:"item.get('size')",permissions:"item.get('allowedActions')",state:"item.get('flags')",meta:"item.meta",appLink:"item.aifAppLink",originalName:"item.get('original_name')",extension:"item.get('extension')",revision:"item.get('revision')",mimeType:"item.get('fileType')",reservedById:"item.get('reservedBy')",reservedByName:"item.get('reservedByName')",reservedAt:"item.get('reservedAt')",favorite:"item.get('favorite')",isReservedByAnotherUser:"AifAPI.isReservedByAnotherUser(item)",description:"item.get('description')"},user:{id:"AifAPI.globals.userid",name:"AifAPI.globals.userName",loginName:"AifAPI.globals.userLogin",email:"AifAPI.globals.userEmail",timeZone:"AifAPI.globals.userTimeZone",role:"AifAPI.getUserRole(item)",hasPrivilegesAs:"AifAPI.hasPrivilegesAs",isMember:"(AifAPI.globals.isPublicLink !== true && AifAPI.globals.isAppLink !== true)",isPublicLink:"(AifAPI.globals.isPublicLink !== false)",isAppLink:"(AifAPI.globals.isAppLink !== false)",isExternal:"(AifAPI.globals.isStandardExternalUser === true || AifAPI.globals.isEnterpriseExternalUser === true)"}},getPopupDefaultWidth:function(e,t){return this.ActionType.DIRECT===e?this.PopupConfig.DEFAULT_BAR_WIDTH:t===this.TriggerType.SELECT?this.PopupConfig.DEFAULT_PANE_WIDTH:t===this.TriggerType.MENU?this.PopupConfig.DEFAULT_DLG_WIDTH:t===this.TriggerType.TENANT_CONFIG?this.PopupConfig.DEFAULT_TENANT_PANE_WIDTH:t===this.TriggerType.USER_CONFIG?this.PopupConfig.DEFAULT_USER_PANE_WIDTH:t===this.TriggerType.INFO?this.PopupConfig.DEFAULT_INFO_PANE_WIDTH:0},getPopupDefaultHeight:function(e,t){return this.ActionType.DIRECT===e?this.PopupConfig.DEFAULT_BAR_HEIGHT:t===this.TriggerType.SELECT?this.PopupConfig.DEFAULT_PANE_HEIGHT:t===this.TriggerType.MENU?this.PopupConfig.DEFAULT_DLG_HEIGHT:t===this.TriggerType.TENANT_CONFIG?this.PopupConfig.DEFAULT_TENANT_PANE_HEIGHT:t===this.TriggerType.USER_CONFIG?this.PopupConfig.DEFAULT_USER_PANE_HEIGHT:t===this.TriggerType.INFO?this.PopupConfig.DEFAULT_INFO_PANE_HEIGHT:0}},docs.aif.Constants})),define("common/aif/Utils",["jquery","underscore","core/util/Globals","core/util/Session","core/util/Service","core/util/Jsonify","common/aif/Constants"],(function(e,t,docs,i,n,s,o){"use strict";var a=docs.common.Globals;return docs.aif.Utils={createQualifyingFunction:function(e){var t=this.resolveQualifyingExpression(e);return{func:this.createFunction("item",t),needsMeta:this.needsMetadata(t)}},createURLResolveFunction:function(e){var t=this.resolveURLExpression(e);return{func:this.createFunction("items",t),needsMeta:this.needsMetadata(t)}},createJSONResolveFunction:function(e){var t=this.resolveJSONExpression(e);return{func:this.createFunction("items",t),needsMeta:this.needsMetadata(t)}},needsMetadata:function(e){return/.*(\.meta\.)+.*/.test(e)||!1},resolveQualifyingExpression:function(i){docs.common.Logger("AIF").debug("Entering resolveURLExpression for : "+i);try{if(!t.isEmpty(i)){var n=[];i=i.replace(/(["'])((\\{2})*|(.*?[^\\](\\{2})*))\1/g,(function(e){var t=n.length;return n[t]=e,"%%%"+t+"%%%"}));var s=e.proxy(this.getAttributeReference,this);i=(i=i.replace(/([a-zA-Z_$][0-9a-zA-Z_$\\.]*)/g,(function(e){return s(e)}))).replace(/%%%(\d+)%%%/g,(function(e,t){return n[t]}))}return i="return("+i+");",docs.common.Logger("AIF").debug("Exiting  resolveQualifyingExpression  with result: "+i),i}catch(e){docs.common.Logger("AIF").error("Failed to successfully resolve qualifying expression: "+i)}},resolveURLExpression:function(e){function i(e){return t.isEmpty(e)?"":'retStr+="'+e+'";'}docs.common.Logger("AIF").debug("Entering resolveURLExpression for : "+e);try{var n="";if(!t.isEmpty(e)){var s=0;n+="var item=_.isArray(items)?items[0]:items;",n+='var retStr="";';for(var o="";s<e.length;){switch(e[s]){case"[":n+=i(o),n+="_.each(items, function(item, index, items) {",o="";break;case"]":n+=i(o),n+="if(index === items.length-1){retStr=retStr.substring(0,retStr.length-1);}",n+="});",o="";break;case"{":n+=i(o),o="";break;case"}":n+="retStr+="+this.getAttributeReference(o)+";",o="";break;default:o+=e[s]}s++}(-1===s||s>=e.length)&&(n+=i(o),n+="return(retStr);")}return docs.common.Logger("AIF").debug("Exiting resolveURLExpression with function code : "+n),n}catch(t){docs.common.Logger("AIF").error("Failed to successfully resolve url/data expression: "+e)}},resolveValueExpression:function(e){if(!t.isEmpty(e)){var i="(function(items, AifAPI, _) {";return i+=this.resolveURLExpression(e),i+="})(items, AifAPI, _)"}return'""'},resolveObjectExpression:function(e){var i="(function(items, AifAPI, _) {";i+="var keyData = {};";var n=t.keys(e);return t.each(n,(function(n){var s=t.isObject(e[n])&&!t.isString(e[n])?this.resolveObjectExpression(e[n]):this.resolveValueExpression(e[n]);i+='keyData["'+n+'"] = '+s+";"}),this),i+="return(keyData)",i+="})(items, AifAPI, _)"},resolveJSONExpression:function(e){docs.common.Logger("AIF").debug("Entering resolveJSONExpression for : "+e);try{var i="";if(!t.isEmpty(e)){i+="var data = {};";var n=t.keys(e);t.each(n,(function(n){var s=t.isObject(e[n])&&!t.isString(e[n])?this.resolveObjectExpression(e[n]):this.resolveValueExpression(e[n]);i+='data["'+n+'"] = '+s+";"}),this),i+="return(data);"}return docs.common.Logger("AIF").debug("Exiting resolveJSONExpression with function code : "+i),i}catch(t){docs.common.Logger("AIF").error("Failed to successfully resolve json expression: "+JSON.stringify(e))}},getAttributeReference:function(e){if(t.isEmpty(e))return e;var i,n=e.split("."),s=o.attributeMaps[n[0]];if(t.isUndefined(s)&&t.some(o.attributeMaps,(function(e){if(t.has(e,n[0]))return s=e,!0})),!t.isUndefined(s))if(1===n.length&&t.has(o.attributeMaps,n[0]))i=n[0];else{var a=t.has(o.attributeMaps,n[0])?1:0;if(a<n.length)for(i=s[n[a++]];a<n.length;a++)i+="."+n[a]}return t.isUndefined(i)&&(i=this.isExpressionAllowed(e)?e:'"'+e+'"'),i},createFunction:function(e,t){try{return new Function(e,"AifAPI","_",t)}catch(e){docs.common.Logger("AIF").error("Failed to create function with code: "+t+". Error is: "+e)}},isExpressionAllowed:function(e){var t=o.allowedExpressions.indexOf(e)>=0;return t|=/^AifAPI\./.test(e),t|=/^_\./.test(e)},supportedType:function(e){var i;return e.type?i=t.isFunction(e.type)?e.type():e.type:t.isFunction(e.get)&&(i=e.get("type")),"folder"===i||"file"===i},getItemsFromSelection:function(e){var i=[];return t.isUndefined(e)||(t.isArray(e)?t.each(e,(function(e){this.supportedType(e)&&i.push(e.folderItem||e)}),this):this.supportedType(e)&&i.push(e.folderItem||e)),i},loadFileContents:function(i,n){if(t.isFunction(i)){n=e(n||"body"),e("#aifInput",n).remove(),n.prepend(e('<input id="aifInput" class="hiddenInput" type="file" accept=".conf" name="aifInput">'));var s=e("#aifInput",n);s.on("change",(function(t){var n=e(t.currentTarget),s=n.prop("files")[0];n.remove();var o=new FileReader;o.onload=function(){var e=o.result;e&&e.length>0&&i(e)},o.readAsText(s)})),s.ready((function(){s.focus().click()}))}},createAppLink:function(i,s){if(!t.isUndefined(i)){var r=n.getServiceParamsForPost("CREATE_APP_LINK");r.data.item=(i.isFolder?"fFolderGUID":"fFileGUID")+":"+i.get("id"),r.data.dAssignedUser=a.userid||a.userLogin||a.userName,r.data.dRoleName=s,r.data.dUserLocale=a.locale,r.data.dUserTimeZone=a.userTimeZome;var l={};return e.ajax(r.url,{type:o.HttpMethod.POST,async:!1,data:r.data,success:function(e){l.id=e.LocalData.dAppLinkID,l.url=e.LocalData.dLinkUrl,l.accessToken=e.LocalData.dAppLinkAccessToken}}),l}},loadMetadata:function(i){if(!t.isUndefined(i)){i=t.isArray(i)?i:[i];var a=[];if(t.each(i,(function(e){e.has("meta")||a.push((e.isFolder?"fFolderGUID":"fFileGUID")+":"+e.get("id"))})),!t.isEmpty(a)){var r=n.getServiceParamsForPost("GET_METADATA");r.data.items=a.join(","),r.data.dMetadataSerializer="RelationalSerializer",e.ajax(r.url,{type:o.HttpMethod.POST,async:!1,data:r.data,success:function(e){s.parse_GET_METADATA(i,e),docs.common.Logger("AIF").debug("Request to get metadata completed successfully for items:"+a.join(","))}})}}},fullPropName:function(e,i){return(t.isEmpty(e)?"":e+".")+i}},docs.aif.Utils})),define("common/aif/model/Application",["jquery","underscore","backbone","core/util/Jsonify","core/util/Service","core/util/Globals","core/util/Logger"],(function(e,t,i,n,s){"use strict";return docs.aif.models.Application=i.Model.extend({initialize:function(e){e=e||{},t.isEmpty(e.userName)?this.set("password",""):this.set("password",docs.i18n.t("PROC_INTEG_PASSWORD_MASK"))},isDirty:function(e){return e.enabled!==this.get("enabled")||e.endPoint!==this.get("endPoint")||e.userName!==this.get("userName")||e.password!==this.get("password")},save:function(e){return this.configure(e)},enable:function(t){var i=!1;if(t.enabled!==this.get("enabled")){var o=s.getServiceParamsForPost("AF_ENABLE_DISABLE_APP");o.data.dAppName=this.get("name"),o.data.dIsAppEnabled=t.enabled;var a=this;e.ajax(o.url,{type:"POST",async:!1,data:o.data,success:function(e,s,o){if("0"===e.LocalData.StatusCode){var r=n.parse_AF_ENABLE_DISABLE_APP(e);a.set({enabled:r.enabled}),a.trigger("aif:appStateChanged",r.enabled),i=!0,docs.common.Logger("AIF").info(a.get("name")+" application "+(t.enabled?"enabled":"disabled")+" successfully")}else docs.common.Logger("AIF").info(a.get("name")+" application could not be "+(t.enabled?"enabled":"disabled")+". Status: "+s)},error:function(i,n,s){docs.common.Logger("AIF").debug(a.get("name")+" application could not be "+(t.enabled?"enabled":"disabled")+" Error Message is: "+s.errorMsg),t.enabled?e("#switch-"+a.get("name").toLowerCase()+"_app_id").removeClass("on"):e("#switch-"+a.get("name").toLowerCase()+"_app_id").addClass("on")}})}else i=!0;return i},configure:function(i){var o=!1,a={};if(i.enabled!==this.get("enabled")&&(a.dIsAppEnabled=i.enabled),i.enabled&&(t.isEmpty(i.endPoint)||i.endPoint===this.get("endPoint")||(a.dAppEndPoint=i.endPoint),t.isEmpty(i.userName)||i.userName===this.get("userName")||(a.dAppUserName=i.userName),t.isEmpty(i.password)||i.password===this.get("password")||(a.dAppUserPass=i.password),"PCS"===this.get("name")&&JSON.stringify(i.config)!==JSON.stringify(this.get("config"))&&(a.appJSONConfig=JSON.stringify(i.config))),t.isEmpty(a))o=!0;else{var r=t.extend(s.getServiceParamsForPost("AF_CONFIGURE_APPLICATION"),a);a.dAppName=this.get("name"),t.extend(a,r.data);var l=this;e.ajax(r.url,{type:"POST",async:!1,data:a,success:function(e,i,s){if("0"===e.LocalData.StatusCode){var a=n.parse_AF_CONFIGURE_APPLICATION(e),r=t.findWhere(a,{name:l.get("name")});r?(l.set({enabled:r.enabled,endPoint:r.endPoint,userName:r.userName,password:docs.i18n.t("PROC_INTEG_PASSWORD_MASK")}),"PCS"===l.get("name")&&l.set("config",r.config),l.trigger("aif:appStateChanged",r.enabled),o=!0,docs.common.Logger("AIF").info("Configration changes for "+l.get("name")+" application successfully saved")):docs.common.Logger("AIF").info("Configration changes for "+l.get("name")+" application could not be saved. Status: "+i)}else docs.common.Logger("AIF").info("Configration changes for "+l.get("name")+" application could not be saved. Status: "+i)},error:function(e,t,i){docs.common.Logger("AIF").debug("Configration changes for "+l.get("name")+" application could not be saved. Error Message is: "+i.errorMsg)}})}return o},isEnabled:function(){return this.get("enabled")||!1},canEnable:function(){return!(t.isEmpty(this.get("endPoint"))||t.isEmpty(this.get("userName"))||t.isEmpty(this.get("password")))}}),docs.aif.models.Application})),define("common/aif/model/Applications",["jquery","underscore","backbone","core/util/Jsonify","core/util/Service","common/aif/model/Application"],(function(e,t,i,n,s){"use strict";return docs.aif.models.Applications=i.Collection.extend({model:docs.aif.models.Application,initialize:function(e){this.fetch({async:!1})},url:function(){return s.formatServiceUrl("AF_GET_ALL_APPS")},parse:function(e){return n.parse_AF_GET_ALL_APPS(e)}}),docs.aif.models.Applications})),define("common/aif/API",["jquery","underscore","backbone","core/util/Globals","core/util/Utils","common/aif/Constants"],(function(e,t,i,docs,n,s){"use strict";var o=docs.common.Globals;return docs.aif.API={globals:o,closeWindow:function(e){var t=window.opener||window.parent;t?t.postMessage({action:"AIF-CLOSED",sender:window.name},e):window.self===window.top&&window.close()},isReservedByAnotherUser:function(e){var i=e.get("reservedBy");return!t.isEmpty(i)&&i!==o.userid},hasPrivilegesAs:function(e,i){if(!t.isUndefined(e)&&!t.isUndefined(i)){var n=t.values(s.UserRole).indexOf(docs.aif.API._getRoleFromAllowedActions(e)),o=t.values(s.UserRole).indexOf(i.toLowerCase());if(n>=0&&o>=0)return n>=o}return!1},isValidRole:function(e,i){return(!0!==i||"owner"!==e)&&t.contains(t.values(s.UserRole),e)},getUserRole:function(e){return docs.aif.API._getRoleFromAllowedActions(e)},_getRoleFromAllowedActions:function(e){var t;if(e){var i=e.get("allowedActions");i&&(t=i.filePreview&&!i.fileRead?s.UserRole.VIEWER:i.fileRead&&!i.fileWrite?s.UserRole.DOWNLOADER:i.fileWrite&&!i.directShareWrite?s.UserRole.CONTRIBUTOR:e.get("ownedBy")===o.userid?s.UserRole.OWNER:s.UserRole.MANAGER)}return t}},docs.aif.API})),define("common/aif/view/View",["jquery","underscore","backbone","core/view/MessageBar","common/aif/Constants","common/aif/API"],(function(e,t,i,n,s,o){"use strict";return docs.aif.views.View=i.View.extend({initialize:function(e){t.bindAll(this,"renderClient","successCallback","failureCallback"),this.action=e.action,this.items=e.items,this.render()},render:function(){var e=this.action.getName();switch(this.action.getViewType()){case s.ViewType.POPUP:this.renderPopup(e);break;case s.ViewType.WINDOW:this.renderWindow(e);break;case s.ViewType.CLIENT:this.renderClient(e)}return this},renderClient:function(e){},renderIFrame:function(t){if(t){var i=this.getWindowName(),n=e("<iframe name='"+i+"' class='aif-frame' seemless='true'></iframe>"),s=this;return n.on("load",(function(e){s.initChildWindow(n[0].contentWindow,i),n.off("load"),s.successCallback()})).on("error",(function(e){n.off("error"),s.failureCallback()})),t.append(n),n}},populateWindow:function(i,n){e.when(this.action.prepareInvoke(this.items)).done((function(o){if(i&&o&&o.url)if(o.method===s.HttpMethod.GET||t.isUndefined(o.data)||t.isEmpty(o.data))i.location=o.url;else{var a,r,l=o.data.indexOf("=");l>=0?(a=o.data.substring(0,l),r=o.data.substring(l+1)):(a="",r=o.data);var d=n+"_af",c=e("<form id='"+d+"' target='"+n+"' style='display:none;'></form>");c.attr("method",o.method).attr("action",o.url),c.append("<input type='hidden' name='"+a+"' value="+r+">"),c.append("<input type='submit'>"),e(".docsMainView").append(c);var u=e(".docsMainView").find("#"+d);u.ready((function(e){u.submit(),u.remove()}))}}))},initChildWindow:function(e,t){if(this.childWin!==e){try{e.name=t}catch(e){}this.childWin=e}this.populateWindow(this.childWin,t)},renderPopup:function(e){var t,i,n=this.action.getViewWidth(),o=this.action.getViewHeight(),a=this.action.getType(),r=this.action.getTrigger();return s.ActionType.DIRECT===a?(t=(window.screen.width-n)/2,i=1):s.TriggerType.SELECT===r?(t=window.screen.width-n,i=1):(s.TriggerType.MENU,t=(window.screen.width-n)/2,i=(window.screen.height-o)/2),this._renderWindow(e,t,i,n,o)},renderWindow:function(e){this._renderWindow(e)},_renderWindow:function(e,t,i,n,o){var a=s.PopupConfig.DISPLAY_OPTIONS;n&&(a+=",width="+n),o&&(a+=",height="+o),i&&(a+=",top="+i),t&&(a+=",left="+t);var r=this.getWindowName(),l=window.open("",r,a);return this.initChildWindow(l,r),this.childWin&&this.childWin.focus(),this.childWin},getWindowName:function(){return"Aif_"+this.action.getType()+"_"+this.action.getTrigger()+"_"+this.action.cid},sendMessage:function(e,t){this.childWin&&this.childWin.postMessage(e,t)},closeView:function(){this.childWin&&this.childWin.close()},showWebbar:function(e,t){new n({messageText:t,messageType:e})},successCallback:function(e){this.action.getType()===s.ActionType.DIRECT&&this.showWebbar("success",docs.i18n.t("AIF_DIRECT_ACTION_SUCCESS",this.action.getName()))},failureCallback:function(e){this.showWebbar("error",docs.i18n.t("AIF_DIRECT_ACTION_FAILURE",this.action.getName())),e&&(e.showWebBar=!1)}}),docs.aif.views.View})),define("common/aif/view/Dialog",["require","jquery","underscore","common/aif/view/View","jqueryui-amd/widgets/dialog"],(function(require,e,t,i){"use strict";return docs.aif.views.Dialog=i.extend({id:"aif-dialog-container",className:"aif-dialog-container dialog-section",initialize:function(e){t.bindAll(this,"onClose","closeView"),this.$cssDfd=docs.common.Utils.requireCssBundleAsPromise(["gemini-dialog","gemini-admin"]),i.prototype.initialize.call(this,e)},renderClient:function(e){this.$cssDfd.done(function(){this.renderIFrame(this.$el),this.$el.dialog({modal:!0,title:e,width:this.action.getViewWidth(),height:this.action.getViewHeight(),resizable:!0,close:this.onClose,closeText:docs.i18n.t("GENERAL_CMD_CLOSE")})}.bind(this))},closeView:function(){this.$el.hasClass("ui-dialog-content")?this.$el.dialog("close"):i.prototype.closeView.call(this)},onClose:function(){var e=this;require(["common/aif/Manager"],(function(t){t.removeView(e)}))}}),docs.aif.views.Dialog})),define("docs/aif/template/AifSidebarPane.template",["underscore"],(function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='\t\t<div class="aif-sidebar-pane-content" aria-label="'+(null==(__t=appName)?"":_.escape(__t))+'">\t\t</div>';return __p}})),define("common/aif/view/SidebarPane",["jquery","underscore","common/aif/view/View","docs/aif/template/AifSidebarPane.template","common/aif/Constants"],(function(e,t,i,n){"use strict";return docs.aif.views.SidebarPane=i.extend({initialize:function(e){i.prototype.initialize.call(this,e)},renderClient:function(t){this.$el.html(n({appName:t})),this.$el.addClass("sidebar-pane sidebar-aif-pane");var i=e(".aif-sidebar-pane-content",this.$el);this.renderIFrame(i),i.css("height","100%")},closeView:function(){this.action.getViewType()===docs.aif.Constants.ViewType.CLIENT?this.$el.hide():i.prototype.closeView.call(this)}}),docs.aif.views.SidebarPane})),define("common/aif/view/Direct",["jquery","underscore","common/aif/view/View"],(function(e,t,i){"use strict";return docs.aif.views.Direct=i.extend({initialize:function(e){i.prototype.initialize.call(this,e)},renderClient:function(){this.action.executeDirectInvoke({items:this.items,async:!0,success:this.successCallback,failure:this.failureCallback})}}),docs.aif.views.Direct})),define("common/aif/Manager",["require","jquery","underscore","backbone","core/util/Globals","core/util/Session","core/util/Service","core/util/Jsonify","core/view/MessageBar","common/aif/Constants","common/aif/Utils","common/aif/model/Applications","common/aif/view/Dialog","common/aif/view/SidebarPane","common/aif/view/Direct","core/util/FeatureFlags"],(function(require,e,t,i,docs,n,s,o,a,r,l,d,c,u,h){"use strict";var p=docs.common.Globals;return docs.aif.Manager={populate:function(){if(!(p.isPublicUser||p.isAppLinkUser||p.isGuestWithHybLink||docs.common.EmbedApi.options.v1.hide_aif)){var t=this,i=e.Deferred();return require(["docs/aif/model/EndPoints"],(function(n){t.reset(),t.isEnabled()?(t.config=new n({viewManager:t}),t.config.fetch({add:!0,viewManager:t,error:function(e,t,i){t.errorHandled||(t.errorHandled=!0,new a({messageText:docs.i18n.t("ERROR_CONFIG_LOAD_FAILED"),messageType:"error"}))}}).always((function(){window.addEventListener("message",e.proxy(t.handleMessage,t),!1),i.resolve(t.config)}))):i.resolve(t.config)})),i.promise()}},handleMessage:function(e){var i=e.data||e.originalEvent.data;if(t.isString(i.action)){var n=t.find(this.currentViews,(function(e){return i.sender===e.getWindowName()}));if(n)switch(i.action.toUpperCase()){case r.MessageType.LOADED:case r.MessageType.RESIZED:break;case r.MessageType.CLOSED:this.removeView(n)}}},hasSidebarActions:function(e){var i=this.getActions(r.TriggerType.SELECT,e);return!t.isEmpty(i)},getSidebarActions:function(e){return this.getActions(r.TriggerType.SELECT,e)},getActions:function(e,i){var n=l.getItemsFromSelection(i),s=[];return this.isEnabled()&&!t.isEmpty(this.config)&&t.each(this.config.models,(function(t){var i=t.getActions(e,n);s=s.concat(i)})),s},hasEnabledEndPoints:function(){return!(!this.isEnabled()||t.isEmpty(this.config))&&t.some(this.config.models,(function(e){return e.isEnabled()}))},addView:function(e){e&&this.currentViews.push(e)},removeView:function(e){if(e){var t=this.currentViews.indexOf(e);t>=0&&(this.currentViews.splice(t,1),e.closeView())}},removeViews:function(e){var i=t.filter(this.currentViews,(function(i){return t.isUndefined(e)||i.action.getTrigger()===e}),this);i&&i.length>0&&t.each(i,(function(e){this.removeView(e)}),this)},createView:function(e,t){var i,n=l.getItemsFromSelection(t),s=e.getType();if(r.ActionType.DIRECT===s)i=new h({action:e,items:n});else if(r.ActionType.UI===s){switch(e.getTrigger()){case r.TriggerType.SELECT:i=new u({action:e,items:n});break;case r.TriggerType.MENU:case r.TriggerType.TENANT_CONFIG:case r.TriggerType.USER_CONFIG:case r.TriggerType.INFO:i=new c({action:e,items:n})}}return this.addView(i),i},getConfig:function(){var i;if(t.isUndefined(this.config))i=this.populate();else{var n=e.Deferred();i=n.promise(),n.resolve(this.config)}return i},isEnabled:function(){return this.enabled},reset:function(){delete this.config,this.enabled="true"!==n.aifDisabled(),this.currentViews=[]},getPCSApplication:function(){if(!p.isPublicUser&&!p.isAppLinkUser)return t.isUndefined(this.aifApps)&&(this.aifApps=new d),this.aifApps.where({name:"PCS"})[0]},getEloquaApplication:function(){if(!p.isPublicUser&&!p.isAppLinkUser)return t.isUndefined(this.aifApps)&&(this.aifApps=new d),this.aifApps.where({name:"ELOQUA"})[0]},getVBCSApplication:function(){if(!p.isPublicUser&&!p.isAppLinkUser)return t.isUndefined(this.aifApps)&&(this.aifApps=new d),this.aifApps.where({name:"VBCS"})[0]},getOPAApplication:function(){if(!p.isPublicUser&&!p.isAppLinkUser)return t.isUndefined(this.aifApps)&&(this.aifApps=new d),this.aifApps.where({name:"OPA"})[0]},getCobrowseApplication:function(){if(!p.isPublicUser&&!p.isAppLinkUser)return t.isUndefined(this.aifApps)&&(this.aifApps=new d),this.aifApps.where({name:"COBROWSE"})[0]},getProcessList:function(){if(t.isUndefined(this.aifProcesses)){var i=s.formatServiceUrl("AF_GET_PCS_PROCESSES_LIST"),n=this;e.ajax(i,{type:"GET",async:!1,success:function(e,t,i){"0"===e.LocalData.StatusCode?(n.aifProcesses=o.parse_AF_GET_PCS_PROCESSES_LIST(e),docs.common.Logger("AIF").info("Successfully get list of process definitions for action: "+n.actionGUID+" on folder "+n.folderGUID)):docs.common.Logger("AIF").info("Failed to get ist of process definitions for action: "+n.actionGUID+" on folder "+n.folderGUID+". Status: "+t)},error:function(e,t,i){e.errorHandled=!0,docs.common.Logger("AIF").info("Failed to get ist of process definitions for action: "+n.actionGUID+" on folder "+n.folderGUID+". Error: "+i.errorMsg)}}),t.isUndefined(this.aifProcesses)&&(this.aifProcesses={},new docs.views.MessageBar({messageText:docs.i18n.t("PROCESS_LIST_FAILED"),messageType:"error"}))}return this.aifProcesses}},docs.aif.Manager})),define("common/container/model/ContextActionsConfig",["jquery","underscore","core/util/Globals","core/util/Browser","common/util/O365Edit","common/container/config","common/docs/VirusScanUtils"],(function(e,t,docs,i,n,s,o){"use strict";function a(e){return function(e){var t=e.folderItem.get("size");return!(0===t||"0"===t)}(e)&&function(e){return l(e,o.Action.ACTION_MS_VIEW)}(e)}function r(){return n.isEnabled({checkUser:!0})}function l(e,t){var i=e.folderItem;return o.isActionAllowed(i,t)}function d(e){return l(e,o.Action.ACTION_COPY)}function c(e){return l(e,o.Action.ACTION_MS_EDIT)}function u(e){return l(e,o.Action.ACTION_DOWNLOAD)}function h(e){return l(e,o.Action.ACTION_SHARE_LINK)}function p(e){return l(e,o.Action.ACTION_ADD_TO_ASSETS)}function _(e){if("zip"===e.folderItem.get("extension"))return!0}return docs.container.ActionsConfig={actionToIconClassMap:{action_open:"oj-ux-ico-folder-open",action_open_site:"oj-ux-ico-folder-open",action_openfolder:"oj-ux-ico-folder-open",action_archive_open:"oj-ux-ico-folder-open",action_view:"oj-ux-ico-view",action_view_request:"oj-ux-ico-view",action_preview:"oj-ux-ico-view",action_edit:"oj-ux-ico-edit-box",action_edit_menu:"oj-ux-ico-edit-box",action_webedit:"oj-ux-ico-edit-box",action_video_edit:"oj-ux-ico-edit-box",action_rendition_edit:"oj-ux-ico-edit-box",action_desygner_edit:"oj-ux-ico-edit-box",action_video_convert:"oj-ux-ico-video-convert",action_favorite:"oj-ux-ico-heart",action_unfavorite:"oj-ux-ico-heart-s",action_upload:"oj-ux-ico-upload",action_upload_version:"oj-ux-ico-upload",action_upload_to_folder:"oj-ux-ico-upload",action_download:"oj-ux-ico-download",action_bulk_download:"oj-ux-ico-download",action_asset_copy:"oj-ux-ico-rearrange",action_copy:"oj-ux-ico-copy",action_duplicate:"oj-ux-ico-copy",action_asset_sync:"oj-ux-ico-sync",action_move:"oj-ux-ico-move",action_links:"oj-ux-ico-share",action_reserve:"oj-ux-ico-lock",action_free:"oj-ux-ico-lock-open",action_members:"oj-ux-ico-contact-group",action_changestatus_online:"oj-ux-ico-power-off",action_changestatus_offline:"oj-ux-ico-power-on",action_create_template:"oj-ux-ico-page-template",action_add_languages:"oj-ux-ico-translatable",action_export_translation:"oj-ux-ico-translatable",action_add_to_assets:"oj-ux-ico-add-to-assets",action_createsite:"oj-ux-ico-create-site",action_details:"oj-ux-ico-file-view-details",action_export:"oj-ux-ico-export",action_submit:"oj-ux-ico-send",action_trash:"oj-ux-ico-trash",action_gov_trash:"oj-ux-ico-trash",action_archive_trash:"oj-ux-ico-trash",action_rename:"oj-ux-ico-rename",action_archive:"oj-ux-ico-archive",action_unzip:"oj-ux-ico-file-unzip"},iconToolbarSupportedTypes:["digitalasset","contentitem","asset","bothasset","folder","file","both","site","siteplan","gov_site","experience","theme","app","template","gov_template","recommendation","site_request","exportjob","importjob","sitepagetemplate"],iconToolbarExcludedScopes:["MediaPickerFPD","referencePicker","addToRepository"],getIconFontClassForAction:function(e,t){return t&&this.iconToolbarSupportedTypes.indexOf(t)>-1&&this.actionToIconClassMap[e]||!1},isIconToolbarScopeSupported:function(e,t){return e&&!(e.endsWith("FPD")||this.iconToolbarExcludedScopes.indexOf(e)>-1)},getFilteredActions:function(n){docs.events.trigger("initActionConfig");var o=e.extend(!0,{},s.itemActions),a=n&&n.urlParams?n.urlParams:{hide:{}};return(a.hide_actions||a.noopen)&&(o.site=t(s.itemActions.site).reject((function(e){return a.hide_actions&&"action_open_site"!==e.id||a.noopen&&"action_open_site"===e.id})),o.gov_site=o.site),(a.hide_actions||a.noopen)&&(o.template=t(s.itemActions.template).reject((function(e){return a.hide_actions&&"action_open"!==e.id||a.noopen&&"action_open"===e.id}))),(a.hide_actions||a.noview||a.hide_upload||a.hide_props||a.hide_dnload||i.isIOS||i.isAndroid)&&(o.damasset=t(s.itemActions.damasset).reject((function(e){return a.hide_actions&&"action_open"!==e.id||a.noview&&"action_view"===e.id||a.hide_props&&"action_properties"===e.id||a.hide_upload&&"action_upload_version"===e.id||(a.hide_dnload||i.isIOS||i.isAndroid)&&"action_download"===e.id}))),(a.hide_actions||a.noview||a.noopen||a.hide_delete)&&(o.contentasset=t(s.itemActions.contentasset).reject((function(e){return a.hide_actions&&"action_open"!==e.id||a.noopen&&"action_edit"===e.id||a.noview&&"action_view"===e.id||a.hide_delete&&"action_trash"===e.id}))),(a.hide_actions||a.noopen||a.hide_delete)&&(o.theme=t(s.itemActions.theme).reject((function(e){return a.hide_actions&&"action_open"!==e.id||a.noopen&&"action_open"===e.id||a.hide_delete&&"action_trash"===e.id}))),(a.hide_actions||a.noopen)&&(o.app=t(s.itemActions.app).reject((function(e){return a.hide_actions&&"action_open"!==e.id||a.noopen&&"action_open"===e.id}))),(a.hide_actions||a.hide_delete||a.hide_rename||a.hide_share||a.hide_props)&&(o.collection=t(s.itemActions.collection).reject((function(e){return a.hide_actions||a.hide_share&&"action_share"===e.id||a.hide_props&&"action_properties"===e.id||a.hide_rename&&"action_rename"===e.id||a.hide_delete&&"action_trash"===e.id}))),t.each(docs.container.Config.actionFilters,(function(e){t.extend(o,e.call(this,n))})),o},_initActionsConfig:function(){s.itemActions.folder=[{id:"action_open",label:docs.i18n.t("ACTION_OPEN"),tooltip:docs.i18n.t("ACTION_OPEN_TT"),multi:!1,filter:"folderPreview",pub:!0,applink:!0,optionsfilter:"actions.open.folder",fontIcon:!0},{id:"action_move",label:docs.i18n.t("ACTION_MOVE"),tooltip:docs.i18n.t("ACTION_MOVE_TT"),multi:!0,filter:"folderDelete",pub:!0,applink:!0,embed:465,optionsfilter:"actions.move",fontIcon:!0},{id:"action_copy",label:docs.i18n.t("ACTION_COPY"),tooltip:docs.i18n.t("ACTION_COPY_TT"),multi:!0,filter:"folderRead",pub:!0,pubFilter:"folderDelete",applink:!0,applinkFilter:"folderDelete",embed:465,optionsfilter:"actions.copy",fontIcon:!0},{id:"action_rename",label:docs.i18n.t("ACTION_RENAME"),tooltip:docs.i18n.t("ACTION_RENAME_TT"),multi:!1,filter:"folderUpdate",pub:!1,applink:!0,optionsfilter:"actions.rename",fontIcon:!0},{separator:!0,more:!0,filter:"folderPreview",pub:!0,applink:!0},{id:"action_bulk_download",label:docs.i18n.t("ACTION_DOWNLOAD"),tooltip:docs.i18n.t("ACTION_BULK_DOWNLOAD_TT"),multi:!0,filter:"folderRead",pub:!0,applink:!0,propfilter:"!application^=framework.site",optionsfilter:"actions.download",fontIcon:!0},{id:"action_links",more:!0,label:docs.i18n.t("ACTION_LINKS"),tooltip:docs.i18n.t("ACTION_LINKS_FOLDER_TOOLTIP"),multi:!1,filter:"directShareRead||linkShareRead",pub:!1,applink:!0,applinkFilter:"linkShareRead",propfilter:"!application^=framework.site",optionsfilter:"actions.shareLink",fontIcon:!0},{id:"action_favorite",label:docs.i18n.t("ACTION_ADD_FAVORITE"),tooltip:docs.i18n.t("ACTION_ADD_FAVORITE_TT"),multi:!1,pub:!1,applink:!1,propfilter:["favoritesEnabled","!favorite"],optionsfilter:"actions.favorite",fontIcon:!0},{id:"action_unfavorite",label:docs.i18n.t("ACTION_DELETE_FAVORITE"),tooltip:docs.i18n.t("ACTION_DELETE_FAVORITE_TT"),multi:!1,pub:!1,applink:!1,propfilter:["favoritesEnabled","favorite"],optionsfilter:"actions.favorite",fontIcon:!0},{separator:!0,more:!0,filter:"folderPreview",pub:!0,applink:!0},{id:"action_upload_to_folder",uploader:!0,more:!0,label:docs.i18n.t("ACTION_UPLOAD_TO_FOLDER"),tooltip:docs.i18n.t("ACTION_UPLOAD_TO_FOLDER_TT"),multi:!1,filter:"folderWrite",pub:!0,applink:!0,optionsfilter:"actions.uploadToFolder",fontIcon:!0},{separator:!0,more:!0,filter:"folderPreview",pub:!0,applink:!0},{id:"action_sidebar_menu",label:docs.i18n.t("ACTION_SIDEBAR_MENU"),tooltip:docs.i18n.t("ACTION_SIDEBAR_MENU_TT"),isMenu:!0,multi:!0,keepMenuWithOneItem:!0,children:["action_members","action_tag","action_properties","action_conversation"]},{id:"action_members",more:!0,label:docs.i18n.t("ACTION_MEMBERS"),tooltip:docs.i18n.t("ACTION_MEMBERS_TOOLTIP"),multi:!1,filter:"directShareRead",pub:!1,applink:!0,applinkFilter:"directShareWrite",propfilter:"!application^=framework.site",optionsfilter:"actions.members"},{id:"action_conversation",more:!0,label:docs.i18n.t("ACTION_CONVERSATION"),tooltip:docs.i18n.t("ACTION_CONVERSATION_TT"),multi:!0,filter:"folderPreview",pub:!0,applink:!1,embed:585,propfilter:"!application^=framework.site",optionsfilter:"sidebar.conversation"},{id:"action_properties",more:!0,label:docs.i18n.t("ACTION_PROPERTIES"),tooltip:docs.i18n.t("ACTION_PROPERTIES_TT"),multi:!0,filter:"folderPreview",pub:!1,applink:!0,embed:685,optionsfilter:"sidebar.properties"},{id:"action_tag",label:docs.i18n.t("METADATA_ACTION_TAG"),tooltip:docs.i18n.t("METADATA_ACTION_TAG_TT"),multi:!0,filter:"folderUpdate",pub:!1,applink:!1,embed:465,propfilter:"!application^=framework.site",optionsfilter:"sidebar.tagsAndMetadata"},{separator:!0,more:!0,filter:"folderPreview",pub:!0,applink:!0},{id:"action_trash",label:docs.i18n.t("ACTION_TRASH"),tooltip:docs.i18n.t("ACTION_TRASH_TT"),multi:!0,filter:"folderDelete",pub:!0,applink:!0,optionsfilter:"actions.delete",fontIcon:!0},{id:"action_aif",placeholder:!0,more:!0,pub:!1,applink:!1,multi:!0},{id:"create_menu",label:docs.i18n.t("MENU_CREATE"),tooltip:docs.i18n.t("MENU_CREATE_TT"),aria:docs.i18n.t("MENU_CREATE_LABEL"),multi:!1,filter:"folderWrite",pub:!0,applink:!1,children:["action_menu_new_folder","action_o365_new_word","action_o365_new_ppt","action_o365_new_excel"]},{id:"action_menu_new_folder",label:docs.i18n.t("MENU_CREATE_FOLDER"),tooltip:docs.i18n.t("GENERAL_CREATE_FOLDER_TOOLTIP"),multi:!1,filter:"folderWrite",pub:!0,applink:!1,optionsfilter:"header.create.folder"},{id:"action_o365_new_word",label:docs.i18n.t("MENU_CREATE_O365_WORD"),tooltip:docs.i18n.t("MENU_CREATE_O365_WORD_TT"),multi:!1,filter:"folderWrite",pub:!0,applink:!1,optionsfilter:"header.create.o365",funcfilter:r},{id:"action_o365_new_ppt",label:docs.i18n.t("MENU_CREATE_O365_PPT"),tooltip:docs.i18n.t("MENU_CREATE_O365_PPT_TT"),multi:!1,filter:"folderWrite",pub:!0,applink:!1,optionsfilter:"header.create.o365",funcfilter:r},{id:"action_o365_new_excel",label:docs.i18n.t("MENU_CREATE_O365_EXCEL"),tooltip:docs.i18n.t("MENU_CREATE_O365_EXCEL_TT"),multi:!1,filter:"folderWrite",pub:!0,applink:!1,optionsfilter:"header.create.o365",funcfilter:r}],s.itemActions.file=[{id:"view_menu",label:docs.i18n.t("ACTION_VIEW"),tooltip:docs.i18n.t("MENU_VIEW_TT"),aria:docs.i18n.t("MENU_VIEW_LABEL"),isMenu:!0,multi:!1,filter:"filePreview",pub:!0,applink:!0,children:["action_o365_view","action_view"],must_children:["action_o365_view"]},{id:"action_o365_view",multi:!1,filter:"fileRead",pub:!0,applink:!0,funcfilter:a,optionsfilter:"actions.open.o365"},{id:"action_view",orig_label:docs.i18n.t("ACTION_VIEW"),orig_tooltip:docs.i18n.t("ACTION_VIEW_TT"),multi:!1,filter:"filePreview",pub:!0,applink:!0,optionsfilter:"actions.open.file",fontIcon:!0},{id:"edit_menu",label:docs.i18n.t("ACTION_EDIT"),tooltip:docs.i18n.t("MENU_EDIT_TT"),aria:docs.i18n.t("MENU_EDIT_LABEL"),isMenu:!0,multi:!1,filter:"fileUpdate",pub:!0,applink:!0,children:["action_o365_edit","action_webedit"],must_children:["action_o365_edit","action_webedit"]},{id:"action_o365_edit",multi:!1,filter:"fileUpdate",pub:!0,applink:!1,optionsfilter:"actions.edit.o365",funcfilter:c},{id:"action_webedit",orig_label:docs.i18n.t("ACTION_EDIT"),orig_tooltip:docs.i18n.t("ACTION_EDIT_TT"),multi:!1,filter:"fileUpdate",pub:!1,applink:!1,optionsfilter:"actions.edit.web",funcfilter:c,requiresNonExtUser:!0,fontIcon:!0},{id:"action_move",label:docs.i18n.t("ACTION_MOVE"),tooltip:docs.i18n.t("ACTION_MOVE_TT"),multi:!0,filter:"fileUpdate",pub:!0,applink:!0,embed:465,optionsfilter:"actions.move",fontIcon:!0},{id:"action_copy",label:docs.i18n.t("ACTION_COPY"),tooltip:docs.i18n.t("ACTION_COPY_TT"),multi:!0,filter:"fileRead",pub:!0,pubFilter:"fileDelete",applink:!0,applinkFilter:"fileDelete",embed:465,optionsfilter:"actions.copy",funcfilter:d,fontIcon:!0},{id:"action_rename",label:docs.i18n.t("ACTION_RENAME"),tooltip:docs.i18n.t("ACTION_RENAME_TT"),multi:!1,filter:"fileUpdate",pub:!0,applink:!0,optionsfilter:"actions.rename",fontIcon:!0},{separator:!0,more:!0,filter:"filePreview",pub:!0,applink:!0},{id:"action_unzip",label:docs.i18n.t("ACTION_UNZIP"),tooltip:docs.i18n.t("ACTION_UNZIP_TT"),multi:!1,pub:!0,applink:!0,funcfilter:_,fontIcon:!0},{separator:!0,more:!0,funcfilter:_,pub:!0,applink:!0},{id:"action_download",label:docs.i18n.t("ACTION_DOWNLOAD"),tooltip:docs.i18n.t("ACTION_DOWNLOAD_TT"),multi:!1,filter:"fileRead",pub:!0,applink:!0,optionsfilter:"actions.download",funcfilter:u,fontIcon:!0},{id:"action_bulk_download",label:docs.i18n.t("ACTION_DOWNLOAD"),tooltip:docs.i18n.t("ACTION_BULK_DOWNLOAD_TT"),multi:"only",filter:"fileRead",pub:!0,applink:!0,optionsfilter:"actions.download",propfilter:"!application^=framework.site",funcfilter:u,fontIcon:!0},{id:"action_links",more:!0,label:docs.i18n.t("ACTION_LINKS"),tooltip:docs.i18n.t("ACTION_LINKS_FILE_TOOLTIP"),multi:!1,filter:"filePreview",pub:!1,applink:!0,applinkFilter:"linkShareRead",propfilter:"!application^=framework.site",optionsfilter:"actions.shareLink",funcfilter:h,fontIcon:!0},{id:"action_favorite",label:docs.i18n.t("ACTION_ADD_FAVORITE"),tooltip:docs.i18n.t("ACTION_ADD_FAVORITE_TT"),multi:!1,pub:!1,applink:!1,propfilter:["favoritesEnabled","!favorite"],optionsfilter:"actions.favorite",fontIcon:!0},{id:"action_unfavorite",label:docs.i18n.t("ACTION_DELETE_FAVORITE"),tooltip:docs.i18n.t("ACTION_DELETE_FAVORITE_TT"),multi:!1,pub:!1,applink:!1,propfilter:["favoritesEnabled","favorite"],optionsfilter:"actions.favorite",fontIcon:!0},{id:"action_upload_version",uploader:!0,more:!0,label:docs.i18n.t("ACTION_UPLOAD_NEW_VERSION"),tooltip:docs.i18n.t("ACTION_UPLOAD_NEW_VERSION_TT"),multi:!1,filter:"fileUpdate",pub:!0,applink:!0,optionsfilter:"actions.uploadNewVersion",fontIcon:!0},{separator:!0,more:!0,filter:"filePreview",pub:!0,applink:!0},{id:"action_reserve",label:docs.i18n.t("ACTION_RESERVE"),tooltip:docs.i18n.t("ACTION_RESERVE_TT"),multi:!1,filter:"fileUpdate",pub:!1,applink:!1,propfilter:"!reservedBy",optionsfilter:"actions.lock",fontIcon:!0},{id:"action_free",label:docs.i18n.t("ACTION_FREE"),tooltip:docs.i18n.t("ACTION_FREE_TT"),multi:!1,filter:"fileUpdate",pub:!1,applink:!1,propfilter:"reservedBy",optionsfilter:"actions.lock",fontIcon:!0},{separator:!0,more:!0,filter:"filePreview",pub:!0,applink:!0},{id:"action_add_to_assets",label:docs.i18n.t("ACTION_ADD_TO_ASSETS"),tooltip:docs.i18n.t("ACTION_ADD_TO_ASSETS_TT"),multi:!0,requiresEntUser:!0,filter:"fileRead",pub:!0,applink:!0,embed:465,optionsfilter:"actions.addToAssets",funcfilter:p,fontIcon:!0},{separator:!0,more:!0,filter:"filePreview",pub:!0,applink:!0},{id:"action_sidebar_menu",label:docs.i18n.t("ACTION_SIDEBAR_MENU"),tooltip:docs.i18n.t("ACTION_SIDEBAR_MENU_TT"),isMenu:!0,multi:!0,keepMenuWithOneItem:!0,children:["action_tag","action_properties","action_conversation"]},{id:"action_conversation",more:!0,label:docs.i18n.t("ACTION_CONVERSATION"),tooltip:docs.i18n.t("ACTION_CONVERSATION_TT"),multi:!0,filter:"filePreview",pub:!0,applink:!1,embed:585,propfilter:"!application^=framework.site",optionsfilter:"sidebar.conversation"},{id:"action_properties",more:!0,label:docs.i18n.t("ACTION_PROPERTIES"),tooltip:docs.i18n.t("ACTION_PROPERTIES_TT"),multi:!0,filter:"filePreview",pub:!1,applink:!0,embed:685,optionsfilter:"sidebar.properties"},{id:"action_tag",label:docs.i18n.t("METADATA_ACTION_TAG"),tooltip:docs.i18n.t("METADATA_ACTION_TAG_TT"),multi:!0,filter:"fileUpdate",pub:!1,applink:!1,embed:465,propfilter:"!application^=framework.site",optionsfilter:"sidebar.tagsAndMetadata"},{separator:!0,more:!0,filter:"filePreview",pub:!0,applink:!0},{id:"action_trash",label:docs.i18n.t("ACTION_TRASH"),tooltip:docs.i18n.t("ACTION_TRASH_TT"),multi:!0,filter:"fileDelete",pub:!0,applink:!0,optionsfilter:"actions.delete",fontIcon:!0},{id:"action_aif",placeholder:!0,more:!0,pub:!1,applink:!1,multi:!0}],s.itemActions.recommendation=[{id:"action_view",orig_label:docs.i18n.t("ACTION_VIEW"),orig_tooltip:docs.i18n.t("ACTION_VIEW_REC_TT"),multi:!1,containerfilter:"viewer",fontIcon:!0},{id:"action_edit",label:docs.i18n.t("ACTION_EDIT"),tooltip:docs.i18n.t("ACTION_EDIT_REC_TT"),multi:!1,containerfilter:"contributor",propfilter:["version={versionInfo.data[0].latestVersion}"],fontIcon:!0},{separator:!0},{id:"action_workflow_menu",label:docs.i18n.t("ACTION_WORKFLOW_MENU"),tooltip:docs.i18n.t("ACTION_WORKFLOW_MENU_TT"),multi:!0,isMenu:!0,keepMenuWithOneItem:!0,children:["action_submit","action_approve","action_reject"]},{id:"action_submit",label:docs.i18n.t("ACTION_SUBMIT_REVIEW"),tooltip:docs.i18n.t("RECOMMENDATION_ACTION_SUBMIT_REVIEW_TT"),multi:!1,containerfilter:"viewer",propfilter:["version={versionInfo.data[0].latestVersion}","!version={versionInfo.data[0].publishedVersion}","draft&={status}"]},{id:"action_approve",label:docs.i18n.t("ACTION_APPROVE"),tooltip:docs.i18n.t("RECOMMENDATION_ACTION_APPROVE_TT"),multi:!1,containerfilter:"manager",propfilter:["version={versionInfo.data[0].latestVersion}","!version={versionInfo.data[0].publishedVersion}","inReview,rejected&={status}"]},{id:"action_reject",label:docs.i18n.t("ACTION_REJECT"),tooltip:docs.i18n.t("RECOMMENDATION_ACTION_REJECT_TT"),multi:!1,containerfilter:"manager",propfilter:["version={versionInfo.data[0].latestVersion}","!version={versionInfo.data[0].publishedVersion}","inReview,approved&={status}"]},{id:"action_publish",label:docs.i18n.t("ACTION_PUBLISH"),tooltip:docs.i18n.t("ACTION_PUBLISH_REC_TT"),multi:!1,containerfilter:"viewer",propfilter:["version={versionInfo.data[0].latestVersion}","draft,approved,published&={status}"]},{id:"action_unpublish",label:docs.i18n.t("ACTION_UNPUBLISH"),tooltip:docs.i18n.t("ACTION_UNPUBLISH_REC_TT"),multi:!1,containerfilter:"viewer",propfilter:["version={versionInfo.data[0].publishedVersion}","isPublished","published&={status}"]},{separator:!0},{id:"action_trash",label:docs.i18n.t("ACTION_TRASH"),tooltip:docs.i18n.t("ACTION_DELETE_PERM_TT"),multi:!0,containerfilter:"contributor",propfilter:"!versionInfo.data[0].publishedVersion>0",fontIcon:!0}],s.itemActions.trash=[{id:"action_restore",label:docs.i18n.t("ACTION_RESTORE"),tooltip:docs.i18n.t("ACTION_RESTORE_TT"),multi:!0},{id:"action_delete",label:docs.i18n.t("ACTION_DELETE_PERM"),tooltip:docs.i18n.t("ACTION_DELETE_PERM_TT"),multi:!0}],s.itemActions.trash_others=[{id:"action_restore",label:docs.i18n.t("ACTION_RESTORE"),tooltip:docs.i18n.t("ACTION_RESTORE_TT"),multi:!0},{id:"action_delete",label:docs.i18n.t("ACTION_HIDE_FROM_TRASH"),tooltip:docs.i18n.t("ACTION_HIDE_FROM_TRASH_TT"),multi:!0}],s.itemActions.none=[{id:"action_select_all",label:docs.i18n.t("ACTION_SELECT_ALL"),tooltip:docs.i18n.t("ACTION_SELECT_ALL_TT"),optionsfilter:function(e){return"multiple"===e.select}}],s.itemActions.both=[{id:"view_menu",label:docs.i18n.t("ACTION_VIEW"),tooltip:docs.i18n.t("MENU_VIEW_TT"),aria:docs.i18n.t("MENU_VIEW_LABEL"),multi:!1,filter:"filePreview",pub:!0,applink:!0,children:["action_o365_view","action_view"],must_children:["action_o365_view"],fontIcon:!0},{id:"action_move",label:docs.i18n.t("ACTION_MOVE"),tooltip:docs.i18n.t("ACTION_MOVE_TT"),filefilter:"fileUpdate",folderfilter:"folderUpdate",pub:!0,applink:!0,embed:465,optionsfilter:"actions.move",fontIcon:!0},{id:"action_copy",label:docs.i18n.t("ACTION_COPY"),tooltip:docs.i18n.t("ACTION_COPY_TT"),filefilter:"fileRead",folderfilter:"folderRead",pub:!1,pubFilter:"folderDelete",applink:!0,applinkFilter:"folderDelete",embed:465,optionsfilter:"actions.copy",fontIcon:!0},{separator:!0,more:!0,filefilter:"fileDelete",folderfilter:"folderDelete",pub:!0,applink:!0},{id:"action_bulk_download",label:docs.i18n.t("ACTION_DOWNLOAD"),tooltip:docs.i18n.t("ACTION_BULK_DOWNLOAD_TT"),multi:"only",fileFilter:"fileRead",folderFilter:"folderRead",pub:!0,applink:!0,optionsfilter:"actions.download",propfilter:"!application^=framework.site",fontIcon:!0},{separator:!0,more:!0,filefilter:"fileDelete",folderfilter:"folderDelete",pub:!0,applink:!0},{id:"action_sidebar_menu",label:docs.i18n.t("ACTION_SIDEBAR_MENU"),tooltip:docs.i18n.t("ACTION_SIDEBAR_MENU_TT"),isMenu:!0,multi:!0,keepMenuWithOneItem:!0,children:["action_tag","action_properties","action_conversation"]},{separator:!0,more:!0,filefilter:"fileDelete",folderfilter:"folderDelete",pub:!0,applink:!0},{id:"action_conversation",more:!0,label:docs.i18n.t("ACTION_CONVERSATION"),tooltip:docs.i18n.t("ACTION_CONVERSATION_TT"),multi:!0,filefilter:"filePreview",folderfilter:"folderPreview",pub:!0,applink:!1,embed:585,optionsfilter:"sidebar.conversation"},{id:"action_properties",more:!0,label:docs.i18n.t("ACTION_PROPERTIES"),tooltip:docs.i18n.t("ACTION_PROPERTIES_TT"),multi:!0,filefilter:"filePreview",folderfilter:"folderPreview",pub:!1,applink:!0,embed:685,optionsfilter:"sidebar.properties"},{id:"action_tag",label:docs.i18n.t("METADATA_ACTION_TAG"),tooltip:docs.i18n.t("METADATA_ACTION_TAG_TT"),filefilter:"fileUpdate",folderfilter:"folderUpdate",pub:!1,applink:!1,embed:465,optionsfilter:"sidebar.tagsAndMetadata"},{id:"action_trash",label:docs.i18n.t("ACTION_TRASH"),tooltip:docs.i18n.t("ACTION_TRASH_TT"),filefilter:"fileDelete",folderfilter:"folderDelete",pub:!0,applink:!0,optionsfilter:"actions.delete",fontIcon:!0},{id:"action_aif",placeholder:!0,more:!0,pub:!1,applink:!1,multi:!0}],docs.common.checkFeatureFlag("SiteExport")?s.itemActions.gov_site=s.itemActions.site=[{id:"action_open_site",label:docs.i18n.t("ACTION_OPEN"),tooltip:docs.i18n.t("ACTION_OPEN_SITE_TT"),multi:!1,filter:"folderRead",pub:!1,applink:!0,fontIcon:!0},{id:"action_view",label:docs.i18n.t("ACTION_VIEW"),tooltip:docs.i18n.t("ACTION_VIEW_SITE_TT"),multi:!1,filter:"folderRead",pub:!1,applink:!0,fontIcon:!0},{id:"action_copy",label:docs.i18n.t("ACTION_COPY"),tooltip:docs.i18n.t("ACTION_COPY_SITE_TT"),multi:!0,filter:"folderRead",filter2:"createSites",siteSecurityFilter:!0,pub:!0,pubFilter:"folderDelete",applink:!0,applinkFilter:"folderDelete",embed:465,removeWhenSitesDisabled:!0,fontIcon:!0},{id:"action_rename",label:docs.i18n.t("ACTION_RENAME"),tooltip:docs.i18n.t("ACTION_RENAME_TT"),multi:!1,filter:"folderUpdate",pub:!1,applink:!0,propfilter:"online=false",fontIcon:!0},{separator:!0,more:!0,filter:"folderPreview",pub:!0,applink:!0},{id:"action_publish",label:docs.i18n.t("ACTION_PUBLISH"),tooltip:docs.i18n.t("ACTION_PUBLISH_SITE_TT"),multi:!1,filter:"publish",pub:!1,applink:!0,propfilter:"publishStatus=unpublished",removeWhenSitesDisabled:!0},{id:"action_republish",label:docs.i18n.t("ACTION_REPUBLISH"),tooltip:docs.i18n.t("ACTION_REPUBLISH_SITE_TT"),multi:!1,filter:"publish",pub:!1,applink:!0,propfilter:"publishStatus=published",orPropfilter2:"publishStatus=draft",removeWhenSitesDisabled:!0},{id:"action_unpublish",label:docs.i18n.t("ACTION_UNPUBLISH"),tooltip:docs.i18n.t("ACTION_UNPUBLISH_SITE_TT"),multi:!1,filter:"publish",pub:!1,applink:!0,propfilter:["publishStatus=published","online=false"],orPropfilter2:"publishStatus=draft",removeWhenSitesDisabled:!0},{id:"action_compile",label:docs.i18n.t("ACTION_COMPILE"),tooltip:docs.i18n.t("ACTION_COMPILE_TT"),multi:!1,filter:"publish",pub:!1,applink:!0,propfilter:["publishStatus!=unpublished","compileSite=1"],removeWhenSitesDisabled:!0},{id:"action_changestatus_online",label:docs.i18n.t("ACTION_ONLINE"),tooltip:docs.i18n.t("ACTION_ONLINE_TT"),multi:!1,filter:"publish||govSitesAdmin",pub:!1,applink:!0,propfilter:["online=false","publishStatus!=unpublished"],removeWhenSitesDisabled:!0,fontIcon:!0},{id:"action_changestatus_offline",label:docs.i18n.t("ACTION_OFFLINE"),tooltip:docs.i18n.t("ACTION_OFFLINE_TT"),multi:!1,filter:"publish||govSitesAdmin",pub:!1,applink:!0,propfilter:"online=true",removeWhenSitesDisabled:!0,fontIcon:!0},{separator:!0,more:!0,filter:"folderPreview",pub:!0,applink:!0},{id:"action_members",more:!0,label:docs.i18n.t("ACTION_MEMBERS"),tooltip:docs.i18n.t("ACTION_SITE_MEMBERS_TOOLTIP"),multi:!1,filter:"folderPreview",filter2:"directShareRead",pub:!1,applink:!0,embed:465},{id:"action_properties",more:!0,label:docs.i18n.t("ACTION_PROPERTIES"),tooltip:docs.i18n.t("ACTION_PROPERTIES_TT"),multi:!1,filter:"folderPreview||govSitesAdmin",pub:!1,applink:!0,embed:685},{separator:!0,more:!0,filter:"folderPreview",pub:!0,applink:!0},{id:"action_create_template",label:docs.i18n.t("ACTION_CREATE_TEMPLATE"),tooltip:docs.i18n.t("ACTION_CREATE_TEMPLATE_TT"),multi:!0,filter:"folderRead",filter2:"createTemplates",requiresDevRole:!0,pub:!0,pubFilter:"folderDelete",applink:!0,applinkFilter:"folderDelete",embed:465,removeWhenSitesDisabled:!0,fontIcon:!0},{id:"action_export",label:docs.i18n.t("SITE_ACTION_EXPORT"),tooltip:docs.i18n.t("SITE_ACTION_EXPORT_TT"),multi:!1,filter:"folderRead",pub:!1,applink:!0,embed:465,fontIcon:!0},{separator:!0,more:!0,filter:"folderPreview",pub:!0,applink:!0},{id:"action_languages_menu",label:docs.i18n.t("ACTION_LANGUAGES_MENU"),tooltip:docs.i18n.t("ACTION_LANGUAGES_MENU_TT"),isMenu:!0,multi:!0,keepMenuWithOneItem:!1,children:["action_export_translation","action_add_languages"]},{id:"action_export_translation",label:docs.i18n.t("ACTION_EXPORT_TRANSLATION"),tooltip:docs.i18n.t("ACTION_EXPORT_TRANSLATION_SITE_TT"),multi:!1,filter:"folderWrite",pub:!1,propfilter:["enterprise","defaultLanguage"]},{id:"action_add_languages",label:docs.i18n.t("ACTION_ADD_LANGUAGES"),tooltip:docs.i18n.t("ACTION_ADD_LANGUAGES_TT"),multi:!1,filter:"folderWrite",pub:!1,applink:!0,propfilter:["enterprise","!defaultLanguage"]},{separator:!0,more:!0,filter:"folderPreview",pub:!0,applink:!0},{id:"action_trash",label:docs.i18n.t("ACTION_TRASH"),tooltip:docs.i18n.t("ACTION_TRASH_SITE_TT"),multi:!0,filter:"folderDelete",pub:!0,applink:!0,propfilter:"online=false",fontIcon:!0},{id:"action_gov_trash",label:docs.i18n.t("ACTION_TRASH"),tooltip:docs.i18n.t("ACTION_TRASH_SITE_TT"),multi:!0,filter:"govSitesAdmin",pub:!0,applink:!0,propfilter:["online=false","isSitesAdmin","!roleAllowsDelete"],fontIcon:!0}]:s.itemActions.gov_site=s.itemActions.site=[{id:"action_open_site",label:docs.i18n.t("ACTION_OPEN"),tooltip:docs.i18n.t("ACTION_OPEN_SITE_TT"),multi:!1,filter:"folderRead",pub:!1,applink:!0,fontIcon:!0},{id:"action_view",label:docs.i18n.t("ACTION_VIEW"),tooltip:docs.i18n.t("ACTION_VIEW_SITE_TT"),multi:!1,filter:"folderRead",pub:!1,applink:!0,fontIcon:!0},{id:"action_copy",label:docs.i18n.t("ACTION_COPY"),tooltip:docs.i18n.t("ACTION_COPY_SITE_TT"),multi:!0,filter:"folderRead",filter2:"createSites",siteSecurityFilter:!0,pub:!0,pubFilter:"folderDelete",applink:!0,applinkFilter:"folderDelete",embed:465,removeWhenSitesDisabled:!0,fontIcon:!0},{id:"action_rename",label:docs.i18n.t("ACTION_RENAME"),tooltip:docs.i18n.t("ACTION_RENAME_TT"),multi:!1,filter:"folderUpdate",pub:!1,applink:!0,propfilter:"online=false",fontIcon:!0},{separator:!0,more:!0,filter:"folderPreview",pub:!0,applink:!0},{id:"action_publish",label:docs.i18n.t("ACTION_PUBLISH"),tooltip:docs.i18n.t("ACTION_PUBLISH_SITE_TT"),multi:!1,filter:"publish",pub:!1,applink:!0,propfilter:"publishStatus=unpublished",removeWhenSitesDisabled:!0},{id:"action_republish",label:docs.i18n.t("ACTION_REPUBLISH"),tooltip:docs.i18n.t("ACTION_REPUBLISH_SITE_TT"),multi:!1,filter:"publish",pub:!1,applink:!0,propfilter:"publishStatus=published",orPropfilter2:"publishStatus=draft",removeWhenSitesDisabled:!0},{id:"action_unpublish",label:docs.i18n.t("ACTION_UNPUBLISH"),tooltip:docs.i18n.t("ACTION_UNPUBLISH_SITE_TT"),multi:!1,filter:"publish",pub:!1,applink:!0,propfilter:["publishStatus=published","online=false"],orPropfilter2:"publishStatus=draft",removeWhenSitesDisabled:!0},{id:"action_compile",label:docs.i18n.t("ACTION_COMPILE"),tooltip:docs.i18n.t("ACTION_COMPILE_TT"),multi:!1,filter:"publish",pub:!1,applink:!0,propfilter:["publishStatus!=unpublished","compileSite=1"],removeWhenSitesDisabled:!0},{id:"action_changestatus_online",label:docs.i18n.t("ACTION_ONLINE"),tooltip:docs.i18n.t("ACTION_ONLINE_TT"),multi:!1,filter:"publish||govSitesAdmin",pub:!1,applink:!0,propfilter:["online=false","publishStatus!=unpublished"],removeWhenSitesDisabled:!0,fontIcon:!0},{id:"action_changestatus_offline",label:docs.i18n.t("ACTION_OFFLINE"),tooltip:docs.i18n.t("ACTION_OFFLINE_TT"),multi:!1,filter:"publish||govSitesAdmin",pub:!1,applink:!0,propfilter:"online=true",removeWhenSitesDisabled:!0,fontIcon:!0},{separator:!0,more:!0,filter:"folderPreview",pub:!0,applink:!0},{id:"action_members",more:!0,label:docs.i18n.t("ACTION_MEMBERS"),tooltip:docs.i18n.t("ACTION_SITE_MEMBERS_TOOLTIP"),multi:!1,filter:"folderPreview",filter2:"directShareRead",pub:!1,applink:!0,embed:465},{id:"action_properties",more:!0,label:docs.i18n.t("ACTION_PROPERTIES"),tooltip:docs.i18n.t("ACTION_PROPERTIES_TT"),multi:!1,filter:"folderPreview||govSitesAdmin",pub:!1,applink:!0,embed:685},{separator:!0,more:!0,filter:"folderPreview",pub:!0,applink:!0},{id:"action_languages_menu",label:docs.i18n.t("ACTION_LANGUAGES_MENU"),tooltip:docs.i18n.t("ACTION_LANGUAGES_MENU_TT"),isMenu:!0,multi:!0,keepMenuWithOneItem:!1,children:["action_export_translation","action_add_languages"]},{id:"action_export_translation",label:docs.i18n.t("ACTION_EXPORT_TRANSLATION"),tooltip:docs.i18n.t("ACTION_EXPORT_TRANSLATION_SITE_TT"),multi:!1,filter:"folderWrite",pub:!1,propfilter:["enterprise","defaultLanguage"]},{id:"action_add_languages",label:docs.i18n.t("ACTION_ADD_LANGUAGES"),tooltip:docs.i18n.t("ACTION_ADD_LANGUAGES_TT"),multi:!1,filter:"folderWrite",pub:!1,applink:!0,propfilter:["enterprise","!defaultLanguage"]},{id:"action_create_template",label:docs.i18n.t("ACTION_CREATE_TEMPLATE"),tooltip:docs.i18n.t("ACTION_CREATE_TEMPLATE_TT"),multi:!0,filter:"folderRead",filter2:"createTemplates",requiresDevRole:!0,pub:!0,pubFilter:"folderDelete",applink:!0,applinkFilter:"folderDelete",embed:465,removeWhenSitesDisabled:!0,fontIcon:!0},{separator:!0,more:!0,filter:"folderPreview",pub:!0,applink:!0},{id:"action_trash",label:docs.i18n.t("ACTION_TRASH"),tooltip:docs.i18n.t("ACTION_TRASH_SITE_TT"),multi:!0,filter:"folderDelete",pub:!0,applink:!0,propfilter:"online=false",fontIcon:!0},{id:"action_gov_trash",label:docs.i18n.t("ACTION_TRASH"),tooltip:docs.i18n.t("ACTION_TRASH_SITE_TT"),multi:!0,filter:"govSitesAdmin",pub:!0,applink:!0,propfilter:["online=false","isSitesAdmin","!roleAllowsDelete"],fontIcon:!0}],s.itemActions.siteplan=[{id:"action_open",label:docs.i18n.t("ACTION_OPEN"),tooltip:docs.i18n.t("ACTION_OPEN_SITE_PLAN_TT"),multi:!1,fontIcon:!0},{id:"action_duplicate",label:docs.i18n.t("CAAS_ITEM_DUPLICATE"),tooltip:docs.i18n.t("CAAS_ITEM_DUPLICATE_TT"),multi:!1,fontIcon:!0},{id:"action_rename",label:docs.i18n.t("ACTION_RENAME"),tooltip:docs.i18n.t("ACTION_RENAME_TT"),multi:!1,fontIcon:!0},{separator:!0,more:!0,applink:!0},{id:"action_publish",label:docs.i18n.t("ACTION_PUBLISH"),tooltip:docs.i18n.t("ACTION_PUBLISH_SITE_TT"),multi:!1},{id:"action_translate",label:docs.i18n.t("ACTION_TRANSLATE"),tooltip:docs.i18n.t("ACTION_TRANSLATE_SITE_PLAN_TT"),multi:!1},{separator:!0,more:!0,applink:!0},{id:"action_members",label:docs.i18n.t("ACTION_MEMBERS"),tooltip:docs.i18n.t("ACTION_SITE_PLAN_MEMBERS_TOOLTIP"),multi:!1},{id:"action_properties",label:docs.i18n.t("ACTION_PROPERTIES"),tooltip:docs.i18n.t("ACTION_PROPERTIES_TT"),multi:!1},{separator:!0,more:!0,applink:!0},{id:"action_create_template",label:docs.i18n.t("ACTION_CREATE_TEMPLATE"),tooltip:docs.i18n.t("ACTION_CREATE_TEMPLATE_TT"),multi:!0,requiresDevRole:!0,fontIcon:!0},{id:"action_export",label:docs.i18n.t("ACTION_EXPORT"),tooltip:docs.i18n.t("ACTION_EXPORT_TT"),multi:!1,fontIcon:!0},{separator:!0,more:!0,applink:!0},{id:"action_trash",label:docs.i18n.t("ACTION_TRASH"),tooltip:docs.i18n.t("ACTION_TRASH_TT"),multi:!0,fontIcon:!0}],s.itemActions.site_request=[{id:"action_view_request",label:docs.i18n.t("ACTION_VIEW"),tooltip:docs.i18n.t("REQUEST_ACTION_VIEW_TT"),multi:!1,propfilter:"!inDetailsView",pub:!1,applink:!1,fontIcon:!0},{separator:!0},{id:"action_approve_request",label:docs.i18n.t("ACTION_APPROVE"),tooltip:docs.i18n.t("REQUEST_ACTION_APPROVE_TT"),multi:!1,propfilter:["status==pending","canApprove"],orPropfilter2:["status==rejected","canApprove"],pub:!1,applink:!1},{id:"action_reject_request",label:docs.i18n.t("ACTION_REJECT"),tooltip:docs.i18n.t("REQUEST_ACTION_REJECT_TT"),multi:!1,propfilter:["status==pending","canApprove","!mine"],pub:!1,applink:!1},{id:"action_retry_request",label:docs.i18n.t("ACTION_RETRY"),tooltip:docs.i18n.t("REQUEST_ACTION_RETRY_TT"),multi:!1,propfilter:["status==failed","!allowResubmit","isSitesAdmin","!disallowRetry"],pub:!1,applink:!1},{id:"action_resubmit_request",multi:!1,propfilter:["mine","inDetailsView","!canApprove","status==pending"],orPropfilter2:["mine","inDetailsView","!canApprove","status==rejected"],orPropfilter3:["mine","inDetailsView","status==failed","allowResubmit"],pub:!1,applink:!1},{id:"allow_btn2_resubmit_for_approver",multi:!1,propfilter:["mine","inDetailsView","canApprove","status==pending"],orPropfilter2:["mine","inDetailsView","canApprove","status==rejected"],pub:!1,applink:!1},{separator:!0},{id:"action_delete_request",label:docs.i18n.t("ACTION_DELETE"),tooltip:docs.i18n.t("REQUEST_ACTION_DELETE_TT"),multi:!1,propfilter:["status!=approved","status!=complete","mine"],orPropfilter2:["status!=approved","status!=complete","allowDelete"],pub:!1,applink:!1,fontIcon:!0}],s.itemActions.experience=[{id:"action_view",label:docs.i18n.t("ACTION_VIEW"),tooltip:docs.i18n.t("ACTION_VIEW_EXPERIENCE_TT"),multi:!1,filter:"viewer",pub:!1,applink:!0,fontIcon:!0},{id:"action_rename",label:docs.i18n.t("ACTION_RENAME"),tooltip:docs.i18n.t("ACTION_RENAME_EXPERIENCE_TT"),multi:!1,filter:"contributor",pub:!1,applink:!0,propfilter:"",fontIcon:!0},{separator:!0,more:!0,filter:"contributor",pub:!0,applink:!0},{id:"action_members",more:!0,label:docs.i18n.t("ACTION_MEMBERS"),tooltip:docs.i18n.t("ACTION_EXPERIENCE_MEMBERS_TOOLTIP"),multi:!1,filter:"viewer",pub:!1,applink:!0,embed:465},{id:"action_properties",more:!0,label:docs.i18n.t("ACTION_PROPERTIES"),tooltip:docs.i18n.t("ACTION_PROPERTIES_EXPERIENCE_TT"),multi:!1,filter:"contributor",pub:!1,applink:!0,embed:685,fontIcon:!0},{separator:!0,more:!0,filter:"contributor",pub:!0,applink:!0},{id:"action_trash",label:docs.i18n.t("ACTION_DELETE"),tooltip:docs.i18n.t("ACTION_DELETE_EXPERIENCE_TT"),multi:!0,filter:"contributor",pub:!0,applink:!0,propfilter:"",fontIcon:!0}],s.itemActions.gov_template=s.itemActions.template=[{id:"action_createsite",label:docs.i18n.t("TEMPLATE_ACTION_CREATE_SITE"),tooltip:docs.i18n.t("TEMPLATE_ACTION_CREATE_SITE_TT"),multi:!1,filter:"folderRead",filter2:"createSites",pub:!1,applink:!0,propfilter:"!isGovernanceEnabled",orPropfilter2:"isSitesAdmin",fontIcon:!0},{separator:!0},{id:"action_openfolder",label:docs.i18n.t("ACTION_OPEN"),tooltip:docs.i18n.t("ACTION_OPEN_TEMPLATE_TT"),multi:!1,filter:"folderPreview",pub:!0,applink:!0,fontIcon:!0},{id:"action_details",more:!0,label:docs.i18n.t("TEMPLATE_ACTION_DETAILS"),tooltip:docs.i18n.t("TEMPLATE_ACTION_DETAILS_TT"),multi:!1,filter:"folderPreview",pub:!1,applink:!0,embed:685,fontIcon:!0},{id:"action_copy",label:docs.i18n.t("ACTION_COPY"),tooltip:docs.i18n.t("ACTION_COPY_TEMPLATE_TT"),multi:!0,filter:"folderRead && createTemplates && createSites",pub:!0,pubFilter:"folderDelete",applink:!0,applinkFilter:"folderDelete",embed:465,fontIcon:!0},{id:"action_rename",label:docs.i18n.t("ACTION_RENAME"),tooltip:docs.i18n.t("ACTION_RENAME_TT"),multi:!1,filter:"folderUpdate",pub:!1,applink:!0,embed:465,fontIcon:!0},{separator:!0},{id:"action_export",label:docs.i18n.t("TEMPLATE_ACTION_EXPORT"),tooltip:docs.i18n.t("TEMPLATE_ACTION_EXPORT_TT"),multi:!1,filter:"folderRead",pub:!1,applink:!0,embed:465,fontIcon:!0},{separator:!0},{id:"action_members",more:!0,label:docs.i18n.t("ACTION_MEMBERS"),tooltip:docs.i18n.t("ACTION_TEMPLATE_MEMBERS_TOOLTIP"),multi:!1,filter:"folderPreview",filter2:"directShareRead",pub:!1,applink:!0,embed:465},{separator:!0},{id:"action_trash",label:docs.i18n.t("ACTION_TRASH"),tooltip:docs.i18n.t("ACTION_TRASH_TEMPLATE_TT"),multi:!0,filter:"folderDelete",pub:!0,applink:!0,embed:465,fontIcon:!0}],s.itemActions.theme=[{id:"action_open",label:docs.i18n.t("ACTION_OPEN"),tooltip:docs.i18n.t("ACTION_OPEN_THEME_TT"),multi:!1,filter:"folderPreview",pub:!0,applink:!0,fontIcon:!0},{id:"action_copy",label:docs.i18n.t("ACTION_COPY"),tooltip:docs.i18n.t("ACTION_COPY_THEME_TT"),multi:!0,filter:"folderRead",pub:!0,pubFilter:"folderDelete",applink:!0,applinkFilter:"folderDelete",embed:465,fontIcon:!0},{separator:!0,more:!0,filter:"folderPreview",pub:!0,applink:!0},{id:"action_publish",label:docs.i18n.t("ACTION_PUBLISH"),tooltip:docs.i18n.t("ACTION_PUBLISH_THEME_TT"),multi:!1,filter:"publish",pub:!1,applink:!0,propfilter:"active=false"},{id:"action_republish",label:docs.i18n.t("ACTION_REPUBLISH"),tooltip:docs.i18n.t("ACTION_REPUBLISH_THEME_TT"),multi:!1,filter:"publish",pub:!1,applink:!0,propfilter:"active=true"},{separator:!0,more:!0,filter:"folderPreview",pub:!0,applink:!0},{id:"action_members",more:!0,label:docs.i18n.t("ACTION_MEMBERS"),tooltip:docs.i18n.t("ACTION_THEME_MEMBERS_TOOLTIP"),multi:!1,filter:"folderPreview",filter2:"directShareRead",pub:!1,applink:!0,embed:465},{id:"action_properties",more:!0,label:docs.i18n.t("ACTION_PROPERTIES"),tooltip:docs.i18n.t("ACTION_PROPERTIES_TT"),multi:!1,filter:"folderPreview",pub:!1,applink:!0,embed:685},{separator:!0,more:!0,filter:"folderPreview",pub:!0,applink:!0},{id:"action_trash",label:docs.i18n.t("ACTION_TRASH"),tooltip:docs.i18n.t("ACTION_TRASH_THEME_TT"),multi:!0,filter:"folderDelete",pub:!0,applink:!0,fontIcon:!0}],s.itemActions.app=[{id:"action_open",label:docs.i18n.t("ACTION_OPEN"),tooltip:docs.i18n.t("ACTION_OPEN_APP_TT"),multi:!1,filter:"folderPreview",filter2:"directShareWrite",pub:!0,applink:!0,fontIcon:!0},{id:"action_edit",label:docs.i18n.t("ACTION_EDIT"),tooltip:docs.i18n.t("ACTION_EDIT_APP_TT"),multi:!1,filter:"folderRead",pub:!0,applink:!0,propfilter:"appType=vbcs",fontIcon:!0},{id:"action_copy",label:docs.i18n.t("ACTION_COPY"),tooltip:docs.i18n.t("ACTION_COPY_APP_TT"),multi:!0,filter:"folderRead",filter2:"createApps",pub:!0,pubFilter:"folderDelete",applink:!0,applinkFilter:"folderDelete",embed:465,fontIcon:!0},{separator:!0,more:!0,filter:"folderPreview",pub:!0,applink:!0},{id:"action_publish",label:docs.i18n.t("ACTION_PUBLISH"),tooltip:docs.i18n.t("ACTION_PUBLISH_APP_TT"),multi:!1,filter:"publish",pub:!1,applink:!0,propfilter:["!active","appType!=fieldeditor","appType!=contentform","appType!=customfilterpanel","appType!=translationeditor"]},{id:"action_publish",label:docs.i18n.t("ACTION_PROMOTE_APP"),tooltip:docs.i18n.t("ACTION_PROMOTE_APP_TT"),filter:"publish",multi:!1,pub:!1,applink:!0,propfilter:["!active","fieldeditor,contentform,translationeditor,customfilterpanel&={appType}"]},{id:"action_republish",label:docs.i18n.t("ACTION_REPUBLISH"),tooltip:docs.i18n.t("ACTION_REPUBLISH_APP_TT"),multi:!1,filter:"publish",pub:!1,applink:!0,propfilter:["active","appType!=fieldeditor","appType!=contentform","appType!=customfilterpanel","appType!=translationeditor"]},{id:"action_republish",label:docs.i18n.t("ACTION_REPROMOTE_APP"),tooltip:docs.i18n.t("ACTION_REPROMOTE_APP_TT"),multi:!1,filter:"publish",pub:!1,applink:!0,propfilter:["active","fieldeditor,contentform,customfilterpanel,translationeditor&={appType}"]},{separator:!0,more:!0,filter:"folderPreview",pub:!0,applink:!0},{id:"action_export",label:docs.i18n.t("ACTION_EXPORT"),tooltip:docs.i18n.t("ACTION_EXPORT_TT"),multi:!1,filter:"folderRead",pub:!1,applink:!0,embed:465,fontIcon:!0},{separator:!0,more:!0,filter:"folderPreview",pub:!0,applink:!0},{id:"action_members",more:!0,label:docs.i18n.t("ACTION_MEMBERS"),tooltip:docs.i18n.t("ACTION_COMPONENT_MEMBERS_TOOLTIP"),multi:!1,filter:"folderPreview",filter2:"directShareRead",pub:!1,applink:!0,embed:465},{id:"action_properties",more:!0,label:docs.i18n.t("ACTION_PROPERTIES"),tooltip:docs.i18n.t("ACTION_PROPERTIES_TT"),multi:!1,filter:"folderPreview",pub:!1,applink:!0,embed:685},{separator:!0,more:!0,filter:"folderPreview",pub:!0,applink:!0},{id:"action_trash",label:docs.i18n.t("ACTION_TRASH"),tooltip:docs.i18n.t("ACTION_TRASH_TT"),multi:!0,filter:"folderDelete",pub:!0,applink:!0,fontIcon:!0}],s.itemActions.exportjob=[{id:"action_view",label:docs.i18n.t("ACTION_VIEW"),tooltip:docs.i18n.t("ACTION_VIEW_JOB_TT"),multi:!1,pub:!0,applink:!0,fontIcon:!0},{id:"action_cancel_job",label:docs.i18n.t("PUBLISHING_JOBS_ACTION_CANCEL"),tooltip:docs.i18n.t("ACTION_CANCEL_JOB_TT"),multi:!1,pub:!1,applink:!0,fontIcon:!1,propfilter:["!completed"]},{separator:!0,more:!0,applink:!0},{id:"action_trash",label:docs.i18n.t("ACTION_TRASH"),tooltip:docs.i18n.t("ACTION_TRASH_TT"),multi:!0,pub:!0,fontIcon:!0,propfilter:["completed"]}],s.itemActions.importjob=[{id:"action_view",label:docs.i18n.t("ACTION_VIEW"),tooltip:docs.i18n.t("ACTION_VIEW_JOB_TT"),multi:!1,pub:!0,applink:!0,fontIcon:!0},{id:"action_cancel_job",label:docs.i18n.t("PUBLISHING_JOBS_ACTION_CANCEL"),tooltip:docs.i18n.t("ACTION_CANCEL_JOB_TT"),multi:!1,pub:!1,applink:!0,fontIcon:!1,propfilter:["!completed"]},{separator:!0,more:!0,applink:!0},{id:"action_trash",label:docs.i18n.t("ACTION_TRASH"),tooltip:docs.i18n.t("ACTION_TRASH_TT"),multi:!0,pub:!0,fontIcon:!0,propfilter:["completed"]}],s.itemActions.sitepagetemplate=[{id:"action_edit",label:docs.i18n.t("ACTION_EDIT"),tooltip:docs.i18n.t("ACTION_EDIT_PAGE_TEMPLATE_TT"),multi:!1,pub:!1},{id:"action_copy",label:docs.i18n.t("ACTION_COPY"),tooltip:docs.i18n.t("ACTION_COPY_PAGE_TEMPLATE_TT"),multi:!1,pub:!1},{id:"action_rename",label:docs.i18n.t("ACTION_RENAME"),tooltip:docs.i18n.t("ACTION_RENAME_TT"),multi:!1,pub:!1},{id:"action_promote",label:docs.i18n.t("ACTION_PROMOTE"),tooltip:docs.i18n.t("ACTION_PROMOTE_TT"),multi:!1,pub:!1},{id:"action_delete",label:docs.i18n.t("ACTION_DELETE"),tooltip:docs.i18n.t("ACTION_DELETE_TT"),multi:!1,pub:!1}]}},docs.events.once("initActionConfig",docs.container.ActionsConfig._initActionsConfig),docs.container.ActionsConfig})),define("common/metadata/common/Utils",["jquery","underscore","core/util/Globals"],(function(e,t,docs){"use strict";var i=docs.common.Globals;return docs.metadata={},docs.metadata.Utils={restrictedChars:["/","$","%","'","\\","*",'"',"<",">","|","?",":","#","&","^","{","}","[","]",",","=",".","(",")","`"],restrictedNames:[".","..","NUL","NULL","XSYSTEM","XUSER","DMETADATAUNITID","DPARENTMETADATAUNITID","DMETADATAINHERITLEVEL","DASSIGNEDMETACOLLECTION","DMETACOLLECTION","DMETACOLLECTIONS","DMETADATACOLLECTIONID","DMETADATAID"],errorsToTrap:["csUnableToCreateMetaFieldDef","csUnableToEditMetaFieldDef","csUnableToDeleteMetaFieldDef","csUnableToGetMetaFieldDef","csUnableToCreateMetaColDef","csUnableToEditMetaColDef","csUnableToDeleteMetaColDef","csUnableToGetMetaColDef"],State:{EXISTING:1,ADDED:2,UPDATED:4,DELETED:8},hasErrorToTrap:function(e){for(var t=!1,i=0;i<this.errorsToTrap.length;i++){if(e.indexOf(this.errorsToTrap[i])>-1){t=!0;break}}return t},isRestrictedChar:function(e){return-1!==this.restrictedChars.indexOf(e)},containsRestrictedChar:function(e,t){for(var i,n=(t=t||this.restrictedChars).length;n--;)-1!==e.indexOf(t[n])&&(i=i?i+", "+t[n]:t[n]);return i},isRestrictedName:function(e){var t=e.toUpperCase();return-1!==this.restrictedNames.indexOf(t)},getDefaultValue:function(t,n){var s="";if(t)switch(t.fieldType){case"text":case"string":s=t.defaultTextValue?t.defaultTextValue:"";break;case"number":s=t.defaultNumValue?t.defaultNumValue:"";break;case"date":s=n?t.defaultDateValue?e.naturalDate.getLocaleFormattedDate(t.defaultDateValue,i.userTimeZone,{fullDateTime:!0}):"":t.defaultDateValue?t.defaultDateValue:"";break;case"boolean":s=n?!t.defaultBooleanValue||"1"!==t.defaultBooleanValue&&"true"!==t.defaultBooleanValue?!t.defaultBooleanValue||"0"!==t.defaultBooleanValue&&"false"!==t.defaultBooleanValue?"":docs.i18n.t("FALSE"):docs.i18n.t("TRUE"):t.defaultBooleanValue?t.defaultBooleanValue:""}return s},formatFields:function(e,i){var n="",s=!1;return t.each(e,(function(e){s&&(n+=",");var t=e.id&&isNaN(e.id)?e.id:e.name;n=n+"dFieldName:"+t,s=!0,i.data[t+".dIsSearchable"]=!0,i.data[t+".dFieldType"]=e.fieldType,i.data[t+".dFieldDisplayName"]=e.displayName;var o=docs.metadata.Utils.getDefaultValue(e);o&&(i.data[t+".dDefaultValue"]=o),i.data[t+".dFieldDescription"]=e.description?e.description:"",i.data[t+".dIsReadOnly"]=!!e.isReadOnly&&e.isReadOnly,e.isMultiValued&&(i.data[t+".dIsMultiValued"]="1")})),n},metadataValue:function(e,t,i){var n=null;return e&&e[t]&&e[t].values&&(n=e[t].values[i]),n}},docs.metadata.Utils})),define("common/container/model/ContextActions",["jquery","underscore","backbone","core/util/Globals","core/util/Constants","core/util/Session","core/util/Browser","common/container/config","common/aif/Constants","common/aif/Manager","common/util/WebEdit","common/util/O365Edit","core/embedapi/EmbedApi","core/util/Service","common/container/model/ContextActionsConfig","common/metadata/common/Utils","common/site/SitesUtils","core/util/AppLink"],(function(e,t,i,docs,n,s,o,a,r,l,d,c,u,h){"use strict";var p=i.Model.extend(),_=docs.common.Globals,m=["viewer","downloader","contributor","manager","owner"];return docs.models.ContextActions=i.Collection.extend({model:p,initialize:function(e){this.options=e||{},this.selection=[],a.moreMenu=a.moreMenu||{text:docs.i18n.t("CONTEXT_TOOLBAR_MORE"),tooltip:docs.i18n.t("CONTEXT_TOOLBAR_MORE_TT")},this.moreMenu=a.moreMenu,this.itemActions=docs.container.ActionsConfig.getFilteredActions(this.options)},setContainer:function(e){this.container=e,this.trigger("change:container")},setSelection:function(e,t){this.selection=e;var i=this.build(e);this.reset(i),this.trigger("setSelection",t)},setScopeKey:function(e,t){var i=_.embed?(docs.common.EmbedApi.getName()||"embed")+"_":"";this.scopeKey=i+e,this.defaults=t||{}},filterItemActions:function(e){this.itemActions=docs.container.ActionsConfig.getFilteredActions(e)},hasActions:function(e,i){var n=!!e.get("flags")&&e.get("flags").isInTrash,s=this.build([{actionType:n?"trash":t.result(e,"modelType"),folderItem:e}],!0,i),o={};return t.each(i,(function(e){o[e]=!t.isUndefined(t.findWhere(s,{id:e}))})),o},build:function(i,a,u){var h,p=null,m=e(window).width();if(i&&i.length>0)if("trash"===i[0].actionType)p=this.itemActions.trash,docs.common.Globals.isSitesAdmin||!i[0].folderItem.get("application").startsWith("framework.site")||docs.common.Utils.isYou(i[0].folderItem,"createdBy")||(p=this.itemActions.trash_others);else if(1===i.length)(p=this.itemActions[i[0].actionType])&&(p=p.filter((function(e){return!e.multi||"only"!=e.multi})));else{var f=t.keys(t(i).groupBy((function(e){return e.actionType})));p=1===f.length?t(this.itemActions[f[0]]).filter((function(e){return e.multi||e.separator})):2===f.length&&t.contains(f,"folder")&&t.contains(f,"file")?this.itemActions.both:2===f.length&&t.contains(f,n.ItemType.ASSET_TYPE_DA)&&t.contains(f,n.ItemType.ASSET_TYPE_CI)?this.itemActions.bothasset:[]}else if(this.container&&this.container.items&&this.container.items.length>0)switch(this.options.selectable){case"documents":t.filter(this.container.items.models,(function(e){return"file"===e.get("type")})).length>0&&(p=this.itemActions.none);break;case"folders":t.filter(this.container.items.models,(function(e){return"folder"===e.get("type")})).length>0&&(p=this.itemActions.none);break;default:p=this.itemActions.none}p=t(p).filter((function(n){if(u&&!t.contains(u,n.id))return!1;if(n.optionsfilter&&(t.isString(n.optionsfilter)&&!t.get(this.options,n.optionsfilter)||t.isFunction(n.optionsfilter)&&!n.optionsfilter(this.options)))return!1;if(!1===n.mobile&&(o.isIOS||o.isAndroid))return!1;if(!a&&!n.uploader&&!n.separator&&!n.placeholder&&this._events&&!this._events[n.id])return!1;if(n.singleSelect)return!1;if(_.isPublicLink&&!1===n.pub)return!1;if(_.isAppLink&&!1===n.applink)return!1;if(n.requiresEntUser&&!_.isEnterpriseUser)return!1;if(n.requiresDevRole&&!_.isDeveloperUser&&!_.isSitesAdmin)return!1;if(n.requiresNonExtUser&&_.isStandardExternalUser)return!1;if("action_restore"===n.id){var p=!0;return e.each(i,(function(e,t){t.folderItem.isFile&&t.folderItem.isVirusScanInfected()&&(p=!1)})),p}if(("action_reserve"===n.id||"action_free"===n.id)&&(!this.container||this.container.isTrash||this.container.isSearchResults||this.container.isFavorites))return!1;if(n.featureFlag&&!checkFeatureFlag(n.featureFlag))return!1;if(n.hideOnFeatureFlag&&checkFeatureFlag(n.hideOnFeatureFlag))return!1;if("action_copy_assets"===n.id)return this.container.items.length>1&&i[0].folderItem.hasRole("contributor");if("action_view"===n.id&&c.updateActionProperties(n,i[0].folderItem.get("extension")),"action_webedit"===n.id){if(!d.isEnabled())return!1;c.updateActionProperties(n,i[0].folderItem.get("extension"))}if("edit_menu"===n.id||"view_menu"===n.id)return c.isEnabled({systemAndTenant:!0});if("action_o365_edit"===n.id||"action_o365_view"===n.id){var f=i[0].folderItem.get("extension");if(!c.isEnabled({action:n.id,extension:f}))return!1;c.updateActionProperties(n,f)}if("action_rename_conv"===n.id||"action_discard_conv"===n.id){var g=!0;return e.each(i,(function(e,t){g&&t.folderItem.isConversation&&(g=t.folderItem.isInheritanceSupported())})),g}if("action_rendition_edit"===n.id){var b=i[0].folderItem.getRendition&&i[0].folderItem.getRendition(),v=b&&b.getExtension()||i[0].folderItem.getExtension();if(!!(!v||!docs.common.Constants.digitalasset.extensionMap[v.toLowerCase()])||docs.common.Browser.isMobile)return!1}if(_.embed&&n.embed&&m<n.embed)return!1;if("action_aif"===n.id&&!h)return h=l.getActions(r.TriggerType.MENU,i),!1;if("action_categories"===n.id||"action_find_similarly_categorized"===n.id){var C=this.repository&&this.repository.has("taxonomies")&&this.repository.get("taxonomies").length>0;if(!docs.common.Globals.taxonomyEnabled||!C)return!1}if(!(n.filter||n.filefilter||n.folderfilter||n.propfilter||n.containerfilter||n.requiredRole||n.funcfilter||n.permissionfilter))return!0;var T=!0;return t.all(i,(function(e,i,o){var a,r=e.folderItem;if("action_tag"===n.id&&r.get("id")===docs.common.DAM.FOLDER_ID)return!0;if("action_links"===n.id)if(docs.common.Globals.isAppLink){if(!docs.common.Globals.allowPublicLinks)return T=!1,!1;var l=r.get("roleName");if(docs.common.Service.compareRoles(l,"downloader")<0)return T=!1,!1}else if(r.isFile&&!docs.common.Globals.allowPublicLinks&&(t.isEqual(r.get("parentID"),"F:USER:"+docs.common.Session.getUserName())||t.isEqual(r.get("parentID"),"F:DIGITALASSETS:"+docs.common.Session.getUserName())))return T=!1,!1;if(n.filter)if(n.filter.indexOf("||")>-1){var d=n.filter.split("||"),c=!1;if(t.each(d,(function(e){this._validateFilter(e,r)&&(c=!0)}),this),!c)return T=!1,!1}else if(n.filter.indexOf("&&")>-1){var u=n.filter.split("&&");if(!t.every(u,(function(e){return this._validateFilter(e.trim(),r)}),this))return T=!1,!1}else if(!this._validateFilter(n.filter,r))return T=!1,!1;if(n.filter2&&!r.isAllowedAction(n.filter2))return T=!1,!1;if(n.filefilter&&r.isFile&&!r.isAllowedAction(n.filefilter))return T=!1,!1;if(n.folderfilter&&r.isFolder&&(!r.isAllowedAction(n.folderfilter)||"action_move"===n.id&&r.get("ownedBy")!==s.getUserName()))return T=!1,!1;if(n.siteSecurityFilter&&r.get("contentSecurity"))return T=!1,!1;if(n.permissionfilter&&"view"!==n.permissionfilter){var h=!1,p=e.folderItem;if(p.permissions&&p.permissions.length>0&&(h=t.find(p.permissions,(function(e){return e.action===n.permissionfilter}))),!h)return T=!1,!1}else if(n.containerfilter&&(this.container.has("roleName")?a=this.container.get("roleName"):this.repository&&(a=this.repository.get("roleName")),!a||docs.common.Service.compareRoles(a,n.containerfilter)<0))return T=!1,!1;var m,f=[];if(n.propfilter&&(n.propfilter=t.isArray(n.propfilter)?n.propfilter:[n.propfilter],m=t.every(n.propfilter,function(e){return this._validatePropFilter(e,r)}.bind(this)),f.push(m)),n.orPropfilter2&&(n.orPropfilter2=t.isArray(n.orPropfilter2)?n.orPropfilter2:[n.orPropfilter2],m=t.every(n.orPropfilter2,function(e){return this._validatePropFilter(e,r)}.bind(this)),f.push(m)),n.orPropfilter3&&(n.orPropfilter3=t.isArray(n.orPropfilter3)?n.orPropfilter3:[n.orPropfilter3],m=t.every(n.orPropfilter3,function(e){return this._validatePropFilter(e,r)}.bind(this)),f.push(m)),n.orPropfilter4&&(n.orPropfilter4=t.isArray(n.orPropfilter4)?n.orPropfilter4:[n.orPropfilter4],m=t.every(n.orPropfilter4,function(e){return this._validatePropFilter(e,r)}.bind(this)),f.push(m)),f.length>0&&!t.some(f))return T=!1,!1;var g=null;return n.containerProp&&(g=this._validatePropFilter(n.containerProp,this.container)),null===g||g?_.isPublicLink&&n.pub&&n.pubFilter&&!r.isAllowedAction(n.pubFilter)||_.isAppLink&&n.applink&&n.applinkFilter&&!r.isAllowedAction(n.applinkFilter)?(T=!1,!1):!(n.funcfilter&&t.isFunction(n.funcfilter)&&!n.funcfilter(e,i,o,this))||(T=!1,!1):(T=!1,!1)}),this),T}),this),h&&h.length>0&&this.options.actions.aif&&(p.push({separator:!0}),t.each(h,(function(e){e.stopListening(this,e.cid,e.handleEvent),e.listenTo(this,e.cid,e.handleEvent),p.push({id:e.cid,label:e.getName(),tooltip:e.getDescription(),multi:e.get("multi"),pub:e.get("publicLink")})}),this));var g=t.findWhere(p,{dynamicActions:!0});if(i&&i.length>0&&g){var b=[];t.each(i,(function(e){var t=e.folderItem.get("actions");b.push(t)}),this);var v=g.getDynamicActions(b,g);v.length>0&&t.each(v,(function(e){var t={id:e.id,label:e.label,tooltip:e.tooltip,multi:e.multi};p.push(t)}),this),p=p.filter((function(e){return!e.dynamicActions}))}return p},triggerAction:function(e,i){if(e){var n=e;n.substring(0,3)!==this.menu_prefix&&n.substring(0,3)!==this.tool_prefix||(n=n.substring(3));var s=n.split(":");if(2===s.length){var o=s[0],a=s[1];this.trigger(o,a,this.selection,i,this)}var r=this.findWhere({id:n});if(_.embed&&r&&r.get("optionsfilter")&&t.isString(r.get("optionsfilter"))&&r.get("optionsfilter").startsWith("actions.")){var l="action"+r.get("optionsfilter").split(".").slice(1).map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join("");u.events.triggerAction(l,this.selection).then(function(){this.trigger(n,this.selection,i,this)}.bind(this))}else this.trigger(n,this.selection,i,this)}},setContainerLayout:function(e,t){e!==this.containerLayout()&&(this.containerLayout(e),t||this.trigger("contextActions:layoutChanged"))},containerLayout:function(t){var i=this.scopeKey+"Layout";return(_.embed?e.sessionStorage:e.localStorage)(i,t,this.defaults&&this.defaults.layout||"layout_list")},containerLanguageFilter:function(t,i){var n=this.scopeKey+"LanguageFilter";return e.sessionStorage(n,t,i)},containerSort:function(t,i){var n=this.scopeKey+"Sort";return e.sessionStorage(n,t,i)},getContainerPageSize:function(){return localStorage.getItem(this.scopeKey+"PageSize")},setContainerPageSize:function(e){localStorage.setItem(this.scopeKey+"PageSize",e)},getContainerFilter:function(){return sessionStorage.getItem("FolderFilter"+this.scopeKey)},setContainerFilter:function(e){sessionStorage.setItem("FolderFilter"+this.scopeKey,e)},_validateFilter:function(e,i){var n=!0;if("!"===e.slice(0,1)&&(n=!1,e=e.replace("!","")),t.contains(m,e)){var s=i.get("roleName");if(!s||docs.common.Service.compareRoles(s,e)<0)return!1}else if(i.isAllowedAction(e)!==n)return!1;return!0},_validatePropFilter:function(e,t){var i=!0,n=!1,s=!1,o=!1,a=!1;("!"===e.slice(0,1)||e.indexOf("!=")>-1)&&(i=!1,e=e.replace("!","")),e.indexOf("^=")>-1&&(n=!0,e=e.replace("^","")),e.indexOf("&=")>-1&&(s=!0,e=e.replace("&","")),e.indexOf(">")>-1&&(o=!0,e=e.replace(">","=")),e.indexOf("<")>-1&&(a=!0,e=e.replace("<","="));var r=new RegExp("=+"),l=e.split(r);if(1===l.length)return t.get(l[0].trim())?i:!i;var d=null;0===l[0].indexOf("{")&&l[0].indexOf("}")===l[0].length-1||!s?null==(d=this._getItemValue(t,l[0]))&&(d=""):d=l[0];var c,u,h=null;return 0===l[1].indexOf("{")&&l[1].indexOf("}")===l[1].length-1?null==(h=this._getItemValue(t,l[1]))&&(h=""):h=l[1],n?(c=d.toString(),u=h.trim(),0===c.length&&0===u.length||u.length>0&&c.startsWith(u)?i:!i):s?(c=d.toString().trim(),u=h.trim(),0===c.length&&0===u.length||u.length>0&&c.indexOf(u)>-1?i:!i):o?d>parseInt(h.trim(),10)?i:!i:a?d<parseInt(h.trim(),10)?i:!i:null!=d&&d.toString()===h.toString().trim()?i:!i},_getItemValue:function(e,t){var i=t;0===i.indexOf("{")&&i.indexOf("}")===i.length-1&&(i=i.slice(1,i.length-1));var n=i.split("."),s=e.get(n.shift().trim());if(void 0===s||0===n.length)return s;for(var o=0;o<n.length;o++){var a=n[o],r=a.indexOf("[");if(-1===r)s=s[a];else{var l=a.indexOf("]"),d=parseInt(a.slice(r+1,l),10);a=a.slice(0,r),s=s.hasOwnProperty(a)&&s[a].length>d?s[a][d]:void 0}if(void 0===s)break}return s},menu_prefix:"cm_",tool_prefix:"ct_"}),docs.models.ContextActions})),define("docs/container/template/ContainerView.template",["underscore"],(function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="containerview-header"></div><div class="containerview-content">  <div class="containerview-breadcrumbs"></div>  <div class="containerview-detail"></div></div>';return __p}})),define("common/container/view/ContainerView",["jquery","backbone","underscore","core/osnGlobals","core/util/Globals","core/util/Constants","core/util/Utils","common/container/model/ContextActions","docs/container/template/ContainerView.template","css!geminiCss/gemini-layouts"],(function(e,t,i,osn,docs,n,s,o,a){"use strict";var r=docs.common.Globals;return docs.views.ContainerView=t.View.extend({className:"containerview",alertText:function(){return this.model.get("name")},ContainerViewHeader:void 0,ContainerViewDetail:void 0,BreadCrumbView:void 0,events:{"click #bp-go-back":"bpGoBack","click #bp-reload":"bpReload","click .containerview-list":"clearSelection","click .containerview-toolbar":"clearSelection"},scopeKey:"Container",defaultLayout:"layout_compact",sortOptions:{},layoutOptions:{compact:!1,list:!0,grid:!0,table:!1},pagerOptions:[],filterOptions:{},initialize:function(e){return this.options=e||{},delete this.options.el,i.bindAll(this,"renderContent","renderError","bpGoBack","bpReload","clearSelection","setTitle"),this.listenTo(this.model,"change:mode",this.renderContent),this.listenTo(this.model,"error:fetch",this.renderError),this.listenTo(docs.events,"slidein:closed",this.setTitle),this.options.header&&this.options.header.hide&&this.$el.addClass("hideheader"),!i.isUndefined(this.options.breadcrumb)&&this.options.breadcrumb.hide?this.$el.addClass("hidebreadcrumbs"):r.embed&&this.$el.addClass("hideemptybreadcrumbs"),this.singleSelect?this.options.select="single":i.isUndefined(this.options.select)&&(this.options.select="multiple"),this.contextActions=this.options.contextActions||new o(this.options),this},delayedViewTimeout:function(){var e=docs.i18n.t("BP_LOAD_MSG"),t=docs.i18n.t("BP_LOAD_DETAIL"),i=s.getGenericBoilerplateHtml("bp-large","css-spinner",e,t);return this.$el.html(i),this},renderContent:function(){this.trigger("view:renderContent");var t=a({i18n:docs.i18n});if(this.$el.html(t),this.options.contextActions=this.contextActions=this.contextActions||new docs.models.ContextActions(this.options),this.contextActions.container=this.model,this.contextActions.filterItemActions(this.options),this.options.header&&this.options.header.hide||(this.containerViewHeader=new this.ContainerViewHeader(i.defaults({el:this.$(".containerview-header"),model:this.model,containerView:this},this.options)),this.containerViewHeader.render()),this.BreadCrumbView&&(i.isUndefined(this.options.breadcrumb)||!this.options.breadcrumb.hide||this.options.breadcrumb.back)&&(this.containerBreadcrumbView=new this.BreadCrumbView(i.defaults({folderItem:this.model,containerView:this},this.options)),this.$(".containerview-breadcrumbs").html(this.containerBreadcrumbView.$el)),this.pageUploader&&this.options.header&&(this.options.header.upload||this.options.header.add&&this.options.header.add.upload)){var n={};this.uploader_options&&(e.extend(n,this.uploader_options,{cbContext:this}),this.uploader_created_cb&&(n.uploader_created_cb=this.uploader_created_cb),this.uploader_destroyed_cb&&(n.uploader_destroyed_cb=this.uploader_destroyed_cb)),n.containerView=this.$el,docs.upload.Manager.setupPageDnDUpload(this,this.model,n)}return this.containerViewDetail&&this.containerViewDetail.close(),this.containerViewDetail=new this.ContainerViewDetail(i.defaults({el:this.$(".containerview-detail"),containerView:this,model:this.model,collection:this.model.items,fullCells:i.result(this,"fullCells"),mixedContent:i.result(this,"mixedContent"),sortOptions:i.result(this,"sortOptions"),layoutOptions:i.result(this,"layoutOptions"),pagerOptions:i.result(this,"pagerOptions"),filterOptions:i.result(this,"filterOptions"),searchOptions:i.result(this,"searchOptions"),languageFilterOptions:i.result(this,"languageFilterOptions"),needWrite:this.needWrite},this.options)),this.model.get("isAllSelect")&&i.isFunction(this.model.getAllSelection)?this.containerViewDetail.render(this.model.getAllSelection()):this.containerViewDetail.render(),this.postRender(),this.trigger("view:postRenderContent"),this.containerViewDetail.$el.addClass("rendered"),this.containerViewDetail.el.setAttribute("data-rendered-iter",docs.views.ContainerView.renderedIter++),this},postRender:i.noop,renderError:function(){this.trigger("view:renderError");var e=s.getGenericBoilerplateHtml("bp-large bp-redwood-illustration",r.staticRoot+"images/Boilerplate_Error.png",docs.i18n.t("BP_CONTAINER_FETCH_ERROR_MSG"),this.getBoilerplateErrorDetail());this.$el.html(e)},renderCustomError:function(e,t){this.trigger("view:renderError");var i=s.getGenericBoilerplateHtml("bp-large bp-redwood-illustration",r.staticRoot+"images/Boilerplate_Error.png",e,t);this.$el.html(i)},getBoilerplateErrorDetail:function(){return docs.i18n.t("BP_CONTAINER_FETCH_ERROR_DETAIL")},bpGoBack:function(e){e.stopPropagation(),e.preventDefault(),window.history.back()},bpReload:function(e){e.stopPropagation(),e.preventDefault(),window.location.reload(!0)},onCloseView:function(){this.containerViewHeader&&this.containerViewHeader.close(),this.containerViewDetail&&this.containerViewDetail.close(),this.containerBreadcrumbView&&this.containerBreadcrumbView.close(),i.isFunction(this.model.close)&&this.model.close(),t.View.prototype.remove.call(this)},clearSelection:function(e){e&&"containerview-list"!==e.target.id&&"containerview-items"!==e.target.id&&"containerview-toolbar"!==e.target.id||this.containerViewDetail.selectAll(!1)},selectItems:function(e){i.each(e,(function(e){this.containerViewDetail.selectItem(e)}),this)},setTitle:function(){if(osn.events.trigger("recent-access",{model:this.model}),this.model.isHome)document.title=docs.i18n.t("DOCUMENTS");else if(this.model.isDigitalAssets)document.title=docs.i18n.t("DIGITAL_ASSETS");else if(this.model.isContentAssets)document.title=docs.i18n.t("CONTENT_ITEMS");else if(this.model.isCollections)document.title=docs.i18n.t("COLLECTIONS");else if(this.model.isTranslationJobs)document.title=docs.i18n.t("TRANSLATION_JOBS");else if(this.model.isPublishingJobs)document.title=docs.i18n.t("PUBLISHING_JOBS");else if(this.model.isExperiences)document.title=docs.i18n.t("EXPERIENCES");else{var e=this.model.get("name");if(this.model.isTrash?e=docs.i18n.t("FILTER_TRASH"):this.model.isFavorites&&(e=docs.i18n.t("FILTER_FAVORITES")),e){var t=this.model.isAsset?this.model.getAssetType():(this.model.get("type")||"").toLowerCase();i.contains(["F:SCS:SITES","F:SCS:APPS","F:SCS:TEMPLATES","F:SCS:THEMES"],this.model.get("id"))||this.model.isSitesTrash?document.title=i.unescape(e):t===n.ItemType.ASSET_TYPE_DA?document.title=docs.i18n.t("ASSETS_TITLE",i.unescape(e)):document.title=docs.i18n.t("DOCUMENT_TITLE",i.unescape(e))}else document.title=docs.i18n.t("DOCUMENTS")}},setContextActions:function(e){this.options.contextActions=this.contextActions=e,this.options.contextActions.options=this.options},getUpdateSidebarSignal:function(){return e.Deferred().resolve()}},{renderedIter:0}),docs.views.ContainerView})),define("docs/container/template/ContainerViewHeader.template",["underscore"],(function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="containerview-title">    ',hideTitle||(__p+='    <h1 class="containerview-title-label" title="'+(null==(__t=title)?"":_.escape(__t))+'">'+(null==(__t=title)?"":_.escape(__t))+"</h1>    "),__p+="    ",titleMenu&&(__p+='    <div class="containerview-title-menu containerview-title-subtitle" >      <button id="filter_button" title="'+(null==(__t=titleMenu.tooltip)?"":_.escape(__t))+'" class="containerview-title-menu-button containerview-header-button dropmenu_button">'+(null==(__t=titleMenu.label)?"":_.escape(__t))+'</button>      <ul class="dropmenu_topmenu">        ',_.each(titleMenu.items,(function(e){__p+='        <li id="'+(null==(__t=e.id)?"":_.escape(__t))+'" title="'+(null==(__t=e.tooltip)?"":_.escape(__t))+'"            class="remove_button_style '+(null==(__t=e.id===titleMenu.id?"osn-selected":"")?"":_.escape(__t))+" "+(null==(__t=e.subitems?"subheader":"")?"":_.escape(__t))+' ">          <a href="#"  class="remove_button_style '+(null==(__t=e.id===titleMenu.id?"osn-selected":"")?"":_.escape(__t))+'"><span></span>'+(null==(__t=e.label)?"":_.escape(__t))+"</a></li>        ",_.each(e.subitems,(function(e){__p+='        <li id="'+(null==(__t=e.id)?"":_.escape(__t))+'" title="'+(null==(__t=e.tooltip)?"":_.escape(__t))+'" class="subitem">          <a href="#" class="remove_button_style '+(null==(__t=e.id===titleMenu.id?"osn-selected":"")?"":_.escape(__t))+' "><span></span>'+(null==(__t=e.label)?"":_.escape(__t))+"</a></li>        "})),__p+="        "})),__p+="      </ul>    </div>    "),__p+="</div>",showHeaderInfo&&(__p+='<div class="containerview-header-info">  <div class="status"></div><div class="separator"></div></div>'),__p+='<div class="containerview-header-buttons flush-right"></div><div class="containerview-header-color-stripe"></div>';return __p}})),define("common/sidebar/SidebarConfig",["jquery","underscore","core/util/Globals","core/util/SitesGlobals","core/util/Session","common/aif/Manager"],(function(e,t,docs,sites,i,n){"use strict";docs.common.Globals;var s=t.once((function(){return[{name:"conversation",el:".sidebar-conversation-pane",view:"docs/sidebar/view/ConversationPane",label:docs.i18n.t("SIDEBAR_TAB_CONVERSATION"),imageClass:"ui-icon-nav-conversation",addTab:!0,bgColor:"transparent",optionsfilter:"sidebar.conversation"},{name:"properties",el:".sidebar-properties-pane",view:"docs/sidebar/view/DocsPropertiesPane",label:docs.i18n.t("SIDEBAR_TAB_PROPERTIES"),imageClass:"ui-icon-nav-properties",addTab:!0,bgColor:"transparent",optionsfilter:"sidebar.properties"},{name:"aif",el:".sidebar-aif-pane",view:"docs/aif/view/Pane",label:docs.i18n.t("SIDEBAR_TAB_AIF"),imageClass:"ui-icon-nav-unknown",addTab:!0,bgColor:"transparent"},{name:"translation",el:".translation-pane",view:"docs/sidebar/view/TranslationSidebarPane",label:docs.i18n.t("SIDEBAR_TAB_TRANSLATIONS"),imageClass:"ui-icon-nav-unknown",addTab:!0,bgColor:"transparent",optionsfilter:"sidebar.translations"},{name:"rendition",el:".rendition-pane",view:"docs/sidebar/view/RenditionSidebarPane",label:docs.i18n.t("SIDEBAR_TAB_RENDITIONS"),imageClass:"ui-icon-nav-unknown",addTab:!0,bgColor:"transparent",optionsfilter:"sidebar.renditions"},{name:"metadata",el:".sidebar-metadata-pane",view:"docs/metadata/view/MetadataSidebarPane",label:docs.i18n.t("SIDEBAR_TAB_TAGS_METADATA"),imageClass:"ui-icon-nav-unknown",addTab:!0,bgColor:"transparent",optionsfilter:"sidebar.tagsAndMetadata"},{name:"api_info",el:".sidebar-api-pane",view:"docs/sidebar/view/APIInfoPane",label:docs.i18n.t("SIDEBAR_TAB_API_INFO"),imageClass:"ui-icon-nav-unknown",addTab:!0,bgColor:"transparent"},{name:"type_api_info",el:".sidebar-api-pane",view:"docs/sidebar/view/TypeAPIInfoPane",label:docs.i18n.t("SIDEBAR_TAB_TYPE_API_INFO"),imageClass:"ui-icon-nav-unknown",addTab:!0,bgColor:"transparent"},{name:"asset_types_properties",el:".asset-properties-pane",view:"assets/view/AssetTypesPane",label:docs.i18n.t("SIDEBAR_TAB_PROPERTIES"),imageClass:"ui-icon-nav-unknown",addTab:!0,bgColor:"transparent"},{name:"taxonomy_properties",el:".taxonomy-pane",view:"docs/sidebar/view/TaxonomyPane",label:docs.i18n.t("SIDEBAR_TAB_TAXONOMY_PROPS"),imageClass:"ui-icon-nav-unknown",addTab:!0,bgColor:"transparent"},{name:"rankingpolicy_properties",el:".rankingpolicy-pane",view:"docs/sidebar/view/RankingPolicyPane",label:docs.i18n.t("SIDEBAR_TAB_PROPERTIES"),imageClass:"ui-icon-nav-unknown",addTab:!0,bgColor:"transparent"},{name:"rankingpolicy_channels",el:".rankingpolicy-channels-pane",view:"docs/sidebar/view/RankingPolicyChannelsPane",label:docs.i18n.t("ACTION_TARGETED_CHANNELS"),imageClass:"ui-icon-nav-unknown",addTab:!0,bgColor:"transparent"},{name:"category_properties",el:".category-pane",view:"docs/sidebar/view/CategoryPane",label:docs.i18n.t("SIDEBAR_TAB_CATEGORY_PROPS"),imageClass:"ui-icon-nav-unknown",addTab:!0,bgColor:"transparent"},{name:"asset_categories",el:".asset-categories-pane",view:"docs/sidebar/view/AssetCategoriesPane",label:docs.i18n.t("SIDEBAR_TAB_CATEGORIES"),imageClass:"ui-icon-nav-unknown",addTab:!0,bgColor:"transparent",optionsfilter:"sidebar.categories"},{name:"asset_channels",el:".asset-channels-pane",view:"docs/sidebar/view/AssetChannelsPane",label:docs.i18n.t("ACTION_TARGETED_CHANNELS"),imageClass:"ui-icon-nav-unknown",addTab:!0,optionsfilter:"sidebar.channels"},{name:"inventory",el:".inventory-pane",view:"docs/sidebar/view/InventorySidebarPane",label:docs.i18n.t("SIDEBAR_TAB_INVENTORY"),imageClass:"ui-icon-nav-unknown",addTab:!0,bgColor:"transparent",optionsfilter:"sidebar.inventory"},{name:"analytics",el:".analytics-pane",view:"docs/sidebar/view/AnalyticsSidebarPane",label:docs.i18n.t("SIDEBAR_TAB_ANALYTICS"),imageClass:"ui-icon-nav-unknown",addTab:!0,bgColor:"transparent",optionsfilter:"sidebar.analytics"},{name:"asset_properties",el:".asset-properties-pane",view:"docs/sidebar/view/AssetPropertiesPane",label:docs.i18n.t("SIDEBAR_TAB_PROPERTIES"),imageClass:"ui-icon-nav-unknown",addTab:!0,bgColor:"transparent",optionsfilter:"sidebar.properties"},{name:"add_asset_properties",el:".add-asset_properties-pane",view:"docs/sidebar/view/AddAssetPropertiesPane",label:docs.i18n.t("SIDEBAR_TAB_PROPERTIES"),imageClass:"ui-icon-nav-unknown",addTab:!0,bgColor:"transparent"},{name:"asset_tags_collections",el:".asset-tags-collections-pane",view:"docs/sidebar/view/AssetTagsCollectionsPane",label:docs.i18n.t("SIDEBAR_TAB_TAGS_COLLECTIONS"),imageClass:"ui-icon-nav-unknown",addTab:!0,bgColor:"transparent",optionsfilter:"sidebar.tagsAndCollections"},{name:"asset_workflow",el:".asset-workflows-pane",view:"docs/sidebar/view/AssetWorkflowsPane",label:docs.i18n.t("SIDEBAR_TAB_WORKFLOWS"),imageClass:"ui-icon-nav-unknown",addTab:!0,bgColor:"transparent",optionsfilter:"sidebar.workflow"},{name:"asset_attributes",el:".asset-attributes-pane",view:"docs/sidebar/view/AssetAttributesPane",label:docs.i18n.t("SIDEBAR_TAB_ATTRIBUTES"),imageClass:"ui-icon-nav-unknown",addTab:!0,bgColor:"transparent",optionsfilter:"sidebar.attributes"},{name:"siteplannode_properties",el:".siteplannode-pane",view:"docs/sidebar/view/SitePlanNodePane",label:docs.i18n.t("SIDEBAR_TAB_SITE_PLAN_NODE_PROPS"),imageClass:"ui-icon-nav-unknown",addTab:!0,bgColor:"transparent"},{name:"repository_properties",el:".asset-properties-pane",label:docs.i18n.t("SIDEBAR_TAB_PROPERTIES"),view:"docs/sidebar/view/RepositorySidebarPane",imageClass:"ui-icon-nav-unknown",addTab:!0,bgColor:"transparent"},{name:"channel_properties",el:".asset-properties-pane",label:docs.i18n.t("SIDEBAR_TAB_PROPERTIES"),view:"docs/sidebar/view/ChannelSidebarPane",imageClass:"ui-icon-nav-unknown",addTab:!0,bgColor:"transparent"},{name:"publishing_event_properties",el:".publishing-event-pane",label:docs.i18n.t("SIDEBAR_TAB_PROPERTIES"),view:"docs/sidebar/view/PublishingEventSidebarPane",imageClass:"ui-icon-nav-unknown",addTab:!0,bgColor:"transparent"},{name:"asset_security_properties",el:".asset-security-properties-pane",label:docs.i18n.t("SIDEBAR_TAB_PROPERTIES"),view:"docs/sidebar/view/AssetSecuritySidebarPane",imageClass:"ui-icon-nav-unknown",addTab:!0,bgColor:"transparent"},{name:"scheduled_job_properties",el:".scheduled-job-properties-pane",label:docs.i18n.t("SIDEBAR_TAB_PROPERTIES"),view:"docs/sidebar/view/ScheduledJobSidebarPane",imageClass:"ui-icon-nav-unknown",addTab:!0,bgColor:"transparent"},{name:"recurring_scheduled_job_properties",el:".scheduled-job-properties-pane",label:docs.i18n.t("PUBLISHING_JOBS_RECURRING_PROPERTIES_SIDE_PANEL_LABEL"),view:"docs/sidebar/view/ScheduledJobSidebarPane",imageClass:"ui-icon-nav-unknown",addTab:!0,bgColor:"transparent"},{name:"collection_properties",el:".asset-properties-pane",label:docs.i18n.t("SIDEBAR_TAB_PROPERTIES"),view:"docs/sidebar/view/CollectionPropsSidebarPane",imageClass:"ui-icon-nav-unknown",addTab:!0,bgColor:"transparent"}]}));return docs.sidebar=docs.sidebar||{},docs.sidebar.Config={_getFilteredTabs:function(e,i){var o=t(s()).filter(this.filterByModel,i);if(o=t.filter(o,(function(e){return!e.optionsfilter||t.get(i,e.optionsfilter)})),t(o).findWhere({name:"aif"})){var a=n.getSidebarActions(e);o=t(o).reject((function(e){return"aif"===e.name}));var r=t(s()).findWhere({name:"aif"});t(a).each((function(e){var i=t.clone(r);i.name="aif-"+e.get("id"),i.label=e.getName(),o.push(i)}))}return t.sortBy(o,"label")},filterByModel:function(e){var s=this.model;if(t.isFunction(s.isSideboardSupported)&&s.isSideboardSupported(e.name)||t.has(s,"sideboards")&&t.isArray(s.sideboards)&&t.contains(s.sideboards,e.name))switch(e.name){case"aif":return n.isEnabled()&&n.hasSidebarActions(s);case"asset_categories":var o=this.contextActions&&this.contextActions.repository&&this.contextActions.repository.get("taxonomies")&&this.contextActions.repository.get("taxonomies").length>0;if(docs.common.Globals.taxonomyEnabled&&o)return!i.isAnonymous();break;case"asset_workflow":if(this.contextActions&&this.contextActions.repository&&this.contextActions.repository.get("workflows"))return this.contextActions.repository.get("workflows").length>0;break;default:return!i.isAnonymous()}},getTabs:function(e,t){return this._getFilteredTabs(e,t)}},docs.sidebar.Config})),
/*!
 * jQuery UI Slider 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
function(e){"use strict";"function"==typeof define&&define.amd?define("jqueryui-amd/widgets/slider",["jquery","./mouse","../keycode","../version","../widget"],e):e(jQuery)}((function(e){"use strict";return e.widget("ui.slider",e.ui.mouse,{version:"1.13.2",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,i,n=this.options,s=this.element.find(".ui-slider-handle"),o=[];for(i=n.values&&n.values.length||1,s.length>i&&(s.slice(i).remove(),s=s.slice(0,i)),t=s.length;t<i;t++)o.push("<span tabindex='0'></span>");this.handles=s.add(e(o.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each((function(t){e(this).data("ui-slider-handle-index",t).attr("tabIndex",0)}))},_createRange:function(){var t=this.options;t.range?(!0===t.range&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:Array.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=e("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),"min"!==t.range&&"max"!==t.range||this._addClass(this.range,"ui-slider-range-"+t.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(t){var i,n,s,o,a,r,l,d=this,c=this.options;return!c.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(i),s=this._valueMax()-this._valueMin()+1,this.handles.each((function(t){var i=Math.abs(n-d.values(t));(s>i||s===i&&(t===d._lastChangedValue||d.values(t)===c.min))&&(s=i,o=e(this),a=t)})),!1!==this._start(t,a)&&(this._mouseSliding=!0,this._handleIndex=a,this._addClass(o,null,"ui-state-active"),o.trigger("focus"),r=o.offset(),l=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:t.pageX-r.left-o.width()/2,top:t.pageY-r.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,a,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,n,s,o;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),(n=i/t)>1&&(n=1),n<0&&(n=0),"vertical"===this.orientation&&(n=1-n),s=this._valueMax()-this._valueMin(),o=this._valueMin()+n*s,this._trimAlignValue(o)},_uiHash:function(e,t,i){var n={handle:this.handles[e],handleIndex:e,value:void 0!==t?t:this.value()};return this._hasMultipleValues()&&(n.value=void 0!==t?t:this.values(e),n.values=i||this.values()),n},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(e,t){return this._trigger("start",e,this._uiHash(t))},_slide:function(e,t,i){var n,s=this.value(),o=this.values();this._hasMultipleValues()&&(n=this.values(t?0:1),s=this.values(t),2===this.options.values.length&&!0===this.options.range&&(i=0===t?Math.min(n,i):Math.max(n,i)),o[t]=i),i!==s&&!1!==this._trigger("slide",e,this._uiHash(t,i,o))&&(this._hasMultipleValues()?this.values(t,i):this.value(i))},_stop:function(e,t){this._trigger("stop",e,this._uiHash(t))},_change:function(e,t){this._keySliding||this._mouseSliding||(this._lastChangedValue=t,this._trigger("change",e,this._uiHash(t)))},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,t){var i,n,s;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(t),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!Array.isArray(arguments[0]))return this._hasMultipleValues()?this._values(e):this.value();for(i=this.options.values,n=arguments[0],s=0;s<i.length;s+=1)i[s]=this._trimAlignValue(n[s]),this._change(null,s);this._refreshValue()},_setOption:function(e,t){var i,n=0;switch("range"===e&&!0===this.options.range&&("min"===t?(this.options.value=this._values(0),this.options.values=null):"max"===t&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),Array.isArray(this.options.values)&&(n=this.options.values.length),this._super(e,t),e){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(t),this.handles.css("horizontal"===t?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=n-1;i>=0;i--)this._change(null,i);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(e){this._super(e),this._toggleClass(null,"ui-state-disabled",!!e)},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,n;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this._hasMultipleValues()){for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,n=e-i;return 2*Math.abs(i)>=t&&(n+=i>0?t:-t),parseFloat(n.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),i=this.options.step;(e=Math.round((e-t)/i)*i+t)>this.options.max&&(e-=i),this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),i=t.indexOf(".");return-1===i?0:t.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(e){"vertical"===e&&this.range.css({width:"",left:""}),"horizontal"===e&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var t,i,n,s,o,a=this.options.range,r=this.options,l=this,d=!this._animateOff&&r.animate,c={};this._hasMultipleValues()?this.handles.each((function(n){i=(l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())*100,c["horizontal"===l.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[d?"animate":"css"](c,r.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[d?"animate":"css"]({left:i+"%"},r.animate),1===n&&l.range[d?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:r.animate})):(0===n&&l.range.stop(1,1)[d?"animate":"css"]({bottom:i+"%"},r.animate),1===n&&l.range[d?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:r.animate}))),t=i})):(n=this.value(),s=this._valueMin(),o=this._valueMax(),i=o!==s?(n-s)/(o-s)*100:0,c["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[d?"animate":"css"](c,r.animate),"min"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[d?"animate":"css"]({width:i+"%"},r.animate),"max"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[d?"animate":"css"]({width:100-i+"%"},r.animate),"min"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[d?"animate":"css"]({height:i+"%"},r.animate),"max"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[d?"animate":"css"]({height:100-i+"%"},r.animate))},_handleEvents:{keydown:function(t){var i,n,s,o=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(e(t.target),null,"ui-state-active"),!1===this._start(t,o)))return}switch(s=this.options.step,i=n=this._hasMultipleValues()?this.values(o):this.value(),t.keyCode){case e.ui.keyCode.HOME:n=this._valueMin();break;case e.ui.keyCode.END:n=this._valueMax();break;case e.ui.keyCode.PAGE_UP:n=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(i===this._valueMax())return;n=this._trimAlignValue(i+s);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i===this._valueMin())return;n=this._trimAlignValue(i-s)}this._slide(t,o,n)},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),this._removeClass(e(t.target),null,"ui-state-active"))}}})})),
/**
 * @license
 * Copyright (c) 2014, 2022, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define("ojs/ojvalidator",["ojs/ojcore"],(function(e){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;const t=function(e){this.Init(e)};return e.Object.createSubclass(t,e.Object,"oj.Validator"),t.prototype.Init=function(e){t.superclass.Init.call(this)},t})),
/**
 * @license
 * Copyright (c) 2014, 2022, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define("ojs/ojvalidation-error",["exports","ojs/ojcore","ojs/ojmessaging"],(function(e,t,i){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i;const n=function(e,t){var n={summary:e,detail:t,severity:i.SEVERITY_LEVEL.ERROR};this.Init(n)};n.prototype=new Error,t._registerLegacyNamespaceProp("ValidatorError",n),n.prototype.Init=function(e){var t=e.detail,i=e.summary;this._message=e,this.name="Validator Error",this.message=t||i},n.prototype.getMessage=function(){return this._message};const s=function(e,t){var n={summary:e,detail:t,severity:i.SEVERITY_LEVEL.ERROR};this.Init(n)};s.prototype=new Error,t._registerLegacyNamespaceProp("ConverterError",s),s.prototype.Init=function(e){var t=e.detail,i=e.summary;this._message=e,this.name="Converter Error",this.message=t||i},s.prototype.getMessage=function(){return this._message},e.ConverterError=s,e.ValidatorError=n,Object.defineProperty(e,"__esModule",{value:!0})})),
/**
 * @license
 * Copyright (c) 2014, 2022, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define("ojs/ojvalidator-required",["ojs/ojcore","ojs/ojtranslation","ojs/ojvalidator","ojs/ojvalidation-error"],(function(e,t,i,n){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i;const s=function(e){this.Init(e)};return e.Object.createSubclass(s,i,"oj.RequiredValidator"),s._BUNDLE_KEY_DETAIL="oj-validator.required.detail",s._BUNDLE_KEY_SUMMARY="oj-validator.required.summary",s.prototype.Init=function(e){s.superclass.Init.call(this),this._options=e},s.prototype.validate=function(e){var i,s,o,a,r,l="";if(null==e||("string"==typeof e||e instanceof Array)&&0===e.length)throw this._options&&(i=this._options.messageDetail||this._options.message||null,a=this._options.messageSummary||null,l=this._options.label||""),r={label:l},o=a?t.applyParameters(a,r):t.getTranslatedString(this._getSummaryKey(),r),s=i?t.applyParameters(i,r):t.getTranslatedString(this._getDetailKey(),r),new n.ValidatorError(o,s)},s.prototype.getHint=function(){var e="";return this._options&&this._options.hint&&(e=t.getTranslatedString(this._options.hint)),e},s.prototype._getSummaryKey=function(){return s._BUNDLE_KEY_SUMMARY},s.prototype._getDetailKey=function(){return s._BUNDLE_KEY_DETAIL},s})),
/**
 * @license
 * Copyright (c) 2014, 2022, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define("ojs/ojconverterutils",["ojs/ojcore-base","ojs/ojlogger"],(function(e,t){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;class i{}return i.getConverterInstance=function(i){let n="",s={},o=null;if(i&&("object"==typeof i&&(i.parse&&"function"==typeof i.parse||i.format&&"function"==typeof i.format?o=i:(n=i.type,s=i.options||{})),!o&&(n=n||i,n&&"string"==typeof n))){if(e.Validation&&e.Validation.converterFactory)return e.Validation.converterFactory(n).createConverter(s);t.error('oj.Validation.converterFactory is not available and it is needed to support the deprecated json format for the converters property. Please include the backward compatibility "ojvalidation-base" module.')}return o},i})),
/**
 * @license
 * Copyright (c) 2014, 2022, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define("ojs/ojeditablevalue",["exports","ojs/ojcore-base","ojs/ojcomponentcore","jquery","ojs/ojlabel","ojs/ojthemeutils","ojs/ojfocusutils","ojs/ojcontext","ojs/ojlogger","ojs/ojvalidator-required","ojs/ojlabelledbyutils","ojs/ojtranslation","ojs/ojmessaging","ojs/ojconverterutils","ojs/ojvalidation-error","ojs/ojpopup","hammerjs","ojs/ojjquery-hammer","ojs/ojdomutils","ojs/ojanimation"],(function(e,t,i,n,s,o,a,r,l,d,c,u,h,p,_,m,f,g,b,v){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,a=a&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r,d=d&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d,c=c&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c,h=h&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h,p=p&&Object.prototype.hasOwnProperty.call(p,"default")?p.default:p;const C=function(e){this.Init(e)};t.Object.createSubclass(C,t.MessagingStrategy,"BaseInsideLabelStrategy"),C.prototype._GetFormControlLabelStyleClass=function(){return"oj-form-control-label-inside"},C.prototype._CreateLabel=function(){var e=this.GetComponent(),t=this._GetContainer(e);if(!t)return;var i=e.options,n=e._getRootElement(),s=this._GetFormControlLabelStyleClass();n.classList.add(s),this.GenerateIdIfNeeded(n),this._showUserAssistanceNotInline=e._showUserAssistanceNotInline();let o=i.required&&this._showUserAssistanceNotInline;this._createOjLabelElement(n,e,t,i.labelHint,o,i.helpHints,this._showUserAssistanceNotInline)},C.prototype._createOjLabelElement=function(e,t,i,n,s,o,a){var r=document.createElement("oj-label");r.id=C._getLabelId(e),r.setAttribute("data-oj-binding-provider","none"),r.setAttribute("data-oj-internal",""),r.setAttribute("for",e.id);var l=[t._GetDefaultStyleClass(),"label"].join("-");r.classList.add(l),s&&r.setAttribute("show-required",s),a&&o&&(r.help=o);var d=document.createElement("span");d.id=[e.id,"|hint"].join(""),d.textContent=n,r.appendChild(d),this._InsertOjLabel(r,i,t),this._CreateEventHandlers(d,e,r,t)},C.prototype._GetContainer=function(e){return e._GetFormControlContainer()},C.prototype._CreateEventHandlers=function(e,t,i,n){this._labelHintChangedCallback=C._labelHintChangedHandler.bind(this,e),t.addEventListener("labelHintChanged",this._labelHintChangedCallback),this._requiredChangedCallback=C._requiredChangedHandler.bind(this,i,n),t.addEventListener("requiredChanged",this._requiredChangedCallback),this._helpHintsChangedCallback=C._helpHintsChangedHandler.bind(this,i,n),t.addEventListener("helpHintsChanged",this._helpHintsChangedCallback)},C.prototype._DestroyLabel=function(){var e=this.GetComponent(),t=e.options,i=e._getRootElement(),n=this._GetFormControlLabelStyleClass();i.classList.remove(n);var s=C._getLabelId(i);const o=i.querySelector(`[id='${s}']`);o&&(o.for="",o.parentElement.removeChild(o)),t.labelledBy=void 0,this._DeleteEventHandlers(i)},C.prototype._DeleteEventHandlers=function(e){e.removeEventListener("labelHintChanged",this._labelHintChangedCallback),e.removeEventListener("requiredChanged",this._requiredChangedCallback),e.removeEventListener("helpHintsChanged",this._helpHintsChangedCallback),delete this._helpHintsChangedCallback,delete this._labelHintChangedCallback,delete this._requiredChangedCallback},C._getLabelId=function(e){return[e.id,"-labelled-by"].join("")},C._labelHintChangedHandler=function(e,t){e.textContent=t.detail.value},C._requiredChangedHandler=function(e,t,i){null==this._showUserAssistanceNotInline&&(this._showUserAssistanceNotInline=t._showUserAssistanceNotInline()),e.showRequired=i.detail.value&&this._showUserAssistanceNotInline},C._helpHintsChangedHandler=function(e,t,i){this._showUserAssistanceNotInline=t._showUserAssistanceNotInline(),this._showUserAssistanceNotInline&&(e.help=i.detail.value)};const T={validationContext:{COMPONENT_CREATE:1,CONVERTER_OPTION_CHANGE:2,DISABLED_OPTION_CHANGE:3,READONLY_OPTION_CHANGE:4,REFRESH_METHOD:5,REQUIRED_OPTION_CHANGE:6,RESET_METHOD:7,USER_ACTION:8,VALIDATE_METHOD:9,VALIDATORS_OPTION_CHANGE:10,VALUE_OPTION_CHANGE:11}};T.validateMethodOptions={doValueChangeCheck:!1,validationContext:T.validationContext.VALIDATE_METHOD},T.converterOptionOptions={doValueChangeCheck:!1,doNotClearMessages:!0,validationContext:T.validationContext.CONVERTER_OPTION_CHANGE},T.disabledOptionOptions={doValueChangeCheck:!1,doNotClearMessages:!0,validationContext:T.validationContext.DISABLED_OPTION_CHANGE},T.requiredOptionOptions={doValueChangeCheck:!1,doNotClearMessages:!0,validationContext:T.validationContext.REQUIRED_OPTION_CHANGE},T.readOnlyOptionOptions={doValueChangeCheck:!1,doNotClearMessages:!0,validationContext:T.validationContext.READONLY_OPTION_CHANGE},T.refreshMethodOptions={doValueChangeCheck:!1,doNotClearMessages:!0,validationContext:T.validationContext.REFRESH_METHOD},T.validatorsOptionOptions={doValueChangeCheck:!1,doNotClearMessages:!0,validationContext:T.validationContext.VALIDATORS_OPTION_CHANGE},T.VALIDATE_VALUES={VALID:"valid",INVALID:"invalid"},T.getAttributeValue=function(e,t){var i,n={};if(e&&t){var s=e[0];switch(t){case"disabled":i=s.hasAttribute("disabled")?!!s.disabled:void 0;break;case"pattern":i=s.pattern||void 0;break;case"placeholder":i=s.placeholder||void 0;break;case"readonly":i=s.hasAttribute("readonly")?!!s.readOnly:void 0;break;case"required":if(s.hasAttribute("required")){var o=s.required;i=void 0===o||!!o}else i=void 0;break;case"title":i=s.hasAttribute("title")?s.title:void 0;break;case"value":i=e.val()||void 0;break;case"min":case"max":default:i=s.getAttribute(t)||void 0}}return void 0!==i?(n.fromDom=!0,n.value=i):n.fromDom=!1,n},T.initializeOptionsFromDom=function(e,t,i,n){for(var s={},o=0;o<e.length;o++){var a,r,l=e[o],d=l.attribute,c=l.option||d,u=l.coerceDomValue,h=l.validateOption,p=i.element,_=i.options[c];void 0===t[c]&&(_=i.options[c],(r=T.getAttributeValue(p,d)).fromDom&&(a=r.value,u&&("boolean"==typeof u?a=T.coerceDomValueForOption(c,a):"function"==typeof u&&(a=u.call(i,a))),s[c]=a));var m=c in s?s[c]:_;h&&"boolean"==typeof h&&T.validateValueForOption(c,m)}null!=n&&n(s),i.option(s,{_context:{writeback:!0,internalSet:!0}})},T.validateValueForOption=function(e,t){var i=!1;switch(e){case"required":null!==t&&"boolean"!=typeof t&&(i=!0);break;case"readOnly":case"disabled":null!==t&&"boolean"!=typeof t&&(i=!0)}if(i)throw new Error("Option '"+e+"' has invalid value set: "+t)},T.coerceDomValueForOption=function(e,t){var i=t;switch(e){case"required":i=!!t}return i},T.setPickerAttributes=function(e,t){if(e&&t){var i=t.class;if(i)for(var n=i.split(" "),s=0,o=n.length;s<o;++s)e[0].classList.add(n[s]);t.style&&l.error("picker-attributes.style attribute violates the recommended\n        Content Security Policy which disallows inline styles and is therefore ignored.\n        Use the picker-attributes.class attribute instead.")}},T.hasNoLabelFlag=function(e){return e[0].hasAttribute("data-oj-no-labelledby")},T._getOjLabelAriaLabelledBy=function(e,t){var i,n=T._getCustomOjLabelElements(e);if(n){i="";for(var s=0;s<n.length;s++){var o=n[s],a=o.getAttribute("label-id");if(!a){var r=o.querySelector("label");r?a=r.getAttribute("id"):(o.setAttribute("label-id",t),a=t)}i+=a,s+1<n.length&&(i+=" ")}}return i},T._getCustomOjLabelElements=function(e){var t=[];if(e)for(var i=e.split(/\s+/),n=0;n<i.length;n++){var s=i[n],o=document.getElementById(s);o?t.push(o):l.info("Cannot find oj-label with id "+o)}return t},T._initInputIdLabelForConnection=function(e,t,i){t&&(e.setAttribute("id",t+"|input"),i&&this._linkLabelForInputComp(i,e.id)),i&&this._setReadonlyDivLabelledBy(i)},T._labelledByUpdatedForInputComp=function(e,t){e&&(t&&this._linkLabelForInputComp(e,t),this._setReadonlyDivLabelledBy(e)),this._IsRequired()&&this.options.translations.required&&(this._implicitReqValidator=null,this._getImplicitRequiredValidator())},T._linkLabelForInputComp=function(e,t){var i=T._getCustomOjLabelElements(e);i&&T._setDataOjInputIdAttrOnLabel(t,i)},T._setReadonlyDivLabelledBy=function(e){t.Assert.assert(e);let i=this._getReadonlyDiv();i&&i.setAttribute("aria-labelledby",e+"|label")},T._createOrUpdateReadonlyDiv=function(e,t=!0){let i=this._getReadonlyDiv();if(!i&&t){if(i=this._createReadonlyDiv(e),!i)return;this.options.labelledBy&&this._setReadonlyDivLabelledBy(this.options.labelledBy),this._setAriaLabelFromLabelHint()}i&&(i.textContent=this._GetDisplayValue(),T._setTabIndex(e,i))},T._setTabIndex=function(e,t){let i=e.tabIndex;null!==i&&(t.tabIndex=i)},T._setDataOjInputIdAttrOnLabel=function(e,t){if(t)for(var i=0;i<t.length;i++)t[i].setAttribute("data-oj-input-id",e)},T.validate=function(){var e;if(e=this._SetValue(this._GetDisplayValue(),null,this._VALIDATE_METHOD_OPTIONS),this._IsCustomElement()){if(e instanceof Promise)return e.then((function(e){return Promise.resolve(e?"valid":"invalid")}));e=Promise.resolve(e?"valid":"invalid")}else if(e instanceof Promise)return e.then((function(e){return Promise.resolve(e?"valid":"invalid")}));return e},T._refreshRequired=function(e){var t,i,n,s=this._AriaRequiredUnsupported();if(this._refreshTheming("required",e),s||(i=this._GetContentElement(),(n=e)&&i?i[0].setAttribute("aria-required",n):i[0].removeAttribute("aria-required")),!this._IsCustomElement()&&(this.$label||this._createOjLabel(),this.$label&&(this.$label.ojLabel("option","showRequired",e),s))){var o=this._getAriaLabelledByElement(this.element);if(null!==o&&0!==o.length&&(t=o[0].getAttribute("id")),t){let i=t+"_requiredIcon";e?this._describedByUpdated(null,i):this._describedByUpdated(i,null)}}},T._AfterSetOptionRequired=function(e){this._refreshRequired(this._IsRequired()),this._runMixedValidationAfterSetOption(T.requiredOptionOptions)},T._AfterSetOptionValidators=function(){var e;this._ResetAllValidators(),this._hasInvalidMessagesShowing()&&(this._clearComponentMessages(),e=this._GetDisplayValue(),this._SetValue(e,null,T.validatorsOptionOptions))},T._AfterSetOptionAsyncValidators=function(){this._AfterSetOptionValidators()},T._AfterSetOptionConverter=function(){this._converter=null,this._converterChangedCounter+=1;var e=this._GetConverter();if(e instanceof Promise){var t=this;this._setBusyStateAsyncConverterLoading();var i=this._converterChangedCounter;this._loadingConverter(e).then((function(){i===t._converterChangedCounter&&t._ResetConverter(),t._clearBusyStateAsyncConverterLoading()}))}else this._ResetConverter()},T._AfterCreateConverterCached=function(){this._HasPlaceholderSet()&&(this._SetPlaceholder(this.options.placeholder),this._customPlaceholderSet=!0),this._initComponentMessaging(this._MESSAGING_CONTENT_UPDATE_TYPE.ALL),this._Refresh("value",this.options.value,!1),this.options.messagesShown.length>0&&this._setMessagesOption("messagesShown",this.options.messagesShown,null,!0)},T._ResetConverter=function(){var e;this._getComponentMessaging().update(this._getMessagingContent(this._MESSAGING_CONTENT_UPDATE_TYPE.CONVERTER_HINT)),this._hasInvalidMessagesShowing()?(this._clearComponentMessages(),e=this._GetDisplayValue(),this._SetValue(e,null,T.converterOptionOptions)):this._Refresh("converter",this.options.converter,!0)},T._GetNormalizedValidatorsFromOption=function(){var e,i,n,s,o,a,r=!0,d=[];if(n=this.options.validators)for(e=0;e<n.length;e++)"object"==typeof(i=n[e])?(i.validate&&"function"==typeof i.validate||(r=!1),r||(a=i.type)&&"string"==typeof a&&(t.Validation&&t.Validation.validatorFactory?o=t.Validation.validatorFactory(a):l.error('oj.Validation.validatorFactory is not available and it is needed to support the deprecated json format for validators property. Please include the backward compatibility "ojvalidation-base" module.'),o&&((s=t.CollectionUtils.copyInto({},i.options)||{}).converter=s.converter||this._GetConverter(),s.label=s.label||this._getLabelText(),i=o.createValidator(s))),d.push(i)):l.error("Unable to parse the validator provided:"+i);return d},T._GetNormalizedAsyncValidatorsFromOption=function(){var e,t,i,n=[];for(i=this.options.asyncValidators,e=0;e<i.length;e++)"object"==typeof(t=i[e])?t.validate&&"function"==typeof t.validate&&n.push(t):l.error("Unable to parse the validator provided:"+t);return n},T._GetConverter=function(){var e,t,i,n=this;if(!this._converter){if((e=this.options.converter)instanceof Promise?i=e:t=p.getConverterInstance(e),i)return i.then((function(e){return n._converter=e,n._converter||null}));this._converter=t}return this._converter||null},T._SetBusyState=function(e){void 0===this._resolveBusyStateAsyncMap&&(this._resolveBusyStateAsyncMap=new Map);var t=this._resolveBusyStateAsyncMap.get(e);if(!t){var i=this.element[0],n=r.getContext(i).getBusyContext(),s="The page is waiting for async validators for displayValue "+e;i&&i.id&&(s+=' for "'+i.id+'" '),s+="to finish.",t=n.addBusyState({description:s}),this._resolveBusyStateAsyncMap.set(e,t)}},T._ClearBusyState=function(e){var t;void 0!==this._resolveBusyStateAsyncMap&&(t=this._resolveBusyStateAsyncMap.get(e))&&(t(),this._resolveBusyStateAsyncMap.delete(e))},T._SetBusyStateAsyncValidatorHint=function(e){void 0===this._resolveBusyStateAsyncValidatorHintMap&&(this._resolveBusyStateAsyncValidatorHintMap=new Map);var t=this._resolveBusyStateAsyncValidatorHintMap.get(e);if(!t){var i=this.element[0],n=r.getContext(i).getBusyContext(),s="The page is waiting for async validator hint for counter "+e;i&&i.id&&(s+=' for "'+i.id+'" '),s+="to finish.",t=n.addBusyState({description:s}),this._resolveBusyStateAsyncValidatorHintMap.set(e,t)}},T._ClearBusyStateAsyncValidatorHint=function(e){var t;void 0!==this._resolveBusyStateAsyncValidatorHintMap&&(t=this._resolveBusyStateAsyncValidatorHintMap.get(e))&&(t(),this._resolveBusyStateAsyncValidatorHintMap.delete(e))},T._SetBusyStateAsyncConverterLoading=function(){if(!this._resolveBusyStateAsyncConverterLoading){var e=this.element[0],t=r.getContext(e).getBusyContext(),i="The page is waiting for async converter loading ";e&&e.id&&(i+='for "'+e.id+'" '),i+="to finish.",this._resolveBusyStateAsyncConverterLoading=t.addBusyState({description:i})}},T._ClearBusyStateAsyncConverterLoading=function(){void 0!==this._resolveBusyStateAsyncConverterLoading&&(this._resolveBusyStateAsyncConverterLoading(),delete this._resolveBusyStateAsyncConverterLoading)},T._getShowLoadingDelay=function(){null==this._defaultOptions&&(this._defaultOptions=o.parseJSONFromFontFamily("oj-form-control-option-defaults"));var e=parseInt(this._defaultOptions.showIndicatorDelay,10);return isNaN(e)?0:e},T._SetInputType=function(e){var i="text",n=t.AgentUtils.getAgentInfo();if(n.os===t.AgentUtils.OS.ANDROID||n.os===t.AgentUtils.OS.IOS||n.os===t.AgentUtils.OS.WINDOWSPHONE)if(e.indexOf(this.options.virtualKeyboard)>=0)i=this.options.virtualKeyboard;else{var s=this._GetConverter();if(s&&s.resolvedOptions){var o=s.resolvedOptions();e.indexOf(o.virtualKeyboardHint)>=0&&(i=o.virtualKeyboardHint)}}null==i?this.element[0].removeAttribute("type"):this.element[0].setAttribute("type",i)},T._createReadonlyDiv=function(e){if(this._UseReadonlyDiv()){var t=document.createElement("div");t.classList.add("oj-text-field-readonly-div");var i=document.createElement("div");return i.classList.add("oj-text-field-readonly"),i.setAttribute("role","textbox"),i.setAttribute("aria-readonly",!0),t.appendChild(i),e.parentNode.insertBefore(t,e),i}return null},T._getReadonlyDiv=function(){return this.widget()[0].querySelector(".oj-text-field-readonly")};var E={MESSAGES:"display",VALIDATOR_HINT:"display",CONVERTER_HINT:"display"},A={MESSAGES:["inline"],VALIDATOR_HINT:["notewindow"],CONVERTER_HINT:["placeholder","notewindow"]};t.__registerWidget("oj.editableValue",n.oj.baseComponent,{widgetEventPrefix:"oj",options:{describedBy:null,disabled:!1,displayOptions:{},help:void 0,helpHints:{definition:"",source:""},labelHint:"",labelEdge:void 0,messagesCustom:[],messagesHidden:void 0,messagesShown:void 0,title:"",userAssistanceDensity:"reflow",valid:void 0,value:void 0,animateStart:null,animateEnd:null},getNodeBySubId:function(e){var t;if(!(t=this._super(e))&&!this._IsCustomElement()&&"oj-label-help-icon"===e.subId){var i=this._GetLabelElement();i&&(t=i.parent().find(".oj-label-help-icon"))}return t||null},getSubIdByNode:function(e){var t,i,s,o=null;return null!=e&&null!=(t=n(e).closest("a.oj-label-help-icon"))&&null!=(i=t.closest(".oj-label"))&&(s=i.find("label")[0])&&s===this._GetLabelElement()[0]&&(o={subId:"oj-label-help-icon"}),o},isValid:function(){return void 0===this._valid&&(this._valid=!this._hasInvalidMessages()),this._valid},refresh:function(){this._super(),this._doRefresh()},reset:function(){this._clearAllMessages(),this._runDeferredValidation(this._VALIDATION_CONTEXT.RESET_METHOD),this._refreshComponentDisplayValue(this.options.value,!0)},showMessages:function(){var e,t,i,n=[],s=this.options.messagesHidden,o=s.length>0;for(e=0;e<s.length;e++)(t=s[e])instanceof h.ComponentMessage?(t._forceDisplayToShown(),i=t.clone()):i=new h(t.summary,t.detail,t.severity),n.push(i);o&&(this._clearMessages("messagesHidden"),this._updateMessagesOption("messagesShown",n),this._setValidOption("invalidShown",null))},_VALIDATION_MODE:{FULL:1,VALIDATORS_ONLY:2,REQUIRED_VALIDATOR_ONLY:3},_VALIDATION_CONTEXT:T.validationContext,_VALIDATE_METHOD_OPTIONS:T.validateMethodOptions,_InitOptions:function(e,t){this._super(e,t)},_ComponentCreate:function(){var e=this.element,t=this._GetSavedAttributes(e);if(this._super(),this.options.messagesCustom=this.options.messagesCustom||[],this.options.messagesHidden=[],this.options.messagesShown=this.options.messagesCustom.length>0?this._cloneMessagesBeforeSet(this.options.messagesCustom):[],this._SetDisabledDom(e),t&&!this._IsCustomElement()){var i=e[0].tagName.toLowerCase();"input"!==i&&"textarea"!==i||["required","title","pattern"].forEach((function(i){i in t&&e.removeAttr(i)}))}},_AfterCreate:function(){var e,t=this;this._super(),this._refreshTheming("disabled",this.options.disabled),this.widget()[0].classList.add("oj-form-control"),this._IsTextFieldComponent()&&(this._IsCustomElement()?this._getRootElement().classList.add("oj-text-field"):this.widget()[0].classList.add("oj-text-field")),this._toggleOjHasNoValueClass(this.options.value),this.widget().uniqueId(),this._IsCustomElement()?this.options.labelledBy?this._labelledByUpdated(this.options.labelledBy):this._setAriaLabelFromLabelHint():this._createOjLabel(),(e=this.options.describedBy)&&this._describedByUpdated(null,e),this._runDeferredValidation(this._VALIDATION_CONTEXT.COMPONENT_CREATE);var i=this._GetConverter();this._converterChangedCounter=0,i instanceof Promise?(this._setBusyStateAsyncConverterLoading(),this._ResolveLabelEdgeStrategyType(),this._loadingConverter(i).then((function(){t._AfterCreateConverterCached(),t._clearBusyStateAsyncConverterLoading()}))):(this._AfterCreateConverterCached(),this._setValidOption(this._determineValidFromMessagesOptions(),null))},_ReleaseResources:function(){this._super(),this._IsCustomElement()&&(this._getComponentMessaging().releaseResources(),this._hammerIsUnregistered=!0)},_SetupResources:function(){this._super(),this._IsCustomElement()&&this._hammerIsUnregistered&&(this._getComponentMessaging().setupResources(),this._hammerIsUnregistered=!1)},_SaveAttributes:function(e){this._IsCustomElement()||this._SaveAllAttributes(e)},_RestoreAttributes:function(e){this._IsCustomElement()||this._RestoreAllAttributes(e)},_AfterSetOption:function(e,t){switch(e){case"disabled":this._AfterSetOptionDisabledReadOnly(e,T.disabledOptionOptions);break;case"displayOptions":this._initComponentMessaging();break;case"labelEdge":this._initComponentMessaging(),this._setAriaLabelFromLabelHint();break;case"labelHint":this._setAriaLabelFromLabelHint();break;case"help":this._IsCustomElement()?this._getComponentMessaging().update(this._getMessagingContent(this._MESSAGING_CONTENT_UPDATE_TYPE.TITLE)):this._Refresh(e,this.options[e]);break;case"messagesCustom":this._messagesCustomOptionChanged(t),this._setValidOption(this._determineValidFromMessagesOptions(),null);break;case"placeholder":this._SetPlaceholder(this.options.placeholder),this._placeholderOptionChanged(t);break;case"readOnly":this._retainFocusOnReadonlyChange&&setTimeout((()=>{this.GetFocusElement().focus(),this._resolveBusyStateFocusRestore&&(this._resolveBusyStateFocusRestore(),delete this._resolveBusyStateFocusRestore)}),0);break;case"title":this._IsCustomElement()||this._getComponentMessaging().update(this._getMessagingContent(this._MESSAGING_CONTENT_UPDATE_TYPE.TITLE));break;case"translations":this.refresh();break;case"userAssistanceDensity":this._initComponentMessaging();break;case"value":this._AfterSetOptionValue(e,t)}},_AfterSetOptionDisabledReadOnly:function(e,t){var i=!this.options[e];this._Refresh(e,this.options[e]),i&&this._runMixedValidationAfterSetOption(t)},_AfterSetOptionValue:function(e,t){var i,n=t?t._context:null,s=!1;n&&(s=!!n.originalEvent,i=n.doNotClearMessages||!1),s||(i||this._clearAllMessages(null),this._runDeferredValidation(this._VALIDATION_CONTEXT.VALUE_OPTION_CHANGE)),this._Refresh(e,this.options[e],!0)},_CanSetValue:function(){return!this.options.disabled},_VerifyConnectedForSetup:function(){return!0},_destroy:function(){var e,t,s=this._super();if(this._clearAllMessages(null,!0),this.widget().removeUniqueId(),this._getComponentMessaging()._isActive()&&this._getComponentMessaging().deactivate(),this.$label)for(t=this.$label.length,e=0;e<t;e++)this.$label[e]&&null!=i.__GetWidgetConstructor(this.$label[e])&&n(this.$label[e]).ojLabel("destroy");return s},GetFocusElement:function(){return!0===this.options.readOnly&&this._GetReadonlyFocusElement()||this._GetContentElement()[0]},_GetReadonlyFocusElement:function(){return this._getReadonlyDiv()},_setOption:function(e,t,i){var n,s,d,c=!1;switch(e){case"messagesHidden":case"messagesShown":case"rawValue":c=!0;break;case"describedBy":s=this.options.describedBy,d=t,this._describedByUpdated(s,d);break;case"labelledBy":t&&this._labelledByUpdated(t);break;case"readOnly":if(this._retainFocusOnReadonlyChange=a.containsFocus(this.widget()[0]),this._retainFocusOnReadonlyChange&&!this._resolveBusyStateFocusRestore){var u=this.element[0],h=r.getContext(u).getBusyContext(),p="Waiting for focus on the component ";u&&u.id&&(p+=`with id="${u.id}" `),p+="to be restored.",this._resolveBusyStateFocusRestore=h.addBusyState({description:p})}this._addRemoveOjReadOnlyClassOnLabel(document.getElementById(this.options.labelledBy),t);break;case"displayOptions":var _=t,m=null!==t&&(void 0===t.validatorHint||void 0===t.converterHint||void 0===t.messages);if(m){const e="use"===(o.parseJSONFromFontFamily("oj-form-control-option-defaults")||{}).useUserAssistanceOptionDefault?E:A;void 0===t.validatorHint&&(_.validatorHint=e.VALIDATOR_HINT),void 0===t.converterHint&&(_.converterHint=e.CONVERTER_HINT),void 0===t.messages&&(_.messages=e.MESSAGES)}}return c?(l.error(e+" option cannot be set"),this):(n=this._superApply(arguments),this._AfterSetOption(e,i),n)},_GetContentElement:function(){return this.element},_GetLabelElement:function(){if(this._IsCustomElement())return null;var e;if(this.$label)return this.$label;if(T.hasNoLabelFlag(this.widget()))return null;var t=this._getAriaLabelledByElement(this.element);if(null!==t&&0!==t.length)return t;var i=this.element[0].id;return void 0!==i&&0!==(t=n("label[for='"+i+"']")).length||0!==(e=this.element.closest("[aria-labelledby]")).length&&null!==(t=this._getAriaLabelledByElement(e))&&0!==t.length?t:null},_GetElementValue:function(){return this.element.val()},_GetMessagingLauncherElement:function(){return this._GetContentElement()},_GetMessagingPositionElement:function(){return this._GetFormControlContainer()||this._GetMessagingLauncherElement()[0]},_GetConverter:function(){return null},_GetImplicitValidators:function(){return this._implicitSyncValidators||(this._implicitSyncValidators={}),this._implicitSyncValidators},_GetDisplayValue:function(e){return this._GetContentElement().val()},_GetNormalizedValidatorsFromOption:function(){return[]},_GetNormalizedAsyncValidatorsFromOption:function(){return[]},_GetAllValidatorsFromValidatorsOptionAndImplicit:function(){var e,t,i,n,s=[];if(!this._allValidators){t=this._GetImplicitValidators(),i=[];var o,a=Object.keys(t),r=a.length;if(r>0){for(e=0;e<r;e++)o=a[e],i.push(t[o]);s=s.concat(i)}(n=this._GetNormalizedValidatorsFromOption()).length>0&&n.forEach((function(e){s.push(e)})),this._allValidators=s}return this._allValidators},_ResetAllValidators:function(){this._allValidators&&(this._allValidators.length=0),this._allValidators=null,this._IsCustomElement()?this._updateValidatorMessagingHint():this._getComponentMessaging().update(this._getValidatorHintsMC())},_GetAriaLabelElement:function(){return this._getRootElement()},_addRemoveOjReadOnlyClassOnLabel:function(e,t){if(e&&void 0!==t){const i="oj-read-only";t?e.classList.add(i):e.classList.remove(i)}},_setAriaLabelFromLabelHint:function(){if(this._IsCustomElement()){var e=this._GetAriaLabelElement(),t=e.getAttribute("aria-label");let i=this._getReadonlyDiv();this.options.labelledBy||!this.options.labelHint||"none"!==this.options.labelEdge||t&&t!==this._ariaLabelFromHint||this._getRootElement().getAttribute("aria-labelledby")?this._ariaLabelFromHint&&this._ariaLabelFromHint===t?(e.removeAttribute("aria-label"),i&&i.removeAttribute("aria-label")):t?i&&i.setAttribute("aria-label",t):i&&i.removeAttribute("aria-label"):(e.setAttribute("aria-label",this.options.labelHint),i&&i.setAttribute("aria-label",this.options.labelHint),this._ariaLabelFromHint=this.options.labelHint)}},_getAllAsyncValidatorsWithHint:function(){var e,t,i=this._GetNormalizedAsyncValidatorsFromOption(),n=[];if(this._IsRequired()&&"hint"in(t=this._getImplicitRequiredValidator())&&n.push(t),i.length>0)for(e=0;e<i.length;e++)"hint"in(t=i[e])&&n.push(t);var s=this._GetAllValidatorsFromValidatorsOptionAndImplicit();if(s.length>0)for(e=0;e<s.length;e++)"hint"in(t=s[e])&&n.push(t);return n},_initAsyncValidatorMessagingHint:function(){var e,t,i=this._getAllAsyncValidatorsWithHint(),n=this;this._asyncValidatorHintCounter=0,i.length>0&&(t=this._getValidatorHintsMC(),e=this._asyncValidatorHintCounter,this._setBusyStateAsyncValidatorHint(e),this._addAsyncValidatorsHintsMessagingContent(i,t).then((function(){n._clearBusyStateAsyncValidatorHint(e)})))},_getValidatorHintsMC:function(){return this._getMessagingContent(this._MESSAGING_CONTENT_UPDATE_TYPE.VALIDATOR_HINTS)},_updateValidatorMessagingHint:function(){var e,t=this._getAllAsyncValidatorsWithHint(),i=this._getComponentMessaging(),n=this,s=this._getValidatorHintsMC();t.length>0?(this._asyncValidatorHintCounter+=1,e=this._asyncValidatorHintCounter,this._setBusyStateAsyncValidatorHint(e),this._addAsyncValidatorsHintsMessagingContent(t,s).then((function(){n._clearBusyStateAsyncValidatorHint(e)}))):i.update(s)},_addAsyncValidatorsHintsMessagingContent:function(e,t){var i,n=this._asyncValidatorHintCounter,s=this._getComponentMessaging(),o=[],a=this,r=[];for(i=0;i<e.length;i++)r.push(e[i].hint);function l(e){return e.then((function(e){var i,r={};return a._asyncValidatorHintCounter===n?(null!==e&&(o.push(e),r.validatorHint=t.validatorHint.concat(o),s.update(r)),i="resolved"):i="ignore",{v:e,status:i}}),(function(e){return{e:e,status:"rejected"}}))}return new Promise((function(e){Promise.all(r.map(l)).then((function(){e(o)}))}))},_IsRequired:function(){return!1},_HandleChangeEvent:function(e){var t=this._GetDisplayValue();this._SetValue(t,e)},_SetRawValue:function(e,t){var i={};i._context={originalEvent:t,writeback:!0,internalSet:!0,readOnly:!0},this._CompareOptionValues("rawValue",this.options.rawValue,e)||this.option("rawValue",e,i)},_IsValueEmpty:function(e){return null==e||("string"==typeof e?t.StringUtils.isEmptyOrUndefined(e):"number"==typeof e?isNaN(e):!!Array.isArray(e)&&(0===e.length||1===e.length&&(null===e[0]||void 0===e[0])))},_toggleOjHasNoValueClass:function(e){let t=this._getRootElement();const i=t.classList.contains("oj-has-no-value"),n=this._IsValueEmpty(e),s=n&&!i,o=!n&&i;s?t.classList.add("oj-has-no-value"):o&&t.classList.remove("oj-has-no-value"),this.options.required&&(s||o)&&this._getComponentMessaging().update({hasNoValueToggled:!0})},_Refresh:function(e,t,i){var n,s;switch(e){case"converter":var o=this.options.value;this._refreshComponentDisplayValue(o,i);break;case"disabled":this._refreshTheming("disabled",this.options.disabled);break;case"help":if(!this._IsCustomElement()&&this.$label){n=this.options.help.definition,s=this.options.help.source,this.$label.ojLabel("option","help",{definition:n,source:s});var a=this.$label[0];if(a){let e=a.id;if(e){let t=e+"_helpIcon";null!=s||null!=n?this._describedByUpdated(null,t):this._describedByUpdated(t,null)}}}break;case"value":this._refreshComponentDisplayValue(t,i)}},_NotifyHidden:function(){this._superApply(arguments),this._getComponentMessaging().close()},_NotifyDetached:function(){this._superApply(arguments),this._getComponentMessaging().close()},_ResetComponentState:function(){this.$label&&this.$label.ojLabel("refresh"),this._implicitReqValidator=null,this._converter=null,this._ResetAllValidators()},_SetDisplayValue:function(e){var t=this._GetContentElement();t.val()!==e&&t.val(e)},_SetDisabledDom:function(e){"boolean"==typeof this.options.disabled&&(e[0].disabled=this.options.disabled)},_SetPlaceholder:function(e){var t=this._GetContentElement()[0];t&&(null==e?t.removeAttribute("placeholder"):t.setAttribute("placeholder",e))},_SetPlaceholderOption:function(e){this.options.placeholder=e},_HasPlaceholderSet:function(){return this.options.placeholder},_ClearPlaceholder:function(){this._SetPlaceholderOption(""),this._SetPlaceholder("")},_SetValue:function(e,t,i){var n,s,o,a=!i||"boolean"!=typeof i.doValueChangeCheck||i.doValueChangeCheck,r=this,d=!1;return this._toggleOjHasNoValueClass(e),void 0===e?(l.warn("Attempt to set a value of undefined"),!1):(a&&e===r._getLastDisplayValue()||(n=e+"_"+(this._asyncValidatorValidateCounter+1),(s=this._AsyncValidate(e,t,i,n))instanceof Promise?d=s.then((function(e){return o=e,r._afterAsyncValidateUpdateValue(e,t,i)})).then((function(){return r._clearBusyState(n),void 0!==o})):(this._afterAsyncValidateUpdateValue(s,t,i),d=void 0!==s)),d)},_ParseValueShowErrors:function(e,t){var i;this._clearAllMessages(t);try{return this._parseValue(e,t)}catch(e){i=this._processValidationErrors(e),this._updateMessagesOption("messagesShown",i,t),this._setValidOption("invalidShown",t)}},_AsyncValidate:function(e,t,i,n){var s,o,a,r=i&&i.validationMode?i.validationMode:this._VALIDATION_MODE.FULL,d=i&&i.validationContext?i.validationContext:this._VALIDATION_CONTEXT.USER_ACTION,c=i&&i.doNotClearMessages||!1;if(void 0!==e){if(this._CanSetValue()){c||this._clearAllMessages(t);try{return this._asyncValidatorValidateCounter+=1,r===this._VALIDATION_MODE.FULL?(this._setLastDisplayValue(e),o=this._parseValue(e,t,!0)):o=e,(a=this._asyncValidateValue(o,t,d))instanceof Promise?(this._setBusyState(n),a.then((function(e){if("valid"===e)return o}))):a}catch(e){s=this._processValidationErrors(e,d),this._updateMessagesOption("messagesShown",s,t),this._setValidOption("invalidShown",t)}}return a}l.warn("Attempt to set a value of undefined")},_afterAsyncValidateUpdateValue:function(e,t,i){var n,s=!1;return void 0!==e&&(i&&!0===i.doNotClearMessages?this.isValid()||!this._hasInvalidComponentMessagesShowing():this.isValid())&&(i&&i._context&&(n=i._context),this._updateValueOption(e,t,i&&i.validationContext,n,i),s=!0),s},_CompareOptionValues:function(e,i,n){return"value"===e||"rawValue"===e?t.Object.compareValues(i,n):0===e.indexOf("messages")?this._messagesEquals(i,n):this._superApply(arguments)},_GetDefaultStyleClass:function(){return t.Assert.failedInAbstractFunction(),""},_MESSAGING_CONTENT_UPDATE_TYPE:{INIT:1,VALIDITY_STATE:2,CONVERTER_HINT:3,VALIDATOR_HINTS:4,TITLE:5},_OPTION_TO_CSS_MAPPING:{disabled:"oj-disabled",required:"oj-required"},_clearAllMessages:function(e,t){t?(this.options.messagesHidden=[],this.options.messagesShown=[],this.options.messagesCustom=[]):(this._clearMessages("messagesHidden",e),this._clearMessages("messagesShown",e),this._clearMessages("messagesCustom",e))},_clearComponentMessages:function(){var e,t=this.options.messagesShown;e=t.length,this._clearMessages("messagesHidden");for(var i=e-1;i>=0;i--)t[i]instanceof h.ComponentMessage&&t.splice(i,1);t.length!==e&&this._setMessagesOption("messagesShown",t,null,!0)},_setMessagesOption:function(e,t,i,n){var s={},o=0===t.length&&0===this.options[e].length;!n&&o||(s._context={originalEvent:i,writeback:!0,internalSet:!0},"messagesCustom"!==e&&(s._context.readOnly=!0),s.changed=n||!o,this._resetValid(),this.option(e,t,s),this._updateMessagingContent())},_setValidOption:function(e,t){var i={};"pending"===e&&"valid"!==this._determineValidFromMessagesOptions()||e!==this.options.valid&&(i._context={originalEvent:t,writeback:!0,internalSet:!0,readOnly:!0},this.option("valid",e,i))},_clearMessages:function(e,t){this._setMessagesOption(e,[],t)},_cloneMessagesBeforeSet:function(e){var t,i,n,s=[];if(e&&e.length>0)for(t=0;t<e.length;t++)n=e[t],i=new h(n.summary,n.detail,n.severity),i=Object.freeze?Object.freeze(i):i,s.push(i);return s},_createOjLabel:function(){var e,t;this._IsCustomElement()||(this.$label=this._GetLabelElement(),this.$label&&(e=this.options.help.definition,t=this.options.help.source,this.$label.ojLabel({rootAttributes:{class:this._GetDefaultStyleClass()+"-label"},help:{definition:e,source:t}}),this._createDescribedByForLabel()))},_createDescribedByForLabel:function(){var e,t=this.options.help.definition;if(null!=this.options.help.source||null!=t){var i=this.$label[0];i&&(e=i.id),e&&this._describedByUpdated(null,e+"_helpIcon")}},_doRefresh:function(){var e,t=!1;this._ResetComponentState(),this._initComponentMessaging(),this._Refresh("disabled",this.options.disabled),this._hasInvalidMessagesShowing()&&(t=!0),this._clearComponentMessages(),t?(e=this._GetDisplayValue(),this._SetValue(e,null,T.refreshMethodOptions)):(this._IsRequired()&&this._runDeferredValidation(T.refreshMethodOptions.validationContext),this._Refresh("value",this.options.value,!0))},_getLastModelValue:function(){return this._oj_lastModelValue},_getLastDisplayValue:function(){return void 0===this._oj_lastElementValue&&(this._oj_lastElementValue=""),this._oj_lastElementValue},_getAriaLabelledByElement:function(e){if(this._IsCustomElement())return null;var t=e[0].getAttribute("aria-labelledby");return void 0!==t?n("label[id='"+t+"']"):null},_getMessages:function(){var e=[];return this.options.messagesShown&&(e=e.concat(this.options.messagesShown)),this.options.messagesHidden&&(e=e.concat(this.options.messagesHidden)),e},_getLabelText:function(){if(this.$label)return this.$label[0].textContent;var e=T._getCustomOjLabelElements(this.options.labelledBy),t=null;if(e)for(var i=0;i<e.length;i++)i>0&&(t+=" "),t=e[i].textContent;return t},_getValidityState:function(){return this._validityState||(this._validityState=new t.ComponentValidity(this.isValid(),this._getMessages())),this._validityState},_hasValidityState:function(){return!!this._validityState},_hasInvalidMessages:function(){return!h.isValid(this._getMessages())},_hasInvalidMessagesShowing:function(){return!this.isValid()&&this.options.messagesShown.length>0},_hasInvalidComponentMessagesShowing:function(){for(var e,t,i=this.options.messagesShown,n=0;n<i.length;n++)(t=i[n])instanceof h.ComponentMessage&&t._isMessageAddedByComponent()&&(e=e||[]).push(t);return void 0!==e&&!h.isValid(e)},_initComponentMessaging:function(){var e=this._getComponentMessaging(),t=this._GetMessagingLauncherElement(),i=this._GetContentElement(),n=this._getMessagingContent(this._MESSAGING_CONTENT_UPDATE_TYPE.INIT);this._customPlaceholderSet||this._ClearPlaceholder(),e.activate(t,i,n),this._asyncValidatorValidateCounter=0},_messagesCustomOptionChanged:function(e){var t,i,n=e?e._context:null,s=this.options.messagesCustom,o=this.options.messagesShown,a=[];for(t=0;t<o.length;t++)(i=o[t])instanceof h.ComponentMessage&&i._isMessageAddedByComponent()&&a.push(i);for(t=0;t<s.length;t++)a.push(s[t]);this._setMessagesOption("messagesShown",a,n?n.originalEvent:null,e&&e.changed)},_placeholderOptionChanged:function(e){"displayOptions"===this._getResolvedUserAssistance()&&((e&&e._context||{}).internalMessagingSet?this._customPlaceholderSet=!1:(this._customPlaceholderSet=!0,this._GetConverter()&&this._initComponentMessaging()))},_setLastModelValue:function(e){this._oj_lastModelValue=e},_setLastDisplayValue:function(e){this._oj_lastElementValue=e},_updateMessagesOption:function(e,t,i){var n,s,o;if("object"==typeof t&&Array.isArray(t))for(o=this.options[e],s=t.length,n=0;n<s;n++)o.push(t[n]);this._setMessagesOption(e,o,i,!0)},_updateMessagingContent:function(){this._getComponentMessaging().update(this._getMessagingContent(this._MESSAGING_CONTENT_UPDATE_TYPE.VALIDITY_STATE))},_updateValueOption:function(e,t,i,n,s){var o,a,r=n||{};switch(t&&(r.originalEvent=t),i){case this._VALIDATION_CONTEXT.CONVERTER_OPTION_CHANGE:case this._VALIDATION_CONTEXT.DISABLED_OPTION_CHANGE:case this._VALIDATION_CONTEXT.READONLY_OPTION_CHANGE:case this._VALIDATION_CONTEXT.REFRESH_METHOD:case this._VALIDATION_CONTEXT.REQUIRED_OPTION_CHANGE:case this._VALIDATION_CONTEXT.VALIDATE_METHOD:case this._VALIDATION_CONTEXT.VALIDATORS_OPTION_CHANGE:r.writeback=!0,r.doNotClearMessages=!0}if(r.internalSet=!0,s&&s.targetOptions){o={},a=!1;for(var l=0;l<s.targetOptions.length;l++)o[s.targetOptions[l]]=e,a=a||"value"===s.targetOptions[l]}else o={value:e},a=!0;this.option(o,{_context:r}),a&&this._AfterSetOptionValue("value",{_context:r})},_resetValid:function(){this._valid=void 0},_determineValidFromMessagesOptions:function(){var e=this.options.messagesHidden,t=this.options.messagesShown,i="valid";return t&&0!==t.length&&!h.isValid(t)?i="invalidShown":e&&0!==e.length&&!h.isValid(e)&&(i="invalidHidden"),i},_formatValue:function(e){var t=e,i=this._GetConverter();return i&&"object"==typeof i&&i.format&&"function"==typeof i.format&&(t=i.format(e)),t},_getComponentMessaging:function(){return this._componentMessaging||(this._componentMessaging=new t.ComponentMessaging(this)),this._componentMessaging},_getHintsFromAllValidatorsWithGetHintFunction:function(e){var t,i,n=[],s="";for(this._IsRequired()&&(i=this._getImplicitRequiredValidator()).getHint&&"function"==typeof i.getHint&&(s=i.getHint())&&n.push(s),t=0;t<e.length;t++)s="","object"==typeof(i=e[t])&&i.getHint&&"function"==typeof i.getHint&&(s=i.getHint())&&n.push(s);return n},_getImplicitRequiredValidator:function(){var e,t={};return null==this._implicitReqValidator&&(e={hint:(t=this.options.translations&&this.options.translations.required||{}).hint||null,label:this._getLabelText(),messageSummary:t.messageSummary||null,messageDetail:t.messageDetail||null},this._implicitReqValidator=new d(e)),this._implicitReqValidator},_getResolvedUserAssistance:function(){let e=o.parseJSONFromFontFamily("oj-form-control-option-defaults");return e&&"use"===e.useUserAssistanceOptionDefault?this.options.userAssistanceDensity:"displayOptions"},_showUserAssistanceNotInline:function(){let e=this._getResolvedUserAssistance();return"compact"===e||"displayOptions"===e},_getMessagingContent:function(e){var t,i,n={},s="";if((e=e||this._MESSAGING_CONTENT_UPDATE_TYPE.VALIDITY_STATE)!==this._MESSAGING_CONTENT_UPDATE_TYPE.INIT&&e!==this._MESSAGING_CONTENT_UPDATE_TYPE.VALIDITY_STATE||(n.validityState=this._getMessagingContentValidityState()),e!==this._MESSAGING_CONTENT_UPDATE_TYPE.INIT&&e!==this._MESSAGING_CONTENT_UPDATE_TYPE.CONVERTER_HINT||((i=this._GetConverter())&&"object"==typeof i&&i.getHint&&"function"==typeof i.getHint&&(s=i.getHint()||""),n.converterHint=s),e===this._MESSAGING_CONTENT_UPDATE_TYPE.VALIDATOR_HINTS){t=this._GetAllValidatorsFromValidatorsOptionAndImplicit();let e=this._getHintsFromAllValidatorsWithGetHintFunction(t)||[];n.validatorHint=e}if(e===this._MESSAGING_CONTENT_UPDATE_TYPE.INIT||e===this._MESSAGING_CONTENT_UPDATE_TYPE.TITLE){var o;if(this._IsCustomElement()){var a=this.options.help;null!=a&&(o=a.instruction)}else o=this.options.title;n.title=o||""}return n},_getMessagingContentValidityState:function(){let e;return this._hasValidityState()?(e=this._getValidityState(),e.update(this.isValid(),this._getMessages())):e=this._getValidityState(),e},_messagesEquals:function(e,t){var i,s=-1,o=!0,a=n.extend([],e),r=n.extend([],t);return a.length===r.length&&(a.forEach((function(e){e instanceof h?i=e:(i=new h(e.summary,e.detail,e.severity),i=Object.freeze?Object.freeze(i):i),s=-1,r.forEach((function(e,t){h.getSeverityLevel(i.severity)===h.getSeverityLevel(e.severity)&&i.summary===e.summary&&i.detail===e.detail&&(s=t)})),s>-1?r.splice(s,1):o=!1})),o)},_parseValue:function(e,t,i){var n=this._GetConverter(),s=e;if(n&&"object"==typeof n&&n.parse&&"function"==typeof n.parse)try{i&&this._setValidOption("pending",t),s=n.parse(e)}catch(e){throw e}return s},_addValidationError:function(e,t){var i,n,s,o;e instanceof _.ConverterError||e instanceof _.ValidatorError?(n=(s=e.getMessage()).severity||h.SEVERITY_LEVEL.ERROR,o=s.summary||u.getTranslatedString("oj-message.error"),i=s.detail||u.getTranslatedString("oj-converter.detail")):e.summary||e.detail?(n=h.SEVERITY_LEVEL.ERROR,o=e.summary||u.getTranslatedString("oj-message.error"),i=e.detail||u.getTranslatedString("oj-converter.detail")):(n=h.SEVERITY_LEVEL.ERROR,o=u.getTranslatedString("oj-message.error"),i=e.message||u.getTranslatedString("oj-converter.detail")),t.push({summary:o,detail:i,severity:n})},_processValidationErrors:function(e,t,i){var n,s=[],o=e._messages||[],a={};a.context=t||0,a.display=i||h.ComponentMessage.DISPLAY.SHOWN,0===o.length&&this._addValidationError(e,o);for(var r=0;r<o.length;r++)n=o[r],s.push(this._createComponentMessage(n.summary,n.detail,n.severity,a));return s||null},_createComponentMessage:function(e,t,i,n){var s;return s=new h.ComponentMessage(e,t,i,n),Object.seal?Object.seal(s):s},_refreshComponentDisplayValue:function(e,t){var i;return this._toggleOjHasNoValueClass(e),(t||e!==this._getLastModelValue())&&(i=this._UpdateElementDisplayValue(e)),i},_refreshTheming:function(e,t){-1!==Object.keys(this._OPTION_TO_CSS_MAPPING).indexOf(e)&&(t?this.widget()[0].classList.add(this._OPTION_TO_CSS_MAPPING[e]):this.widget()[0].classList.remove(this._OPTION_TO_CSS_MAPPING[e]))},_runDeferredValidation:function(e){var t=this;if(this._CanSetValue()){if(!this._resolveBusyStateDeferredValidation){var i=this.element[0],n=r.getContext(i).getBusyContext(),s="The page is waiting for async deferred validation ";i&&i.id&&(s+='for "'+i.id+'" '),s+="to finish.",this._resolveBusyStateDeferredValidation=n.addBusyState({description:s})}var o=this._validateValueForRequiredOnly(this.options.value,e);if(!(o instanceof Promise))return this._setValidOption(this._determineValidFromMessagesOptions(),null),void(this._resolveBusyStateDeferredValidation&&(this._resolveBusyStateDeferredValidation(),delete this._resolveBusyStateDeferredValidation));o.then((function(){t._resolveBusyStateDeferredValidation&&(t._resolveBusyStateDeferredValidation(),delete t._resolveBusyStateDeferredValidation),t._setValidOption(t._determineValidFromMessagesOptions(),null)}))}this._setValidOption(this._determineValidFromMessagesOptions(),null)},_runMixedValidationAfterSetOption:function(e){var t,i=!1;this._hasInvalidMessagesShowing()&&(i=!0),this._clearComponentMessages(),i&&(t=this._GetDisplayValue(),this._SetValue(t,null,e)),!i&&this._IsRequired()?this._runDeferredValidation(e.validationContext):this._setValidOption(this._determineValidFromMessagesOptions(),null)},_UpdateElementDisplayValue:function(e,t){var i,n;i=e;try{i=this._formatValue(e);try{this._setLastModelValue(e),this._afterConverterFormat(i)}catch(e){throw e}n=i}catch(s){t||this._afterConverterFormatFailure(s),this._setLastModelValue(e),this._afterConverterFormat(i),n=void 0}return n},_SetLoading:function(){var e=this.widget()[0],t=this.GetFocusElement();e.classList.add("oj-loading"),this._saveAriaLabel=t.getAttribute("aria-label");var i=u.getTranslatedString("oj-ojEditableValue.loading");t.setAttribute("aria-label",i)},_ClearLoading:function(){var e=this.widget()[0],t=this.GetFocusElement();e.classList.remove("oj-loading"),this._saveAriaLabel?t.setAttribute("aria-label",this._saveAriaLabel):t.removeAttribute("aria-label")},_UseReadonlyDiv:function(){return"div"===o.parseJSONFromFontFamily("oj-form-control-option-defaults").readonlyElem},_ShowHelpHints:function(){return this._IsTextFieldComponent()?"focus":"always"},_ShowHelpHintsLocation:function(){return"inline"},_afterConverterFormat:function(e){var t;this._SetDisplayValue(e),t=this._GetDisplayValue(),this._setLastDisplayValue(t),this._SetRawValue(t,null)},_afterConverterFormatFailure:function(e){var t;t=this._processValidationErrors(e),this._updateMessagesOption("messagesShown",t),this._setValidOption("invalidShown",null)},_loadingConverter:function(e){var t=this,i=T._getShowLoadingDelay(),n=this._converterChangedCounter,s=setTimeout((function(){n===t._converterChangedCounter&&t._SetLoading()}),i);return e.then((function(e){return t._ClearLoading(),clearTimeout(s),e}))},_validateValueForRequiredOnly:function(e,i){var n,s,o=this;if(this._IsRequired()){s=this._getImplicitRequiredValidator();try{this._setValidOption("pending",null);var a=s.validate(t.StringUtils.trim(e));if(a instanceof Promise)return a.then((function(){}),(function(e){(n=o._processValidationErrors(e,i,h.ComponentMessage.DISPLAY.HIDDEN))&&o._updateMessagesOption("messagesHidden",n)}))}catch(e){(n=this._processValidationErrors(e,i,h.ComponentMessage.DISPLAY.HIDDEN))&&this._updateMessagesOption("messagesHidden",n)}}return null},_asyncValidateValue:function(e,i,n){var s,o,a,r,l,d=this._GetNormalizedAsyncValidatorsFromOption(),c=this._GetAllValidatorsFromValidatorsOptionAndImplicit(),u=!1,h=this,p=[],_=this._asyncValidatorValidateCounter,m=[],f=this._IsRequired();if(f&&(r=this._getImplicitRequiredValidator()),(f||d.length>0||c.length>0)&&this._setValidOption("pending",i),r)try{var g=r.validate(t.StringUtils.trim(e));g&&m.push(g)}catch(e){this._addValidationError(e,p),this._setValidOption("invalidShown",i),u=!0}for(s=0;s<d.length;s++){try{l=d[s].validate(e)}catch(e){l=Promise.reject(e)}l instanceof Promise||(l=Promise.resolve(l)),m.push(l)}for(s=0;s<c.length;s++)try{(l=c[s].validate(e))instanceof Promise&&m.push(l)}catch(e){this._addValidationError(e,p),this._setValidOption("invalidShown",i),u=!0}if(p.length>0){let e=new Error;e._messages=p,a=this._processValidationErrors(e,n),this._updateMessagesOption("messagesShown",a,i)}function b(e){return e.then((function(e){return{v:e,status:h._asyncValidatorValidateCounter===_?"resolved":"ignore"}}),(function(e){var t;return h._asyncValidatorValidateCounter===_?(a=h._processValidationErrors(e,n),h._updateMessagesOption("messagesShown",a,i),u||(h._setValidOption("invalidShown",i),u=!0),t="rejected"):t="ignore",{e:e,status:t}}))}return m.length>0?new Promise((function(e){Promise.all(m.map(b)).then((function(t){t.filter((function(e){return"ignore"===e.status})).length>0?o="ignoreValidation":(o=u?"invalidShown":"valid",h._setValidOption(h._determineValidFromMessagesOptions(),i)),e(o)}))})):(0===p.length&&this._setValidOption(h._determineValidFromMessagesOptions(),i),0===p.length?e:void 0)},_labelledByUpdated:function(e){var t=T._getCustomOjLabelElements(e);if(t)for(let e=0;e<t.length;e++){var i=t[e];i.classList.add(this._GetDefaultStyleClass()+"-label"),void 0===this.widget().attr("data-oj-internal")&&void 0!==this.options.readOnly&&this._addRemoveOjReadOnlyClassOnLabel(i,this.options.readOnly)}},_describedByUpdated:c._describedByUpdated,_setBusyState:T._SetBusyState,_clearBusyState:T._ClearBusyState,_setBusyStateAsyncValidatorHint:T._SetBusyStateAsyncValidatorHint,_clearBusyStateAsyncValidatorHint:T._ClearBusyStateAsyncValidatorHint,_setBusyStateAsyncConverterLoading:T._SetBusyStateAsyncConverterLoading,_clearBusyStateAsyncConverterLoading:T._ClearBusyStateAsyncConverterLoading,_AfterCreateConverterCached:T._AfterCreateConverterCached,_getReadonlyDiv:T._getReadonlyDiv,_createOrUpdateReadonlyDiv:T._createOrUpdateReadonlyDiv,_createReadonlyDiv:T._createReadonlyDiv,_setReadonlyDivLabelledBy:T._setReadonlyDivLabelledBy,_GetFormControlContainer:function(){if(this._IsCustomElement()){var e="."+[this._GetComponentManagedBaseLabelStyleClass(),"container"].join("-");return this._getRootElement().querySelector(e)}},_IsTextFieldComponent:function(){return!1},_GetComponentManagedBaseLabelStyleClass:function(){return this._IsTextFieldComponent()?"oj-text-field":"oj-form-control"},_CreateMiddleWrapper:function(){var e=document.createElement("div");return e.className="oj-text-field-middle",e},_ResolveLabelEdgeStrategyType:function(){var e=this.options.labelEdge;return this._IsCustomElement()&&"inside"===e&&(this._IsTextFieldComponent()||(e=t.ComponentMessaging._STRATEGY_TYPE.LABEL_EDGE_INSIDE_FORM_CNTRL)),e}},!0),i.setDefaultOptions({editableValue:{displayOptions:i.createDynamicPropertyGetter((function(e){var t;return(t="use"===(o.parseJSONFromFontFamily("oj-form-control-option-defaults")||{}).useUserAssistanceOptionDefault?{messages:E.MESSAGES,converterHint:E.CONVERTER_HINT,validatorHint:E.VALIDATOR_HINT}:{messages:e.containers.indexOf("ojDataGrid")>=0||e.containers.indexOf("ojTable")>=0?["notewindow"]:A.MESSAGES,converterHint:A.CONVERTER_HINT,validatorHint:A.VALIDATOR_HINT})[e.isCustomElement?"helpInstruction":"title"]=["notewindow"],t})),help:i.createDynamicPropertyGetter((function(e){return e.isCustomElement?{instruction:""}:{definition:null,source:null}})),labelEdge:i.createDynamicPropertyGetter((function(e){if(e.isCustomElement)return(o.parseJSONFromFontFamily("oj-form-control-option-defaults")||{}).labelEdge})),userAssistanceDensity:i.createDynamicPropertyGetter((function(e){return e.containers.indexOf("ojDataGrid")>=0||e.containers.indexOf("ojTable")>=0?"compact":"reflow"}))}});const y=function(e){this.Init(e)},S={},I={};t.ComponentMessaging.registerMessagingStrategy(t.ComponentMessaging._STRATEGY_TYPE.NOTEWINDOW,y),t.Object.createSubclass(y,t.MessagingStrategy,"oj.PopupMessagingStrategy"),y._DEFAULTS_BY_COMPONENT={ojRadioset:{position:"launcher",events:{open:"focusin mouseenter press",close:"mouseleave"}},ojCheckboxset:{position:"launcher",events:{open:"focusin mouseenter press",close:"mouseleave"}},ojInputText:{position:"launcher",events:{open:"focusin"}},ojTextArea:{position:"launcher",events:{open:"focusin"}},ojInputPassword:{position:"launcher",events:{open:"focusin"}},ojSwitch:{position:"launcher",events:{open:"focusin mouseenter",close:"mouseleave"}},ojSlider:{position:"launcher",events:{open:"focusin mouseenter",close:"mouseleave"}},ojColorSpectrum:{position:"launcher",events:{open:"focusin mouseenter",close:"mouseleave"}},ojColorPalette:{position:"launcher",events:{open:"focusin mouseenter",close:"mouseleave"}},default:{position:"launcher-wrapper",events:{open:"focusin"}}},y._SELECTOR_FORMCONTROL_HINT="oj-form-control-hint",y._SELECTOR_FORMCONTROL_HINT_CONVERTER="oj-form-control-hint-converter",y._SELECTOR_FORMCONTROL_HINT_VALIDATOR="oj-form-control-hint-validator",y._SELECTOR_FORMCONTROL_HINT_TITLE="oj-form-control-hint-title",y._OPEN_NAMESPACE=".ojPopupMessagingOpen",y._CLOSE_NAMESPACE=".ojPopupMessagingClose",y.prototype.activate=function(e){y.superclass.activate.call(this,e),this._initMessagingPopup()},y.prototype.reactivate=function(e){y.superclass.reactivate.call(this,e),this._updatePopupIfOpenOrComponentHasFocus()},y.prototype.update=function(){y.superclass.update.call(this),this._updatePopupIfOpenOrComponentHasFocus()},y.prototype.deactivate=function(){this._unregisterLauncherEvents(),this._destroyTooltip(),y.superclass.deactivate.call(this)},y.prototype.close=function(){this._closePopup()},y.prototype._closePopup=function(){this._queueAction(function(e){if(this._isPopupInitialized())return e&&this._setActionResolver(this.$messagingContentRoot,"close",e),void this.$messagingContentRoot.ojPopup("close");e&&e(!0)}.bind(this))},y.prototype._initMessagingPopup=function(){this._openPopupCallback||this._registerLauncherEvents()},y.prototype._addAnimateEventListeners=function(e){var t=function(e,t,i){var n=this.GetComponent();n&&n._trigger&&(t.stopPropagation(),n._trigger(e,null,i)||t.preventDefault())};e.on("ojanimatestart.notewindow",t.bind(this,"animateStart")),e.on("ojanimateend.notewindow",t.bind(this,"animateEnd"))},y.prototype._removeAnimateEventListeners=function(e){e.off("ojanimatestart.notewindow"),e.off("ojanimateend.notewindow")},y.prototype._setBusyState=function(e){var t=this.GetComponent(),i=t?t.element:null,n=i?i[0]:null,s=r.getContext(n).getBusyContext(),o="The page is waiting for note window ";return n&&n.id&&(o+='for "'+n.id+'" '),o+="to "+e,s.addBusyState({description:o})},y.prototype._setActionResolver=function(e,t,i){var n;this._actionCount>1&&(n=e.ojPopup("option","animation"),e.ojPopup("option","animation",null));var s=this._setBusyState(t);e.one("oj"+t,(function(){n&&e.ojPopup("option","animation",n),s(),i(!0)}))},y.prototype._queueAction=function(e){if(this.GetComponent()._IsCustomElement()){var t=this,i=function(e){var i=new Promise(e);return i.then((function(){t._actionCount-=1})),i};this._actionCount?(this._actionCount+=1,this._actionPromise=this._actionPromise.then((function(){return i(e)}))):(this._actionCount=1,this._actionPromise=i(e))}else e(null)},y.prototype._openPopup=function(e){this._queueAction(function(i){var s,o,a;if(this._canOpenPopup()&&(o=this._buildPopupHtml(),!t.StringUtils.isEmptyOrUndefined(o))){var r=this._getPopupElement(),l=r.ojPopup("isOpen");if((s=S.getPopupContentNode(r)).innerHTML="",s.innerHTML=o,!l){a=this.GetLauncher();const t=n(this.GetComponent()._GetMessagingPositionElement());return e&&"press"===e.type&&this._openPopupOnPressEvent(a),i&&this._setActionResolver(r,"open",i),void r.ojPopup("open",a,{of:t})}l&&r.ojPopup("refresh")}i&&i(!0)}.bind(this))},y.prototype._openPopupOnPressEvent=function(e){this._inPressEvent=!0,e[0].addEventListener("click",this._eatChangeAndClickOnPress,!0),e[0].addEventListener("change",this._eatChangeAndClickOnPress,!0),e.one("touchend",(function(){setTimeout((function(){this._inPressEvent=!1}),50)}))},y.prototype._eatChangeAndClickOnPress=function(e){this._inPressEvent&&(e.preventDefault(),e.stopPropagation(),"click"===e.type&&(this._inPressEvent=!1))},y.prototype._canOpenPopup=function(){var e=this.GetComponent().options,t=e.disabled||!1,i=e.readOnly||!1;return!(t||i)},y.prototype._updatePopupIfOpenOrComponentHasFocus=function(){var e,t,i,n;null!=this.GetLauncher()&&(i=this.GetLauncher()[0].contains(document.activeElement),this._isPopupInitialized()?(n=this._getPopupElement()).ojPopup("isOpen")&&((e=this._buildPopupHtml())?((t=S.getPopupContentNode(n)).innerHTML="",t.innerHTML=e,n.ojPopup("refresh")):n.ojPopup("close")):i&&(e=this._buildPopupHtml())&&this._openPopup(void 0))},y.prototype._unregisterLauncherEvents=function(){var e=this.GetLauncher();e.off(y._OPEN_NAMESPACE),e.off(y._CLOSE_NAMESPACE),e[0].removeEventListener("click",this._eatChangeAndClickOnPress,!0),e[0].removeEventListener("change",this._eatChangeAndClickOnPress,!0),b.isTouchSupported()&&(this.releaseResources(),e.off("contextmenu",this._eatContextMenuOnOpenPopupListener),this._eatContextMenuOnOpenPopupListener=null,this._inPressEvent=null),this._openPopupCallback=null,this._closePopupCallback=null},y.prototype._registerLauncherEvents=function(){var e,t,i,n=this.GetLauncher();const s=this._getPopupEventNamesToRegisterForComp();if(s.open){this._openPopupCallback||(this._openPopupCallback=this._openPopup.bind(this));const e=this._needsPressEvent(s);i=this._getNamespacedEvents(s.open.replace("press",""),y._OPEN_NAMESPACE),n.on(i,this._openPopupCallback),b.isTouchSupported()&&e&&(this._eatContextMenuOnOpenPopupListener=function(){return!1},n.on("contextmenu",this._eatContextMenuOnOpenPopupListener),this.registerHammerOpenCallbackOnLauncher())}s.close&&((t=this._closePopupCallback)||(t=this._closePopup.bind(this),this._closePopupCallback=t),e=this._getNamespacedEvents(s.close,y._CLOSE_NAMESPACE),n.on(e,t))},y.prototype.setupResources=function(){const e=this._getPopupEventNamesToRegisterForComp(),t=this._needsPressEvent(e);b.isTouchSupported()&&t&&this.registerHammerOpenCallbackOnLauncher()},y.prototype.registerHammerOpenCallbackOnLauncher=function(){const e=this.GetLauncher();if(null==e)return;const t={recognizers:[[f.Press,{time:750}]]};e.ojHammer(t).on("press",this._openPopupCallback)},y.prototype.releaseResources=function(){y.superclass.update.call(this);const e=this._getPopupEventNamesToRegisterForComp(),t=this._needsPressEvent(e);b.isTouchSupported()&&t&&this.GetLauncher().off("press").ojHammer("destroy")},y.prototype._getNamespacedEvents=function(e,t){var i,n,s;if(""===e||""===t)return e;s=(i=e.split(" ")).length,n=[];for(var o=0;o<s;o++)i[o]&&n.push(i[o]+t);return n.join(" ")},y.prototype._getPopupPosition=function(){var e,t,i;return(e=(t=y._DEFAULTS_BY_COMPONENT[this.GetComponent().widgetName])?t.position:y._DEFAULTS_BY_COMPONENT.default.position)&&("launcher"===e?i=this.GetLauncher():"launcher-wrapper"===e&&(i=this.GetLauncher().parent())),i||(i=this.GetComponent().widget()),{my:"start bottom",at:"end top",collision:"flipcenter",of:i}},y.prototype._getPopupEventNamesToRegisterForComp=function(){const e=y._DEFAULTS_BY_COMPONENT[this.GetComponent().widgetName];return e?e.events:y._DEFAULTS_BY_COMPONENT.default.events},y.prototype._needsPressEvent=function(e){return!(!e||!e.open)&&-1!==e.open.indexOf("press")},y.prototype._getPopupElement=function(){var e,t;if(this.$messagingContentRoot)return this.$messagingContentRoot;if(e=S.getNextFreePopup(),t=this._getPopupPosition(),e.ojPopup("option","position",t),e.ojPopup("option","beforeClose",this._popupBeforeCloseCallback.bind(this)),e.ojPopup("option","close",this._popupCloseCallback.bind(this)),e.ojPopup("option","open",this._popupOpenCallback.bind(this)),this.GetComponent()._IsCustomElement()){var i=(o.parseJSONFromFontFamily("oj-messaging-popup-option-defaults")||{}).animation;i.actionPrefix="notewindow",e.ojPopup("option","animation",i),this._addAnimateEventListeners(e)}else e.ojPopup("option","animation",null);return this.$messagingContentRoot=e,this.$messagingContentRoot},y.prototype._popupOpenCallback=function(e){var t=n(e.target),s=this;window.setTimeout((function(){i.isComponentInitialized(t,"ojPopup")?t.ojPopup("option","autoDismiss","focusLoss"):delete s.$messagingContentRoot}),10)},y.prototype._popupBeforeCloseCallback=function(){this._resolveBusyState=this._setBusyState("close")},y.prototype._popupCloseCallback=function(e){var t=this.GetLauncher(),s=n(e.target);this._removeAnimateEventListeners(s),i.isComponentInitialized(s,"ojPopup")&&(s.ojPopup("option","autoDismiss","none"),s.ojPopup("option","open",null),s.ojPopup("option","close",null),s.ojPopup("option","beforeClose",null)),t&&t[0]&&(t[0].removeEventListener("click",this._eatChangeAndClickOnPress,!0),t[0].removeEventListener("change",this._eatChangeAndClickOnPress,!0)),this.$messagingContentRoot=null,this._inPressEvent=null,S.getPopupContentNode(s).innerHTML="",this._resolveBusyState&&(this._resolveBusyState(),this._resolveBusyState=null)},y.prototype._destroyTooltip=function(){this._closePopup(),S.destroyFreePopup()},y.prototype._buildPopupHtml=function(){var e=!1,t=this.GetComponent().document[0],i=[],n="";return this.ShowMessages()&&i.push(this._buildMessagesHtml(t)),(this.ShowConverterHint()||this.ShowValidatorHint()||this.ShowTitle())&&i.push(this._buildHintsHtml(t)),i.forEach((function(i){i&&(e?n=n.concat(I.getSeparatorHtml(t)):e=!0,n=n.concat(i))})),n},y.prototype._buildMessagesHtml=function(e){var t,i="",n=this.GetMaxSeverity();return this.HasMessages()&&(t=this.GetMessages(),i=I.buildMessagesHtml(e,t,n,!1)),i},y.prototype._buildHintsHtml=function(e){var t,i,n=[],s="";if(this.ShowConverterHint()&&(t=(n=this.GetConverterHint()).length?n[0]:"",s+=I.buildHintHtml(e,y._SELECTOR_FORMCONTROL_HINT_CONVERTER,t,!1,y._SELECTOR_FORMCONTROL_HINT)),this.ShowValidatorHint())for(n=this.GetValidatorHints(),i=0;i<n.length;i++)s+=I.buildHintHtml(e,y._SELECTOR_FORMCONTROL_HINT_VALIDATOR,n[i],!1,y._SELECTOR_FORMCONTROL_HINT);return this.ShowTitle()&&(s+=I.buildHintHtml(e,y._SELECTOR_FORMCONTROL_HINT_TITLE,this.GetTitle(),!0,y._SELECTOR_FORMCONTROL_HINT)),s?"<div class='oj-form-control-hints'>"+s+"</div>":""},y.prototype._isPopupInitialized=function(){return!!this.$messagingContentRoot&&i.isComponentInitialized(this.$messagingContentRoot,"ojPopup")},I.buildHintHtml=function(e,t,i,n,s){var o;if(i){o=e.createElement("div");for(var a=s.split(" "),r=0,l=a.length;r<l;++r)o.classList.add(a[r]);o.classList.add(t),I._appendTextDom(o,I.GetTextDom(e,i,n))}return o?o.outerHTML:""},I.getSeverityTranslatedString=function(e){var t;switch(e){case h.SEVERITY_LEVEL.FATAL:t=u.getTranslatedString("oj-message.fatal");break;case h.SEVERITY_LEVEL.ERROR:t=u.getTranslatedString("oj-message.error");break;case h.SEVERITY_LEVEL.WARNING:t=u.getTranslatedString("oj-message.warning");break;case h.SEVERITY_LEVEL.INFO:t=u.getTranslatedString("oj-message.info");break;case h.SEVERITY_LEVEL.CONFIRMATION:t=u.getTranslatedString("oj-message.confirmation")}return t},I.getSeparatorHtml=function(e){var t;return(t=n(e.createElement("hr")))?t.get(0).outerHTML:""},I.buildMessagesHtml=function(e,t,i,n){var s,o,a,r,l,d,c,u,p="",_=[],m={};for(o=0;o<t.length;o++)l=(r=t[o])instanceof h?r:new h(r.summary,r.detail,r.severity),m[d=h.getSeverityLevel(l.severity)]||(m[d]=[]),m[d].push(l);for(o=i;o>=h.SEVERITY_LEVEL.CONFIRMATION;o--)for(_=m[o]||[],a=0;a<_.length;a++)r=_[a],d=h.getSeverityLevel(r.severity),c=I.getSeverityTranslatedString(d),u=r.summary||c,s=r.detail||"",p=p.concat(I.buildMessageHtml(e,u,s,d,n));return p},I.buildMessageHtml=function(e,t,i,n,s){var a,r,l,d,c,u=I.getSeverityTranslatedString(n);if((l=e.createElement("div")).classList.add(I._SELECTOR_MESSAGE),s)for(var h=I._getSeveritySelector(n).split(" "),p=0,_=h.length;p<_;++p)l.classList.add(h[p]);d=e.createElement("span");for(var m=I._getSeverityIconSelector(n).split(" "),f=0,g=m.length;f<g;++f)d.classList.add(m[f]);if(null==u?d.removeAttribute("title"):d.setAttribute("title",u),d.setAttribute("role","img"),l.appendChild(d),(a=e.createElement("span")).classList.add(I._SELECTOR_MESSAGE_CONTENT),"header"===(o.parseJSONFromFontFamily("oj-messaging-popup-option-defaults")||{}).messageSummaryOptionDefault&&((c=e.createElement("div")).classList.add(I._SELECTOR_MESSAGE_SUMMARY),c.textContent=t,a.appendChild(c)),i){var b=I.GetTextDom(e,i,!0);(r=e.createElement("div")).classList.add(I._SELECTOR_MESSAGE_DETAIL),I._appendTextDom(r,b),a.appendChild(r)}return l.appendChild(a),l.outerHTML},I._getSeverityIconSelector=function(e){var t;switch(e){case h.SEVERITY_LEVEL.FATAL:case h.SEVERITY_LEVEL.ERROR:t=I._SELECTOR_MESSAGE_ERROR_ICON;break;case h.SEVERITY_LEVEL.WARNING:t=I._SELECTOR_MESSAGE_WARNING_ICON;break;case h.SEVERITY_LEVEL.INFO:t=I._SELECTOR_MESSAGE_INFO_ICON;break;case h.SEVERITY_LEVEL.CONFIRMATION:t=I._SELECTOR_MESSAGE_CONFIRMATION_ICON}return I._DEFAULT_STATUS_ICON_SELECTORS+t},I._getSeveritySelector=function(e){var t;switch(e){case h.SEVERITY_LEVEL.FATAL:case h.SEVERITY_LEVEL.ERROR:t=I._SELECTOR_MESSAGE_ERROR;break;case h.SEVERITY_LEVEL.WARNING:t=I._SELECTOR_MESSAGE_WARNING;break;case h.SEVERITY_LEVEL.INFO:t=I._SELECTOR_MESSAGE_INFO;break;case h.SEVERITY_LEVEL.CONFIRMATION:default:t=I._SELECTOR_MESSAGE_CONFIRMATION}return t},I.GetTextDom=function(e,i,n){var s=null;return t.StringUtils.isString(i)&&(n&&b.isHTMLContent(i)?s=b.cleanHtml(i.substring(6,i.length-7)):(s=e.createElement("span")).textContent=i),s},I._appendTextDom=function(e,i){t.StringUtils.isString(i)?e.innerHTML=i:e.appendChild(i)},I._DEFAULT_STATUS_ICON_SELECTORS="oj-component-icon oj-message-status-icon ",I._SELECTOR_MESSAGE="oj-message",I._SELECTOR_MESSAGE_SUMMARY="oj-message-summary",I._SELECTOR_MESSAGE_DETAIL="oj-message-detail",I._SELECTOR_MESSAGE_CONTENT="oj-message-content",I._SELECTOR_MESSAGE_ERROR_ICON="oj-message-error-icon",I._SELECTOR_MESSAGE_WARNING_ICON="oj-message-warning-icon",I._SELECTOR_MESSAGE_INFO_ICON="oj-message-info-icon",I._SELECTOR_MESSAGE_CONFIRMATION_ICON="oj-message-confirmation-icon",I._SELECTOR_MESSAGE_ERROR="oj-message-error",I._SELECTOR_MESSAGE_WARNING="oj-message-warning",I._SELECTOR_MESSAGE_INFO="oj-message-info",I._SELECTOR_MESSAGE_CONFIRMATION="oj-message-confirmation",S.getNextFreePopup=function(){var e,t=S._getPool(),i=t.find("."+S._SELECTOR_MESSAGING);return 0===i.length?((e=n(S._getPopupContentHtml()))[0].style.display="none",e.appendTo(t),e.ojPopup({initialFocus:"none",tail:"simple",autoDismiss:"none",modality:"modeless",animation:{open:null,close:null}})):e=n(i[0]),e},S.getPopupContentNode=function(e){return e.find("."+S._SELECTOR_MESSAGING_CONTAINER)[0]},S.destroyFreePopup=function(){var e;if(S._getFreePoolCount()>0){var t=(e=S.getNextFreePopup())[0];e.ojPopup("destroy"),t.parentNode.removeChild(t)}},S._getPool=function(){var e=n("#"+S._MESSAGING_POPUP_POOL_ID);if(e.length>0)return e;var t=(e=n("<div>"))[0];return t.setAttribute("id",S._MESSAGING_POPUP_POOL_ID),t.setAttribute("role","presentation"),document.body.appendChild(t),e},S._getFreePoolCount=function(){return S._getPool().find("."+S._SELECTOR_MESSAGING).length},S._getPopupContentHtml=function(){return'<div class="'+S._SELECTOR_MESSAGING+'"><div class="'+S._SELECTOR_MESSAGING_CONTAINER+'"></div></div>'},S._SELECTOR_MESSAGING_CONTAINER="oj-messaging-popup-container",S._SELECTOR_MESSAGING="oj-messaging-popup",S._MESSAGING_POPUP_POOL_ID="__oj_messaging_popup_pool";const O=function(e,t){this.Init(e),this._userAssistanceDivElement=t};t.Object.createSubclass(O,t.MessagingStrategy,"InlineHelpHintsStrategy"),O.prototype.activate=function(e){O.superclass.activate.call(this,e),this._createInlineHelpHints()},O.prototype.reactivate=function(e,t){O.superclass.reactivate.call(this,e),this._userAssistanceDivElement=t,this._isContainerRootDomInDocument()||this._createInlineHelpHints()},O.prototype.shouldUpdate=function(e){let t=!(!e||void 0===e.title),i=!(!e||void 0===e.validatorHint),n=!(!e||void 0===e.converterHint);return t||i||n},O.prototype.update=function(){O.superclass.update.call(this),this._updateInlineHelpHints()},O.prototype.deactivate=function(){var e=this.GetComponent()._getRootElement();this._removeHelpHintsContainerAndContent(),this._focusinCallback&&this._deleteFocusEventHandlers(e),this._deleteHelpHintsAttributeEventHandlers(e),O.superclass.deactivate.call(this)},O.prototype._createInlineHelpHints=function(){var e=this.GetComponent();let t=e._ShowHelpHints();"always"===t&&this._addHelpHintsContent(e),"focus"===t&&this._createFocusEventHandlers(e),this._createHelpHintsAttributeEventHandlers(e)},O.prototype._createFocusEventHandlers=function(e){var t=e._getRootElement();this._focusinCallback=O._focusinHandler.bind(this,e),t.addEventListener("focusin",this._focusinCallback),this._focusoutCallback=O._focusoutHandler.bind(this),t.addEventListener("focusout",this._focusoutCallback)},O.prototype._deleteFocusEventHandlers=function(e){e.removeEventListener("focusin",this._focusinCallback),delete this._focusinCallback,e.removeEventListener("focusout",this._focusoutCallback),delete this._focusoutCallback},O.prototype._createHelpHintsAttributeEventHandlers=function(e){var t=e._getRootElement();this._helpHintsChangedCallback=O._helpHintsChangedHandler.bind(this),t.addEventListener("helpHintsChanged",this._helpHintsChangedCallback)},O.prototype._deleteHelpHintsAttributeEventHandlers=function(e){e.removeEventListener("helpHintsChanged",this._helpHintsChangedCallback),delete this._helpHintsChangedCallback},O.prototype._getHelpHintsInlineContainer=function(e){return e.querySelector(".oj-helphints-inline-container")},O.prototype._isContainerRootDomInDocument=function(){let e=!1;if(this.containerRoot){let t=this.containerRoot.id;e=document.getElementById(t)}return null!==e},O._helpHintsChangedHandler=function(e){this._updateInlineHelpHints()},O.prototype._removeHelpHintsContainerAndContent=function(){var e=this.GetComponent()._getRootElement(),t=this._getHelpHintsInlineContainer(e);t&&(this.RemoveAriaDescribedByForInlineMessaging(t),t.parentElement.removeChild(t),this._userAssistanceDivElement&&(this._userAssistanceDivElement.classList.remove("oj-has-helphints"),this.containerRoot=null))},O.prototype._addHelpHintsContent=function(e){let t,i=e.options.help,s=i?i.instruction:null,o=e.options.helpHints;if(s){let e=I.GetTextDom(document,s,!0);t=e?e.outerHTML:""}if(!t&&this.ShowValidatorHint()){let e=this.GetValidatorHints();e.length>0&&(t=e.join("<br/>"))}if(!t){let e=o?o.definition:null;e&&(t=e)}if(!t&&this.ShowConverterHint()){let e=this.GetConverterHint();e.length>0&&(t=e.join("<br/>"))}let a,r=o?o.source:null;if(r&&(a=this._getHelpSourceDom(r)),(t||a)&&!this.containerRoot)if(this.containerRoot=document.createElement("div"),this.containerRoot.classList.add("oj-helphints-inline-container"),n(this.containerRoot).uniqueId(),this.AddAriaDescribedByForInlineMessaging(this.containerRoot),"inline"===e._ShowHelpHintsLocation())this._userAssistanceDivElement.appendChild(this.containerRoot);else{let t=e._GetFormControlContainer();t.parentElement.insertBefore(this.containerRoot,t)}this.containerRoot&&(t&&(t="<div>"+t+"</div>",this.containerRoot.innerHTML=t),a&&this.containerRoot.appendChild(a),t||a||(this.containerRoot.innerHTML=""));const l="inline"===e._ShowHelpHintsLocation();return this._userAssistanceDivElement&&l&&(t||a?this._userAssistanceDivElement.classList.add("oj-has-helphints"):this._userAssistanceDivElement.classList.remove("oj-has-helphints")),t||a},O.prototype._getHelpSourceDom=function(e){t.Assert.assertString(e);let i=document.createElement("div"),n=document.createElement("a");n.classList.add("oj-helphints-anchor"),n.setAttribute("tabindex","0"),n.setAttribute("target","_blank");try{b.validateURL(e),n.setAttribute("href",e)}catch(t){throw new Error(t+". The source option ("+e+") is invalid.")}let s=u.getTranslatedString("oj-ojEditableValue.helpSourceText");return n.textContent=s,i.appendChild(n),b.makeFocusable({element:n,applyHighlight:!0,component:this.GetComponent()}),i},O.prototype._updateInlineHelpHints=function(){const e=this.GetComponent();this.containerRoot&&(this.containerRoot.innerHTML=""),("always"===e._ShowHelpHints()||this._focusIn)&&(this._addHelpHintsContent(e)||this._removeHelpHintsContainerAndContent())},O._focusinHandler=function(e,t){let i=t.currentTarget,n=t.relatedTarget;n&&i.contains(n)||(this.containerRoot&&(this.containerRoot.innerHTML=""),this._focusIn=!0,this._addHelpHintsContent(e)?this._animateOpen():this._removeHelpHintsContainerAndContent())},O._focusoutHandler=function(e){let t=e.currentTarget,i=e.relatedTarget;if((!i||!t.contains(i))&&(this._focusIn=!1,this.containerRoot&&this.containerRoot.hasChildNodes())){let e="close",t=this._getDefaultAnimation().close;this._setBusyState();let i=this;v.startAnimation(this.containerRoot,"inline-hints-"+e,t,this.GetComponent()).then((()=>{this._removeHelpHintsContainerAndContent(),i._clearBusyState()}))}},O.prototype._getDefaultAnimation=function(){return O._defaultAnimation||(O._defaultAnimation={open:{effect:"fadeIn",duration:"200ms",timingFunction:"cubic-bezier(0.4,0,0.2,1)"},close:{effect:"fadeOut",duration:"200ms",timingFunction:"cubic-bezier(0.4,0,0.2,1)"}}),O._defaultAnimation},O.prototype._animateOpen=function(){if(this.containerRoot&&this.containerRoot.hasChildNodes()){let e=this._getDefaultAnimation().open,t="open";v.startAnimation(this.containerRoot,"inline-hints-"+t,e,this.GetComponent())}},O.prototype._setBusyState=function(){if(!this._resolveBusyState){let e=this.GetComponent()._getRootElement(),t=r.getContext(e).getBusyContext(),i="The page is waiting for inline help hints ";e&&e.id&&(i+='for "'+e.id+'" '),i+="to open/close",this._resolveBusyState=t.addBusyState({description:i})}},O.prototype._clearBusyState=function(){this._resolveBusyState&&(this._resolveBusyState(),this._resolveBusyState=null)};const w=function(e,t){this.Init(e),this._parentElement=t};t.ComponentMessaging.registerMessagingStrategy(t.ComponentMessaging._STRATEGY_TYPE.INLINE,w),t.Object.createSubclass(w,t.MessagingStrategy,"oj.InlineMessagingStrategy"),w.prototype.activate=function(e){w.superclass.activate.call(this,e)},w.prototype.reactivate=function(e,t){w.superclass.reactivate.call(this,e),this._parentElement=t,this._updateInlineMessage()},w.prototype.shouldUpdate=function(e){return!(!e||void 0===e.validityState)},w.prototype.update=function(){w.superclass.update.call(this),this._updateInlineMessage()},w.prototype.deactivate=function(){this._removeMessagingContentRootDom(),w.superclass.deactivate.call(this)},w.prototype._getDefaultAnimation=function(){if(!w._defaultAnimation){var e=(o.parseJSONFromFontFamily("oj-messaging-inline-option-defaults")||{}).animation;w._defaultAnimation=e=e||{}}return w._defaultAnimation},w.prototype._replaceAnimationOptions=function(e,i){var n,s;t.StringUtils.isString(e)?(s=!0,n=e+""):(s=!1,n=JSON.stringify(e));for(var o=Object.keys(i),a=0;a<o.length;a++){var r=o[a];n=n.replace(new RegExp(r,"g"),i[r])}return s?n:JSON.parse(n)},w.prototype._determineAnimation=function(e,t){var i,n,s,o=this._getDefaultAnimation();if(o){var a,r=e[0],l=r.innerHTML,d=r.offsetHeight;r.innerHTML=t,a=r.offsetHeight,r.innerHTML=l,"noanimation"!=(i=a>d?"open":a<d?"close":"noanimation")&&(n=o[i])&&(s=this._replaceAnimationOptions(n,{"#oldHeight":d+"px","#newHeight":a+"px"}))}return{action:i,effect:s}},w.prototype._setBusyState=function(){if(!this._resolveBusyState){var e=this.GetComponent(),t=e?e.element:null,i=t?t[0]:null,n=r.getContext(i).getBusyContext(),s="The page is waiting for inline message ";i&&i.id&&(s+='for "'+i.id+'" '),s+="to open/close",this._resolveBusyState=n.addBusyState({description:s})}},w.prototype._clearBusyState=function(){this._resolveBusyState&&(this._resolveBusyState(),this._resolveBusyState=null)},w.prototype._queueAction=function(e){var t=this,i=this.$messagingContentRoot;if(t._inInlineMessagingAnimation)this._currentContentToShow=e;else{this._currentContentToShow=null,this._setBusyState(),""!==e&&this._addRemoveOjHasMessagesClass(e),this._timeoutId&&clearTimeout(this._timeoutId);var n,s=this.GetComponent();if(s&&s._NotifyMessagingStrategyQueueAction)this._notifyQueueActionPromise||(this._notifyQueueActionPromise=new Promise((function(e){n=e})),this._notifyQueueActionPromiseResolve=function(){this._notifyQueueActionPromise=null,this._notifyQueueActionPromiseResolve=null,n()}.bind(this)),s._NotifyMessagingStrategyQueueAction(this._notifyQueueActionPromise);this._timeoutId=setTimeout((function(){if(t._timeoutId=null,i&&i[0]){var n=t._determineAnimation(i,e),s=n.action,o=n.effect;"noanimation"===s?(i[0].innerHTML=e,t._addRemoveOjHasMessagesClass(e),t._clearBusyState(),t._notifyQueueActionPromiseResolve&&t._notifyQueueActionPromiseResolve()):("close"===s?i[0].setAttribute("aria-live","off"):i[0].setAttribute("aria-live","polite"),"open"===s&&(i[0].innerHTML=e),t._inInlineMessagingAnimation=!0,v.startAnimation(i[0],"inline-"+s,o,t.GetComponent()).then((function(){var n;t._inInlineMessagingAnimation=!1,"close"===s&&(i[0].setAttribute("aria-live","polite"),i[0].innerHTML=e),null!==t._currentContentToShow?(n=t._currentContentToShow,t._currentContentToShow=null,t._queueAction(n)):(""===e&&t._addRemoveOjHasMessagesClass(e),t._clearBusyState(),t._notifyQueueActionPromiseResolve&&t._notifyQueueActionPromiseResolve())})))}else t._addRemoveOjHasMessagesClass(""),t._clearBusyState(),t._notifyQueueActionPromiseResolve&&t._notifyQueueActionPromiseResolve()}),0)}},w.prototype._addRemoveOjHasMessagesClass=function(e){this._parentElement&&(e?this._parentElement.classList.add("oj-has-messages"):(this._parentElement.classList.remove("oj-has-messages"),this._removeMessagingContentRootDom()))},w.prototype._updateInlineMessage=function(){var e;e=this._buildInlineHtml();var t=this._isMessagingContentRootDomInDocument();e&&!t&&this._createInlineMessage(),this.$messagingContentRoot&&this.$messagingContentRoot[0]&&(this.GetComponent()._IsCustomElement()?this._queueAction(e):this.$messagingContentRoot[0].innerHTML=e)},w.prototype._createInlineMessage=function(){this.$messagingContentRoot=n(this._getInlineContentHtml()),this.AddAriaDescribedByForInlineMessaging(this.$messagingContentRoot[0]),this._addAriaLive(this.$messagingContentRoot),this._parentElement?this._parentElement.appendChild(this.$messagingContentRoot[0]):this.GetComponent().widget()[0].appendChild(this.$messagingContentRoot[0])},w.prototype._getInlineContentHtml=function(){return"<div class='oj-messaging-inline-container'></div>"},w.prototype._removeMessagingContentRootDom=function(){if(this._isMessagingContentRootDomInDocument()){this.RemoveAriaDescribedByForInlineMessaging(this.$messagingContentRoot[0]);let e=this.$messagingContentRoot[0].parentNode;e&&e.removeChild(this.$messagingContentRoot[0])}this.$messagingContentRoot=null},w.prototype._addAriaLive=function(e){t.Assert.assertPrototype(e,n),e[0].setAttribute("aria-live","polite")},w.prototype._buildInlineHtml=function(){var e;return this.ShowMessages()?(e=this.GetComponent().document[0],this._buildMessagesHtml(e)):""},w.prototype._buildMessagesHtml=function(e){var t,i,n="";return this.HasMessages()&&(i=this.GetMessages(),t=this.GetMaxSeverity(),n=I.buildMessagesHtml(e,i,t,!0)),n},w.prototype._isMessagingContentRootDomInDocument=function(){var e;if(!this.$messagingContentRoot)return!1;{let t=this.$messagingContentRoot[0].id;e=document.getElementById(t)}return null!==e};const N=function(e,t){this.Init(e),this._parentElement=t};t.Object.createSubclass(N,t.MessagingStrategy,"InlineRequiredStrategy"),N.prototype.activate=function(e){N.superclass.activate.call(this,e),null==this.containerRoot&&this._createOrUpdateInlineRequired()},N.prototype.reactivate=function(e,t){N.superclass.reactivate.call(this,e),this._parentElement=t,this._isContainerRootDomInDocument()||this._createOrUpdateInlineRequired()},N.prototype.shouldUpdate=function(e){return!(!e||!("hasNoValueToggled"in e))},N.prototype.update=function(){this._createOrUpdateInlineRequired(),N.superclass.update.call(this)},N.prototype.deactivate=function(){this._removeInlineRequired();var e=this.GetComponent()._getRootElement();e.removeEventListener("requiredChanged",this._requiredChangedCallback),delete this._requiredChangedCallback,e.removeEventListener("focusout",this._focusoutCallback),delete this._focusoutCallback,this._parentElement=null,N.superclass.deactivate.call(this)},N.prototype._createOrUpdateInlineRequired=function(){var e=this.GetComponent();const t=e.options,i=e._getRootElement(),s=i.classList.contains("oj-has-no-value"),o=this._getRequiredInlineContainer();if(t.required&&s&&!o){this.containerRoot=document.createElement("div"),this.containerRoot.classList.add("oj-required-inline-container");let t=u.getTranslatedString("oj-ojEditableValue.requiredText");this.containerRoot.textContent=t,n(this.containerRoot).uniqueId(),this._parentElement.appendChild(this.containerRoot),e._AriaRequiredUnsupported()&&this.AddDescribedByToElement(i,this.containerRoot.id),this._focusoutCallback=this._focusoutHandler.bind(this,e),i.addEventListener("focusout",this._focusoutCallback)}t.required&&!s&&o&&this._removeInlineRequired(),this._requiredChangedCallback||(this._requiredChangedCallback=this._requiredChangedHandler.bind(this,e),i.addEventListener("requiredChanged",this._requiredChangedCallback))},N.prototype._removeInlineRequired=function(){const e=this.GetComponent();let t=this._getRequiredInlineContainer();t&&e._AriaRequiredUnsupported()&&this.RemoveDescribedByFromElement(e._getRootElement(),t.id),t&&this._parentElement&&(this._parentElement.removeChild(t),this.containerRoot=null)},N.prototype._getRequiredInlineContainer=function(){return this._parentElement.querySelector(".oj-required-inline-container")},N.prototype._requiredChangedHandler=function(e,t){let i=t.detail.value,n=this._getRequiredInlineContainer();const s=e._getRootElement().classList.contains("oj-has-no-value");i&&s&&null===n?this._createOrUpdateInlineRequired():i||null===n||this._removeInlineRequired()},N.prototype._focusoutHandler=function(e){const t=this._getRequiredInlineContainer(),i=e._getRootElement(),n=e.options.required,s=i.classList.contains("oj-has-no-value");if(n&&!s&&null!==t){let e="close",t=this._getDefaultAnimation().close;this._setBusyState();let i=this;v.startAnimation(this.containerRoot,"inline-required-"+e,t,this.GetComponent()).then((()=>{this._removeInlineRequired(),i._clearBusyState()}))}},N.prototype._isContainerRootDomInDocument=function(){let e=!1;if(this.containerRoot){let t=this.containerRoot.id;e=document.getElementById(t)}return null!==e},N.prototype._getDefaultAnimation=function(){return N._defaultAnimation||(N._defaultAnimation={open:{effect:"fadeIn",duration:"200ms",timingFunction:"cubic-bezier(0.4,0,0.2,1)"},close:{effect:"fadeOut",duration:"200ms",timingFunction:"cubic-bezier(0.4,0,0.2,1)"}}),N._defaultAnimation},N.prototype._setBusyState=function(){if(!this._resolveBusyState){let e=this.GetComponent()._getRootElement(),t=r.getContext(e).getBusyContext(),i="The page is waiting for inline required ";e&&e.id&&(i+='for "'+e.id+'" '),i+="to open/close",this._resolveBusyState=t.addBusyState({description:i})}},N.prototype._clearBusyState=function(){this._resolveBusyState&&(this._resolveBusyState(),this._resolveBusyState=null)};var R=function(e){this.Init(e),this._displayOptions=e};t.ComponentMessaging.registerMessagingStrategy(t.ComponentMessaging._STRATEGY_TYPE.USER_ASSISTANCE_INLINE,R),t.Object.createSubclass(R,t.MessagingStrategy,"InlineUserAssistanceStrategy"),R.prototype.activate=function(e){R.superclass.activate.call(this,e),this._componentMessaging=e;const t=this.GetComponent(),i=t.options,n=t._getRootElement();this._readonlyChangedCallback=this._readonlyChangedHandler.bind(this,t),n.addEventListener("readonlyChanged",this._readonlyChangedCallback),this._disabledChangedCallback=this._disabledChangedHandler.bind(this,t),n.addEventListener("disabledChanged",this._disabledChangedCallback),this._userAssistanceDensityChangedCallback=this._userAssistanceDensityChangedHandler.bind(this,t),n.addEventListener("userAssistanceDensityChanged",this._userAssistanceDensityChangedCallback),null==this.containerRoot&&this._createInlineContainer(),this._isDisabledOrReadonly()||this._activateContainerStrategies(e,i)},R.prototype.reactivate=function(e){R.superclass.reactivate.call(this,e);const t=this.GetComponent().options;this._isDisabledOrReadonly(t)||(this._isContainerRootDomInDocument()||this._createInlineContainer(),this._inlineMessagingStrategy?(this._inlineMessagingStrategy.reactivate(e,this.containerRoot),this._inlineRequiredStrategy&&this._inlineRequiredStrategy.reactivate(e,this.containerRoot),this._inlineHelpHintsStrategy&&this._inlineHelpHintsStrategy.reactivate(e,this.containerRoot)):this._activateContainerStrategies(this._componentMessaging,t))},R.prototype.shouldUpdate=function(e){return!this._isDisabledOrReadonly()&&(this._shouldUpdateContent=e,!0)},R.prototype.update=function(){R.superclass.update.call(this),this._inlineMessagingStrategy&&(this._isDisabledOrReadonly()||(this._inlineMessagingStrategy.shouldUpdate(this._shouldUpdateContent)&&this._inlineMessagingStrategy.update(),this._inlineRequiredStrategy&&this._inlineRequiredStrategy.shouldUpdate(this._shouldUpdateContent)&&this._inlineRequiredStrategy.update(),this._inlineHelpHintsStrategy&&this._inlineHelpHintsStrategy.shouldUpdate(this._shouldUpdateContent)&&this._inlineHelpHintsStrategy.update()))},R.prototype.deactivate=function(){this._inlineMessagingStrategy.deactivate(),this._inlineRequiredStrategy&&this._inlineRequiredStrategy.deactivate(),this._inlineHelpHintsStrategy&&this._inlineHelpHintsStrategy.deactivate(),this._removeContainerRootDom(),delete this._inlineMessagingStrategy,delete this._inlineRequiredStrategy,delete this._inlineHelpHintsStrategy;const e=this.GetComponent()._getRootElement();e.removeEventListener("readonlyChanged",this._readonlyChangedCallback),delete this._readonlyChangedCallback,e.removeEventListener("disabledChanged",this._disabledChangedCallback),delete this._disabledChangedCallback,e.removeEventListener("userAssistanceDensityChanged",this._userAssistanceDensityChangedCallback),delete this._userAssistanceDensityChangedCallback,R.superclass.deactivate.call(this)},R.prototype._createInlineContainer=function(){this.containerRoot=document.createElement("div"),this.containerRoot.classList.add("oj-user-assistance-inline-container");const e=this.GetComponent(),t=e.options.userAssistanceDensity;"efficient"===t?this.containerRoot.classList.add("oj-efficient"):"reflow"===t&&this.containerRoot.classList.add("oj-reflow"),n(this.containerRoot).uniqueId(),e.widget()[0].appendChild(this.containerRoot)},R.prototype._removeContainerRootDom=function(){if(this._isContainerRootDomInDocument()){let e=this.containerRoot.parentNode;e&&e.removeChild(this.containerRoot)}this.containerRoot=null},R.prototype._isContainerRootDomInDocument=function(){var e=!1;if(this.containerRoot){let t=this.containerRoot.id;e=document.getElementById(t)}return null!==e},R.prototype._activateContainerStrategies=function(e,t){void 0===this._inlineMessagingStrategy&&(this._inlineMessagingStrategy=new w(this._displayOptions,this.containerRoot),this._inlineMessagingStrategy.activate(e)),void 0!==t.required&&void 0===this._inlineRequiredStrategy&&(this._inlineRequiredStrategy=new N(this._displayOptions,this.containerRoot),this._inlineRequiredStrategy.activate(e)),void 0===this._inlineHelpHintsStrategy&&(this._inlineHelpHintsStrategy=new O(this._displayOptions,this.containerRoot),this._inlineHelpHintsStrategy.activate(e))},R.prototype._userAssistanceDensityChangedHandler=function(e,t){let i=t.detail.value;"efficient"===i?(this.containerRoot.classList.add("oj-efficient"),this.containerRoot.classList.remove("oj-reflow")):"reflow"===i?(this.containerRoot.classList.add("oj-reflow"),this.containerRoot.classList.remove("oj-efficient")):(this.containerRoot.classList.remove("oj-efficient"),this.containerRoot.classList.remove("oj-reflow"))},R.prototype._readonlyChangedHandler=function(e,t){if(t.detail.value)this._deactivateContainerStrategies();else{const t=e.options;this._activateContainerStrategies(this._componentMessaging,t)}},R.prototype._disabledChangedHandler=function(e,t){if(t.detail.value)this._deactivateContainerStrategies();else{const t=e.options;this._activateContainerStrategies(this._componentMessaging,t)}},R.prototype._deactivateContainerStrategies=function(){this._inlineMessagingStrategy&&this._inlineMessagingStrategy.deactivate(),this._inlineRequiredStrategy&&this._inlineRequiredStrategy.deactivate(),this._inlineHelpHintsStrategy&&this._inlineHelpHintsStrategy.deactivate(),delete this._inlineMessagingStrategy,delete this._inlineRequiredStrategy,delete this._inlineHelpHintsStrategy},R.prototype._isDisabledOrReadonly=function(e=this.GetComponent().options){var t=e.disabled||!1,i=e.readOnly||!1;return t||i};const L=function(e){this.Init(e)};t.ComponentMessaging.registerMessagingStrategy(t.ComponentMessaging._STRATEGY_TYPE.LABEL_EDGE_INSIDE_FORM_CNTRL,L),t.Object.createSubclass(L,C,"InsideFormControlLabelStrategy"),L.prototype.activate=function(e){L.superclass.activate.call(this,e),this._CreateLabel()},L.prototype.reactivate=function(e){L.superclass.reactivate.call(this,e),this._DestroyLabel(),this._CreateLabel()},L.prototype.shouldUpdate=function(){return!1},L.prototype.update=function(){L.superclass.update.call(this)},L.prototype.deactivate=function(){this._DestroyLabel(),L.superclass.deactivate.call(this)},L.prototype._GetFormControlLabelStyleClass=function(){return"oj-form-control-label-inside"},L.prototype._InsertOjLabel=function(e,t,i){let n=i._getRootElement();n.insertBefore(e,n.firstElementChild)},L.prototype._CreateEventHandlers=function(e,t,i,n){L.superclass._CreateEventHandlers.call(this,e,t,i,n)},L._labelHintChangedHandler=function(e,t){e.textContent=t.detail.value};const P=function(e){this.Init(e)};t.Object.createSubclass(P,t.MessagingStrategy,"oj.InsideLabelPlaceholderStrategy"),P.prototype.activate=function(e){P.superclass.activate.call(this,e),this._createPlaceholderToggle()},P.prototype.reactivate=function(e){P.superclass.reactivate.call(this,e),this._destroyPlaceholderToggle(),this._createPlaceholderToggle()},P.prototype.deactivate=function(){this._destroyPlaceholderToggle(),P.superclass.deactivate.call(this)},P.prototype.shouldUpdate=function(e){return e&&void 0!==e.converterHint||this.GetComponent().options.placeholder},P.prototype.update=function(){P.superclass.update.call(this),this._placeholderChanged()},P.prototype._destroyPlaceholderToggle=function(){var e=this.GetComponent(),t=e._GetContentElement()[0],i=e._getRootElement();this._blurCallback(),t.removeEventListener("focusout",this._blurCallback,!1),delete this._blurCallback,t.removeEventListener("focusin",this._focusCallback,!1),delete this._focusCallback,i.removeEventListener("placeholderChanged",this._placeholderChangedCallback,!1),delete this._placeholderChangedCallback,e._HasPlaceholderSet()&&(e._SetPlaceholder(e.options.placeholder),e._customPlaceholderSet=!0)},P.prototype._createPlaceholderToggle=function(){var e=this.GetComponent(),t=e._GetContentElement()[0],i=e._getRootElement();e._customPlaceholderSet=!0,this._blurCallback=P._blurHandler.bind(this,t),t.addEventListener("focusout",this._blurCallback,!1),this._focusCallback=P._focusHandler.bind(this),t.addEventListener("focusin",this._focusCallback,!1),this._placeholderChangedCallback=this._placeholderChanged.bind(this),i.addEventListener("placeholderChanged",this._placeholderChangedCallback,!1),this._placeholderChanged()},P.prototype._placeholderChanged=function(){var e,t=this.GetComponent()._GetContentElement()[0];e=a.containsFocus(t)?this._focusCallback:this._blurCallback,Promise.resolve(!0).then((function(){e()}))},P.ShowConverterHintAsPlaceholder=function(e){var t=e.options.displayOptions;if(!t||"displayOptions"!==e._getResolvedUserAssistance())return!1;var i=t.converterHint;return i instanceof Array?"placeholder"===i[0]:"placeholder"===i},P._focusHandler=function(){var e,t=this.GetComponent();if(P.ShowConverterHintAsPlaceholder(t)){var i=this.GetConverterHint();e=i.length>0?i[0]:null}e||(e=t.options.placeholder),t._SetPlaceholder(e)},P._blurHandler=function(e){if(e.hasAttribute("aria-haspopup")){var t=e.getAttribute("aria-owns"),i=document.getElementById(t);if(a.containsFocus(i))return}var n,s=this.GetComponent();if(P.ShowConverterHintAsPlaceholder(s)){var o=this.GetConverterHint();n=o.length>0?o[0]:null}n||(n=s.options.placeholder),null==n?s._SetPlaceholder(null):s._SetPlaceholder("")};const M=function(e){this.Init(e),this._displayOptions=e};t.ComponentMessaging.registerMessagingStrategy(t.ComponentMessaging._STRATEGY_TYPE.LABEL_EDGE_INSIDE,M),t.Object.createSubclass(M,C,"oj.InsideLabelStrategy"),M.prototype.activate=function(e){M.superclass.activate.call(this,e),this._componentMessaging=e;const t=this.GetComponent()._getRootElement();this._placeholderChangedCallback=this._placeholderChangedHandler.bind(this),t.addEventListener("placeholderChanged",this._placeholderChangedCallback),this._activatePlaceholderStrategyIfNeeded(e),this._CreateLabel()},M.prototype.reactivate=function(e){M.superclass.reactivate.call(this,e),this._DestroyLabel(),this._CreateLabel(),this._placeholderStrategy?this._placeholderStrategy.reactivate(e):this._activatePlaceholderStrategyIfNeeded(this._componentMessaging)},M.prototype.shouldUpdate=function(e){return!!this._placeholderStrategy&&this._placeholderStrategy.shouldUpdate(e)},M.prototype.update=function(){this._placeholderStrategy&&this._placeholderStrategy.update()},M.prototype.deactivate=function(){this._placeholderStrategy&&(this._placeholderStrategy.deactivate(),delete this._placeholderStrategy),this.GetComponent()._getRootElement().removeEventListener("placeholderChanged",this._placeholderChangedCallback),delete this._placeholderChangedCallback,this._DestroyLabel(),M.superclass.deactivate.call(this)},M.prototype._activatePlaceholderStrategyIfNeeded=function(e){if(void 0===this._placeholderStrategy){let t=()=>{let t=P;this._placeholderStrategy=new t(this._displayOptions),this._placeholderStrategy.activate(e)};const i=this.GetComponent();(i.options.placeholder||"displayOptions"===i._getResolvedUserAssistance()&&P.ShowConverterHintAsPlaceholder(i))&&t()}},M.prototype._placeholderChangedHandler=function(){this._activatePlaceholderStrategyIfNeeded(this._componentMessaging)},M.prototype._GetContainer=function(e){let t=e._GetFormControlContainer();if(!t)return null;let i="_GetContentWrapper";return e[i]&&(t=e[i]()),t},M.prototype._GetFormControlLabelStyleClass=function(){return[M._BASE_STYLE_CLASS,"label","inside".toLowerCase()].join("-")},M.prototype._InsertOjLabel=function(e,t){t.insertBefore(e,t.firstElementChild)},M._BASE_STYLE_CLASS="oj-text-field",e.EditableValueUtils=T,Object.defineProperty(e,"__esModule",{value:!0})})),
/**
 * @license
 * Copyright (c) 2014, 2022, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define("ojs/ojtouchproxy",["jquery","ojs/ojcore-base"],(function(e,t){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;const i=function(e){this._init(e)};t._registerLegacyNamespaceProp("_TouchProxy",i),i.prototype._init=function(t){this._elem=t,this._touchHandled=!1,this._touchMoved=!1,this._touchStartHandler=e.proxy(this._touchStart,this),this._touchEndHandler=e.proxy(this._touchEnd,this),this._touchMoveHandler=e.proxy(this._touchMove,this),this._elem.on({touchend:this._touchEndHandler,touchcancel:this._touchEndHandler}),this._elem[0].addEventListener("touchstart",this._touchStartHandler,{passive:!0}),this._elem[0].addEventListener("touchmove",this._touchMoveHandler,{passive:!1})},i.prototype._destroy=function(){this._elem&&this._touchStartHandler&&(this._elem.off({touchend:this._touchEndHandler,touchcancel:this._touchEndHandler}),this._elem[0].removeEventListener("touchstart",this._touchStartHandler,{passive:!0}),this._elem[0].removeEventListener("touchmove",this._touchMoveHandler,{passive:!1}),this._touchStartHandler=void 0,this._touchEndHandler=void 0,this._touchMoveHandler=void 0)},i.prototype._touchHandler=function(e,t){if(!(e.originalEvent.touches.length>1)){"touchstart"!==e.type&&"touchend"!==e.type&&e.preventDefault();var i=e.originalEvent.changedTouches[0],n=document.createEvent("MouseEvent");n.initMouseEvent(t,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),i.target.dispatchEvent(n)}},i.prototype._touchStart=function(t){this._touchHandled||(this._touchHandled=!0,this._touchMoved=!1,t=e.Event(t),this._touchHandler(t,"mouseover"),this._touchHandler(t,"mousemove"),this._touchHandler(t,"mousedown"))},i.prototype._touchMove=function(t){this._touchHandled&&(this._touchMoved=!0,t=e.Event(t),this._touchHandler(t,"mousemove"))},i.prototype._touchEnd=function(e){this._touchHandled&&(this._touchHandler(e,"mouseup"),this._touchHandler(e,"mouseout"),this._touchMoved||"touchend"!==e.type||this._touchHandler(e,"click"),this._touchHandled=!1)},i._TOUCH_PROXY_KEY="_ojTouchProxy",i.prototype.touchMoved=function(){return this._touchMoved},i.addTouchListeners=function(t){var n=e(t),s=n.data(i._TOUCH_PROXY_KEY);return s||(s=new i(n),n.data(i._TOUCH_PROXY_KEY,s)),s},i.removeTouchListeners=function(t){var n=e(t),s=n.data(i._TOUCH_PROXY_KEY);s&&(s._destroy(),n.removeData(i._TOUCH_PROXY_KEY))}})),
/**
 * @license
 * Copyright (c) 2014, 2022, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define("ojs/ojslider",["ojs/ojcore","ojs/ojeditablevalue","jqueryui-amd/widgets/draggable","ojs/ojtouchproxy","ojs/ojcore-base","jquery","ojs/ojtranslation","ojs/ojdomutils"],(function(e,t,i,n,s,o,a,r){"use strict";s=s&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s,o=o&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o,function(){var e={properties:{readonly:{binding:{consume:{name:"readonly"}}},userAssistanceDensity:{binding:{consume:{name:"userAssistanceDensity"}}},labelEdge:{binding:{consume:{name:"labelEdge"}}}}},t={properties:{describedBy:{type:"string"},disabled:{type:"boolean",value:!1},displayOptions:{type:"object",properties:{converterHint:{type:"Array<string>|string"},helpInstruction:{type:"Array<string>|string",value:["notewindow"]},messages:{type:"Array<string>|string"},validatorHint:{type:"Array<string>|string"}}},help:{type:"object",properties:{instruction:{type:"string",value:""}}},helpHints:{type:"object",properties:{definition:{type:"string",value:""},source:{type:"string",value:""}}},labelEdge:{type:"string",enumValues:["inside","none","provided"]},labelHint:{type:"string",value:""},labelledBy:{type:"string"},max:{type:"number",value:100},messagesCustom:{type:"Array<Object>",writeback:!0,value:[]},min:{type:"number",value:0},orientation:{type:"string",enumValues:["horizontal","vertical"],value:"horizontal"},step:{type:"number",value:1},transientValue:{type:"number",writeback:!0,readOnly:!0},translations:{type:"object",value:{},properties:{invalidStep:{type:"string"},maxMin:{type:"string"},noValue:{type:"string"},optionNum:{type:"string"},valueRange:{type:"string"}}},type:{type:"string",enumValues:["fromMax","fromMin","single"],value:"fromMin"},userAssistanceDensity:{type:"string",enumValues:["compact","efficient","reflow"],value:"reflow"},valid:{type:"string",writeback:!0,enumValues:["invalidHidden","invalidShown","pending","valid"],readOnly:!0},value:{type:"number",writeback:!0,value:0}},methods:{getProperty:{},refresh:{},reset:{},setProperties:{},setProperty:{},showMessages:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateEnd:{},ojAnimateStart:{}},extension:{}};t.extension._WIDGET_NAME="ojSlider",t.extension._INNER_ELEM="input",s.CustomElementBridge.register("oj-slider",{metadata:s.CollectionUtils.mergeDeep(t,e)});var i={properties:{describedBy:{type:"string"},disabled:{type:"boolean",value:!1},displayOptions:{type:"object",properties:{converterHint:{type:"Array<string>|string"},helpInstruction:{type:"Array<string>|string",value:["notewindow"]},messages:{type:"Array<string>|string"},validatorHint:{type:"Array<string>|string"}}},help:{type:"object",properties:{instruction:{type:"string",value:""}}},helpHints:{type:"object",properties:{definition:{type:"string",value:""},source:{type:"string",value:""}}},labelEdge:{type:"string",enumValues:["inside","none","provided"]},labelHint:{type:"string",value:""},labelledBy:{type:"string"},max:{type:"number",value:100},messagesCustom:{type:"Array<Object>",writeback:!0,value:[]},min:{type:"number",value:0},orientation:{type:"string",enumValues:["horizontal","vertical"],value:"horizontal"},step:{type:"number",value:1},transientValue:{type:"object",writeback:!0,readOnly:!0,properties:{end:{type:"number"},start:{type:"number"}}},translations:{type:"object",value:{},properties:{higherValueThumb:{type:"string"},lowerValueThumb:{type:"string"},startEnd:{type:"string"}}},userAssistanceDensity:{type:"string",enumValues:["compact","efficient","reflow"],value:"reflow"},valid:{type:"string",writeback:!0,enumValues:["invalidHidden","invalidShown","pending","valid"],readOnly:!0},value:{type:"object",writeback:!0,properties:{end:{type:"number"},start:{type:"number"}}}},methods:{getProperty:{},refresh:{},reset:{},setProperties:{},setProperty:{},showMessages:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateEnd:{},ojAnimateStart:{}},extension:{}};i.extension._WIDGET_NAME="ojSlider",i.extension._INNER_ELEM="input",s.CustomElementBridge.register("oj-range-slider",{metadata:s.CollectionUtils.mergeDeep(i,e)})}(),s.__registerWidget("oj.ojSlider",o.oj.editableValue,{defaultElement:"<input>",version:"1.0.1",widgetEventPrefix:"oj",options:{labelledBy:null,max:100,min:0,orientation:"horizontal",readOnly:!1,disabled:!1,step:1,type:"fromMin",value:0,rawValue:void 0},_numPages:5,_defaultElementId:null,_sliderDisplayValue:null,_isRTL:function(){return"rtl"===r.getReadingDirection()},_ComponentCreate:function(){if(this._super(),this._inputtag=!1,this.element.is("INPUT"))if(this._inputtag=!0,this.element[0].style&&(this._styleFromInputTag=this.element[0].style.cssText),this._inputElementOriginalDisplay=this.element[0].style.display,this.element[0].style.display="none",this.OuterWrapper)this._elementWrapped=o(this.OuterWrapper);else{var e=o(this.element).wrap("<div> </div>");this._elementWrapped=e.parent()}else this._elementWrapped=this.element;this._transientValueName=this._IsCustomElement()?"transientValue":"rawValue",this._componentCreateStyling(),this._componentSetup()},_SetRawValue:function(e,t){var i={_context:{originalEvent:t,writeback:!0,internalSet:!0,readOnly:!0}};s.Object.compareValues(this.options[this._transientValueName],e)||this.option(this._transientValueName,e,i)},_componentCreateStyling:function(){this._elementWrapped[0].classList.add("oj-slider","oj-component","oj-form-control"),this._setOrientationStyles(!0)},_setOrientationStyles:function(e){var t=this._elementWrapped[0];this._isVertical()?(e||t.classList.remove("oj-slider-horizontal"),t.classList.add("oj-slider-vertical")):(e||t.classList.remove("oj-slider-vertical"),t.classList.add("oj-slider-horizontal"))},_componentSetup:function(){this._newMultiValue=[],this._thumbIndex=null,this._isCustomRangeSlider()&&(this.options.type="range","number"==typeof this.options.value&&(this.options.value={start:null,end:null})),"range"===this.options.type?this._multipleThumbs=!0:this._multipleThumbs=!1,this._calculateNewMax(),this._createSliderContainer(),this._createBarBackground(),this._buildValueOption(),this._createRange(),this._createThumbs(),this._updateUI(),this._setupEvents()},_copyLabelledbyToThumb:function(e){var t,i=this._elementWrapped.find(".oj-slider-thumb");if(this._isCustomRangeSlider()){var n=document.getElementById(e),s=n?n.textContent:"",r=a.getTranslatedString("oj-ojSlider.lowerValueThumb"),l=a.getTranslatedString("oj-ojSlider.higherValueThumb");i.attr("aria-label",s+" "+r),t=i[1],o(t).attr("aria-label",s+" "+l)}else i.attr("aria-labelledby",e),i.length>1&&(t=i[1],o(t).attr("aria-labelledby",String(e)))},_setAriaLabelToThumb:function(e){var t;if(this._isCustomRangeSlider()){var i=a.getTranslatedString("oj-ojSlider.lowerValueThumb"),n=a.getTranslatedString("oj-ojSlider.higherValueThumb");(t=this._elementWrapped.find(".oj-slider-thumb")).attr("aria-label",e+" "+i);var s=t[1];o(s).attr("aria-label",e+" "+n)}else(t=this.OuterWrapper.querySelector(".oj-slider-thumb")).setAttribute("aria-label",e)},_AfterCreate:function(){this._super(),this._makeDraggable(),this._setAriaInfo()},_setAriaInfo:function(){var e,i,n;if(this.OuterWrapper){if(this.options.labelledBy){var s=this.uuid+"_Label";n=t.EditableValueUtils._getOjLabelAriaLabelledBy(this.options.labelledBy,s),this._copyLabelledbyToThumb(n)}this.options.labelledBy&&!document.getElementById(this.options.labelledBy)||(e=this.OuterWrapper.getAttribute("aria-label"))&&this._setAriaLabelToThumb(e)}else if(i=this._GetLabelElementLocal()){var o=i.attr("id");o||(o=i.attr("for")),o.length>0&&this._copyLabelledbyToThumb(o)}else(e=this.element.attr("aria-label"))&&this._elementWrapped.find(".oj-slider-thumb").attr("aria-label",e)},_GetLabelElementLocal:function(){var e=this._getAriaLabelledByElementLocal();return null!==e&&0!==e.length||null!==(e=this._getAriaLabelForElementLocal())&&0!==e.length?e:null},_getAriaLabelForElementLocal:function(){var e;if(void 0!==(e=this.element.prop("id"))){var t=o("label[for='"+e+"']");if(t.length>0)return t;var i="span[for='"+e+"']";if(0!==o(i).length)return o(i)}return null},_getAriaLabelledByElementLocal:function(){var e=this.element.attr("aria-labelledby");if(void 0===e&&this.OuterWrapper){var t=this._elementWrapped.attr("aria-labelledby");if(t&&null!==document.getElementById(t))return o(document.getElementById(t))}if(void 0!==e){var i=o("label[id='"+e+"']");if(i.length>0)return i;var n=o("span[id='"+e+"']");if(n.length>0)return n}return null},widget:function(){return this._elementWrapped},_SetDisplayValue:function(e){this._sliderDisplayValue=e},_GetDisplayValue:function(){return this._sliderDisplayValue},_getElementId:function(){return this.OuterWrapper?(this._elementWrapped[0].id||this._elementWrapped.uniqueId(),this._elementWrapped[0].id):(this.element[0].id||this.element.uniqueId(),this.element[0].id)},_getThumbId:function(e){return this._getElementId()+"-thumb"+e},_getBarValueId:function(){return this._getElementId()+"-barValue"},_getBarBackgroundId:function(){return this._getElementId()+"-barBack"},_getSliderWrapperId:function(){return this._getElementId()+"-sliderWrapper"},_createThumbs:function(){var e,t,i="",n="class='oj-slider-thumb ui-state-default' tabindex='0' role='slider'aria-valuemin = '"+this._valueMin()+"' aria-valuemax = '"+this._valueMax()+"' ></span>",s=[];for(t=this._multipleThumbs?2:1,e=0;e<t;e++)i="<span id='"+this._getThumbId(e)+"' "+n,s.push(i);this._thumbs=o(s.join("")).appendTo(this._sliderContainer),this._thumb=this._thumbs.eq(0),this._refreshThumbOptions()},_refreshThumbOptions:function(){var e=this,t=0;this._thumbs.each((function(){o(this).data("oj-slider-thumb-index",t),t+=1,e._isVertical()&&o(this).attr("aria-orientation","vertical"),e.options.disabled?(o(this).attr("aria-disabled","true"),o(this).removeAttr("tabindex")):(o(this).removeAttr("aria-disabled"),o(this).attr("tabindex","0")),e.options.readOnly?o(this).attr("title","read only"):o(this).removeAttr("title")}))},_createSliderContainer:function(){var e=this._getSliderWrapperId(),t=this._elementWrapped.find("#"+e);t.length&&t.remove(),this._sliderContainer=o("<div></div>"),o(this._sliderContainer).attr("id",e),this._sliderContainer.addClass("oj-slider-container").addClass("oj-form-control-container"),this.element.after(this._sliderContainer),this._sliderContainer[0].style.cssText=this._styleFromInputTag},_createBarBackground:function(){var e=this._getBarBackgroundId(),t=this._elementWrapped.find("#"+e);t.length&&t.remove(),this._barback=o("<div></div>"),o(this._barback).attr("id",e),this._barback.addClass("oj-slider-bar"),this._sliderContainer.append(this._barback),this._barback.on("mousedown"+this.eventNamespace,this._reposition.bind(this))},_reposition:function(e){this._repositionThumb(e),this._mouseStop(e),this._getActiveThumb().focus()},_buildValueOption:function(){var e=this.options;if(this._isCustomRangeSlider())null===e.value?this.options.value={start:this._valueMin(),end:this._valueMax()}:(null!==e.value.start&&void 0!==e.value.start||(this.options.value.start=this._valueMin()),null!==e.value.end&&void 0!==e.value.end||(this.options.value.end=this._valueMax()),this.option("value",this.options.value,{_context:{writeback:!0,internalSet:!0}}));else if(e.type)if(null==this.options.value)this._multipleThumbs?this.options.value=[this._valueMin(),this._valueMax()]:this.options.value=this._valueMin(),this.option("value",this.options.value,{_context:{writeback:!0,internalSet:!0}});else if(this._multipleThumbs){var t;2!==this.options.value.length&&(t=this.options.value.length>0?this.options.value[0]:this._valueMin(),this.options.value=[t,this._valueMax()],this.option("value",this.options.value,{_context:{writeback:!0,internalSet:!0}}))}},_createRange:function(){var e=this.options,t="";if(e.type){this._range=o("<div></div>"),o(this._range).attr("id",this._getBarValueId()),this._sliderContainer.append(this._range),t="oj-slider-range oj-slider-bar-value",this._range.on("mousedown"+this.eventNamespace,this._reposition.bind(this)),this._range=this._sliderContainer.find("#"+this._getBarValueId());var i="";"fromMin"===e.type?i=" oj-slider-range-min":"fromMax"===e.type&&(i=" oj-slider-range-max"),this._range.addClass(t+i)}else this._range&&this._range.remove(),this._range=null},_setupTouch:function(e){this._touchProxy=s._TouchProxy.addTouchListeners(e)},_tearDownTouch:function(e){s._TouchProxy.removeTouchListeners(e)},_registerResizeListener:function(e){this._resizeObserver=new ResizeObserver(this._makeDraggable.bind(this)),this._resizeObserver.observe(e)},_setupEvents:function(){this._registerResizeListener(this._elementWrapped[0]),this._CanSetValue()&&this._AddHoverable(this._elementWrapped),this._thumbs.toArray().forEach((function(e){var t=o(e);this._UnregisterChildNode(t),this._on(t,this._thumbEvents),this._setupTouch(t),this._focusable({element:t,applyHighlight:!0})}),this)},_GetMessagingLauncherElement:function(){return this._elementWrapped},_GetContentElement:function(){return this._getActiveThumb()},_destroySliderDom:function(){this._resizeObserver.disconnect(),this._thumbs.toArray().forEach((function(e){var t=o(e);this._tearDownTouch(t)}),this),this._destroyDraggable(),this._range&&this._range.remove(),this._sliderContainer&&this._sliderContainer.remove(),this.OuterWrapper?(this._elementWrapped.removeUniqueId(),this._RemoveHoverable(this._elementWrapped)):(this.element.removeUniqueId(),this._RemoveHoverable(this.element))},_unwrapSlider:function(){r.unwrap(this.element,this._elementWrapped),this.element[0].style.display=this._inputElementOriginalDisplay,this._RestoreAttributes(this.element)},_destroy:function(){return this._destroySliderDom(),this._unwrapSlider(),this._super()},_repositionThumb:function(e){var t,i,n,s=this.options,a=0,r=this;return this._closestThumb=this._thumb,!(s.disabled||s.readOnly||(t={x:e.pageX,y:e.pageY},i=this._getNormValueFromMouse(t),n=this._valueMax()-this._valueMin()+1,this._multipleThumbs&&this._thumbs.each((function(e){var t=Math.abs(i-r._getMultiValues(e));(n>t||n===t&&(e===r._lastChangedValueIndex||r._getMultiValues(e)===s.min))&&(n=t,this._closestThumb=o(this),a=e)})),this._thumbIndex=a,this._closestThumb&&(this._thumbs.hasClass("ui-state-hover")||this._slide(e,a,i),this._getActiveThumb().addClass("oj-active").focus(),this._range.addClass("oj-active"),0)))},_initDragging:function(e,t){var i=this.options;return!i.disabled&&!i.readOnly&&(t.removeClass("oj-focus-highlight"),t.addClass("oj-active").focus(),this._range.addClass("oj-active"),!0)},_mouseDragInternal:function(e,t){var i=this._getNormValueFromThumb(t);this._slide(e,this._thumbIndex,i,!0);var n=100*this._getFracFromThumb(t);return this._multipleThumbs?this._setRangeMultiThumb(n,this._thumbIndex):this._setRange(n),!1},_mouseStop:function(e,t){this._thumbs.removeClass("oj-active"),this._range.removeClass("oj-active");var i=this._getNormValueFromThumb(t);return this._slide(e,this._thumbIndex,i),this._change(e,this._thumbIndex,!1),this._thumbIndex=null,!1},_isVertical:function(){return"vertical"===this.options.orientation},_getOrientationAdjustedFrac:function(e){var t=e;return t>1&&(t=1),t<0&&(t=0),this._isVertical()&&(t=1-t),t},_getNormValueFromMouse:function(e){var t,i,n=this._getFracFromMouse(e);return t=this._valueMax()-this._valueMin(),this._isRTL()&&!this._isVertical()&&(n=1-n),i=this._valueMin()+n*t,this._trimAlignValue(i)},_getFracFromMouse:function(e){var t,i,n;return this._isVertical()?(t=this._barback.height(),i=e.y-this._barback.offset().top):(t=this._barback.width(),i=e.x-this._barback.offset().left),0===t?1:(n=i/t,n=this._getOrientationAdjustedFrac(n))},_getActiveThumb:function(){return this._multipleThumbs?o(this._thumbs[this._thumbIndex?this._thumbIndex:0]):this._thumb},_getFracFromThumb:function(e){var t,i,n,s,o=e;if(e||(o=this._getActiveThumb()),this._isVertical()){var a=o.outerHeight()/2;s=o.offset().top+a,t=this._barback.height(),i=s-this._barback.offset().top}else{var r=o.outerWidth()/2;s=o.offset().left+r,t=this._barback.width(),i=s-this._barback.offset().left}return 0===t?1:(n=i/t,n=this._getOrientationAdjustedFrac(n))},_getNormValueFromThumb:function(e){var t,i,n;return t=this._getFracFromThumb(e),i=this._valueMax()-this._valueMin(),this._isRTL()&&!this._isVertical()&&(t=1-t),n=this._valueMin()+t*i,this._trimAlignValue(n)},_getOtherThumbValue:function(e){return this._getMultiValues(e?0:1)},_getNewThumbValueLimited:function(e,t,i){return this._isCustomRangeSlider()?null!==this.options.value.start&&null!==this.options.value.end&&(0===e&&t>i||1===e&&t<i)?i:t:2===this.options.value.length&&(0===e&&t>i||1===e&&t<i)?i:t},_slide:function(e,t,i,n){var s;if(this._multipleThumbs){s=this._getOtherThumbValue(t);var o=this._getNewThumbValueLimited(t,i,s);this._setMultiValue(e,t,o,n)}else this._setSingleValue(e,i,n),n||this._inputtag&&this.element.val(i)},_setSingleValue:function(e,t,i){this._newValue=this._trimAlignValue(t),this._SetRawValue(this._newValue,e),i||(this.options[this._transientValueName]=this._newValue,this._SetValue(this._newValue,e),this._updateUI())},_change:function(e,t,i){this._multipleThumbs?(this._lastChangedValues=this._getNewValues(t,this._newMultiValue[t]),this._SetRawValue(this._lastChangedValues,e),i||this._SetValue(this._lastChangedValues,e)):(this._SetRawValue(this._newValue,e),i||this._SetValue(this._newValue,e)),this._lastChangedValueIndex=t},_getNewValues:function(e,t){var i;if(this._isCustomRangeSlider())(i={}).start=this._trimAlignValue(this.options.value.start),i.end=this._trimAlignValue(this.options.value.end),e===this._thumbIndex&&(0===e&&(i.start=t),1===e&&(i.end=t));else{var n;for(i=this.options.value.slice(),n=0;n<i.length;n++)i[n]=this._trimAlignValue(i[n]);e===this._thumbIndex&&(i[e]=t)}return i},_getSingleValue:function(){return this._getValueAligned()},_getMultiValues:function(e){return this._getValuesAligned(e)},_setMultiValue:function(e,t,i,n){this._newMultiValue[t]=this._trimAlignValue(i),this._change(e,t,n),n||this._updateUI()},_setOption:function(e,t,i){var n;if("value"===e)if(this._isCustomRangeSlider())if(t instanceof Object)if(this._checkStartEnd(t.start,t.end),isNaN(t.start))n=this._parse(e,t.start),this._checkValueBounds(n,this._valueMin(),this._valueMax());else{this._multipleThumbs=!0,n=t;for(var s=Object.keys(t),o=0;o<s.length;o++)this._checkValueBounds(n[s[o]],this._valueMin(),this._valueMax())}else{n={start:this._valueMin(),end:this._valueMax()},this.options.value={start:this._valueMin(),end:this._valueMax()};for(var a=Object.keys(n),r=0;r<a.length;r++)this._checkValueBounds(n[a[r]],this._valueMin(),this._valueMax())}else if(Array.isArray(t))if(isNaN(t[0]))this._multipleThumbs=!1,n=this._parse(e,t[0]),this._checkValueBounds(n,this._valueMin(),this._valueMax());else{this._multipleThumbs=!0,n=t;for(var l=0;l<n.length;l++)this._checkValueBounds(n[l],this._valueMin(),this._valueMax())}else this._multipleThumbs=!1,n=this._IsCustomElement()?t:this._parse(e,t),this._checkValueBounds(n,this._valueMin(),this._valueMax());else"max"===e||"min"===e?(n=this._IsCustomElement()?t:this._parse(e,t),"min"===e?(this._checkMinMax(n,this._valueMax()),this._multipleThumbs?(this._getMultiValues(0)<n&&(this._isCustomRangeSlider()?this._super("value",{start:n,end:this._getMultiValues(1)},i):this._super("value",[n,this._getMultiValues(1)],i)),this._getMultiValues(1)<n&&(this._isCustomRangeSlider()?this._super("value",{start:this._getMultiValues(0),end:n},i):this._super("value",[this._getMultiValues(0),n],i))):this._getSingleValue()<n&&this._super("value",n,i)):"max"===e&&(this._checkMinMax(this._valueMin(),n),this._multipleThumbs?(this._getMultiValues(0)>n&&(this._isCustomRangeSlider()?this._super("value",{start:n,end:this._getMultiValues(1)},i):this._super("value",[n,this._getMultiValues(1)],i)),this._getMultiValues(1)>n&&(this._isCustomRangeSlider()?this._super("value",{start:this._getMultiValues(0),end:n},i):this._super("value",[this._getMultiValues(0),n],i))):this._getSingleValue()>n&&this._super("value",n,i))):n="step"===e?this._parseStep(t):t;switch(this._super(e,n,i),"readOnly"===e&&(this.options.readonly=n),"disabled"===e&&(this.options.disabled=n),e){case"disabled":this._refreshThumbOptions(),this.options.disabled?this._disableDraggable():this._makeDraggable();break;case"value":this._updateUI(),this._makeDraggable();break;case"min":case"max":this._calculateNewMax(),this._updateUI(),this._makeDraggable();break;case"orientation":this._setOrientationStyles(),this._reCreate();break;case"readonly":case"step":case"type":this._reCreate();break;case"labelledBy":this._setAriaInfo()}},_reCreate:function(){this._destroySliderDom(),this._componentSetup(),this.OuterWrapper&&this._elementWrapped.addClass("oj-complete"),this._AfterCreate()},_getValueAligned:function(){var e=this.options.value;return this._trimAlignValue(e)},_isCustomRangeSlider:function(){return!(!this._IsCustomElement()||"OJ-RANGE-SLIDER"!==this.element[0].parentNode.tagName)},_getValuesAligned:function(e){var t,i=null;return this._isCustomRangeSlider()?(t=0===e?void 0!==this.options.value.start&&null!==this.options.value.start?this.options.value.start:this._valueMin():void 0!==this.options.value.end&&null!==this.options.value.end?this.options.value.end:this._valueMax(),i=this._trimAlignValue(t)):i=this._trimAlignValue(this.options.value[e]),i},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,n=e-i;return 2*Math.abs(i)>=t&&(n+=i>0?t:-t),parseFloat(n.toFixed(5))},_calculateNewMax:function(){var e=this._valueMin();if((this.options.max-e)/this.options.step%1!=0){var t=(this.options.max-e)%this.options.step;this.max=this.options.max-t+this.options.step}else this.max=this.options.max},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_getGrid:function(){var e;e=this.options.step>0?(this._valueMax()-this._valueMin())/this.options.step:100;var t=(this._isVertical()?this._barback.height():this._barback.width())/e;return t<1&&(t=1),this._isVertical()?[1,t]:[t,1]},_getThumbsValueFrac:function(e){return(this._getMultiValues(e)-this._valueMin())/(this._valueMax()-this._valueMin())},_updateUI:function(){var e,t,i,n,s,a;this._multipleThumbs?(this._thumbs.toArray().forEach((function(t,r){var l=o(t);e=100*this._getThumbsValueFrac(r),this._isRTL()&&!this._isVertical()&&(e=100-e),this._isVertical()?l.css({top:100-e+"%"}):l.css({left:e+"%"}),0===r?(s=l,100===e?l.css({zIndex:1}):l.css({zIndex:""})):a=l,l.hasClass("oj-active")||(l.attr("aria-valuenow",this._getMultiValues(r)),l.attr("aria-valuemin",i),l.attr("aria-valuemax",n)),this._setRangeMultiThumb(e,r)}),this),s.hasClass("oj-focus")&&(s.css({zIndex:1}),a.css({zIndex:""})),a.hasClass("oj-focus")&&(s.css({zIndex:""}),a.css({zIndex:1}))):(t=this._getValueAligned(),i=this._valueMin(),n=this._valueMax(),e=n!==i?(t-i)/(n-i)*100:0,this._isRTL()&&!this._isVertical()&&(e=100-e),this._isVertical()?this._thumb.css({top:100-e+"%"}):this._thumb.css({left:e+"%"}),o(this._thumb).hasClass("oj-active")||(o(this._thumb).attr("aria-valuenow",t),o(this._thumb).attr("aria-valuemin",i),o(this._thumb).attr("aria-valuemax",n)),this._setRange(e))},_setRange:function(e){var t=this.options.type;this._isVertical()?("fromMin"===t&&this._range.css({height:e+"%"}),"fromMax"===t&&this._range.css({height:100-e+"%"})):this._isRTL()?("fromMin"===t&&this._range.css({width:100-e+"%"}),"fromMax"===t&&this._range.css({width:e+"%"})):("fromMin"===t&&this._range.css({width:e+"%"}),"fromMax"===t&&this._range.css({width:100-e+"%"}))},_setRangeMultiThumb:function(e,t){var i=this._range.attr("id");if(0===t){var n=100*this._getThumbsValueFrac(1);switch(this.options.type){case"fromMin":this._isVertical()?this._range.css({height:e+"%"}):this._range.css({width:e+"%"});break;case"range":this._isVertical()?(this._range.css({top:100-n+"%"}),this._range.css({height:n-e+"%"})):this._isRTL()?(this._range.css({left:100-n+"%"}),this._range.css({width:n-(100-e)+"%"})):(this._range.css({left:e+"%"}),this._range.css({width:n-e+"%"}))}}else{var s=100*this._getThumbsValueFrac(0);switch(this.options.type){case"fromMax":this._isVertical()?this._range.css({height:100-e+"%"}):this._range.css({width:100-e+"%"});break;case"range":if(this._isVertical())document.getElementById(i)&&(this._range.css({top:100-e+"%"}),this._range.css({height:e-s+"%"}));else if(this._isRTL())document.getElementById(i)&&(this._range.css({left:e+"%"}),this._range.css({width:100-e-s+"%"}));else if(document.getElementById(i)){var o=parseInt(document.getElementById(i).style.left,10);this._range.css({width:e-o+"%"})}}}},_thumbEvents:{keydown:function(e){var t,i,n,s,a=o(e.target).data("oj-slider-thumb-index");switch(this._thumbIndex=a,e.keyCode){case o.ui.keyCode.HOME:case o.ui.keyCode.END:case o.ui.keyCode.PAGE_UP:case o.ui.keyCode.PAGE_DOWN:case o.ui.keyCode.UP:case o.ui.keyCode.RIGHT:case o.ui.keyCode.DOWN:case o.ui.keyCode.LEFT:e.preventDefault(),o(e.target).addClass("oj-active")}switch(n=this.options.step,t=i=this._multipleThumbs?this._getMultiValues(a):this._getSingleValue(),e.keyCode){case o.ui.keyCode.HOME:i=this._valueMin();break;case o.ui.keyCode.END:i=this._valueMax();break;case o.ui.keyCode.PAGE_UP:i=this._trimAlignValue(t+(this._valueMax()-this._valueMin())/this._numPages);break;case o.ui.keyCode.PAGE_DOWN:i=this._trimAlignValue(t-(this._valueMax()-this._valueMin())/this._numPages);break;case o.ui.keyCode.UP:if(t===this._valueMax())return;s=t+n,i=this._trimAlignValue(s);break;case o.ui.keyCode.RIGHT:if(!this._isRTL()||this._isVertical()){if(t===this._valueMax())return;s=t+n}else{if(t===this._valueMin())return;s=t-n}i=this._trimAlignValue(s);break;case o.ui.keyCode.DOWN:if(t===this._valueMin())return;s=t-n,i=this._trimAlignValue(s);break;case o.ui.keyCode.LEFT:if(!this._isRTL()||this._isVertical()){if(t===this._valueMin())return;s=t-n}else{if(t===this._valueMax())return;s=t+n}i=this._trimAlignValue(s)}this._slide(e,a,i)},keyup:function(e){switch(e.keyCode){case o.ui.keyCode.HOME:case o.ui.keyCode.END:case o.ui.keyCode.PAGE_UP:case o.ui.keyCode.PAGE_DOWN:case o.ui.keyCode.UP:case o.ui.keyCode.RIGHT:case o.ui.keyCode.DOWN:case o.ui.keyCode.LEFT:var t=o(e.target).data("oj-slider-thumb-index");this._thumbIndex=t,this._change(e,t,!1),o(e.target).removeClass("oj-active"),this._updateUI(!0),this._thumbIndex=null}}},_InitOptions:function(e,i){var n=this.options,s=this;this._superApply(arguments);var o=[{attribute:"disabled",validateOption:!0},{attribute:"value"},{attribute:"title"},{attribute:"min"},{attribute:"max"},{attribute:"step"}];if(!this._IsCustomElement()&&(t.EditableValueUtils.initializeOptionsFromDom(o,i,this,(function(e){for(var t=e,i=["value","step","min","max"],o=0;o<i.length;o++){var a=i[o],r=a in t?t[a]:n[a];null!=r&&("step"===a?t[a]=s._parseStep(r):"min"===a||"max"===a?t[a]=s._parse(a,r):"value"===a&&(Array.isArray(r)?t[a]=r:t[a]=s._parse(a,r)))}})),void 0===n.value))throw new Error(this.getTranslatedString("noValue"));if(this._isCustomRangeSlider()&&this._checkStartEnd(n.value.start,n.value.end),this._checkMinMax(n.min,n.max),Array.isArray(n.value))for(var a=0;a<n.value.length;a+=1)this._checkValueBounds(n.value[a],n.min,n.max);else this._checkValueBounds(n.value,n.min,n.max)},_checkValueBounds:function(e,t,i){if(null!=t&&e<t)throw new Error(this.getTranslatedString("valueRange"));if(null!=i&&e>i)throw new Error(this.getTranslatedString("valueRange"))},_checkMinMax:function(e,t){if(null!=e&&null!=t&&e>=t)throw new Error(this.getTranslatedString("maxMin"))},_checkStartEnd:function(e,t){if(null!=e&&null!=t&&e>t)throw new Error(this.getTranslatedString("startEnd"))},getNodeBySubId:function(e){if(null==e)return this.element?this.element[0]:null;var t=e.subId;return"oj-slider-thumb-0"===t?this.widget().find(".oj-slider-thumb")[0]:"oj-slider-thumb-1"===t?this.widget().find(".oj-slider-thumb")[1]:"oj-slider-bar"===t||"oj-slider-bar-value"===t?this.widget().find("."+t)[0]:null},getSubIdByNode:function(e){if(null!=e){if(e.id===this._getThumbId(0)&&o(e).hasClass("oj-slider-thumb"))return{subId:"oj-slider-thumb-0"};if(e.id===this._getThumbId(1)&&o(e).hasClass("oj-slider-thumb"))return{subId:"oj-slider-thumb-1"};if(o(e).hasClass("oj-slider-bar"))return{subId:"oj-slider-bar"};if(o(e).hasClass("oj-slider-bar-value"))return{subId:"oj-slider-bar-value"}}return null},_GetDefaultStyleClass:function(){return"oj-slider"},_parse:function(e,t){var i;if(i=null!==t?+t:t,isNaN(i))throw new Error(this.getTranslatedString("optionNum",{option:e}));return i},_parseStep:function(e){var t;if(null===e)return 1;if((t=this._parse("step",e))<=0)throw new Error(this.getTranslatedString("invalidStep"));return(null===t||t<=0)&&(t=1),t},_getEndInterval:function(){return this._barback.offset().left+this._barback.width()},_getStartInterval:function(){return this._barback.offset().left},_callDraggable:function(e){var t,i=this._getGrid(),n=e[0].style;t=this._isVertical()?"y":"x";var s=this;e.draggable({axis:t,grid:i,disabled:!1,start:function(t){e[0]===o(s._thumbs)[0]?s._thumbIndex=0:e[0]===o(s._thumbs)[1]&&(s._thumbIndex=1),s._initDragging(t,e)},drag:function(t,i){var a=i.position;if(s._isVertical()?(n.left="",a.left=""):(n.top="",a.top=""),s._mouseDragInternal(t,e),s._isVertical()?(a.top<0&&(a.top=0),a.top>s._barback.height()&&(a.top=s._barback.height())):(a.left<0&&(a.left=0),a.left>s._barback.width()&&(a.left=s._barback.width())),s._multipleThumbs){var r,l;if(r=0===s._thumbIndex?o(s._thumbs[1]):o(s._thumbs[0]),s._isVertical()){var d=e.outerHeight()/2,c=s._barback.offsetParent().offset().top;l=r.offset().top+d-c}else{var u=e.outerWidth()/2,h=s._barback.offsetParent().offset().left;l=r.offset().left+u-h}0===s._thumbIndex?s._isVertical()?a.top<l&&(a.top=l):s._isRTL()?a.left<l&&(a.left=l):a.left>l&&(a.left=l):s._isVertical()?a.top>l&&(a.top=l):s._isRTL()?a.left>l&&(a.left=l):a.left<l&&(a.left=l)}},stop:function(t){this.style.width="",this.style.height="",s._mouseStop(t,e)}})},_makeDraggable:function(){this.options.disabled||(this._multipleThumbs?this._thumbs.toArray().forEach((function(e){var t=o(e);this._callDraggable(t)}),this):this._callDraggable(this._thumb))},_disableDraggable:function(){this._multipleThumbs?this._thumbs.toArray().forEach((function(e){var t=o(e);t.is(".ui-draggable")&&t.draggable("disable")}),this):this._thumb.is(".ui-draggable")&&this._thumb.draggable("disable")},_destroyDraggable:function(){this._multipleThumbs?this._thumbs.toArray().forEach((function(e){var t=o(e);t.is(".ui-draggable")&&t.draggable("destroy")}),this):this._thumb.is(".ui-draggable")&&this._thumb.draggable("destroy")}})})),define("common/plugin/jquery.ui.headerbuttons",["jquery","underscore","knockout","ojs/ojcore","core/util/Globals","common/upload/Manager","jqueryui-amd/widgets/slider","ojs/ojslider","ojs/ojcontext","jqueryui-amd/widgets/button"],(function(e,t,i,n){"use strict";e.widget("ui.headerbuttons",{_create:function(){this.element.addClass("ui-hdr-buttons"),this.element.uniqueId();var i=this._sortItems();this.element.append(this._buttonsHtml(i)),this._initInternalElements(),this.options&&this.options.doNotRedraw&&(this._verifyFit=t.once(this._verifyFit)),this.resizeHandler=t.debounce(this._verifyFit,500),e(window).on("resize."+this.element.attr("id"),e.proxy(this.resizeHandler,this)),docs.events.on("action:toggleSidebar",this._verifyFit,this),docs.events.on("action:headerRename",this._verifyFit,this),osn.events.on("navbar:toggled",this._verifyFit,this),this._verifyFit()},disabledButtons:{},keydownHeaderButton:function(t){if(t){var i=t.keyCode||t.which;i!==e.ui.keyCode.ENTER&&i!==e.ui.keyCode.SPACE||(t.preventDefault(),t.stopPropagation(),this.clickHeaderButton(t))}},clickHeaderButton:function(i){var n=e(i.currentTarget).data("action");this.options.actionSelected&&t.isFunction(this.options.actionSelected)&&this.options.actionSelected(n,i)},moreMenuItemClicked:function(i,n){var s=e(n.item).data("action");this.options.actionSelected&&t.isFunction(this.options.actionSelected)&&this.options.actionSelected(s,i)},dropDownMoreMenu:function(){var i=e(".header-more-menu [data-combo]",this.element);if(i.length>0){var n=t.uniq(i.map((function(){return e(this).attr("data-combo")})));t.each(n,(function(t){var i=this._getComboButtonItems(t,!0);i&&e(".header-more-menu ",this.element).dropmenu("replaceWith","[data-combo="+t+"]",i)}),this)}this.updateMoreMenuItems()},updateMoreMenuItems:function(){var i=this.options.hasActions&&t.isFunction(this.options.hasActions)?this.options.hasActions():{};t.each(Object.keys(i),(function(t){var n='[data-action="'+t+'"]';e(".header-more-menu",this.element).dropmenu("updateItems",n,i[t]),this.disabledButtons[this.uuid]&&this.disabledButtons[this.uuid].indexOf(t)>=0&&e(".header-more-menu",this.element).dropmenu("updateItemStatus",n,!1)}),this),e(".header-more-menu a",this.element).removeClass("osn-selected");var n=e('.header-more-menu li[data-state="true"]',this.element);t.each(n,(function(t){var i=e(t).data("action");this._getActionState(i)&&e(t).find("a").addClass("osn-selected")}),this),e(".header-more-menu .dropmenu_sep",this.element).show(),this._updateMenuSeparators(e(".header-more-menu ul",this.element).children().toArray().reverse()),this._updateMenuSeparators(e(".header-more-menu ul",this.element).children().toArray())},_updateMenuSeparators:function(t){for(var i=!1,n=!1,s=0;s<t.length;s++){var o=e(t[s]).hasClass("dropmenu_sep"),a="none"!==e(t[s]).css("display");!o||0!==s&&!n&&i||(e(t[s]).hide(),a=!1),i=(!o||!a)&&(i||a),n=o}},_setupButtonUploader:function(){var i=t.findWhere(this.options.items,{isUploader:!0});if(i&&this.options.theModel){var n=e('[data-action="'+i.action+'"]',this.element);n.uniqueId();var s={parentModel:this.options.theModel,browse_button_id:n.attr("id"),applyButtonClasses:!1,persist:!0,confirm:!1,is_menu:!1,single_selection:i.isSingleFile};e.extend(s,i.uploader_options?i.uploader_options:{}),this.btnUploader=docs.upload.Manager.newUploader(s),this._checkAndCallUploaderCreatedCallback(i,this.btnUploader)}},_destroyButtonUploader:function(){if(this.btnUploader){var e=t.findWhere(this.options.items,{isUploader:!0});this._checkAndCallUploaderDestroyedCallback(e,this.btnUploader),docs.upload.Manager.destroyUploader(this.btnUploader),this.btnUploader=void 0}},_findUploadItem:function(i){var n;if(t.isString(i)){var s=t.findWhere(this.options.items,{action:i});s&&t.isArray(s.items)&&(n=t.findWhere(s.items,{isUploader:!0}))}else if(t.isObject(i)){var o=e('li[data-uploader="true"]',i.$menu);if(1===o.length){var a=o.data("action");t.find(this.options.items,(function(e){return e.action===a?(n=e,!0):!!("show"===e.menu&&e.containsUpload&&t.isArray(e.items)&&(n=t.findWhere(e.items,{isUploader:!0})))||void 0}),this)}}else n=t.findWhere(this.options.items,{isUploader:!0});return n},_setupUploader:function(i){if(this.uploaderItem=this._findUploadItem(i),this.uploaderItem){var n=t.isString(i)?'[data-action="'+i+'"]':".header-more-menu",s=e(n,this.element),o=e('[data-action="'+this.uploaderItem.action+'"]',s);if(1===o.length&&(this._destroyUploader(),this.options.theModel)){t.isEmpty(o.attr("id"))&&o.uniqueId();var a={parentModel:this.options.theModel,parentFolder:this.options.theModel.get("folder"),browse_button_id:o.attr("id"),applyButtonClasses:!1,persist:!1,confirm:!1,is_menu:!0,single_selection:this.uploaderItem.isSingleFile,input_click_callback:function(){o.closest(".dropmenu_container").dropmenu("collapseMenu")},input_cancel_callback:function(){o.closest(".dropmenu_container").dropmenu("collapseMenu")}};e.extend(a,this.uploaderItem.uploader_options?this.uploaderItem.uploader_options:{}),this.uploader=docs.upload.Manager.newUploader(a),this._checkAndCallUploaderCreatedCallback(this.uploaderItem,this.uploader)}}},_destroyUploader:function(e){this.uploader&&(this._checkAndCallUploaderDestroyedCallback(this.uploaderItem,this.uploader),docs.upload.Manager.destroyUploader(this.uploader),this.uploader=void 0)},_checkAndCallUploaderCreatedCallback:function(e,t){e&&e.uploader_options&&e.uploader_options.uploader_created_cb&&e.uploader_options.uploader_created_cb.call(this.options.cbContext,t)},_checkAndCallUploaderDestroyedCallback:function(e,t){e&&e.uploader_options&&e.uploader_options.uploader_destroyed_cb&&e.uploader_options.uploader_destroyed_cb.call(this.options.cbContext,t)},_sortItems:function(){var e=this.options.items;if(this.options.hasActions&&t.isFunction(this.options.hasActions)){var i=this.options.hasActions();e=t.filter(this.options.items,(function(e){return e.menuSeparator||"menu"===e.location||i[e.action]||e.spacer}))}var n=t.sortBy(t.where(e,{location:"left"}),"locationOrder"),s=t.sortBy(t.where(e,{location:"menu"}),"menuOrder"),o=t.sortBy(t.where(e,{location:"right"}),"locationOrder"),a=t.sortBy(t.where(e,{location:"side"}),"locationOrder");return{left:n,menu:s,right:o,side:a,weight:t.sortBy(t.union(n,o,a),"weight")}},_initInternalElements:function(){var s=e('button[data-locationType="button"]',this.element);t.each(s,(function(e){this._initButton(e)}),this);var o=e('[data-locationType="stateButton"]',this.element);t.each(o,(function(e){this._initButton(e)}),this),e('button[data-uploader="true"]',this.element).length>0&&this._setupButtonUploader();var a=e('[data-locationType="comboButton"]',this.element);t.each(a,(function(e){this._initComboButton(e)}),this);var r=e('[data-locationType="slider"]',this.element);if(t.each(r,(function(s){var o=e(s).data("action"),a=t.findWhere(this.options.items,{action:o});checkFeatureFlag("BidiSupportSlider")?(e(s).attr("title",docs.i18n.t("GENERAL_CMD_ZOOM_PCT",a.value)),i.applyBindings(a,s),n.Context.getContext(s).getBusyContext().whenReady().then(t.bind((function(){s.addEventListener("transientValueChanged",(function(e){e.detail.previousValue!=e.detail.value&&a.slide(e,e.detail)})),this._buttonsFit()||this._verifyFit()}),this))):(e(s).slider({range:"min",min:a.min,max:a.max,value:a.value,slide:a.slide}),e(s).find(".ui-slider-handle").attr("title",docs.i18n.t("GENERAL_CMD_ZOOM_PCT",a.value)))}),this),e('.header-more-menu li[data-uploader="true"]',this.element).uniqueId(),e(".header-more-menu",this.element).dropmenu({align:"right",select:e.proxy(this.moreMenuItemClicked,this),dropdown:e.proxy(this.dropDownMoreMenu,this),afterOpen:e.proxy(this._setupUploader,this),button:{text:!1,icons:{primary:"header-more-icon oj-ux-icon oj-ux-ico-overflow-h"}}}),"none"!==e(".header-more-menu",this.element).css("display")){this.updateMoreMenuItems();var l=this._moreMenuAnyItemsVisible();e(".header-more-menu",this.element).toggle(l)}var d=e(".containerview-sidebar-buttons button:visible",this.element).length;e(this.element).toggleClass("flush-right",d>0)},_initButton:function(i){var n=e(i).data("action"),s=t.findWhere(this.options.items,{action:n});s&&s.icon?e(i).button({icons:{primary:s.icon},text:s.iconAndText||!1}):s&&t.has(s,"disabled")?e(i).button({disabled:s.disabled}):e(i).button(),n&&(e(i).click(e.proxy(this.clickHeaderButton,this)),e(i).keydown(e.proxy(this.keydownHeaderButton,this))),s&&s.locationType&&"stateButton"===s.locationType&&e(i).toggleClass("selected",this._getActionState(n))},_initComboButton:function(i){var n=e(i).data("action"),s=t.findWhere(this.options.items,{action:n}),o={icons:{secondary:"ui-icon-triangle-1-s"}};s&&s.icon&&(o.icons.primary=s.icon,o.text=!1),s&&t.has(s,"disabled")&&(o.disabled=s.disabled),e('.header-combo-menu[data-action="'+n+'"]',this.element).dropmenu({select:e.proxy(this.comboItemClicked,this),dropdown:e.proxy(this.updateComboItems,this,n),afterOpen:e.proxy(this._setupUploader,this,n),button:o})},_getComboButtonItems:function(e,i){var n;if(this.options.getComboButtonItems&&t.isFunction(this.options.getComboButtonItems)){var s=this.options.getComboButtonItems(e,i);if(t.isArray(s)){var o=t.findWhere(this.options.items,{action:e});o&&(o.items=s),n=t.chain(s).sortBy("order").map((function(e){var i=t.isObject(e.action)?e.action.name:e.action,n=t.isObject(e.action)&&e.action.params||{};return{label:this._getLabel(e),title:this._getTooltip(e),itemIcon:e.itemIcon,itemIconClass:e.itemIconClass,data:{action:i,combo:i,"action-params":JSON.stringify(n),uploader:e.isUploader},menuSeparator:e.menuSeparator}}),this).value()}}return n},updateComboItems:function(i){var n=this._getComboButtonItems(i,!1);n&&e('.header-combo-menu[data-action="'+i+'"]',this.element).dropmenu("setItems",n);var s=this.options.hasActions&&t.isFunction(this.options.hasActions)?this.options.hasActions():{};t.each(Object.keys(s),(function(t){var n='[data-action="'+t+'"]';e('.header-combo-menu[data-action="'+i+'"]',this.element).dropmenu("updateItems",n,s[t]),this.disabledButtons[this.uuid]&&this.disabledButtons[this.uuid].indexOf(t)>=0&&e('.header-combo-menu[data-action="'+i+'"]',this.element).dropmenu("updateItemStatus",n,!1)}),this)},comboItemClicked:function(i,n){var s=e(n.item).data("action"),o=e(n.item).data("actionParams");this.options.actionSelected&&t.isFunction(this.options.actionSelected)&&this.options.actionSelected(s,i,o||null)},_getActionState:function(e){return!!t.isFunction(this.options.buttonState)&&this.options.buttonState(e)},_moreMenuAnyItemsVisible:function(){for(var t=e(".header-more-menu ul",this.element).children().toArray(),i=!1,n=0;n<t.length;n++){if("none"!==e(t[n]).css("display")){i=!0;break}}return i},_buttonsHtml:function(e){var i="";t.each(e.left,(function(e){i+=this._htmlForItem(e)}),this);var n=this._adjustMenuItems(e.menu);return n.length?(i+='<span class="header-more-menu">',i+="<button ",i+='class="header-more-button containerview-header-button dropmenu_button">',i+=docs.i18n.t("CONTEXT_TOOLBAR_MORE"),i+="</button>",i+='<ul class="dropmenu_topmenu">',t.each(n,(function(e){i+=this._htmlForMenuItem(e)}),this),i+="</ul>",i+="</span>"):(i+='<span class="header-more-menu" style="display:none">',i+="<button ",i+='class="header-more-button containerview-header-button dropmenu_button">',i+=docs.i18n.t("CONTEXT_TOOLBAR_MORE"),i+="</button>",i+="</span>"),t.each(e.right,(function(e){i+=this._htmlForItem(e)}),this),e.side.length&&(i+='<div class="containerview-sidebar-buttons">',t.each(e.side,(function(e){i+=this._htmlForSideItem(e)}),this),i+="</div>"),i},_htmlForItem:function(e){switch(e.locationType=e.locationType||"button",e.locationType){case"slider":return this._htmlForSlider(e);case"spacer":return this._htmlForSpacer(e);case"comboButton":return this._htmlForComboButton(e);default:return this._htmlForButton(e)}},_htmlForButton:function(e){var t=this._getTooltip(e),i=this._getLabel(e),n='<button tabindex="0" ';return n+='title="'+t+'" ',n+='data-action="'+e.action+'" ',e.isUploader&&(n+='data-uploader="true" '),e.locationType?n+='data-locationType="'+e.locationType+'" ':n+='data-locationType="button" ',n+='class="containerview-header-button skipTargetBackup',e.extraClasses&&(n+=" "+e.extraClasses),e.buttonStyle&&(n+=" "+e.buttonStyle),n+='">',e.buttonWithIconClass&&(n+='<span class="buttonWithIcon '+e.buttonWithIconClass+'"></span>'),n+=i+"</button>"},_htmlForSlider:function(e){if(checkFeatureFlag("BidiSupportSlider"))return e.valueObservable=i.observable(e.value),`<oj-slider class="toolbar_ojslider" data-oj-context data-action="${e.action}" data-locationType="slider" min="${e.min}" max="${e.max}" value="[[valueObservable]]"></oj-slider>`;var t='<div class="toolbar_slider" ';return t+='data-action="'+e.action+'" ',t+='data-locationType="slider"></div>'},_htmlForSpacer:function(e){var t="<span ";return t+='data-action="'+e.action+'" ',t+='class="horizontal-spacer" data-locationType="spacer"></span>'},_htmlForMenuItem:function(e){if(e.menuSeparator)return'<div class="dropmenu_sep"></div>';var t=this._getTooltip(e),i=this._getLabel(e,!0),n="<li ";return n+='data-action="'+e.action+'" ',e.isUploader&&(n+='data-uploader="true" '),"stateButton"===e.locationType&&(n+='data-state="true" '),e.comboAction&&(n+='data-combo="'+e.comboAction+'" '),e.checked&&(n+='data-checked="true" '),n+='title="'+t+'" class="remove_button_style">',e.colorPicker&&(n+='<div data-colorpicker="true"></div>'),n+='<a href="#">',e.itemIcon?n+="<img"+(e.itemIconClass?' class="'+e.itemIconClass+'"':"")+' src="'+e.itemIcon+'"/>':e.itemIconClass&&(n+='<span class="oj-ux-icon '+e.itemIconClass+'"></span>'),n+=i+"</a></li>"},_htmlForSideItem:function(e){var t="<button ";return t+='title="'+this._getTooltip(e)+'" ',t+='data-action="'+e.action+'" ',t+='class="containerview-header-button" data-locationType="button"></button>'},_htmlForComboButton:function(e){var i="",n=t.sortBy(e.items,"order"),s=this._getTooltip(e),o=this._getLabel(e);return i='<span class="header-combo-menu" ',i+='data-action="'+e.action+'">',i+='<button tabindex="0" ',i+='title="'+s+'" ',i+='data-action="'+e.action+'" ',i+='data-locationType="comboButton" ',i+='class="header-combo-button containerview-header-button dropmenu_button',e.extraClasses&&(i+=" "+e.extraClasses),e.buttonStyle&&(i+=" "+e.buttonStyle),i+='">',e.hasColorSwatch&&(i+='<span class="header-combo-button-swatch"> </span>',i+='<span class="ui-button-icon-space"> </span>'),i+='<span class="header-combo-button-text">',i+=o,i+="</span>",i+="</button>",i+='<ul class="dropmenu_topmenu">',t.isArray(e.items)&&t.each(n,(function(t){t.comboAction=e.action,i+=this._htmlForMenuItem(t)}),this),i+="</ul>",i+="</span>"},_getLabel:function(e,t){if(e.rawText)return e.rawText;if(e.text)return docs.i18n.t(e.text);if(!t)return"";var i=this._getTooltip(e);return i||void 0},_getTooltip:function(e){return e.rawTooltip?e.rawTooltip:e.title||e.tooltip?docs.i18n.t(e.title||e.tooltip):""},_adjustMenuItems:function(e){var i=[];return t.each(e,(function(e){e.menuSeparator?i.length>0&&(t.last(i).menuSeparator||i.push(e)):i.push(e)})),i.length>0&&t.last(i).menuSeparator&&i.pop(),i},_buttonsFit:function(){var t=e(this.element).parent().width(),i=e(this.element).siblings().outerWidth(!1);return e(this.element).outerWidth(!0)<=t-i},_allWeightedVisible:function(i){var n=!0;return t.each(i.weight,(function(t){switch(t.locationType){case"slider":e('div:visible[data-action="'+t.action+'"]',this.element).length<=0&&(n=!1);break;case"spacer":e('span:visible[data-action="'+t.action+'"]',this.element).length<=0&&(n=!1);break;case"comboButton":e('span.header-combo-menu:visible:has(button[data-action="'+t.action+'"])',this.element).length<=0&&(n=!1);break;default:e('button:visible[data-action="'+t.action+'"]',this.element).length<=0&&(n=!1)}}),this),n},_verifyFit:function(){this.element.removeClass("header-buttons-rendered");var e=this._sortItems(),t=e.weight.length>0?e.weight[0].weight:1;this._buttonsFit()?this._allWeightedVisible(e)||(this._elementEmpty(),this.element.append(this._buttonsHtml(e)),this._initInternalElements(),this._buttonsFit()||this._adjustToFit(e,t)):this._adjustToFit(e,t),docs.events.trigger("action:toolbarRenderingHasCompleted",this),this.element.addClass("header-buttons-rendered")},_adjustToFit:function(i,n){var s=t.where(i.weight,{weight:n});t.each(s,(function(n){if("comboButton"===n.locationType?e('.header-combo-menu[data-action="'+n.action+'"]',this.element).hide():(e('[data-action="'+n.action+'"]',this.element).hide(),n.isUploader&&this._destroyButtonUploader()),"show"===n.menu){var s=t.sortedIndex(i.menu,n,"menuOrder");if("comboButton"===n.locationType){var o=[],a={menuSeparator:!0,location:"menu",menuOrder:n.menuOrder};if(o.push(a),t.isUndefined(n.items))o.push({action:"action_placeholder",comboAction:n.action,location:"menu",menu:"show",menuOrder:n.menuOrder,tooltip:"",text:""});else if(n.items.length){var r=t.sortBy(n.items,"order");t.each(r,(function(e){var t={action:e.action,comboAction:n.action,location:"menu",menu:"show",menuOrder:n.menuOrder,tooltip:e.tooltip,text:e.text,rawText:e.rawText};o.push(t)}),this)}o.push(a),i.menu.splice.apply(i.menu,[s,0].concat(o))}else i.menu.splice(s,0,n);e(".header-more-menu",this.element).show()}if(i.left=t.reject(i.left,(function(e){return e.action===n.action})),i.right=t.reject(i.right,(function(e){return e.action===n.action})),i.side=t.reject(i.side,(function(e){return e.action===n.action})),"side"===n.location){var l=e(".containerview-sidebar-buttons button:visible",this.element).length;l<=0&&e(".containerview-sidebar-buttons",this.element).hide(),e(this.element).toggleClass("flush-right",l>0)}}),this);var o=this._buttonsFit();if(this.doNotRedraw||!o&&s.length>0){var a=this._nextWeight(i.weight,n);this._adjustToFit(i,a)}else this._elementEmpty(),this.element.append(this._buttonsHtml(i)),this._initInternalElements()},_nextWeight:function(e,i){var n=i+1;if(!(t.where(e,{weight:n}).length>0)){var s=!1;t.each(e,(function(e){!s&&e.weight>i&&(n=e.weight,s=!0)}),this)}return n},_destroy:function(){e(window).off("."+this.element.attr("id")),docs.events.off("action:toggleSidebar",this._verifyFit,this),docs.events.off("action:headerRename",this._verifyFit,this),osn.events.off("navbar:toggled",this._verifyFit,this),this._destroyUploader(),this._destroyButtonUploader()},_elementEmpty:function(){this._destroyUploader(),this._destroyButtonUploader(),this.element.empty()},update:function(){if(!this.doNotRedraw){var e=this._sortItems();if(this._elementEmpty(),this.element.append(this._buttonsHtml(e)),this._initInternalElements(),!this._buttonsFit()){var t=e.weight.length>0?e.weight[0].weight:1;this._adjustToFit(e,t)}}},updateStateButton:function(t,i){e('button[data-action="'+t+'"]',this.element).toggleClass("selected",i)},enableButton:function(i,n){var s=this.disabledButtons[this.uuid],o=s?s.indexOf(i):-1;e('button[data-action="'+i+'"]',this.element).button(n?"enable":"disable");var a=t.findWhere(this.options.items,{action:i});a&&(a.disabled=!n),n&&o>=0?this.disabledButtons[this.uuid].splice(o,1):n||-1!==o||(this.disabledButtons[this.uuid]||(this.disabledButtons[this.uuid]=[]),this.disabledButtons[this.uuid].push(i))}})})),define("common/container/view/ContainerViewHeader",["require","jquery","underscore","backbone","core/embedapi/EmbedApi","docs/container/template/ContainerViewHeader.template","core/extensions","core/util/Globals","common/container/model/ContextActions","common/sidebar/SidebarConfig","common/plugin/jquery.ui.dropmenu","common/plugin/jquery.ui.headerbuttons"],(function(require,e,t,i,n,s){"use strict";var o=docs.common.Globals;return docs.views.ContainerViewHeader=i.View.extend({className:"containerview-header",template:s,renderData:function(){return{title:t.result(this.options.containerView,"title")}},initialize:function(e){delete(e=e||{}).el,e.urlParams=e.urlParams||{},t.bindAll(this,"setupHeaderButtons","titleMenuSelected"),this.contextActions=e.contextActions||new docs.models.ContextActions(e)},clean:function(){this.remove()},headerButtonConfig:{menu:{text:"CONTEXT_TOOLBAR_MORE"},hasActions:null,items:[]},render:function(){var e=t.extend({i18n:docs.i18n},t.result(this,"renderData"));e.hideTitle=e.hideTitle||this.options.header&&this.options.header.hideTitle,e.titleMenu=!(this.options.header&&this.options.header.hideMenu)&&(e.titleMenu||!1),e.showHeaderInfo=this.options&&this.options.showHeaderInfo,e.extraClasses="flex "+(e.extraClasses||""),this.$el.addClass(e.extraClasses);var i=this.template(e);return this.$el.html(i),n.options.hideColorStripe&&(this.$(".containerview-header-color-stripe").remove(),this.$el.addClass("no-color-stripe")),this.renderHeaderTitle(e),this.setupHeaderButtons(),t.defer(t.bind(this.updateHeaderButtons,this)),this},setupHeaderButtons:function(){this.configureHeaderButtons(),this.renderHeaderButtons()},renderHeaderTitle:function(e){e.titleMenu&&this.$(".containerview-title-menu").dropmenu({select:this.titleMenuSelected,selectionMenu:!0,ariaContext:docs.i18n.t("FILTER_MENU_LABEL",e.titleMenu.label)})},renderHeaderButtons:function(){this.$(".containerview-header-buttons").headerbuttons(this.headerButtonConfig);var e=this.$(".containerview-sidebar-buttons"),t=this;0===e.length?this.$(".containerview-header-buttons").removeClass("flush-right"):0===docs.sidebar.Config.getTabs(t.model,t.options).length&&(e.hide(),t.$(".containerview-header-buttons").removeClass("flush-right"))},configureHeaderButtons:function(){this.headerButtonConfig.hasActions=e.proxy(this.hasActions,this),this.headerButtonConfig.getComboButtonItems=e.proxy(this.getComboButtonItems,this),this.headerButtonConfig.actionSelected=e.proxy(this.handleAction,this),this.headerButtonConfig.theModel=this.model,this.headerButtonConfig.cbContext=this},updateHeaderButtons:function(){this.$('.containerview-header-buttons:data("ui-headerbuttons")').length&&(this.$(".containerview-header-buttons").headerbuttons("update"),this.trigger("header:updateButtons"),this.$(".containerview-header-buttons").addClass("header-buttons-updated"))},reloadHeaderButtons:function(){var e=this.hasActions();t.each(e,(function(e,t){this.enableActions(t,e)}),this),this.updateHeaderButtons()},titleMenuSelected:function(t,i){var n={id:e(i.item).attr("id"),label:e(i.item).text().trim(),title:e(i.item).attr("title")};return this.$(".containerview-title-menu .dropmenu_button").contents().first().replaceWith(n.label),this.$(".containerview-title-menu  .dropmenu_button").attr({title:n.title}),this.$(".containerview-title-menu  a").removeClass("osn-selected"),this.$(".containerview-title-menu  #"+n.id+" a").addClass("osn-selected"),n},actionSelected:function(){},handleAction:function(e,t,i){this.actionSelected(e,t,i)},hasActions:function(){return{}},getComboButtonItems:function(){},iconifyButtonsWidth:{"zh-CN":500,"zh-TW":500,de:500,"en-GB":500,"en-US":500,es:625,fr:725,it:625,ja:525,ko:500,"pt-BR":625},iconifyButtonsWidthDefault:500,iconOnlyButtonWidth:function(){return this.iconifyButtonsWidth.hasOwnProperty(o.lang)?this.iconifyButtonsWidth[o.lang]:this.iconifyButtonsWidthDefault},onCloseView:function(){this.$('.containerview-header-buttons:data("ui-headerbuttons")').length&&this.$(".containerview-header-buttons").headerbuttons("destroy"),t.isFunction(this.model.close)&&this.model.close()},enableActions:function(e,i){var n=this.$('.containerview-header-buttons:data("ui-headerbuttons")');n.length&&(t.isString(e)&&(e=[e]),e.forEach((function(e){n.headerbuttons("enableButton",e,i)})))},adjustRenderDataForStdExternalUsers:function(e,t){docs.common.Globals.isStandardExternalUser&&(e.titleMenu.items=e.titleMenu.items.filter((function(e){return e.id!==(t||"filter_owned")})))}}),docs.views.ContainerViewHeader})),define("common/share/util/AccessCodes",["jquery","underscore","core/util/Service"],(function(e,t){"use strict";var i=function(e){var i=new Date;i.setTime(i.getTime()-864e5),t.each(e,(function(e,t,n){if(e.expTime<=i)delete n[t];else{var s="dAccessCode-"+e.linkId+"="+encodeURIComponent(e.accessCode)+";path=/";document.cookie=s}}),this)};return docs.utils.AccessCodes={haveCode:function(){return this._checkCodes(),docs.common.Service.linkId in this.codeSet},getCode:function(){return this._checkCodes(),docs.common.Service.linkId in this.codeSet?this.codeSet[docs.common.Service.linkId].accessCode:void 0},setCode:function(e){this._checkCodes(),docs.common.Service.linkId in this.codeSet?(this.codeSet[docs.common.Service.linkId].accessCode=e,this.codeSet[docs.common.Service.linkId].expTime=new Date):this.codeSet[docs.common.Service.linkId]={linkId:docs.common.Service.linkId,accessCode:e,expTime:new Date},i(this.codeSet)},clearCode:function(){this._checkCodes(),delete this.codeSet[docs.common.Service.linkId],i(this.codeSet)},_checkCodes:function(){var e,i;this.codeSet||(this.codeSet=(e={},i=document.cookie.split(";"),t.each(i,(function(t){if(t.indexOf("dAccessCode")>-1){var i=t.split("-");if(2===i.length){var n=i[1].split("="),s=n[0],o=n[1];e[s]={linkId:s,accessCode:o,expTime:new Date}}}})),e))}},docs.utils.AccessCodes})),define("docs/share/template/AccessCodeView.template",["underscore"],(function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="bp-large accessCode">  <img class="codeform-bpImage" src="'+(null==(__t=boilerPlateImg)?"":_.escape(__t))+'" alt=""/>  <h3 class="bp-info-text">'+(null==(__t=i18n.t("ACCESSCODE_FORM_TITLE"))?"":_.escape(__t))+'</h3>  <div class="codeform-form">    <div id="accessCodeInputSect" class="codeform-entrysect codeform-entrysect-nomsg">      <input id="accessCodeInput" class="codeform-input skipTarget" type="password" />      <span id="accessCodeMsgIcon" class="codeform-msgIcon"></span>      <span id="accessCodeMsgTitle" class="codeform-msgTitle"></span>      <div id="accessCodeMsgDetails" class="codeform-msgDetails"></div>    </div>    <button id="applyCodeBtn" class="accessCodeEnterBtn">'+(null==(__t=i18n.t("ACCESSCODE_ACCESS_BTN"))?"":_.escape(__t))+'</button>    <a class="text_button accessCode-helplink" href="#">'+(null==(__t=i18n.t("ACCESSCODE_HELP_LINK"))?"":_.escape(__t))+"</a>  </div></div>";return __p}})),define("docs/template/HelpVideoDialog.template",["underscore"],(function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div id="help_video_dialog">  <div id="help_video_wrapper">    <iframe  src="'+(null==(__t=frameSrc)?"":_.escape(__t))+'"></iframe>  </div></div>';return __p}})),define("common/dialog/HelpVideoDialog",["jquery","underscore","backbone","core/util/Globals","core/dialog/OJDialog","docs/template/HelpVideoDialog.template"],(function(e,t,i,docs,n,s){"use strict";var o=i.View.extend({initialize:function(e){t.bindAll(this,"render"),this.options=e},render:function(){this.$el.html(s({frameSrc:this.options&&this.options.videoUrl?this.options.videoUrl:""}))},width:800,resizable:!1,dialogClassName:"dialog-dropdown",title:function(){return docs.i18n.t("GENERAL_CMD_HELP_VIDEOS")}},{show:function(e){return e.DialogClass=o,e.useOJET=!0,n.show(e)}});return o})),define("common/util/HelpUtils",["jquery","underscore","backbone","core/util/Globals","common/dialog/HelpVideoDialog"],(function(e,t,i,docs,n){"use strict";var s=docs.common.Globals;return docs.common.HelpUtils={HelpWindow:"CloudWebUIHelp",WindowParams:"width=600, height=800, scrollbars=yes, resizable=yes, location=yes, menubar=no, titlebar=no, toolbar=no, status=no",popupAdminHelp:function(e){this.popUpHelpWindow(e||s.URLs.help.admin)},popupUserHelp:function(e){this.popUpHelpWindow(e||s.URLs.help.main)},popUpHelpWindow:function(t){var i=e(window)[0].screen?(e(window)[0].screen.availWidth-600)/2:0,n=e(window)[0].screen?(e(window)[0].screen.availHeight-800)/2:0,s=this.WindowParams+", left="+i+", top="+n,o=this.addLanguageId(t),a=window.open(o,this.HelpWindow,s);a&&a.focus()},launchAdminHelp:function(){var e=this.addLanguageId(s.URLs.help.admin);window.open(e)},launchUserHelp:function(){var e=this.addLanguageId(s.URLs.help.main);window.open(e)},popUpVideoBox:function(e){var t=this.addLanguageId(e);n.show({videoUrl:t})},showVideo:function(e){var t=this.addLanguageId(e);window.open(t,"helpWin")},addLanguageId:function(e){var t="ctx="+this.getURIParam(e,"ctx"),i=t+"_"+s.lang;return e.replace(t,i)},getURIParam:function(e,t){for(var i=e.substring(e.indexOf("?")+1).split("&"),n=0;n<i.length;n++){var s=i[n].split("=");if(s[0].toLowerCase()===t.toLowerCase())return s[1]}return null}},docs.common.HelpUtils})),define("common/plugin/jquery.ui.placeholder",["jquery","underscore"],(function(e,t){"use strict";e.widget("ui.placeholder",{options:{text:"",tooltip:void 0,textStyleClass:"ui-ph-text",ATSetLabel:!1,clearOnFocus:!0},_create:function(){this._on(this.element,{keydown:this.clearPlaceholder,keyup:this.checkPlaceholder,click:!0===this.options.clearOnFocus?this.clearPlaceholder:this.setCursor,focus:!0===this.options.clearOnFocus?this.clearPlaceholder:this.setCursor,beforepaste:this.clearPlaceholder,input:this.handlePaste,blur:this.checkPlaceholder,select:this.setCursor}),this.element.is("input")&&"password"===this.element.attr("type")&&(this.passwordField=!0,this.element.prop("type","text")),this.element.val()||(this.element.val(this.options.text),this.element.addClass(this.options.textStyleClass)),this._checkPlaceholder=e.proxy(this._checkPlaceholderInternal,this),this._changeTooltip()},_destroy:function(){this.element.removeClass(this.options.textStyleClass),this.element.val()===this.options.text&&this.element.val("")},clearPlaceholder:function(t){if(this.element.val()===this.options.text){var i=e.ui.keyCode;if("keydown"===t.type&&t.which===i.TAB)return!0;if(!1===this.options.clearOnFocus&&"keydown"===t.type&&(t.which===i.LEFT||t.which===i.UP||t.which===i.RIGHT||t.which===i.DOWN||t.which===i.BACKSPACE||t.which===i.DELETE))return this.setCursor(),!1;this.element.val(""),this.element.removeClass(this.options.textStyleClass),this.passwordField&&this.element.prop("type","password")}},checkPlaceholder:function(e){this._checkPlaceholder(e)},_checkPlaceholderInternal:function(i){var n=e(this.element);0!==n.val().length||!1!==this.options.clearOnFocus&&i&&"blur"!==i.type||(i&&"blur"===i.type?t.defer((function(e,t){e.val(t.options.text),e.addClass(t.options.textStyleClass),t.passwordField&&t.element.prop("type","text")}),n,this):(n.val(this.options.text),n.addClass(this.options.textStyleClass),i&&"blur"!==i.type&&this.setCursor(),this.passwordField&&this.element.prop("type","text")))},setCursor:function(e){if(this.element.val()===this.options.text&&!this.element[0].hidden&&this.element.width()>0&&this.element.height()>0)try{this.element[0].setSelectionRange(0,0)}catch(e){}},changeText:function(e){this.element.val()===this.options.text&&this.element.val(e),this.options.text=e,this._changeTooltip()},changeTooltip:function(e){this.options.tooltip=e,this._changeTooltip()},_changeTooltip:function(){if(this.options.ATSetLabel){var e=this.options.tooltip?this.options.tooltip:this.options.text;this.element.attr("TITLE",e),this.element.attr("aria-label",e)}},applyPlaceholder:function(){this.element.val(""),this.checkPlaceholder()},getValue:function(){return this.element.val()===this.options.text?"":this.element.val()},setValue:function(e){e||(e=this.options.text),this.element.val(e),e!==this.options.text?this.element.removeClass(this.options.textStyleClass):this.element.addClass(this.options.textStyleClass)},handlePaste:function(){window.setTimeout(this._checkPlaceholder,1,e(this.element))}})})),define("common/share/view/AccessCodeView",["jquery","underscore","backbone","core/util/Browser","docs/share/template/AccessCodeView.template","core/util/ErrorMsg","core/util/Globals","common/util/HelpUtils","core/util/Service","common/share/util/AccessCodes","common/plugin/jquery.ui.placeholder","css!geminiCss/gemini-layouts"],(function(e,t,i,n,s){"use strict";var o={csInvalidPasswordForLinkAccess:{formatString:"ACCESSCODE_WRONG_CODE_MSG"},csInvalidAccessCodeForLinkAccess:{formatString:"ACCESSCODE_WRONG_CODE_MSG"}};return docs.views.AccessCodeView=i.View.extend({events:{"click #applyCodeBtn":"launchLink","click .accessCode-helplink":"showHelp","keypress #accessCodeInput":"onKeypressCodeInput"},initialize:function(){return t.bindAll(this,"launchLink","showHelp","onKeypressCodeInput"),this},render:function(){!n.isIPad&&(n.isIOS||n.isAndroid);this.$el.html(s({i18n:docs.i18n,boilerPlateImg:docs.common.Globals.staticRoot+docs.common.Utils.getBoilerplateImageUrl("images/Boilerplate_General.png")})),this.$el.addClass("accessCodeView"),this.$("#accessCodeInput").placeholder({text:docs.i18n.t("ACCESSCODE_INPUT_PLACEHOLDER"),ATSetLabel:!0})},launchLink:function(){var i=encodeURIComponent(this.$("#accessCodeInput").placeholder("getValue"));if(i&&0!==i.length){var n="",s=location.pathname;docs.common.Browser.isIEv9()&&(s+=location.hash.replace("#",""));var o=s.toLowerCase().split("/"),a=t.indexOf(o,"fileview");a>-1?n="fFileGUID:"+o[a+1].toUpperCase():(a=t.indexOf(o,"folder"))>-1&&(n="fFolderGUID:"+o[a+1].toUpperCase()),docs.utils.AccessCodes.setCode(decodeURIComponent(i));var r=docs.common.Service.formatServiceUrl("FLD_INFO")+"&item="+n,l=this;e.ajax(r,{type:"GET",async:!1,testCode:!0,success:function(){l.options.callback()},error:function(e,t,i){docs.utils.AccessCodes.clearCode(),l._displayError(i,e.responseData),e.errorHandled=!0}})}else this._displayMessage("codeform-entrysect-warning",docs.i18n.t("ACCESSCODE_NO_CODE"),docs.i18n.t("ACCESSCODE_NO_CODE_DESC"))},onKeypressCodeInput:function(t){(t.keyCode||t.which)===e.ui.keyCode.ENTER&&this.launchLink()},_displayError:function(e,t){var i;i=e.errorMsgKey.indexOf("!csInvalidPasswordForLinkAccess")>-1||e.errorMsgKey.indexOf("csInvalidAccessCodeForLinkAccess")>-1?docs.i18n.t("ACCESSCODE_WRONG_CODE"):docs.i18n.t("ACCESSCODE_GENERAL_ERROR"),this._displayMessage("codeform-entrysect-error",i,docs.common.ErrorMsg.getErrorMessageFromSet(o,e,t))},_displayMessage:function(e,t,i){var n=this.$("#accessCodeInputSect");n.removeClass("codeform-entrysect-nomsg codeform-entrysect-warning codeform-entrysect-error"),n.addClass(e),this.$("#accessCodeMsgTitle").text(t),this.$("#accessCodeMsgDetails").text(i)},showHelp:function(e){e.stopPropagation(),e.preventDefault();var t=docs.common.Globals.URLs.help.main.replace("cecshelp","CECMC-GUID-BD76B97A-34E3-4085-9CC8-579FD8E7B811");docs.common.HelpUtils.popupUserHelp(t)}}),docs.views.AccessCodeView})),define("docs/sidebar/template/ContentSidebarView.template",["underscore"],(function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="drop-target-dth">  <div class="drop-target-dth-t drop-target-dth-h drop-target-highlight"></div>  <div class="drop-target-dth-r drop-target-dth-v drop-target-highlight"></div>  <div class="drop-target-dth-b drop-target-dth-h drop-target-highlight"></div>  <div class="drop-target-dth-l drop-target-dth-v drop-target-highlight"></div></div><div class="layout-content"></div><div class="layout-sidebar-sideboard" style="display:none;"></div><div class="layout-sidebar sidebar-content" role="complementary" aria-label="'+(null==(__t=i18n.t("SIDEBAR_CONTENT_TT"))?"":_.escape(__t))+'">  <div class="sidebar-selector"></div>  <div class="sidebar-panes"></div></div>';return __p}})),define("docs/sidebar/template/SidebarSelector.template",["underscore"],(function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="sidebar-select-wrapper">  <div class="sidebar-select-menu dropmenu_container">    <button class="sidebar-select-btn dropmenu_button" title="'+(null==(__t=selectedBoard.title)?"":_.escape(__t))+'" tabindex="-1" aria-hidden="true">'+(null==(__t=selectedBoard.title)?"":_.escape(__t))+'</button>    <div class="sidebar-selector-subtitle"></div>    <ul class="dropmenu_topmenu">      ',_(activeSideboards).each((function(e){__p+='      <li data-pane="'+(null==(__t=e.pane)?"":_.escape(__t))+'" data-name="'+(null==(__t=e.name)?"":_.escape(__t))+'" data-checked="false" title="'+(null==(__t=e.title)?"":_.escape(__t))+'" class="remove_button_style">        <a href="#">'+(null==(__t=e.title)?"":_.escape(__t))+"</a>      </li>      "})),__p+="    </ul>  </div></div>";return __p}})),define("common/sidebar/view/SidebarView",["jquery","underscore","backbone","core/util/Session","docs/sidebar/template/SidebarSelector.template","core/apm/apmHelper","core/util/Globals","core/util/Logger","jqueryui-amd/widgets/button"],(function(e,t,i,n,s,o){"use strict";var a=docs.common.Globals,r="layout";return docs.views.SidebarView=i.View.extend({initialize:function(){t.bindAll(this,"toggleSidebar","initializeSidebarState","onShowSidebar","onToggleSidebar","activateSidebar","closeSidebarMQ","closeSidebar","_addSidebarSelector","updateSidebarSelector","mediaQueryEvent","onFullScreenMode"),this.sidebarData=new i.Model,this.paneViews={},this.sidebars={},this.$sideboard=this.$el.siblings(".layout-sidebar-sideboard"),this.$container=this.$el.parents(".content-sidebar-layout"),this.options.tabData&&(this.hasTabs=!0,this.tabData=this.options.tabData),this.contextActions=this.collection,window.matchMedia&&(this.mediaQueryEventFunc=e.proxy(this.mediaQueryEvent,this),this.mediaQueryListener=window.matchMedia("(max-width: 1050px)"),this.mediaQueryListener.addListener(this.mediaQueryEventFunc),a.embed&&t.delay(this.mediaQueryEvent,100,this.mediaQueryListener)),this.listenTo(docs.events,"sidebar:showSidebar",this.onShowSidebar),this.listenTo(docs.events,"sidebar:hideSidebar",this.closeSidebar),this.listenTo(docs.events,"sidebar:toggleSidebar",this.onToggleSidebar),this.listenTo(docs.events,"viewer:fullscreenMode",this.onFullScreenMode),this.listenTo(this.contextActions,"setSelection",t.debounce(this.onSetSelection,500)),this.listenTo(this.contextActions,"sidebar:showSidebar",this.onShowSidebar),this.listenTo(this.contextActions,"sidebar:hideSidebar",this.closeSidebar),this.listenTo(this.contextActions,"sidebar:toggleSidebar",this.onToggleSidebar),this.attr2MetaData={}},close:function(){t.each(this.sidebars,(function(e){e&&(this.hideSidebar(e),t.isFunction(e.close)&&e.close())}),this),this.mediaQueryListener&&this.mediaQueryListener.removeListener(this.mediaQueryEventFunc),this.remove()},render:function(){this.hasTabs&&this.renderSideboards()},renderOnContainerChange:function(){this.updateSideboards()},renderSideboards:function(){this.$sideboard.empty(),this.$el.find(".sidebar-panes").empty(),this.$(".sideboard-pane-content").hide(),this.$sideboard.hide()},createSidebarView:function(e,t){var i="div[data-pane-id="+this._getTabPaneId(e)+"]",n=this.$el.find(i),s=new t({el:n,model:this.sidebarData,sidebar:{name:e.name,label:e.label}});return s&&(s.trigger=e.trigger,s.$sidebar_el=n),s},dynamicCreateSideboard:function(i,n){n.sideboardsDeferreds=n.sideboardsDeferreds||{},n.sideboardsDeferreds[i.name]=function(){var s=e.Deferred();return require([i.view],(function(e){if(!n.sidebars[i.name]){var o=n.createSidebarView(i,e);n.sidebars[i.name]=o,t.result(o,"render")}s.resolve()})),s}},updateSideboards:function(){docs.common.Logger(r).trace("updating sideboards");var i,n=[],s=[],o=this.$sideboard.find(".sideboard-button");o.each((function(t,o){i=e(o).data("name"),n.push(i),s.push(i)})),t.each(this.tabData,(function(a,r,l){i=a.name;var d=t.indexOf(n,i);if(d>-1)e(o[d]).toggle(a.addTab).attr("data-onoff","on"),s=t.without(s,i);else{for(var c,u=this._getButtonAndSidebar(a),h=!1,p=r+1;p<l.length&&!((c=this.$sideboard.find('.sideboard-button[data-name="'+l[p].name+'"]')).length>0);)p++;c&&c.length>0&&(c.before(u.button),h=!0),h||this.$sideboard.append(u.button),this.$el.find(".sidebar-panes").append(e(u.sidebar).hide()),this.sidebars[i]||this.dynamicCreateSideboard(a,this),this.$('.sideboard-button[data-name="'+i+'"]').click(this.toggleSidebar)}}),this);var a=!1;if(t.each(s,(function(e){var i=this.$sideboard.find('.sideboard-button[data-name="'+e+'"]'),n=i.data("pane");a=a||i.hasClass("selected"),i.hide().attr("data-onoff","off");var s=this.sidebars[e];s&&(this.hideSidebar(s),t.result(s,"close"),t.result(s,"clean"),delete this.sidebars[e]),this.$('[data-pane-id="'+n+'"]').remove(),i.remove()}),this),a){var l=t.findWhere(this.tabData,{defaultSidebar:!0});l?this.activateSidebar(l.name):this.closeSidebar(!0)}this._addSidebarSelector()},_getTabPaneId:function(e){return"sideboard-pane-"+e.name.replace(/\s/g,"")},_addSidebarSelector:function(){var i=[];this.$sideboard.find('.sideboard-button[data-onoff="on"]').each((function(){var t={selected:e(this).hasClass("selected"),title:e(this).attr("title"),name:e(this).attr("data-name"),pane:e(this).attr("data-pane")};i.push(t)}));var o=n.documentSidebarTab(),a=t.findWhere(i,{name:o}),r=i.length>0?s({activeSideboards:i,selectedBoard:a||i[0],i18n:docs.i18n}):"";(this.$el.find(".sidebar-selector").empty(),this.$el.find(".sidebar-selector").append(r),this.$el.find(".sidebar-select-menu").dropmenu({align:"right",elementWidth:".sidebar-select-wrapper",select:e.proxy(this._sideboardSelected,this),button:{showLabel:!0,icon:"ui-icon-triangle-1-s",iconPosition:"end"}}),a||i.length>0)&&(a=a||i[0],this.$el.find(".sidebar-selector li[data-name]").attr("data-checked","false"),this.$el.find('.sidebar-selector li[data-name="'+a.name+'"]').attr("data-checked","true"),!this.$el.parents(".content-sidebar-layout").hasClass("noSidebar")&&this.activateSidebar(a.name))},_sideboardSelected:function(i,n){var s=e(n.item).attr("data-name");s&&!t.isEmpty(s)&&docs.events.trigger("sidebar:showSidebar",s)},updateSidebarSelector:function(t){var i=this.$el.find('.sidebar-selector li[data-name="'+t+'"]');if(this.$el.find(".sidebar-selector li[data-name]").attr("data-checked","false"),i.length>0){var n=e(i).attr("title");e(i).attr("data-checked","true"),this.$el.find(".sidebar-select-btn").button("option","label",n),this.$el.find(".sidebar-select-btn").attr({title:n}),this.$el.find(".sidebar-select-btn").attr({"aria-label":docs.i18n.t("UI_DROPDOWN_MENU_LABEL",n)}),this.sidebarSelectorSubtitle()}},sidebarSelectorSubtitle:function(){var e=this.contextActions&&this.contextActions.container&&(this.contextActions.container.isFile||this.contextActions.container.isFolder||this.contextActions.container.isHome)?t.unescape(this.contextActions.container.get("name")):"";this.contextActions&&this.contextActions.selection&&this.contextActions.selection.length>0&&(e=this.contextActions.selection.length>1?docs.i18n.t("SIDEBAR_MULTIPLE_SELECTED_ITEMS",this.contextActions.selection.length):(this.contextActions.selection[0].folderItem&&(this.contextActions.selection[0].folderItem.isFile||this.contextActions.selection[0].folderItem.isFolder),t.unescape(this.contextActions.selection[0].name))),this.$el.find(".sidebar-selector-subtitle").text(e),this.$el.find(".sidebar-selector-subtitle").attr("title",e),e?this.attr2MetaData.subTitle=e:delete this.attr2MetaData.subTitle,this.attr2MetaData.id&&o.setViewMetaData("sidebarPanel",this.attr2MetaData)},_getButtonAndSidebar:function(e){var t=docs.template('<div data-pane-id="{{ paneId }}" class="sideboard-pane-content {{ sideboardClass }}"></div>'),i=this._getTabPaneId(e);return{button:docs.template('<button class="sideboard-button" title="{{ title }}" data-name="{{ sidebarName }}" data-pane="{{ sidebarId }}" data-color="{{ bgColor }}" data-onoff="on"><div class="sideboard-button-image {{ image }}"></div></button>')({title:e.label,image:e.imageClass,sidebarName:e.name,sidebarId:i,bgColor:e.bgColor}),sidebar:t({paneId:i,sideboardClass:e.el.substr(1)})}},stopListeningContainerChanged:function(){this.stopListening(this.contextActions,"change:container")},containerChanged:function(){this.container=this.contextActions.container,this.sidebarData.set({container:this.container}),this.renderOnContainerChange()},onSetSelection:function(e){this.sidebarSelectorSubtitle()},removeFolder:function(e){this.stopListening(e),this.selectedFile=e,this.selectedFolder=null,this.$(".sidebar-browsing-pane").hide(),this.setSidebarData()},displayModelChange:function(){this.setSidebarData()},displayModelRemove:function(){this.contextActions.setSelection([])},setSidebarData:function(){this.displayModel&&this.stopListening(this.displayModel),this.displayModel=this.selectedFile||this.selectedFolder,this.sidebarData.set({displayModel:this.displayModel,folder:this.selectedFolder,file:this.selectedFile,container:this.container,contextActions:this.contextActions,isViewer:this.options.layout.contentView.model.isViewer}),this.renderOnContainerChange(),this.displayModel&&(this.listenTo(this.displayModel,"change",this.displayModelChange),this.listenTo(this.displayModel,"remove",this.displayModelRemove))},_prepFocusIfSupported:function(i){t.isFunction(i.setWantFocus)&&(this.sidebarData._sidebarFocusReady=e.Deferred(),this.isSidebarExplicitActivate()?(i.setWantFocus(!0),this.isSidebarExpectTransition()?this.$el.one(docs.common.Utils.getTransitionEndEventForBrowser(),function(){this.sidebarData._sidebarFocusReady.resolve(!0)}.bind(this)):this.sidebarData._sidebarFocusReady.resolve(!0)):this.sidebarData._sidebarFocusReady.resolve(!1))},showSidebar:function(e){this._prepFocusIfSupported(e),t.isFunction(e.activate)&&e.activate(),e.$sidebar_el.show(),e.trigger&&docs.events.trigger(e.trigger)},hideSidebar:function(e){t.isFunction(e.deactivate)&&e.deactivate(),e.$sidebar_el.hide()},updateTabData:function(e){this.tabData=e,this.updateSideboards(),this.listenTo(this.contextActions,"change:container",this.containerChanged)},toggleSidebar:function(t){var i;if(t&&t.target&&(i=e(t.target),e(t.target).hasClass("sideboard-button")||(i=e(t.target).parent())),i){var n=i.hasClass("selected"),s=i.attr("data-name");n?(this.closeSidebar(!0),this.$(".sidebar-select-btn").attr("tabindex",-1)):(this.setSidebarExplicitActivate(!0),this.setSidebarExpectTransition(!0),this.activateSidebar(s),this.$(".sidebar-select-btn").attr("tabindex",0),this.$el.one(docs.common.Utils.getTransitionEndEventForBrowser(),function(){this.$el.addClass("sidebar-expanded"),e.contains(this.$el[0],document.activeElement)||"0"!==this.$(".sidebar-select-btn").attr("tabindex")||this.$(".sidebar-select-btn").focus()}.bind(this)))}},mediaQueryEvent:function(e){e.matches?this.closeSidebarMQ():this.openSidebarMQ()},closeSidebarMQ:function(){this.closeSidebar(!1)},openSidebarMQ:function(){this.initializeSidebarState()},initializeSidebarState:function(){if(!a.isAppLinkLink&&!a.isPublicLink&&n.documentSidebar()){var e=n.documentSidebarTab(),i=t.findWhere(this.tabData||[],{defaultSidebar:!0}),s=this.activateSidebar(e);if(osn.util.isSidebarOpenInNarrowView())return void this.closeSidebar(!1);!s&&i&&(s=this.activateSidebar(i.name)),s||this.closeSidebar(!0)}},onFullScreenMode:function(i){(i=i||{}).isFullScreen?this.closeSidebar(!0):"rtl"===docs.common.Globals.dir&&e(".noSidebar .sidebar-content").is(":visible")&&(this.$el.hide(),t.defer(function(){this.$el.show()}.bind(this)))},closeSidebar:function(e,t){docs.common.Logger(r).trace("closing sidebar"),this.deactivateCurrentSidebar(),this.$sideboard.find(".sideboard-button").removeClass("selected"),this.$el.removeClass("sidebar-expanded"),this.$(".sideboard-pane-content").hide(),this.$(".sidebar-panes").hide(),this.$container.addClass("noSidebar"),e&&n.documentSidebar(!1),t&&n.documentSidebarTab(t),this.options.layout.trigger("toggleSidebar",!1),this.$el.one(docs.common.Utils.getTransitionEndEventForBrowser(),(function(){docs.events.trigger("action:toggleSidebar",!1)})),osn.util.clearParamFromURL("sbr",!0),this.attr2MetaData={},o.clearViewMetaData("sidebarPanel")},activateSidebar:function(i,s){if(docs.common.Logger(r).trace("activating sidebar",i),"hide"===i)return this.closeSidebar(!0);if(this.$cssDfd||(this.$cssDfd=docs.common.Utils.requireCssBundleAsPromise(["gemini-dialog"])),!i&&this.options.tabData.length>0&&(i=this.options.tabData[0].name),this.sideboardsDeferreds&&!this.sideboardsDeferreds[i]){var a=t.findWhere(this.tabData,{optionsfilter:"sidebar."+i});a&&(i=a.name)}if(!(s=!!t.isUndefined(s)||s))return n.documentSidebarTab(i),this.closeSidebar(!0);var l=!1;return this.sideboardsDeferreds&&this.sideboardsDeferreds[i]&&e.when(this.$cssDfd,this.sideboardsDeferreds[i]()).done(t.bind((function(){var t=this.$sideboard.find('.sideboard-button[data-name="'+i+'"]');if(t.length)if(t.hasClass("selected"))l=!0;else{this.$sideboard.find(".sideboard-button").removeClass("selected"),this.$(".sideboard-pane-content").hide(),this.$(".sidebar-panes").show();var s=t.attr("data-pane");t.addClass("selected"),docs.common.Logger(r).trace("showing",e("#"+s)),this.sidebars[i]&&this.showSidebar(this.sidebars[i]);var a=t.attr("data-color");this.$el.css({"background-color":a}),this.updateSidebarSelector(i),this.$container.removeClass("noSidebar"),n.documentSidebar(!0),n.documentSidebarTab(i),docs.events.trigger("action:toggleSidebar",!0),this.options.layout.trigger("toggleSidebar",!0),this.$el.one(docs.common.Utils.getTransitionEndEventForBrowser(),function(){docs.events.trigger("action:toggleSidebar",!0),this.$el.addClass("sidebar-expanded")}.bind(this)),docs.common.Logger(r).trace("sidebar activated"),l=!0,this.attr2MetaData.id=i,o.setViewMetaData("sidebarPanel",this.attr2MetaData)}}),this)),docs.common.Logger(r).trace("sidebar NOT activated"),l},deactivateCurrentSidebar:function(){var e=this.$sideboard.find(".sideboard-button.selected");if(e.length){var t=e.data("name"),i=this.sidebars[t];i&&this.hideSidebar(i)}return e.length},onShowSidebar:t.debounce((function(i,s){if(docs.common.Logger(r).trace("received onShowSidebar"),!i||t.isEmpty(i)){var o=n.documentSidebarTab(),a=[];this.$sideboard.find('.sideboard-button[data-onoff="on"]').each((function(){var t={selected:e(this).hasClass("selected"),title:e(this).attr("title"),name:e(this).attr("data-name"),pane:e(this).attr("data-pane")};a.push(t)})),i=t.findWhere(a,{name:o})?o:a.length?a[0].name:"hide"}var l=this.$sideboard.find('.sideboard-button[data-name="'+i+'"]');if(!l.length){var d=t.findWhere(this.tabData,{optionsfilter:"sidebar."+i});d&&(i=d.name,l=this.$sideboard.find('.sideboard-button[data-name="'+i+'"]'))}if(l.length&&!l.hasClass("selected")){var c=!!this.deactivateCurrentSidebar();this.setSidebarExplicitActivate(!s),this.setSidebarExpectTransition(!c),this.activateSidebar(i,s),this.updateSidebarSelector(i)}else t.isEqual(i,"hide")&&this.closeSidebar(!0)}),50),onToggleSidebar:t.debounce((function(i){if(!i||t.isEmpty(i)){var s=n.documentSidebarTab(),o=[];this.$sideboard.find('.sideboard-button[data-onoff="on"]').each((function(){var t={selected:e(this).hasClass("selected"),title:e(this).attr("title"),name:e(this).attr("data-name"),pane:e(this).attr("data-pane")};o.push(t)})),i=t.findWhere(o,{name:s})?s:o.length?o[0].name:"hide"}docs.common.Logger(r).trace("received onToggleSidebar");var a=this.$sideboard.find('.sideboard-button[data-name="'+i+'"]');if(!a.length){var l=t.findWhere(this.tabData,{optionsfilter:"sidebar."+i});l&&(i=l.name,a=this.$sideboard.find('.sideboard-button[data-name="'+i+'"]'))}a.length&&(this.toggleSidebar({target:a[0]}),this.updateSidebarSelector(i))}),50),retrieveCurrentState:function(){var e,t=!this.$el.parents(".content-sidebar-layout").hasClass("noSidebar")||n.documentSidebar();if(t){var i=this.$sideboard.find(".sideboard-button.selected");i.length>0&&(e=i.data("name"))}else e=n.documentSidebarTab();return{isOpen:t,currentSidebar:e}},restoreSidebarState:function(e){e&&t.has(e,"isOpen")&&(e.isOpen||this.closeSidebar(!1),n.documentSidebar(!!e.isOpen),this.$sideboard.find(".sideboard-button").removeClass("selected"),t.has(e,"currentSidebar")&&(n.documentSidebarTab(e.currentSidebar),e.isOpen&&this.$sideboard.find('.sideboard-button[data-name="'+e.currentSidebar+'"]').addClass("selected")))},setSidebarExplicitActivate:function(e){this.sidebarExplicitActivate=e},isSidebarExplicitActivate:function(){return this.sidebarExplicitActivate},setSidebarExpectTransition:function(e){this.sidebarExpectTransition=!!e},isSidebarExpectTransition:function(){return this.sidebarExpectTransition}}),docs.views.SidebarView})),define("common/sidebar/view/ContentSidebarView",["jquery","underscore","backbone","core/util/Globals","core/util/Session","core/util/Utils","docs/sidebar/template/ContentSidebarView.template","core/util/Logger","common/container/model/ContextActions","common/sidebar/view/SidebarView"],(function(e,t,i,docs,n,s,o){"use strict";var a="noSidebar",r="layout";return docs.views.ContentSidebarView=i.View.extend({className:"content-sidebar-layout noSidebar",events:{},initialize:function(e){return t.bindAll(this,"setSidebarView"),e=e||{},this.contextActions=e.contextActions||new docs.models.ContextActions,n.documentSidebar(!1),this.render(),this},delayedViewTimeout:function(){this.closeCurrentView();var e=this.getBoilerplateData(),t=s.getGenericBoilerplateHtml(e.clazz,e.imageUrl,e.msg,e.details);return this.$(".layout-content").html(t),this},getBoilerplateData:function(){return{msg:docs.i18n.t("BP_LOAD_MSG"),details:docs.i18n.t("BP_LOAD_DETAIL"),clazz:"bp-large alta-spinner",imageUrl:"css-spinner"}},render:function(){n.documentSidebar()||this.$el.addClass(a);var e=o({i18n:docs.i18n});return this.$el.html(e),this.rendered=!0,this},checkStoreSidebarState:function(e){delete e.originalSidebarState,e.restoreSidebarState&&this.sidebarView&&(e.originalSidebarState=this.sidebarView.retrieveCurrentState())},setContentView:function(e){docs.common.Logger(r).debug("setting content view to",e),this.checkStoreSidebarState(e),this.closePendingDelayedView(),this.closeCurrentView(),this.contentView=e,this.contextActions.setScopeKey(e.scopeKey,{layout:e.defaultLayout}),this.contentView.setContextActions(this.contextActions),this.$el.find(".layout-content").html(this.contentView.$el),this.sidebarView||this.listenTo(this.contextActions,"reset",this.setSidebarView)},setContentViewDelayed:function(t){docs.common.Logger(r).debug("setting content view to",t),this.checkStoreSidebarState(t),this.closePendingDelayedView(),this.delayedView=t,this.contextActions.setScopeKey(t.scopeKey,{layout:t.defaultLayout}),t.setContextActions(this.contextActions),this.delayedViewTimeoutId=window.setTimeout(e.proxy(this.delayedViewTimeout,this),1500),this.listenTo(this.delayedView,"view:renderContent",this.onDelayedViewRender),this.listenTo(this.delayedView,"view:renderError",this.onDelayedViewRender),this.sidebarView||(this.stopListening(this.contextActions,"reset",this.setSidebarView),this.listenTo(this.contextActions,"reset",this.setSidebarView))},closePendingDelayedView:function(){this.sidebarView&&(this.sidebarView.stopListeningContainerChanged(),this.stopListening(this.contextActions,"change:container")),this.delayedView&&(window.clearTimeout(this.delayedViewTimeoutId),delete this.delayedViewTimeoutId,this.delayedView.close(),this.stopListening(this.delayedView,"view:renderContent"),this.stopListening(this.delayedView,"view:renderError"),this.delayedView=void 0,delete this.delayedUpdateSidebar)},closeCurrentView:function(){this.contentView&&(this.contentView.model&&t.isFunction(this.contentView.model.stopListening)&&this.contentView.model.stopListening(),this.contentView.close(),this.sidebarView&&this.contentView.restoreSidebarState&&this.contentView.originalSidebarState&&this.sidebarView.restoreSidebarState(this.contentView.originalSidebarState),delete this.contentView)},onDelayedViewRender:function(){this.delayedView&&(this.closeCurrentView(),this.contentView=this.delayedView,window.clearTimeout(this.delayedViewTimeoutId),this.stopListening(this.delayedView,"view:renderContent"),this.stopListening(this.delayedView,"view:renderError"),this.delayedView=void 0,this.$el.find(".layout-content").html(this.contentView.$el),this.delayedUpdateSidebar&&(this.updateSidebarTabs(),delete this.delayedUpdateSidebar))},setSidebarView:function(){this.stopListening(this.contextActions,"reset"),this.$el.addClass(a),this.sidebarView=new docs.views.SidebarView({el:this.$(".layout-sidebar"),collection:this.contextActions,tabData:t.result(this.contentView,"contextSidebarTabs"),layout:this}),this.sidebarView.render(),this.sidebarView.containerChanged(),this.sidebarView.setSidebarData(),this.contentView.options.sidebar&&(this.contentView.options.sidebar.expand||this.contentView.options.sidebar.active)&&this.sidebarView.activateSidebar(this.contentView.options.sidebar.active,this.contentView.options.sidebar.expand),this.contentView.options.header&&this.contentView.options.header.hide&&this.sidebarView.$el.addClass("hideheader")},updateSidebarTabs:function(){this.delayedView?this.delayedUpdateSidebar=!0:this.sidebarView&&this.contentView&&(this.sidebarView.updateTabData(t.result(this.contentView,"contextSidebarTabs")),this.listenTo(this.contextActions,"change:container",this.updateSidebarView),this.sidebarView.containerChanged(),this.contentView.options.sidebar&&this.contentView.options.sidebar.active&&this.sidebarView.activateSidebar(this.contentView.options.sidebar.active,this.contentView.options.sidebar.expand),this.contentView.options.header&&this.sidebarView.$el.toggleClass("hideheader",!!this.contentView.options.header.hide))},updateSidebarView:function(){var e,t=this.sidebarView.$el.siblings(".layout-sidebar-sideboard").find(".sideboard-button.selected");t.length&&(e=t.data("name")),this.contentView.options.sidebar&&this.contentView.options.sidebar.active&&e&&e===this.contentView.options.sidebar.active&&this.sidebarView.activateSidebar(this.contentView.options.sidebar.active)},close:function(){this.closePendingDelayedView(),this.closeCurrentView(),this.sidebarView&&this.sidebarView.close(),this.remove(),this.rendered=!1,this.mediaQueryListener&&this.mediaQueryListener.removeListener(this.mediaQueryEvent),e("#content").removeClass("sidebarLayout")}}),docs.views.ContentSidebarView})),define("common/docs/DocsMainView",["jquery","underscore","backbone","core/util/util","core/view/BaseView","core/router/DocsController","common/aif/Manager","core/util/Constants","core/util/Globals","core/util/Service","core/util/UrlParams","common/docs/folderview/model/FileItem","common/share/util/AccessCodes","common/share/view/AccessCodeView","common/sidebar/view/ContentSidebarView"],(function(e,t,i,n){"use strict";var s=docs.common.Constants.FileViewRE;return osn.views.DocsMainView=osn.views.BaseView.extend({displayName:"Document",className:"docsMainView mainViewContainer",initialize:function(e){osn.views.BaseView.prototype.initialize.call(this,e),t.bindAll(this,"setTitle","contentsRendering","contentsRendered"),docs.router.docsMainView=this,this.listenTo(docs.events,"notificationManager:change",this.resize),this.listenTo(docs.events,"docsmain:forceresize",this.resize),this.route=e.fragment||"home",this.routePrefix="",e.linkId&&(docs.common.Service.isAppLink=e.isAppLink,docs.common.Service.isAppLink?(docs.common.Service.linkId=e.linkId,this.routePrefix="link/app/"+e.linkId+"/",docs.common.Globals.isAppLink=!0):(docs.common.Globals.isPublicUser||this.route.indexOf("fileview/")<0||!this.checkMemberAccess(this.route))&&(docs.common.Service.linkId=e.linkId,this.routePrefix="link/"+docs.common.Service.linkId+"/",docs.common.Globals.isPublicLink=!0)),e.aif&&docs.aif.Manager.populate()},checkMemberAccess:function(e){var t=!1,i=docs.common.UrlParams.parse(window.location.pathname),n=s.re.exec(e);i.conversationId&&null!==n&&new docs.models.FileItem({id:n[s.index_file_id],revision:n[s.index_revision],memberAccess:!0}).fetch({async:!1,success:function(e){t=e.isAllowedAction("fileRead")},error:function(e,t){t.errorHandled=!0}});return t},render:function(){if(docs.common.Service.linkId&&docs.common.Globals.isProtectedLink&&!docs.utils.AccessCodes.haveCode())return this.renderAccessCodeView(this.route);var i=this.contentSidebarView||new docs.views.ContentSidebarView,n=this;return docs.router.renderRouteView({fragment:this.route,viewOptions:this.options.viewOptons,modelOptions:this.options.modelOptions}).done((function(s){docs.router.lastFragmentRenderedDfd&&docs.router.lastFragmentRenderedDfd.reject(),docs.router.lastFragmentRendered=s.options.fragment,docs.router.lastFragmentRenderedDfd=e.Deferred(),t.isFunction(s.delayedViewTimeout)?i.setContentViewDelayed(s):i.setContentView(s),s.preRender&&t.isFunction(s.preRender)&&s.preRender(),s.model.fetch({success:function(e){docs.events.trigger("docs:main:nav",{application:e.get("application")}),t.isFunction(s.getUpdateSidebarSignal)?s.getUpdateSidebarSignal().done((function(){i.updateSidebarTabs()})):i.updateSidebarTabs()},error:t.bind((function(e,t){t.errorThrown&&t.errorThrown.errorMsgKey&&(t.errorThrown.errorMsgKey.indexOf("!csInvalidPasswordForLinkAccess")>-1||t.errorThrown.errorMsgKey.indexOf("csInvalidAccessCodeForLinkAccess")>-1)&&(docs.utils.AccessCodes.clearCode(),n.render(),t.errorHandled=!0)}),n)}),n.contentSidebarView||(n.contentSidebarView=i,n.childView=n.contentSidebarView,n.$el.html(n.contentSidebarView.$el)),s.once("view:renderContent",n.contentsRendering),s.once("view:postRenderContent",n.contentsRendered)})),n},renderAccessCodeView:function(e){this.childView&&(this.childView.close(),delete this.childView,delete this.contentSidebarView);var t=this;return this.childView=new docs.views.AccessCodeView({callback:function(){t.childView.close(),delete t.childView,docs.router.navigate(e,{trigger:!0})}}),this.childView.render(),this.$el.html(this.childView.$el),this},onNavigate:function(t,n){if(e.removeSessionStorage("assetRendition"),"folder/home"===t)delete docs.common.Service.linkId,delete docs.common.Globals.isPublicLink,this.routePrefix="";else if(!docs.common.Service.isAppLink){var o=s.re.exec(t);null!==o&&(o[s.index_link_group]?(t=t.slice(o[s.index_link_group].length),this.setLinkScopeBasedOnAccess(t,o[s.index_link_id])):docs.common.Service.linkId&&this.setLinkScopeBasedOnAccess(t,docs.common.Service.linkId))}(n=n||{}).trigger&&(this.route=t,this.options={id:this.options.id,fragment:this.route,routeName:"Docs",views:{DocsMainView:{models:[],module:"common/docs/DocsMainView",type:"main"}},models:{},modelOptions:n.modelOptions},this.render());const a=n.replaceSearch?"":window.location.search,r=void 0!==n.replace?n.replace:!n.trigger;i.history.navigate(this.routePrefix+t+a,{trigger:!1,replace:r})},setLinkScopeBasedOnAccess:function(e,t){this.checkMemberAccess(e)?(delete docs.common.Service.linkId,delete docs.common.Globals.isPublicLink,this.routePrefix=""):(docs.common.Service.linkId=t,this.routePrefix="link/"+docs.common.Service.linkId+"/",docs.common.Globals.isPublicLink=!0)},contentsRendered:function(){if(osn.debug("nav","contentsRendered called."),e("#osn-main").scrollTop(0),this.$el.is(":visible")){var t=this.options.fragment?this.options.fragment.replace(/\/(all)*$/,""):"";docs.router.lastFragmentRenderedDfd&&docs.router.lastFragmentRenderedDfd.resolve(t),osn.debug("nav","contentsRendered: resolve lastFragmentRenderedDfd with route = "+t)}performance.mark("ocm.view.render.end")},contentsRendering:function(){var e=this.contentSidebarView.contentView;if(this.route&&e){var i=t.result(e,"alertText")||"";osn.util.setAlertText(osn.i18n.t("contentUpdated",i)),e.setTitle&&e.setTitle()}},setTitle:function(){t.noop()},resize:function(e){(e=e||{}).selector=".mainViewContainer",e.silent=!1,e.excludedIds=["#osn-view-header","#osn-view-options","#social-side-header","#social-side-options"],osn.views.BaseView.prototype.resize.call(this,e)},preDestroy:function(){if(this.childView&&this.childView.contentView){var e=this.childView.contentView;if(e.containerViewDetail&&t.isFunction(e.containerViewDetail.preDestroy))return e.containerViewDetail.preDestroy();if(t.isFunction(e.preDestroy))return e.preDestroy()}return docs.router.preNavigateCheck()},showUnsavedTextWarningDialog:function(e){var t=i.history.getFragment();i.history.navigate(e.lastFragment,{trigger:!1,replace:!0}),osn.views.ConfirmationDialogView.show({confirm:function(){i.history.navigate(t,{trigger:!1,replace:!0}),e.deferred.resolve()},cancelFn:function(){e.deferred.reject(),window.history.back()},title:e.title,primaryButtonTextI18n:e.primaryButtonTextI18n,content:e.content})},clean:function(){e("#osn-view-header").css("padding","").show(),e("#osn-main").css("overflow-y",""),this.childView&&this.childView.close(),docs.router.fullPageDialogStack.clean(),delete docs.common.Service.linkId,delete docs.common.Globals.isPublicLink,osn.views.BaseView.prototype.clean.call(this),delete docs.router.docsMainView}}),osn.views.DocsMainView})),define("docs/template/ErrorDialog.template",["underscore"],(function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="errordialog">  <div class="errordialog_msg">'+(null==(__t=message)?"":_.escape(__t))+'</div>  <div class="detailsErrorList">'+(null==(__t=items)?"":__t)+"</div></div>";return __p}})),define("docs/template/ErrorDialogItem.template",["underscore"],(function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="errordialog_errorItem"><span>'+(null==(__t=itemname)?"":_.escape(__t))+"</span>  <div>"+(null==(__t=errormsg)?"":__t)+"</div></div>";return __p}})),define("common/notification/dialog/ProgressBarErrorDialog",["jquery","underscore","backbone","core/dialog/OJDialog","docs/template/ErrorDialog.template","docs/template/ErrorDialogItem.template","core/util/ErrorMsg"],(function(e,t,i,n,s,o){"use strict";return docs.dialogs.ProgressBarErrorDialog=i.View.extend({events:{"keypress input":"onKey"},initialize:function(e){t.bindAll(this,"render","onOk","onKey"),this.template=s,this.itemTmpl=o,this.errorList=e.errorList,this.message=e.message,this.isWarning=e.isWarning,this.itemErrors=e.itemErrors||{}},render:function(){if(!this.message){var i="";i=this.errorList.length>0&&this.isWarning?1===this.errorList.length?"WEBBAR_SINGLE_WARNING":"WEBBAR_MULTIPLE_WARNINGS":1===this.errorList.length?"WEBBAR_SINGLE_ERROR":"WEBBAR_MULTIPLE_ERRORS",this.message=docs.i18n.t(i,this.errorList.length)}var n=e("<div></div>");t(this.errorList).each((function(e){void 0===e.errorMsgKey&&(e.errorMsgKey=e.statusMessage);var t=docs.common.ErrorMsg.getErrorMessageFromSet(this.itemErrors,e,null),i=this.itemTmpl({itemname:e.displayName,errormsg:t});n.append(i)}),this),e(this.el).html(this.template({message:this.message,items:n.html()}))},onKey:function(e){13===(e.keyCode||e.which)&&this.onOk()},onOk:function(){this.close()},width:600,maxHeight:425,buttons:function(){return[{text:docs.i18n.t("WEBBAR_HIDE_DETAILS"),click:this.onOk.bind(this),chroming:"callToAction",id:"okButton"}]},title:docs.i18n.t("WEBBAR_SHOW_DETAILS")},{show:function(e){return e.DialogClass=docs.dialogs.ProgressBarErrorDialog,n.show(e)}}),docs.dialogs.ProgressBarErrorDialog})),define("common/notification/view/ProgressBar",["jquery","underscore","core/util/ErrorMsg","core/view/BaseViewWithLogging","common/notification/dialog/ProgressBarErrorDialog","core/view/NotificationManager","common/notification/model/TimeredProgressable","core/view/WebBarView.template","jqueryui-amd/widgets/progressbar"],(function(e,t,i,n,s,o,a,r){"use strict";return docs.views.ProgressBar=n.extend({objectName:"ProgressBar",attributes:function(){return{class:"webbar"}},initialize:function(e){return n.prototype.initialize.call(this,e),t.bindAll(this,"showErrors","keyupOnErrorLink","closeProgress"),this.listenTo(this.model,"change:percentComplete",this.renderPercentComplete),this.listenTo(this.model,"hideProgressBar",this.hideProgressBar),this.listenTo(this.model,"showProgressBar",this.showProgressBar),this.action=this.model.get("action"),this.messageNumber=o.getWebBarNumber(),this.render(),o.addProgress(this),this},render:function(){e(this.el).html(r({i18n:docs.i18n,webBarId:docs.i18n.t("WEBBAR_ID_TEXT",this.messageNumber),closeTitle:docs.i18n.t("WEBBAR_CLOSE_TITLE",this.messageNumber)})),this.$(".wbCommands .wbErrors").hide(),this.indeterminate="indeterminate-progress"===this.options.type;var t=e('<div class="progressBar"></div>').progressbar({value:!this.indeterminate&&0});return e(this.el).append(t),this.hasProgressBar=!0,this.$(".progressBar").attr("aria-hidden",!0),this.$(".ui-progressbar-value").removeClass("ui-widget-header ui-corner-left ui-corner-right"),this.$(".wbClose").on("click",this.closeProgress),this.options&&this.options.settings&&this.options.settings.removeInProgressClose&&this.$(".wbClose").hide(),this.$(".wbCommands .wbErrors").on("click",this.showErrors),this.$(".wbCommands .wbErrors").on("keyup",this.keyupOnErrorLink),"export-site"===this.model.get("action")?this.$(".wbIcon .athena-icon-16").removeClass().addClass("athena-icon-16").addClass("athena-icon-16-export"):this.$(".wbIcon .athena-icon-16").removeClass().addClass("athena-icon-16").addClass("athena-icon-16-movecopy"),this.$(".wbMessage div").html(this.getInProgressMessage()),this.displayDetailsLink(this.getInProgressLink(),this.getInProgressLinkHandler()),this._adjustCommandsWidth(),this.options&&this.options.settings&&this.options.settings.allowCancel&&(this.$(".wbCommands .wbCancel").show(),this.$(".wbCommands .wbCancel").on("click",this.options&&this.options.handlers&&this.options.handlers.cancelClickHandler)),this},getInProgressMessage:function(){return this.options.messages&&void 0!==this.options.messages.inProgress?t.result(this.options.messages,"inProgress"):t.isFunction(this.options.messages&&this.options.messages.inProgressMessageGenerator)?this.options.messages.inProgressMessageGenerator(this.model):void 0},getInProgressLink:function(){return t.result(this.options.messages,"inProgressLink")},getInProgressLinkHandler:function(){return this.options&&this.options.handlers&&this.options.handlers.inProgressLinkHandler},getCompleteMessage:function(){return void 0!==this.options.messages.complete?t.result(this.options.messages,"complete"):t.isFunction(this.options.messages.completeMessageGenerator)?this.options.messages.completeMessageGenerator(this.model):void 0},getCompleteLink:function(){return t.result(this.options.messages,"completeLink")},getCompleteLinkHandler:function(){return this.options&&this.options.handlers&&this.options.handlers.completeLinkHandler},getCompleteWithErrorsMessage:function(){return void 0!==this.options.messages.completeWithErrors?t.result(this.options.messages,"completeWithErrors"):t.isFunction(this.options.messages.completeWithErrorsMessageGenerator)?this.options.messages.completeWithErrorsMessageGenerator(this.model):void 0},getErrorMessage:function(){if(this.model.get("errorMessage"))return this.model.get("errorMessage");if(t.isFunction(this.options&&this.options.messages&&this.options.messages.errorMessageGenerator))return this.options.messages.errorMessageGenerator(this.model);if(this.model.get("errorList")&&1===this.model.get("errorList").length){var e=this.model.get("errorList")[0],n=this.model.get("errorMap")||{},s=this.model.get("responseData")||null;return void 0===e.errorMsgKey&&(e.errorMsgKey=e.statusMessage),i.getErrorMessageFromSet(n,e,s)}return t.result(this.options.messages,"error")},getErrorLink:function(){return t.result(this.options.messages,"errorLink")},getErrorLinkHandler:function(){return this.options&&this.options.handlers&&this.options.handlers.errorLinkHandler},getCancelledMessage:function(){return void 0!==this.options.messages.cancelled?t.result(this.options.messages,"cancelled"):""},getCancelLinkHandler:function(){return this.options&&this.options.handlers&&this.options.handlers.cancelLinkHandler},renderPercentComplete:function(){var e=this.model.get("percentComplete");if(this.hasProgressBar&&!this.indeterminate&&(this.$(".progressBar").progressbar({value:e}),this.$(".progressBar").attr("aria-hidden",!0),this.$(".ui-progressbar-value").removeClass("ui-widget-header ui-corner-left ui-corner-right")),100===e){this.options&&this.options.settings&&this.options.settings.allowCancel&&this.$(".wbCommands .wbCancel").hide(),this.hasProgressBar&&(this.$(".progressBar").progressbar("destroy"),this.hasProgressBar=void 0);var t,i=this.model.get("errorList");if(this.model.get("actionStatusList"))for(var n=(t=this.model.get("actionStatusList").slice(0)).length-1;n>=0;n--)"fFileGUID"!==t[n].idType&&"fFolderGUID"!==t[n].idType&&"deprovision"!==this.action&&t.splice(n,1);this.model.get("failed")?this.renderError():i&&i.length>0?this.renderWarning(this.getCompleteWithErrorsMessage(t)):this.renderComplete(),this.$(".wbClose").show(),this.$(".wbIcon").show(),this._adjustCommandsWidth(),o.progressCompleted(this)}else this.$(".wbMessage div").html(this.getInProgressMessage()),this.options&&this.options.settings&&this.options.settings.showPercentComplete&&this.$(".wbMessage div").append(" "+e+"%");this.model.get("aborted")&&this.renderCancelled()},_adjustCommandsWidth:function(){var e=this.$(".wbCommands .wbCommands-buttons").outerWidth();this.$(".wbCommands").width(e)},isFinished:function(){return this.model.isFinished()},isFinishedWithoutError:function(){return this.model.isFinished()&&!this.model.get("errorMessage")&&(!this.model.get("errorList")||0===this.model.get("errorList").length)},getCloseProgressHandler:function(){return this.options&&this.options.handlers&&this.options.handlers.closeProgressHandler},closeProgress:function(e){e&&(e.stopPropagation(),e.preventDefault());var i=this.getCloseProgressHandler();t.isFunction(i)&&i.call(this),o.removeProgress(this)},onClose:function(){t.isArray(this.childViews)&&this.childViews.forEach((function(e){e.close()}))},addChildView:function(e){this.childViews||(this.childViews=[]),t.isArray(this.childViews)&&this.childViews.push(e)},keyupOnErrorLink:function(t){var i=t.keyCode||t.which;i!==e.ui.keyCode.ENTER&&i!==e.ui.keyCode.SPACE||this.showErrors(t)},showErrors:function(){var e=this.model.get("errorList");return e&&s.show({errorList:e,itemErrors:this.model.get("errorMap"),message:void 0,isWarning:this.model.get("isWarning")}),!1},renderComplete:function(){var e=this.getCompleteMessage();this.displayDetailsLink(this.getCompleteLink(),this.getCompleteLinkHandler()),this.$el.addClass("wbSuccess"),this.$(".wbIcon .athena-icon-16").removeClass().addClass("athena-icon-16").addClass("athena-icon-16-success"),this.$(".wbMessage div").html(e),o.progressCompleted(this)},renderWarning:function(e){this.$(".wbIcon .athena-icon-16").removeClass().addClass("athena-icon-16").addClass("athena-icon-16-warning"),this.$(".wbMessage div").html(e);var t=this.model.get("errorList");if(t&&t.length>0){var i=docs.i18n.t("WEBBAR_SHOW_DETAILS");this.$(".wbCommands .wbErrors .wbErrorText").text(i)}this.$(".wbCommands .wbErrors").show()},renderError:function(){this.$(".wbIcon .athena-icon-16").removeClass().addClass("athena-icon-16").addClass("athena-icon-16-error");var i=this.getErrorMessage();t.each(e(".webbar"),(function(t,n){n<e(".webbar").length-1&&t.innerText.includes(i)&&t.remove()})),this.$(".wbMessage div").html(i),this.displayDetailsLink(this.getErrorLink(),this.getErrorLinkHandler());var n=this.model.get("errorList");if(n&&n.length>1){var s=docs.i18n.t("WEBBAR_SHOW_DETAILS");this.$(".wbCommands .wbErrors .wbErrorText").text(s),this.$(".wbCommands .wbErrors").show()}else this.$(".wbCommands .wbErrors").hide();this.$el.removeClass("wbSuccess").addClass("wbError"),o.progressCompleted(this)},renderCancelled:function(){var e=this.getCancelledMessage();this.$el.addClass("wbSuccess"),this.$(".wbIcon .athena-icon-16").removeClass().addClass("athena-icon-16").addClass("athena-icon-16-error"),this.$(".wbMessage div").html(e),this.displayDetailsLink(this.options.messages&&this.options.messages.cancelLink,this.getCancelLinkHandler())},displayDetailsLink:function(e,i){this.$(".wbCommands .wbDetails").off("click"),e?(this.$(".wbCommands .wbDetails").html(e).show(),t.isFunction(i)&&this.$(".wbCommands .wbDetails").on("click",i.bind(this))):this.$(".wbCommands .wbDetails").hide()},getStatusMessage:function(){return e(".wbMessage",this.$el).text()},hideProgressBar:function(){this.$el.hide()},showProgressBar:function(){this.$el.show()}},{timered:function(e){var t={action:e.action};e.errorMap&&(t.errorMap=e.errorMap);var i=new a(t);return new docs.views.ProgressBar({model:i,type:e.type,messages:e.messages,handlers:e.handlers,settings:e.settings,viewContext:e.viewContext?e.viewContext:void 0}),i}}),docs.views.ProgressBar})),
/*!
 * jQuery UI Tabs 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
function(e){"use strict";"function"==typeof define&&define.amd?define("jqueryui-amd/widgets/tabs",["jquery","../keycode","../safe-active-element","../unique-id","../version","../widget"],e):e(jQuery)}((function(e){"use strict";var t;return e.widget("ui.tabs",{version:"1.13.2",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:(t=/#.*$/,function(e){var i,n;i=e.href.replace(t,""),n=location.href.replace(t,"");try{i=decodeURIComponent(i)}catch(e){}try{n=decodeURIComponent(n)}catch(e){}return e.hash.length>1&&i===n}),_create:function(){var t=this,i=this.options;this.running=!1,this._addClass("ui-tabs","ui-widget ui-widget-content"),this._toggleClass("ui-tabs-collapsible",null,i.collapsible),this._processTabs(),i.active=this._initialActive(),Array.isArray(i.disabled)&&(i.disabled=e.uniqueSort(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),(function(e){return t.tabs.index(e)})))).sort()),!1!==this.options.active&&this.anchors.length?this.active=this._findActive(i.active):this.active=e(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var t=this.options.active,i=this.options.collapsible,n=location.hash.substring(1);return null===t&&(n&&this.tabs.each((function(i,s){if(e(s).attr("aria-controls")===n)return t=i,!1})),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null!==t&&-1!==t||(t=!!this.tabs.length&&0)),!1!==t&&-1===(t=this.tabs.index(this.tabs.eq(t)))&&(t=!i&&0),!i&&!1===t&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var i=e(e.ui.safeActiveElement(this.document[0])).closest("li"),n=this.tabs.index(i),s=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:n++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:s=!1,n--;break;case e.ui.keyCode.END:n=this.anchors.length-1;break;case e.ui.keyCode.HOME:n=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),void this._activate(n);case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),void this._activate(n!==this.options.active&&n);default:return}t.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,s),t.ctrlKey||t.metaKey||(i.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay((function(){this.option("active",n)}),this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,i){var n=this.tabs.length-1;for(;-1!==e.inArray((t>n&&(t=0),t<0&&(t=n),t),this.options.disabled);)t=i?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).trigger("focus"),e},_setOption:function(e,t){"active"!==e?(this._super(e,t),"collapsible"===e&&(this._toggleClass("ui-tabs-collapsible",null,t),t||!1!==this.options.active||this._activate(0)),"event"===e&&this._setupEvents(t),"heightStyle"===e&&this._setupHeightStyle(t)):this._activate(t)},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),(function(e){return i.index(e)})),this._processTabs(),!1!==t.active&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this,i=this.tabs,n=this.anchors,s=this.panels;this.tablist=this._getList().attr("role","tablist"),this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header"),this.tablist.on("mousedown"+this.eventNamespace,"> li",(function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()})).on("focus"+this.eventNamespace,".ui-tabs-anchor",(function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()})),this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1}),this._addClass(this.tabs,"ui-tabs-tab","ui-state-default"),this.anchors=this.tabs.map((function(){return e("a",this)[0]})).attr({tabIndex:-1}),this._addClass(this.anchors,"ui-tabs-anchor"),this.panels=e(),this.anchors.each((function(i,n){var s,o,a,r=e(n).uniqueId().attr("id"),l=e(n).closest("li"),d=l.attr("aria-controls");t._isLocal(n)?(a=(s=n.hash).substring(1),o=t.element.find(t._sanitizeSelector(s))):(s="#"+(a=l.attr("aria-controls")||e({}).uniqueId()[0].id),(o=t.element.find(s)).length||(o=t._createPanel(a)).insertAfter(t.panels[i-1]||t.tablist),o.attr("aria-live","polite")),o.length&&(t.panels=t.panels.add(o)),d&&l.data("ui-tabs-aria-controls",d),l.attr({"aria-controls":a,"aria-labelledby":r}),o.attr("aria-labelledby",r)})),this.panels.attr("role","tabpanel"),this._addClass(this.panels,"ui-tabs-panel","ui-widget-content"),i&&(this._off(i.not(this.tabs)),this._off(n.not(this.anchors)),this._off(s.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(t){var i,n,s;for(Array.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1),s=0;n=this.tabs[s];s++)i=e(n),!0===t||-1!==e.inArray(s,t)?(i.attr("aria-disabled","true"),this._addClass(i,null,"ui-state-disabled")):(i.removeAttr("aria-disabled"),this._removeClass(i,null,"ui-state-disabled"));this.options.disabled=t,this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!0===t)},_setupEvents:function(t){var i={};t&&e.each(t.split(" "),(function(e,t){i[t]="_eventHandler"})),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(e){e.preventDefault()}}),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,n=this.element.parent();"fill"===t?(i=n.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each((function(){var t=e(this),n=t.css("position");"absolute"!==n&&"fixed"!==n&&(i-=t.outerHeight(!0))})),this.element.children().not(this.panels).each((function(){i-=e(this).outerHeight(!0)})),this.panels.each((function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))})).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each((function(){i=Math.max(i,e(this).height("").height())})).height(i))},_eventHandler:function(t){var i=this.options,n=this.active,s=e(t.currentTarget).closest("li"),o=s[0]===n[0],a=o&&i.collapsible,r=a?e():this._getPanelForTab(s),l=n.length?this._getPanelForTab(n):e(),d={oldTab:n,oldPanel:l,newTab:a?e():s,newPanel:r};t.preventDefault(),s.hasClass("ui-state-disabled")||s.hasClass("ui-tabs-loading")||this.running||o&&!i.collapsible||!1===this._trigger("beforeActivate",t,d)||(i.active=!a&&this.tabs.index(s),this.active=o?e():s,this.xhr&&this.xhr.abort(),l.length||r.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),r.length&&this.load(this.tabs.index(s),t),this._toggle(t,d))},_toggle:function(t,i){var n=this,s=i.newPanel,o=i.oldPanel;function a(){n.running=!1,n._trigger("activate",t,i)}function r(){n._addClass(i.newTab.closest("li"),"ui-tabs-active","ui-state-active"),s.length&&n.options.show?n._show(s,n.options.show,a):(s.show(),a())}this.running=!0,o.length&&this.options.hide?this._hide(o,this.options.hide,(function(){n._removeClass(i.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),r()})):(this._removeClass(i.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),o.hide(),r()),o.attr("aria-hidden","true"),i.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),s.length&&o.length?i.oldTab.attr("tabIndex",-1):s.length&&this.tabs.filter((function(){return 0===e(this).attr("tabIndex")})).attr("tabIndex",-1),s.attr("aria-hidden","false"),i.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var i,n=this._findActive(t);n[0]!==this.active[0]&&(n.length||(n=this.active),i=n.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return!1===t?e():this.tabs.eq(t)},_getIndex:function(t){return"string"==typeof t&&(t=this.anchors.index(this.anchors.filter("[href$='"+e.escapeSelector(t)+"']"))),t},_destroy:function(){this.xhr&&this.xhr.abort(),this.tablist.removeAttr("role").off(this.eventNamespace),this.anchors.removeAttr("role tabIndex").removeUniqueId(),this.tabs.add(this.panels).each((function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")})),this.tabs.each((function(){var t=e(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")})),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(t){var i=this.options.disabled;!1!==i&&(void 0===t?i=!1:(t=this._getIndex(t),i=Array.isArray(i)?e.map(i,(function(e){return e!==t?e:null})):e.map(this.tabs,(function(e,i){return i!==t?i:null}))),this._setOptionDisabled(i))},disable:function(t){var i=this.options.disabled;if(!0!==i){if(void 0===t)i=!0;else{if(t=this._getIndex(t),-1!==e.inArray(t,i))return;i=Array.isArray(i)?e.merge([t],i).sort():[t]}this._setOptionDisabled(i)}},load:function(t,i){t=this._getIndex(t);var n=this,s=this.tabs.eq(t),o=s.find(".ui-tabs-anchor"),a=this._getPanelForTab(s),r={tab:s,panel:a},l=function(e,t){"abort"===t&&n.panels.stop(!1,!0),n._removeClass(s,"ui-tabs-loading"),a.removeAttr("aria-busy"),e===n.xhr&&delete n.xhr};this._isLocal(o[0])||(this.xhr=e.ajax(this._ajaxSettings(o,i,r)),this.xhr&&"canceled"!==this.xhr.statusText&&(this._addClass(s,"ui-tabs-loading"),a.attr("aria-busy","true"),this.xhr.done((function(e,t,s){setTimeout((function(){a.html(e),n._trigger("load",i,r),l(s,t)}),1)})).fail((function(e,t){setTimeout((function(){l(e,t)}),1)}))))},_ajaxSettings:function(t,i,n){var s=this;return{url:t.attr("href").replace(/#.*$/,""),beforeSend:function(t,o){return s._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:o},n))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}}),!1!==e.uiBackCompat&&e.widget("ui.tabs",e.ui.tabs,{_processTabs:function(){this._superApply(arguments),this._addClass(this.tabs,"ui-tab")}}),e.ui.tabs})),
/*!
 * jQuery UI Tooltip 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
function(e){"use strict";"function"==typeof define&&define.amd?define("jqueryui-amd/widgets/tooltip",["jquery","../keycode","../position","../unique-id","../version","../widget"],e):e(jQuery)}((function(e){"use strict";return e.widget("ui.tooltip",{version:"1.13.2",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var t=e(this).attr("title");return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(e,t){var i=(e.attr("aria-describedby")||"").split(/\s+/);i.push(t),e.data("ui-tooltip-id",t).attr("aria-describedby",String.prototype.trim.call(i.join(" ")))},_removeDescribedBy:function(t){var i=t.data("ui-tooltip-id"),n=(t.attr("aria-describedby")||"").split(/\s+/),s=e.inArray(i,n);-1!==s&&n.splice(s,1),t.removeData("ui-tooltip-id"),(n=String.prototype.trim.call(n.join(" ")))?t.attr("aria-describedby",n):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=e("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=e([])},_setOption:function(t,i){var n=this;this._super(t,i),"content"===t&&e.each(this.tooltips,(function(e,t){n._updateContent(t.element)}))},_setOptionDisabled:function(e){this[e?"_disable":"_enable"]()},_disable:function(){var t=this;e.each(this.tooltips,(function(i,n){var s=e.Event("blur");s.target=s.currentTarget=n.element[0],t.close(s,!0)})),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter((function(){var t=e(this);if(t.is("[title]"))return t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")})))},_enable:function(){this.disabledTitles.each((function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})),this.disabledTitles=e([])},open:function(t){var i=this,n=e(t?t.target:this.element).closest(this.options.items);n.length&&!n.data("ui-tooltip-id")&&(n.attr("title")&&n.data("ui-tooltip-title",n.attr("title")),n.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&n.parents().each((function(){var t,n=e(this);n.data("ui-tooltip-open")&&((t=e.Event("blur")).target=t.currentTarget=this,i.close(t,!0)),n.attr("title")&&(n.uniqueId(),i.parents[this.id]={element:this,title:n.attr("title")},n.attr("title",""))})),this._registerCloseHandlers(t,n),this._updateContent(n,t))},_updateContent:function(e,t){var i,n=this.options.content,s=this,o=t?t.type:null;if("string"==typeof n||n.nodeType||n.jquery)return this._open(t,e,n);(i=n.call(e[0],(function(i){s._delay((function(){e.data("ui-tooltip-open")&&(t&&(t.type=o),this._open(t,e,i))}))})))&&this._open(t,e,i)},_open:function(t,i,n){var s,o,a,r,l=e.extend({},this.options.position);function d(e){l.of=e,o.is(":hidden")||o.position(l)}n&&((s=this._find(i))?s.tooltip.find(".ui-tooltip-content").html(n):(i.is("[title]")&&(t&&"mouseover"===t.type?i.attr("title",""):i.removeAttr("title")),s=this._tooltip(i),o=s.tooltip,this._addDescribedBy(i,o.attr("id")),o.find(".ui-tooltip-content").html(n),this.liveRegion.children().hide(),(r=e("<div>").html(o.find(".ui-tooltip-content").html())).removeAttr("name").find("[name]").removeAttr("name"),r.removeAttr("id").find("[id]").removeAttr("id"),r.appendTo(this.liveRegion),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:d}),d(t)):o.position(e.extend({of:i},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(a=this.delayedShow=setInterval((function(){o.is(":visible")&&(d(l.of),clearInterval(a))}),13)),this._trigger("open",t,{tooltip:o})))},_registerCloseHandlers:function(t,i){var n={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var n=e.Event(t);n.currentTarget=i[0],this.close(n,!0)}}};i[0]!==this.element[0]&&(n.remove=function(){var e=this._find(i);e&&this._removeTooltip(e.tooltip)}),t&&"mouseover"!==t.type||(n.mouseleave="close"),t&&"focusin"!==t.type||(n.focusout="close"),this._on(!0,i,n)},close:function(t){var i,n=this,s=e(t?t.currentTarget:this.element),o=this._find(s);o?(i=o.tooltip,o.closing||(clearInterval(this.delayedShow),s.data("ui-tooltip-title")&&!s.attr("title")&&s.attr("title",s.data("ui-tooltip-title")),this._removeDescribedBy(s),o.hiding=!0,i.stop(!0),this._hide(i,this.options.hide,(function(){n._removeTooltip(e(this))})),s.removeData("ui-tooltip-open"),this._off(s,"mouseleave focusout keyup"),s[0]!==this.element[0]&&this._off(s,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,(function(t,i){e(i.element).attr("title",i.title),delete n.parents[t]})),o.closing=!0,this._trigger("close",t,{tooltip:i}),o.hiding||(o.closing=!1))):s.removeData("ui-tooltip-open")},_tooltip:function(t){var i=e("<div>").attr("role","tooltip"),n=e("<div>").appendTo(i),s=i.uniqueId().attr("id");return this._addClass(n,"ui-tooltip-content"),this._addClass(i,"ui-tooltip","ui-widget ui-widget-content"),i.appendTo(this._appendTo(t)),this.tooltips[s]={element:t,tooltip:i}},_find:function(e){var t=e.data("ui-tooltip-id");return t?this.tooltips[t]:null},_removeTooltip:function(e){clearInterval(this.delayedShow),e.remove(),delete this.tooltips[e.attr("id")]},_appendTo:function(e){var t=e.closest(".ui-front, dialog");return t.length||(t=this.document[0].body),t},_destroy:function(){var t=this;e.each(this.tooltips,(function(i,n){var s=e.Event("blur"),o=n.element;s.target=s.currentTarget=o[0],t.close(s,!0),e("#"+i).remove(),o.data("ui-tooltip-title")&&(o.attr("title")||o.attr("title",o.data("ui-tooltip-title")),o.removeData("ui-tooltip-title"))})),this.liveRegion.remove()}}),!1!==e.uiBackCompat&&e.widget("ui.tooltip",e.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var e=this._superApply(arguments);return this.options.tooltipClass&&e.tooltip.addClass(this.options.tooltipClass),e}}),e.ui.tooltip})),define("common/plugin/jquery.ui.tooltip",["jquery","underscore","common/util/PositionUtils","jqueryui-amd/widgets/tooltip"],(function(e,t,i){"use strict";e.ui.tooltip.prototype.options.position=i.normalizeHorizontalAlignment({my:"start top+15",at:"start bottom",collision:"flipfit"})})),define("common-docs-view-15b22b9.cache",(function(){}));