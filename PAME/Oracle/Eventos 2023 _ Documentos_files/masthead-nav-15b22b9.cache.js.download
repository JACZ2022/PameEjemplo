define("banner/BannerView",["jquery","underscore","backbone","core/util/Globals","core/osnGlobals","core/view/BaseCompositeView","core/util/FirstTimeSinceUpdate","core/util/FeatureFlags"],(function(e,t,i,docs,osn,s,n,o){"use strict";var a=docs.common.Globals;return s.extend({el:"#osn-banner",displayName:"BannerView",events:{},initialize:function(){a.isStarterEdition&&(this.$el.removeClass("hidden"),this.listenTo(osn.events,"nav",this.updateSEBanner)),a.embed||(this.$el.removeClass("hidden"),this.listenTo(osn.events,"whats-new-banner",this.handleWhatsNewBanner),this.appendWhatsNewBanner(),this.listenTo(osn.events,"nav",this.handleDevNotificationBanner),this.showFriendlyManagementDomainMessage())},loadStarterEditionBanner:function(e){require(["knockout","banner/ProductInfoBannerModel","banner/ProductInfoBanner.template"],function(t,i,s){this.$el.prepend(s({i18n:docs.i18n}));var n={element:this.$(".prod-info-banner:first-child"),bannerMode:"starterEdition"};this.seBanner=new i(n),t.applyBindings(this.seBanner,n.element[0]),this.seBanner.updateBannerDisplay(e)}.bind(this))},updateSEBanner:function(e){if(!n.get("startereditionbanner")){var t="docs"===e.routeName.toLowerCase()?e.id.toLowerCase():e.routeName.toLowerCase();this.seBanner?this.seBanner.updateBannerDisplay(t):this.loadStarterEditionBanner(t)}},appendWhatsNewBanner:function(){if(!(a.isPublicUser||this.$el.outerWidth(!0)<746)){var t=e.localStorage("cecweb.disable.whatsnew",void 0,!1);n.get("whatsnew")||t||(n.set("whatsnew"),this.handleWhatsNewBanner())}},handleWhatsNewBanner:function(e){this.whatsNewBanner?this.whatsNewBanner.show():this.loadWhatsNewBanner()},handleDevNotificationBanner:function(t){if(o("DevNotificationBanner")){if("developer"===t.routeName.toLowerCase()||t.id&&["repositories","channels","localizations","workflows","workflowroles","contenttypes","taxonomies","audienceattributes","rankingpolicies"].indexOf(t.id.toLowerCase())>-1){if(a.isPublicUser)return;if(this.$el.outerWidth(!0)<746)return;var i=e.sessionStorage("disableDevNotificationBanner");n.get("devnotificationbanner")||i||this.appendDevNotificationBanner()}else this.devNotificationBanner&&this.devNotificationBanner.$el.hide()}},appendDevNotificationBanner:function(e){this.devNotificationBanner?this.devNotificationBanner.$el.show():this.loadDevNotificationBanner()},loadWhatsNewBanner:function(){require(["knockout","banner/ProductInfoBannerModel","banner/ProductInfoBanner.template"],function(e,t,i){this.$el.append(i({i18n:docs.i18n}));var s={element:this.$(".prod-info-banner:last-child"),bannerMode:"whatsNew"};this.whatsNewBanner=new t(s),e.applyBindings(this.whatsNewBanner,s.element[0]),this.whatsNewBanner.updateBannerDisplay("whatsNew"),s.element.on("remove",function(e){s.element.off("remove"),this.whatsNewBanner=null}.bind(this))}.bind(this))},loadDevNotificationBanner:function(){require(["core/util/Globals","knockout","banner/ProductInfoBannerModel","banner/DevNotificationBanner.template"],function(docs,e,t,i){this.$el.append(i({i18n:docs.i18n}));var s={element:this.$(".prod-info-banner:last-child"),bannerMode:"devNotification"};this.devNotificationBanner=new t(s),e.applyBindings(this.devNotificationBanner,s.element[0]),s.element.on("remove",function(e){s.element.off("remove"),this.devNotificationBanner=null}.bind(this))}.bind(this))},showFriendlyManagementDomainMessage:function(){if(!a.isPublicUser){var e="friendlyMgmtDomain",i=t.isEmpty(window.localStorage.getItem("developer-friendly-domain-status"))?a.friendlyMgmtDomain.status:window.localStorage.getItem("developer-friendly-domain-status");if(!n.get(e)&&t.contains(["domain_not_configured","domain-active"],i)){var s=n.getValue(e);if(t.isEmpty(s))if(a.friendlyMgmtDomain){var o=document.createElement("a");o.setAttribute("href",a.friendlyMgmtDomain.original.url),s=o.toString()}else s="";else s=window.location.protocol+"//"+s+"/documents";require(["core/view/MessageBar"],(function(t){t.show(docs.i18n.t("SYSMAN_FRIENDLY_MANAGEMENT_DOMAIN_NOTIFICATION",s),"info"),n.set(e)}))}}}})})),define("banner/ProductInfoBannerModel",["jquery","underscore","knockout","core/util/Globals","core/util/FeatureFlags","ojs/ojcore","ojs/ojcomponentcore","ojs/ojanimation","core/util/FirstTimeSinceUpdate","ojs/ojbutton"],(function(e,t,i,docs,s,n,o,a,l){"use strict";var r={whatsNew:{title:docs.i18n.t("WHATSNEW_TITLE"),featuresList:[]},assets:{title:docs.i18n.t("SE_BANNER_ASSETS_TITLE"),featuresList:[{value:docs.i18n.t("SE_ASSET_FEATURE_REPOS")},{value:docs.i18n.t("SE_ASSET_FEATURE_CHANNELS")},{value:docs.i18n.t("SE_ASSET_FEATURE_EDIT")}],detailInfo:{bannerImage:"Banner_assets.jpg",guidedTour:"https://www.oracle.com/pls/topic/lookup?ctx=cloud&id=oce-gt-assets",detailList:[{id:1,name:docs.i18n.t("REPOSITORIES"),seFeature:docs.i18n.t("SE_REPO_LIMIT"),support:"supported",premiumFeature:docs.i18n.t("SE_ASSET_PREM_REPOS")},{id:2,name:docs.i18n.t("CHANNELS"),seFeature:docs.i18n.t("SE_CHANNEL_LIMIT"),support:"supported",premiumFeature:docs.i18n.t("SE_ASSET_PREM_CHANNELS")},{id:3,name:docs.i18n.t("TAXONOMIES"),seFeature:docs.i18n.t("SE_TAX_LIMIT"),support:"supported",premiumFeature:docs.i18n.t("SE_ASSET_PREM_TAX")},{id:4,name:docs.i18n.t("TRANSLATIONS"),seFeature:docs.i18n.t("SE_UNSUPPORTED"),support:"unsupported",premiumFeature:docs.i18n.t("SE_ASSET_PREM_TRANSLATIONS")}]}},sites:{title:docs.i18n.t("SE_BANNER_SITES_TITLE"),featuresList:[{value:docs.i18n.t("SE_SITES_FEATURE_CREATE")},{value:docs.i18n.t("SE_SITES_FEATURE_CHANNELS")},{value:docs.i18n.t("SE_SITES_FEATURE_GOV")}],detailInfo:{bannerImage:"Banner_Sites_1.jpg",guidedTour:"https://www.oracle.com/pls/topic/lookup?ctx=cloud&id=oce-gt-sites",detailList:[{id:1,name:docs.i18n.t("SITES"),seFeature:docs.i18n.t("SE_SITE_LIMIT"),support:"supported",premiumFeature:docs.i18n.t("SE_SITES_PREM_SITES")},{id:2,name:docs.i18n.t("CHANNELS"),seFeature:docs.i18n.t("SE_CHANNEL_LIMIT"),support:"supported",premiumFeature:docs.i18n.t("SE_SITES_PREM_CHANNELS")},{id:3,name:docs.i18n.t("TRANSLATIONS"),seFeature:docs.i18n.t("SE_UNSUPPORTED"),support:"unsupported",premiumFeature:docs.i18n.t("SE_SITES_PREM_TRANSLATIONS")},{id:4,name:docs.i18n.t("SE_SITE_FAC_FEATURE"),seFeature:docs.i18n.t("SE_UNSUPPORTED"),support:"unsupported",premiumFeature:docs.i18n.t("SE_SITES_PREM_SITEFAC")}]}},experiences:{title:docs.i18n.t("SE_BANNER_EXPERIENCES_TITLE"),featuresList:[{value:docs.i18n.t("SE_EXPERIENCES_FEATURE_CREATE")}],detailInfo:{bannerImage:"Banner_Experiences.jpg",guidedTour:"https://www.oracle.com/pls/topic/lookup?ctx=cloud&id=oce-gt-experiences",detailList:[{id:1,name:docs.i18n.t("EXPERIENCES"),seFeature:docs.i18n.t("SE_EXPERIENCE_LIMIT"),support:"supported",premiumFeature:docs.i18n.t("SE_EXPERIENCES_FEATURE_CREATE")},{id:2,name:docs.i18n.t("CHANNELS"),seFeature:docs.i18n.t("SE_CHANNEL_LIMIT"),support:"supported",premiumFeature:docs.i18n.t("SE_SITES_PREM_CHANNELS")},{id:3,name:docs.i18n.t("REPOSITORIES"),seFeature:docs.i18n.t("SE_REPO_LIMIT"),support:"supported",premiumFeature:docs.i18n.t("SE_EXPERIENCE_PREM_REPOSITORIES")}]}},recommendations:{title:docs.i18n.t("SE_BANNER_RECOMMENDATIONS_TITLE"),featuresList:[{value:docs.i18n.t("SE_REC_FEATURE_POLICIES")},{value:docs.i18n.t("SE_REC_FEATURE_AUDIENCE")}],detailInfo:{bannerImage:"Banner_recommendations.jpg",guidedTour:"https://www.oracle.com/pls/topic/lookup?ctx=cloud&id=oce-gt-recommendations",detailList:[{id:1,name:docs.i18n.t("SE_POLICIES_FEATURE"),seFeature:docs.i18n.t("SE_POLICY_LIMIT"),support:"supported",premiumFeature:docs.i18n.t("SE_REC_PREM_POLICIES")},{id:2,name:docs.i18n.t("ATTRIBUTES"),seFeature:docs.i18n.t("SE_AUDIENCE_ATTR_LIMIT"),support:"supported",premiumFeature:docs.i18n.t("SE_REC_PREM_AUDIENCE_ATTR")}]}},developer:{title:docs.i18n.t("SE_BANNER_DEV_TITLE"),featuresList:[{value:docs.i18n.t("SE_DEV_FEATURE_TEMPLATES")},{value:docs.i18n.t("SE_DEV_FEATURE_COMPONENTS")},{value:docs.i18n.t("SE_DEV_FEATURE_HEADLESS")}],detailInfo:{bannerImage:"Banner_Developer.jpg",guidedTour:"https://www.oracle.com/pls/topic/lookup?ctx=cloud&id=oce-gt-developer",overview:docs.i18n.t("SE_DEV_OVERVIEW"),listTitle:docs.i18n.t("SE_DEV_LIST_TITLE"),seeMore:docs.i18n.t("SE_DEV_SEE_MORE")}},analytics:{title:docs.i18n.t("SE_BANNER_ANALYTICS_TITLE"),featuresList:[{value:docs.i18n.t("SE_ANALYTICS_FEATURE_CONSUMPTION")},{value:docs.i18n.t("SE_ANALYTICS_FEATURE_TRAFFIC")},{value:docs.i18n.t("SE_ANALYTICS_FEATURE_REPORTS")}],detailInfo:{bannerImage:"Banner_Analytics.jpg",guidedTour:"https://www.oracle.com/pls/topic/lookup?ctx=cloud&id=oce-gt-analytics",detailList:[{id:1,name:docs.i18n.t("SE_ASSET_METRICS_FEATURE"),seFeature:docs.i18n.t("SE_METRICS_LIMIT"),support:"supported",premiumFeature:docs.i18n.t("SE_ANALYTICS_PREM_ASSET")},{id:2,name:docs.i18n.t("SE_CHANNEL_METRICS_FEATURE"),seFeature:docs.i18n.t("SE_UNSUPPORTED"),support:"unsupported",premiumFeature:docs.i18n.t("SE_ANALYTICS_PREM_CHANNEL")},{id:3,name:docs.i18n.t("SE_SITE_METRICS_FEATURE"),seFeature:docs.i18n.t("SE_UNSUPPORTED"),support:"unsupported",premiumFeature:docs.i18n.t("SE_ANALYTICS_PREM_SITES")},{id:4,name:docs.i18n.t("SE_REPORTS_FEATURE"),seFeature:docs.i18n.t("SE_UNSUPPORTED"),support:"unsupported",premiumFeature:docs.i18n.t("SE_ANALYTICS_PREM_REPORTS")}]}},admin:{title:docs.i18n.t("SE_BANNER_ADMIN"),featuresList:[{value:docs.i18n.t("SE_ADMIN_FEATURE_HUB")},{value:docs.i18n.t("SE_ADMIN_FEATURE_DA")},{value:docs.i18n.t("SE_ADMIN_FEATURE_COLLAB")}],detailInfo:{bannerImage:"Banner_system.jpg",overview:docs.i18n.t("SE_ADMIN_OVERVIEW"),listTitle:docs.i18n.t("SE_ADMIN_LIST_TITLE"),guidedTour:"https://www.oracle.com/pls/topic/lookup?ctx=cloud&id=oce-gt-system",seeMore:docs.i18n.t("SE_ADMIN_SEE_MORE")}},integrations:{title:docs.i18n.t("SE_BANNER_INTEGRATIONS"),featuresList:[{value:docs.i18n.t("SE_INTEGRATIONS_FEATURE_SERV")},{value:docs.i18n.t("SE_INTEGRATIONS_FEATURE_CONNECT")},{value:docs.i18n.t("SE_INTEGRATIONS_FEATURE_TRANS")}],detailInfo:{bannerImage:"Banner_Integrations.jpg",guidedTour:"https://www.oracle.com/pls/topic/lookup?ctx=cloud&id=oce-gt-integrations",detailList:[{id:1,name:docs.i18n.t("SE_INTEGRATIONS_FEATURE"),seFeature:docs.i18n.t("SE_UNSUPPORTED"),support:"unsupported",premiumFeature:docs.i18n.t("SE_INTEGRATIONS_PREM_CLOUD_SERVICE")},{id:2,name:docs.i18n.t("SYSMAN_CONNECTORS"),seFeature:docs.i18n.t("SE_UNSUPPORTED"),support:"unsupported",premiumFeature:docs.i18n.t("SE_INTEGRATIONS_PREM_CONNECTORS")},{id:3,name:docs.i18n.t("TRANSLATION_CONNECTORS"),seFeature:docs.i18n.t("SE_UNSUPPORTED"),support:"unsupported",premiumFeature:docs.i18n.t("SE_INTEGRATIONS_PREM_XLATION_CONN")},{id:4,name:docs.i18n.t("SE_WEBHOOKS_FEATURE"),seFeature:docs.i18n.t("SE_FULLY_SUPPORTED"),support:"supported",premiumFeature:docs.i18n.t("SE_FULLY_SUPPORTED")}]}},repositories:{title:docs.i18n.t("SE_BANNER_CONTENT"),featuresList:[{value:docs.i18n.t("SE_CONTENT_FEATURE_HUB")},{value:docs.i18n.t("SE_CONTENT_FEATURE_DA")},{value:docs.i18n.t("SE_CONTENT_FEATURE_CHANNELS")}],detailInfo:{bannerImage:"Banner_Content.jpg",guidedTour:"https://www.oracle.com/pls/topic/lookup?ctx=cloud&id=oce-gt-content",detailList:[{id:1,name:docs.i18n.t("REPOSITORIES"),seFeature:docs.i18n.t("SE_CONTENT_REPO_LIMIT"),support:"supported",premiumFeature:docs.i18n.t("SE_CONTENT_PREM_REPO")},{id:2,name:docs.i18n.t("ASSET_TYPES"),seFeature:docs.i18n.t("SE_CONTENT_TYPE_LIMIT"),support:"supported",premiumFeature:docs.i18n.t("SE_CONTENT_PREM_TYPES")},{id:3,name:docs.i18n.t("CHANNELS"),seFeature:docs.i18n.t("SE_CONTENT_CHANNEL_LIMIT"),support:"supported",premiumFeature:docs.i18n.t("SE_CONTENT_PREM_CHANNELS")},{id:4,name:docs.i18n.t("LOCALIZATION"),seFeature:docs.i18n.t("SE_UNSUPPORTED"),support:"unsupported",premiumFeature:docs.i18n.t("SE_CONTENT_PREM_LOCALIZATION")}]}},capture:{title:docs.i18n.t("SE_BANNER_CAPTURE"),featuresList:[{value:docs.i18n.t("SE_CAP_FEATURE_OCR")},{value:docs.i18n.t("SE_CAP_FEATURE_XML")},{value:docs.i18n.t("SE_CAP_FEATURE_DOC_REC")}],detailInfo:{bannerImage:"Banner_Capture.jpg",guidedTour:"https://www.oracle.com/pls/topic/lookup?ctx=cloud&id=oce-gt-capture",detailList:[{id:1,name:docs.i18n.t("SE_PROCEDURE_FEATURE"),seFeature:docs.i18n.t("SE_CAP_PROCEDURE_LIMIT"),support:"supported",premiumFeature:docs.i18n.t("SE_CAP_PREM_PROCEDURE")},{id:2,name:docs.i18n.t("SE_CAP_SOURCES"),seFeature:docs.i18n.t("SE_CAP_SOURCES_LIMIT"),support:"supported",premiumFeature:docs.i18n.t("SE_CAP_PREM_SOURCES")},{id:3,name:docs.i18n.t("SE_XML_PROC"),seFeature:docs.i18n.t("SE_UNSUPPORTED"),support:"unsupported",premiumFeature:docs.i18n.t("SE_CAP_PREM_XML")},{id:4,name:docs.i18n.t("SE_AUTO_EXTRACT"),seFeature:docs.i18n.t("SE_UNSUPPORTED"),support:"unsupported",premiumFeature:docs.i18n.t("SE_CAP_PREM_EXTRACT")}]}}};return function(s){this.$el=s.element,this.navSection=i.observable(),this.title=i.observable(),this.overviewText=i.observable(),this.detailListTitle=i.observable(),this.expandedImg=i.observable(),this.learnMoreTitle=i.observable(),this.featuresList=new i.observableArray([],{keyAttributes:"value"}),this.collapsedHeight=this.$el&&this.$el.length?this.$el.height():56,this.detailFeatureList=new i.observableArray([],{keyAttributes:"id"}),"whatsNew"===s.bannerMode?(this.$el.addClass("whats-new-banner"),this.learnMoreTitle(docs.i18n.t("WHATSNEW_LEARN_MORE_LABEL")),this.learnMoreUrl="https://docs.oracle.com/en/cloud/paas/content-cloud/whats-new/index.html#CECSW-GUID-F0C3D768-2A47-42D5-856A-74E6FA513918"):"devNotification"===s.bannerMode?(this.$el.addClass("dev-notification-banner"),this.$el.find("#banner-title").html(docs.i18n.t("DEVELOPER_BANNER_TITLE")),this.$el.find("#banner-desc").html(docs.i18n.t("DEVELOPER_BANNER_DESC")),this.$el.find("#donot-show-text").html(docs.i18n.t("DO_NOT_SHOW_AGAIN"))):(this.$el.addClass("starter-edition-banner"),this.learnMoreTitle(docs.i18n.t("SE_BANNER_LEARN_MORE")),this.learnMoreUrl="https://docs.oracle.com/pls/topic/lookup?ctx=cloud&id=CECSA-GUID-743500EB-B173-412D-996D-AFAA2C4F921A"),this.updateBannerDisplay=function(e){this.currentRoute=r[e],this.currentRoute?(this.navSection(e),this.title(this.currentRoute.title),this.featuresList(this.currentRoute.featuresList?this.currentRoute.featuresList:[]),this.currentRoute.detailInfo?(this.expandedImg(docs.common.Globals.staticRoot+"/images/"+this.currentRoute.detailInfo.bannerImage),this.detailFeatureList(this.currentRoute.detailInfo.detailList?this.currentRoute.detailInfo.detailList:[]),this.overviewText(this.currentRoute.detailInfo.overview),this.detailListTitle(this.currentRoute.detailInfo.listTitle),this.$el.find(".see-also").html(this.currentRoute.detailInfo.seeMore),(this.detailFeatureList().length>0||!t.isEmpty(this.currentRoute.detailInfo))&&this.$el.find(".expand-button").css("display","")):(this.expandedImg(""),this.detailFeatureList([]),this.overviewText(""),this.detailListTitle(""),this.$el.find(".expand-button").hide()),this.$el.show(),o.subtreeShown(this.$el[0])):(this.$el.hide(),o.subtreeHidden(this.$el[0]))},this.onDevInfoCloseClick=function(t,i){var s=i.$el.find("#donot-show-again").is(":checked");i.$el.remove(),s?l.set("devnotificationbanner"):e.sessionStorage("disableDevNotificationBanner",!0)},this.onLearnMoreClick=function(){window.open(this.learnMoreUrl)}.bind(this),this.onCloseClick=function(){this.$el.remove(),e(window).trigger("resize"),this.$el[0].classList.value.indexOf("starter-edition-banner")>-1&&l.set("startereditionbanner")}.bind(this),this.onExpandClick=function(){var t=this.$el.find(".collapsed-banner"),i=this.$el.find(".expanded-banner"),s=this.$el.height();a.fadeOut(t[0],{duration:"100ms"}).then(function(){t.hide(),o.subtreeHidden(t[0]),this.$el.removeClass("collapsed").addClass("expanded"),a.expand(this.$el[0],{duration:"400ms",startMaxHeight:s+"px"}).then((function(){i.css("display",""),e(window).trigger("resize"),a.fadeIn(i[0],{duration:"200ms"}).then((function(){o.subtreeShown(i[0])}))}))}.bind(this))}.bind(this),this.onCollapseClick=function(){var t=this.$el.find(".collapsed-banner"),i=this.$el.find(".expanded-banner");a.fadeOut(i[0],{duration:"100ms"}).then(function(){var s=i.height()+"px";i.hide(),o.subtreeHidden(i[0]),a.collapse(this.$el[0],{duration:"400ms",startMaxHeight:s,endMaxHeight:this.collapsedHeight+"px"}).then(function(){this.$el.removeClass("expanded").addClass("collapsed"),t.css("display",""),e(window).trigger("resize"),a.fadeIn(t[0],{duration:"200ms"}).then((function(){o.subtreeShown(t[0])}))}.bind(this))}.bind(this))}.bind(this),this.onGuidedTourClick=function(){this.currentRoute.detailInfo&&this.currentRoute.detailInfo.guidedTour&&window.open(this.currentRoute.detailInfo.guidedTour)}.bind(this),this.connected=function(){},this.disconnected=function(){},this.transitionCompleted=function(){}}})),define("masthead/KeyboardShortcutsDialog.template",["underscore"],(function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="shortcuts" tabindex="0" role="document">  <table class="keyboardShortcuts" id="appShortcuts">    <caption>'+(null==(__t=osn.i18n.t("appShortcutHeading"))?"":__t)+'</caption>    <colgroup span="2"></colgroup>    <tr class="offscreen">      <th>'+(null==(__t=osn.i18n.t("keystroke"))?"":__t)+"</th>      <th>"+(null==(__t=osn.i18n.t("function"))?"":__t)+'</th>    </tr>    <tr>      <td class="shortcut"><span class="ltr">?</span></td>      <td class="shortcutLabel">'+(null==(__t=osn.i18n.t("shortcutsShortcut"))?"":__t)+"</td>    </tr>    ",osn.authz.can("view","Search")&&(__p+='    <tr>      <td class="shortcut"><span class="ltr">/</span></td>      <td class="shortcutLabel">'+(null==(__t=osn.i18n.t("searchShortcut"))?"":__t)+"</td>    </tr>    "),__p+='    <tr>      <td class="shortcut"><span class="ctrl">Esc</span></td>      <td class="shortcutLabel">'+(null==(__t=osn.i18n.t("escShortcut"))?"":__t)+"</td>    </tr>  </table>  ",o.canJump&&(__p+='    <table class="keyboardShortcuts" id="jumpShortcuts">      <caption>'+(null==(__t=osn.i18n.t("navShortcutHeading"))?"":__t)+'</caption>      <colgroup span="2"></colgroup>      <tr class="offscreen">        <th>'+(null==(__t=osn.i18n.t("keystroke"))?"":__t)+"</th>        <th>"+(null==(__t=osn.i18n.t("function"))?"":__t)+"</th>      </tr>      ",osn.authz.can("view","NavMenu")&&(__p+='      <tr>        <td class="shortcut"><span class="ltr">g</span> <span class="ltr">n</span></td>        <td class="shortcutLabel">'+(null==(__t=osn.i18n.t("navShortcut"))?"":__t)+"</td>      </tr>      "),__p+="      ",osn.authz.can("access","Flags")&&(__p+='      <tr>        <td class="shortcut"><span class="ltr">g</span> <span class="ltr">f</span></td>        <td class="shortcutLabel">'+(null==(__t=osn.i18n.t("flagsShortcut"))?"":__t)+"</td>      </tr>      "),__p+="    </table>  "),__p+='  <table class="keyboardShortcuts" id="listShortcuts">    <caption>'+(null==(__t=osn.i18n.t("listShortcutHeading"))?"":__t)+'</caption>    <colgroup span="2"></colgroup>    <tr class="offscreen">      <th>'+(null==(__t=osn.i18n.t("keystroke"))?"":__t)+"</th>      <th>"+(null==(__t=osn.i18n.t("function"))?"":__t)+'</th>    </tr>    <tr>      <td class="shortcut"><span class="ctrl">Enter</span></td>      <td class="shortcutLabel">'+(null==(__t=osn.i18n.t("listEnterShortcut"))?"":__t)+'</td>    </tr>    <tr>      <td class="shortcut"><span class="ctrl">Shift</span> <span class="ctrl">Enter</span></td>      <td class="shortcutLabel">'+(null==(__t=osn.i18n.t("listEnterFocusShortcut"))?"":__t)+'</td>    </tr>    <tr>      <td class="shortcut"><span class="ltr">n</span></td>      <td class="shortcutLabel">'+(null==(__t=osn.i18n.t("createConvShortcut"))?"":__t)+'</td>    </tr>    <tr>      <td class="shortcut"><span class="ltr">m</span></td>      <td class="shortcutLabel">'+(null==(__t=osn.i18n.t("listConvMarkReadShortcut"))?"":__t)+'</td>    </tr>    <tr>      <td class="shortcut"><span class="ltr">v</span></td>      <td class="shortcutLabel">'+(null==(__t=osn.i18n.t("listConvFavShortcut"))?"":__t)+'</td>    </tr>  </table>  <table class="keyboardShortcuts" id="convShortcuts">    <caption>'+(null==(__t=osn.i18n.t("convShortcutHeading"))?"":__t)+'</caption>    <colgroup span="2"></colgroup>    <tr class="offscreen">      <th>'+(null==(__t=osn.i18n.t("keystroke"))?"":__t)+"</th>      <th>"+(null==(__t=osn.i18n.t("function"))?"":__t)+'</th>    </tr>    <tr>      <td class="shortcut"><span class="ltr">t</span></td>      <td class="shortcutLabel">'+(null==(__t=osn.i18n.t("convRTEShortcut"))?"":__t)+'</td>    </tr>    <tr>      <td class="shortcut"><span class="ltr">m</span></td>      <td class="shortcutLabel">'+(null==(__t=osn.i18n.t("convMarkReadShortcut"))?"":__t)+'</td>    </tr>    <tr>      <td class="shortcut"><span class="ltr">v</span></td>      <td class="shortcutLabel">'+(null==(__t=osn.i18n.t("convFavShortcut"))?"":__t)+'</td>    </tr>    <tr>      <td class="shortcut"><span class="ltr">b</span></td>      <td class="shortcutLabel">'+(null==(__t=osn.i18n.t("shareConversation"))?"":__t)+'</td>    </tr>  </table>  <table class="keyboardShortcuts" id="msgShortcuts">    <caption>'+(null==(__t=osn.i18n.t("msgShortcutHeading"))?"":__t)+'</caption>    <colgroup span="2"></colgroup>    <tr class="offscreen">      <th>'+(null==(__t=osn.i18n.t("keystroke"))?"":__t)+"</th>      <th>"+(null==(__t=osn.i18n.t("function"))?"":__t)+'</th>    </tr>    <tr>      <td class="shortcut"><span class="ltr">r</span></td>      <td class="shortcutLabel">'+(null==(__t=osn.i18n.t("msgReplyShortcut"))?"":__t)+'</td>    </tr>    <tr>      <td class="shortcut"><span class="ltr">e</span></td>      <td class="shortcutLabel">'+(null==(__t=osn.i18n.t("msgEditShortcut"))?"":__t)+'</td>    </tr>    <tr>      <td class="shortcut"><span class="ltr">l</span></td>      <td class="shortcutLabel">'+(null==(__t=osn.i18n.t("msgLikeShortcut"))?"":__t)+"</td>    </tr>",o.canFlag&&(__p+='    <tr>      <td class="shortcut"><span class="ltr">c</span></td>      <td class="shortcutLabel">'+(null==(__t=osn.i18n.t("msgClearFollowupShortcut"))?"":__t)+'</td>    </tr>    <tr>      <td class="shortcut"><span class="ltr">f</span></td>      <td class="shortcutLabel">'+(null==(__t=osn.i18n.t("msgFollowupShortcut"))?"":__t)+"</td>    </tr>"),__p+='    <tr>      <td class="shortcut"><span class="ltr">m</span></td>      <td class="shortcutLabel">'+(null==(__t=osn.i18n.t("msgMarkReadShortcut"))?"":__t)+"</td>    </tr>",osn.authz.can("showFindBar","Conversation")&&(__p+='    <tr>      <td class="shortcut"><span class="ltr">p</span></td>      <td class="shortcutLabel">'+(null==(__t=osn.i18n.t("stepUpShortcut"))?"":__t)+'</td>    </tr>    <tr>      <td class="shortcut"><span class="ltr">x</span></td>      <td class="shortcutLabel">'+(null==(__t=osn.i18n.t("stepDownShortcut"))?"":__t)+"</td>    </tr>"),__p+='  </table>  <table class="keyboardShortcuts" id="rteShortcuts">    <caption>'+(null==(__t=osn.i18n.t("rteShortcutHeading"))?"":__t)+'</caption>    <colgroup span="2"></colgroup>    <tr class="offscreen">      <th>'+(null==(__t=osn.i18n.t("keystroke"))?"":__t)+"</th>      <th>"+(null==(__t=osn.i18n.t("function"))?"":__t)+'</th>    </tr>    <tr>      <td class="shortcut"><span class="ctrl">Ctrl</span> <span class="ltr">b</span></td>      <td class="shortcutLabel">'+(null==(__t=osn.i18n.t("boldShortcut"))?"":__t)+'</td>    </tr>    <tr>      <td class="shortcut"><span class="ctrl">Ctrl</span> <span class="ltr">i</span></td>      <td class="shortcutLabel">'+(null==(__t=osn.i18n.t("italicShortcut"))?"":__t)+'</td>    </tr>    <tr>      <td class="shortcut"><span class="ctrl">Ctrl</span> <span class="ltr">u</span></td>      <td class="shortcutLabel">'+(null==(__t=osn.i18n.t("underlineShortcut"))?"":__t)+'</td>    </tr>    <tr>      <td class="shortcut"><span class="ctrl">Ctrl</span> <span class="ltr">Enter</span></td>      <td class="shortcutLabel">'+(null==(__t=osn.i18n.t("postShortcut"))?"":__t)+'</td>    </tr>    <tr>      <td class="shortcut"><span class="ltr">Esc</span></td>      <td class="shortcutLabel">'+(null==(__t=osn.i18n.t("cancelShortcut"))?"":__t)+'</td>    </tr>    <tr>      <td class="shortcut"><span class="ctrl">Ctrl</span> <span class="ltr">d</span></td>      <td class="shortcutLabel">'+(null==(__t=osn.i18n.t("uploadShortcut"))?"":__t)+'</td>    </tr>    <tr>      <td class="shortcut"><span class="ctrl">Ctrl</span> <span class="ltr">f</span></td>      <td class="shortcutLabel">'+(null==(__t=osn.i18n.t("removeFormatShortcut"))?"":__t)+'</td>    </tr>    <tr>      <td class="shortcut"><span class="ctrl">Alt</span> <span class="ctrl">Shift</span> <span class="ctrl">t</span></td>      <td class="shortcutLabel">'+(null==(__t=osn.i18n.t("toolbarShortcut","Tab"))?"":__t)+"</td>    </tr>  </table></div>";return __p}})),define("masthead/KeyboardShortcutsDialogView",["jquery","underscore","core/osnGlobals","masthead/KeyboardShortcutsDialog.template","core/dialog/DialogView"],(function(e,t,osn,i){"use strict";return osn.views.KeyboardShortcutsDialogView=osn.views.DialogView.extend({displayName:"KeyboardShortcutsDialog",dialogClassName:"keyboardShortcutsDialog",template:i,initialize:function(){this.config=t.extend({},this.getResizeValues()),this.height=this.config.height,this.width=this.config.width,this.primaryButtonText=osn.i18n.t("close"),this.options.title=osn.i18n.t("keyboardShortcuts"),osn.views.DialogView.prototype.initialize.call(this,t.extend(this.options,this.createViewOptions()))},getResizeValues:function(){var t=e("#osn-header").width(),i={width:350,height:550};return t<370?i.width=t-10:t>610&&(i.width=610,i.height=500),i},createViewOptions:function(){return{canJump:osn.authz.can("jump","KeyboardNav"),canFlag:!0}}}),osn.views.KeyboardShortcutsDialogView})),define("core/flags/FlagsCountModel",["jquery","underscore","backbone","core/model/BaseModel"],(function(e,t,i){"use strict";return osn.models.FlagsCountModel=osn.models.BaseModel.extend({displayName:"FlagsCountModel",flagTypesMap:{fyi:"FOR_YOUR_INFORMATION",reply:"PLEASE_REPLY",urgent:"PLEASE_REPLY_URGENT"},initialize:function(){osn.debug("model","FlagsCountModel: initializing "+this.id),this.listenTo(osn.events,"followupsUpdated",this.update)},update:function(){this.fetch().done(t.bind((function(e){this.set(this.assemble(e))}),this))},assemble:function(e){return{AssignedToMe:{all:e[0].returnValue},AssignedByMe:{all:e[1].returnValue}}},fetch:function(){var e=[];return e.push(["XFollowupModule$Server","getTypeCounts",[osn.models.FlagsCountModel.getCountsFilter(!0)]]),e.push(["XFollowupModule$Server","getTypeCounts",[osn.models.FlagsCountModel.getCountsFilter(!1)]]),osn.fc.sendRequest(e)},getCount:function(e,i){var s=this.get(e?"AssignedToMe":"AssignedByMe"),n=i&&"all"!==i?[this.flagTypesMap[i]]:["FOR_YOUR_INFORMATION","PLEASE_REPLY","PLEASE_REPLY_URGENT"];return s?t.reduce(s.all,(function(e,i){return e+(i.Type&&t(n).contains(i.Type)?i.Count:0)}),0):0},clean:function(){osn.debug("model","FlagsCountModel: cleaning "+this.id),this.stopListening()}},{build:function(){var t=this,i=e.Deferred();return osn.models.FlagsCountModel.prototype.fetch().done((function(e){i.resolve(new t(osn.models.FlagsCountModel.prototype.assemble(e)))})),i.promise()},getRequests:function(){},getCountsFilter:function(e){return{_class:"XFollowupTypeCountsFilterInfo",IncludeOpen:!0,Assignee:e}}}),osn.models.FlagsCountModel})),define("masthead/MastheadFlagModel",["jquery","underscore","backbone","core/osnGlobals","core/model/BaseModel","core/flags/FlagsCountModel","core/util/FeatureFlags"],(function(e,t,i,osn,s,n){"use strict";return osn.models.MastheadFlagModel=osn.models.BaseModel.extend({displayName:"MastheadFlagModel",flagsCountInitialDelay:5e3,flagsCountIntervalActiveTab:e.localStorage("flagsCountIntervalActiveTab",void 0,6e5),flagsCountIntervalInactiveTab:e.localStorage("flagsCountIntervalInactiveTab",void 0,3e6),lastFlagsCountUpdated:0,initialize:function(){this.userId=osn.cache.get("me").id,this.listenTo(osn.events,"followupsUpdated",this.handleFollowupsUpdate),this.updateFlagsCountIntervalID=setInterval(t.bind(this.updateFlagsCount,this),this.flagsCountIntervalActiveTab);var i=e.isNumeric(localStorage.loginInfoFlagsCount)&&parseInt(localStorage.loginInfoFlagsCount);i&&(this.set("flagsCount",i),t.delay(t.bind(this.updateFlagsCount,this),this.flagsCountInitialDelay)),this.has("flagsCount")||this.updateFlagsCount(),this.listenTo(osn.events,"sessionexpiry",(function(){clearInterval(this.updateFlagsCountIntervalID),this.updateFlagsCountIntervalID=void 0}))},shouldUpdateFlagsCount:function(e,t){var i=e-this.lastFlagsCountUpdated,s="hidden"==t||"unloaded"==t?this.flagsCountIntervalInactiveTab:this.flagsCountIntervalActiveTab;return Math.round(i/1e3)>=s/1e3},handleFollowupsUpdate:function(e){t.contains(e.assigneeIds,this.userId)&&this.updateFlagsCount(!0)},updateFlagsCount:function(e){var i=this,s=Date.now();(e||this.shouldUpdateFlagsCount(s,document.visibilityState))&&(this.lastFlagsCountUpdated=s,osn.models.MastheadFlagModel.getTypeCounts().done((function(e){var s=t.chain(e).pluck("Count").reduce((function(e,t){return e+t}),0).value();i.set("flagsCount",s),localStorage.loginInfoFlagsCount=s})))}},{getTypeCounts:function(){var e=osn.models.FlagsCountModel.getCountsFilter(!0);return e.dummy="",osn.fc.sendRequest("XFollowupModule$Server","getTypeCounts",[e]).then((function(e){return e[0].returnValue}))}}),osn.models.MastheadFlagModel})),define("masthead/OnboardingVideo.template",["underscore"],(function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+=' <div id="sampleDemo" style="" class="demo-padding demo-container">    <div id="componentDemoContent" style="width: 1px; min-width: 100%;">        <div id="video-dialog">            <oj-popup id="modalDialog1" class="demo-popup"                tail="none" position.my.horizontal="center" position.my.vertical="center"                position.at.horizontal="center" position.at.vertical="center"                position.of="window" position.offset.y="-6" position.collision="flip" auto-dismiss="none" role="dialog"                modality="modal" on-oj-animate-start="[[startAnimationListener]]">                <div class="dashboard-tile-color-stripe"></div>                <div class="demo-popup-body">                    <div class="demo-popup-header">                        <div>                            <h2 class="tile-header" data-bind="text: userName"></h2>                            <div class="dashboard-tile-header-separator"></div>                        </div>                        <div>                            <oj-button chroming="outlined" class="video-popup-close" data-bind="attr: {title: osn.i18n.t(\'close\')}"                                on-oj-action="[[cancelListener]]">'+(null==(__t=osn.i18n.t("close"))?"":__t)+'</oj-button>                        </div>                    </div>                    <div class="demo-popup-content">                    <iframe class="lightbox-popup-iframe" allowfullscreen="" src=""                         style="width:85vw; height: 70vh" allow="autoplay" delegatestickyuseractivation="media"></iframe>                    </div>                </div>                </oj-popup>        </div>    </div></div>';return __p}})),define("common/util/PositionUtils",["ojs/ojcore"],(function(e){"use strict";return{normalizeHorizontalAlignment:function(t){return e.PositionUtils.normalizeHorizontalAlignment(t,"rtl"===docs.common.Globals.dir)}}})),define("core/util/SearchUtils",["jquery","underscore","backbone","core/osnGlobals","core/util/util"],(function(e,t,i,osn){"use strict";var s,n;return osn.util.SearchUtils={getSearchObjectTypes:function(){return s&&!window.jasmine||(s=[{id:"all",displayName:osn.i18n.t("searchOptionsAll")},{id:"conversations",displayName:osn.i18n.t("conversations"),serverType:["waggle/conversation","waggle/wall","waggle/wall-group"]},{id:"messages",displayName:osn.i18n.t("messages"),serverType:"waggle/chat"},{id:"hashtags",displayName:osn.i18n.t("hashtags"),serverType:"waggle/hashtag"},{id:"people",displayName:osn.i18n.t("people"),serverType:"waggle/user"}],osn.authz.can("access","Groups")&&s.push({id:"groups",displayName:osn.i18n.t("groups"),serverType:"waggle/group"}),docs.common.checkFeatureFlag("FoldersSearch")?(s.splice(1,0,{id:"documents",displayName:osn.i18n.t("documents"),serverType:["File","file"]}),s.splice(2,0,{id:"folders",displayName:osn.i18n.t("folders"),serverType:["Folder","folder"]})):s.splice(1,0,{id:"documents",displayName:osn.i18n.t("documents"),serverType:["File","Folder","file","folder"]})),s},getInstantSearchObjectTypes:function(){return n&&!window.jasmine||(n=[{id:"documents",displayName:osn.i18n.t("documents"),serverType:["File","file"]},{id:"folders",displayName:osn.i18n.t("folders"),serverType:["Folder","folder"]},{id:"conversations",displayName:osn.i18n.t("conversations"),serverType:["waggle/conversation","waggle/wall","waggle/wall-group"]}]),n}},osn.util.SearchUtils})),define("core/model/InstantSearchItemModel",["jquery","underscore","backbone","core/osnGlobals","core/util/Thumbs","core/model/BaseModel"],(function(e,t,i,osn){"use strict";return osn.models.InstantSearchItemModel=osn.models.BaseModel.extend({displayName:"InstantSearchItemModel",idAttribute:"ID",initialize:function(e,t){osn.debug("model",this.displayName+": initialize"),this.options=t||{},this.set("_clientObjectType",osn.util.getClientObjectType(e)),this.setIcon(),this.setItemState(),this.setTitleName()},setIcon:function(){var e;if(this.hasProfilePic())this.initProfilePic();else{var t=this.attributes.type;if("file"===t){var i=this.getFileThumbnailDetails();i.thumbUxIcon?i.uxIcon=i.thumbUxIcon:i.thumbSVG&&(i.iconUrl=docs.common.Globals.staticRoot+"images/thumbs/"+i.thumbSVG),this.set("_thumbnail",i)}else"folder"===t?this.set("_foldericon","oj-ux-ico-folder"):this.attributes.ConversationID||(e=osn.images.getIcon(this.get("_clientObjectType"),this.attributes),this.set("_icon",e))}},getFileExtension:function(){var e=this.get("name");return e&&e.lastIndexOf(".")>0?e.substring(e.lastIndexOf(".")+1).toLowerCase():"unknown"},getFileThumbnailDetails:function(){return this.set("extension",this.getFileExtension()),t.clone(docs.common.Thumbs.getThumbDetails(this.get("extension")))},updateProfilePic:function(e){e.id===this.id&&(osn.debug("model",this.displayName+": updating profile pic for: "+this.id),e.data&&this.set("profilePic",e.data),this.unset("_profilePicMissing"),this.stopListening(osn.events,"pictureDataUpdated"))},initProfilePic:function(){var e=osn.cache.get("PictureDataUri",this.id);osn.debug("model",this.displayName+": init profile pic for: "+this.id),t.isEmpty(e)?(this.set("_profilePicMissing",!0),this.listenTo(osn.events,"pictureDataUpdated",this.updateProfilePic)):e=e.value,t.isEmpty(e)&&(e=osn.images.getDefaultGroupProfilePictureForInfo(this.attributes)),this.set("profilePic",e)},hasProfilePic:function(){return this.isUser()||this.isGroup()},isUser:function(){return"waggle/user"===this.get("ObjectType")},isGroup:function(){return"waggle/group"===this.get("ObjectType")},setItemState:function(){this.attributes.State&&this.set("_isClosed",osn.util.isClosed(this.attributes))},setTitleName:function(){var e,i,s=this.attributes,n=!this.attributes.type||["file","folder"].indexOf(this.attributes.type)<0,o=this.options.query,a=new RegExp("("+o+")","gi"),l=s.name||s.Name;e=s.DisplayName||l||s.ConversationName,n&&(e=t.escape(e)),i=e.replace(a,"<span class='match'>$1</span>"),this.set("_titleName",e),this.set("_titleNameWithHighlight",i)}}),osn.models.InstantSearchItemModel})),define("core/model/InstantSearchCategoryCollection",["jquery","underscore","backbone","core/osnGlobals","core/model/InstantSearchItemModel"],(function(e,t,i,osn){"use strict";return osn.models.InstantSearchCategoryCollection=i.Collection.extend({displayName:"InstantSearchCategoryCollection",model:osn.models.InstantSearchItemModel,initialize:function(e,t){osn.debug("model",this.displayName+" initializing"),this.options=t||{}},setQuery:function(e){this.options.query=e,this.buildState="pending"},clean:function(){osn.debug("model",this.displayName+": cleaning"),t.invoke(this.models,"clean"),this.reset(),delete this.options.threshold}}),osn.models.InstantSearchCategoryCollection})),define("core/model/InstantSearchModel",["jquery","underscore","backbone","core/osnGlobals","core/model/BaseModel","core/util/Jsonify","core/model/MemberModel","core/util/SearchUtils","core/model/InstantSearchItemModel","core/model/InstantSearchCategoryCollection"],(function(e,t,i,osn){"use strict";return osn.models.InstantSearchModel=osn.models.BaseModel.extend({displayName:"InstantSearchModel",initialize:function(){osn.debug("model",this.displayName+" initializing"),t.bindAll(this,"cancelInflightSearch"),this.initRequestArgs(),this.resetSearchObjectTypes(),this.attributes.searchResults={},t.each(t.keys(this.resultsLimit),(function(e){this.attributes.searchResults[e]=new osn.models.InstantSearchCategoryCollection([],{id:e,query:this.get("query")})}),this),this.listenTo(this,"change:folderScopeGuid change:publicGroupScope",this.cancelInflightSearch)},resultsLimit:{documents:6,folders:4,conversations:4},initRequestArgs:function(){var e={_class:"XAutoCompleteRequestInfo",NumResultsConversations:this.resultsLimit.conversations,NumResultsUsers:0,NumResultsGroups:0,NumResultsHashTags:0};this.set("requestArgs",e)},fetch:function(i){var s,n;return t.isEmpty(i)?s=e.Deferred().reject():(n=this.getRequestArgs(i),osn.debug("model",this.displayName+" fetch("+i+") sending request."),s=osn.fc.sendRequest("XAutoCompleteModule$Server","autoCompleteUsingInfo",[n])),s},fetchDocs:function(i){var s,n;return t.isEmpty(i)?s=e.Deferred().reject():(n=this.getDocsSearchUrl(i,this.get("folderScopeGuid")),osn.debug("model",this.displayName+" fetchDocs("+n+") sending request."),s=this.fetchDocsSearchResultItems(n)),s},getDocsSearchUrl:function(e,t){var i=docs.common.Service.formatServiceUrl("GET_NAME_TYPEAHEAD_RESULTS");return i+="&MaxResultsFiles="+this.resultsLimit.documents,i+="&MaxResultsFolders="+this.resultsLimit.folders,i+="&QueryText="+encodeURIComponent(e),t&&(i+="&item=fFolderGUID:"+t),i},fetchDocsSearchResultItems:function(t,i){var s,n=e.Deferred();return e.ajax(t,{type:"GET",async:!0,cache:!1,success:function(e){(s=docs.common.Jsonify.parse_GET_NAME_TYPEAHEAD_RESULTS(e,i||"global",{folderRead:!0,folderUpdate:!0,folderWrite:!0})).forEach((function(e){e.ObjectType=e.type})),n.resolve(s)},error:function(){n.reject()}}),n.promise()},getRequestArgs:function(e){var t=this.get("requestArgs");return t.SearchString=e,t},resetSearchAndCollections:function(e){osn.debug("model",this.displayName+" resetSearchAndCollections."),this.set("query",e),t.invoke(this.attributes.searchResults,"clean"),t.invoke(this.attributes.searchResults,"setQuery",e)},searchAndBuild:function(i){var s=osn.util.now(),n=this.get("timestamp")||0;osn.debug("model",this.displayName+" searchAndBuild building for ["+i+"]"),i===this.get("query")&&s-n<60001?this.trigger("srch-completed",{query:i}):(this.resetSearchAndCollections(i),this.get("folderScopeGuid")?e.Deferred().resolve():this.fetch(i).always(t.bind((function(e){i===this.get("query")&&(e&&e[0]&&"success"===e[0].returnStatus&&(this.buildSearchResults(e[0].returnValue),this.set("timestamp",s)),delete this.attributes.searchResults.conversations.buildState,this.trigger("srch-partial-completed",{query:i}))}),this)),this.fetchDocs(i).always(t.bind((function(e){i===this.get("query")&&(e&&e.length&&(this.buildDocsSearchResults(e),this.set("timestamp",s)),delete this.attributes.searchResults.documents.buildState,delete this.attributes.searchResults.folders.buildState,this.trigger("srch-partial-completed",{query:i}))}),this)))},cancelInflightSearch:function(){osn.debug("model",this.displayName+" cancelInflightSearch() called."),this.unset("query")},buildSearchResults:function(e){osn.debug("model",this.displayName+" buildSearchResults."),this.resultsNotShown=0,t.each(e,(function(e){var t=this.getCategoryId(e);osn.debug("model",t+": "+e.Name),this.addToCollection(t,e)}),this),this.set("totalResults",e.length-this.resultsNotShown)},buildDocsSearchResults:function(e){osn.debug("model",this.displayName+" buildDocsSearchResults."),t.each(e,(function(e){var t=this.getCategoryId(e);osn.debug("model",t+": "+e.Name),this.addToCollection(t,e)}),this)},fetchAdditionalInfo:function(){var i,s=[],n=[],o=[];return this.attributes.searchResults.people&&(n=this.attributes.searchResults.people.where({_profilePicMissing:!0}),t.each(n,(function(e){s.push(osn.models.MemberModel.getProfilePicRequest(!0,e.id))}))),this.attributes.searchResults.groups&&(o=this.attributes.searchResults.groups.where({_profilePicMissing:!0}),t.each(o,(function(e){s.push(osn.models.MemberModel.getProfilePicRequest(!1,e.id))}))),s.length?(osn.debug("model",this.displayName+": fetchAdditionalInfo sendRequest for "+n.length+" users and "+o.length+" groups."),i=osn.fc.sendRequest(s)):i=e.Deferred().resolve(),i},getCategoryId:function(e){var i;return(i=t.find(this.attributes.searchObjTypes,(function(i){return t.isArray(i.serverType)?t.contains(i.serverType,e.ObjectType):i.serverType===e.ObjectType})))?i.id:null},resetSearchObjectTypes:function(){this.set("searchObjTypes",osn.util.SearchUtils.getInstantSearchObjectTypes())},addToCollection:function(e,t){var i,s=this.resultsLimit[e];"conversations"!==e&&"folders"!==e||(s-=1),this.attributes.searchResults[e]||(this.attributes.searchResults[e]=new osn.models.InstantSearchCategoryCollection([],{id:e,query:this.get("query")})),(i=this.attributes.searchResults[e]).length<s?i.add(new osn.models.InstantSearchItemModel(t,{query:this.get("query")})):(i.options.threshold=!0,this.resultsNotShown++),delete i.buildState},clean:function(){osn.debug("model",this.displayName+": cleaning"),this.stopListening()}}),osn.models.InstantSearchModel})),define("core/view/InstantSearch.template",["underscore"],(function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",o.noResults||(__p+="    <ul class='inst-srch-scroll'></ul>"),__p+="<div class='inst-srch-links'>  <ul>    <li class='inst-srch-link'>      <a href='"+(null==(__t=o.allLink)?"":_.escape(__t))+"' tabindex='0'>      "+(null==(__t=osn.i18n.t("instantSrchMore",o.srchTerm))?"":__t)+"</a></li>  </ul></div>";return __p}})),define("core/view/FlyoverView",["jquery","underscore","backbone","core/debug","core/extensions","core/osnGlobals","core/util/util"],(function(e,t,i){"use strict";return osn.views.FlyoverView=i.View.extend({initialize:function(e){osn.debug("view","FlyoverView: initializing "+this.displayName),t.bindAll(this,"resetPosition","hide","handleOverlayClick"),this.listenTo(osn.events,"keyboardNav",this.handleKeyboardNav),this.listenTo(osn.events,"closeMenus",this.closeFlyover)},className:"osn-flyover",events:{mouseleave:"onBlur",mouseenter:"onFocus",focusout:"onBlur",focusin:"onFocus",keydown:"onKeydown",touchstart:"onFocus"},onBlur:function(){this.options.useOverlay||this.delayHideTimeout||"none"===this.$el.css("display")||(osn.debug("view",this.displayName+": started timer for closing flyover"),this.delayHideTimeout=setTimeout(this.hide,1e3))},onFocus:function(){this.delayHideTimeout&&(osn.debug("view",this.displayName+": canceled timer for closing flyover"),clearTimeout(this.delayHideTimeout),delete this.delayHideTimeout)},onKeydown:function(t){t.keyCode===e.ui.keyCode.ESCAPE?(osn.debug("view",this.displayName+": closing the flyover because ESCAPE used"),t.preventDefault(),t.stopPropagation(),this.hide(),e(this.options.position.of).focus()):t.keyCode===e.ui.keyCode.TAB&&this.isFocusLeavingView(t)&&(osn.debug("view",this.displayName+": closing the flyover because TAB caused lost focus"),this.hide(),e(this.options.position.of).focus().trigger(t))},isFocusLeavingView:function(e){},hide:function(){osn.debug("view","FlyoverView: hide "+this.displayName),this.overlay&&this.overlay.remove(),this.$el.hide(),clearTimeout(this.delayHideTimeout),delete this.delayHideTimeout,osn.util.setStatusText(osn.i18n.t("dropDownClose")),this.options.onHide&&this.options.onHide()},closeFlyover:function(e){e!==this.$el.attr("id")&&this.$el.is(":visible")&&this.hide()},show:function(){osn.debug("view","FlyoverView: show"),osn.events.trigger("closeMenus",this.$el.attr("id")),this.options.onShow&&this.options.onShow(),e.contains(e(this.options.appendTo)[0],this.$el[0])||this.$el.appendTo(e(this.options.appendTo)),this.options.useOverlay&&(this.overlay=e('<div class="osn-flyover-overlay"></div>'),this.overlay.appendTo(this.options.appendTo),this.overlay.on("click",this.handleOverlayClick)),this.$el.show(),this.resetPosition(),this.placeArrow(),osn.util.setStatusText(osn.i18n.t("dropDownOpen")),this.setFocus()},handleOverlayClick:function(){osn.debug("view","FlyoverView: overlay clicked"),this.hide()},toggle:function(){osn.debug("view","FlyoverView: toggle"),"none"===this.$el.css("display")?this.show():this.hide()},setFocus:function(){this.$el.focus()},resetPosition:function(){osn.debug("view","FlyoverView: resetPosition"),this.$el.position(this.options.position)},placeArrow:function(){var t="uparrow";this.$el.offset().top<e(this.options.position.of).offset().top&&(t="dnarrow"),this.$el.removeClass("dnarrow uparrow").addClass(t)},setStale:function(){osn.debug("view","FlyoverView: setting stale "+this.displayName),this.stale=!0},handleKeyboardNav:function(e){"flyoverItem"===e.type&&e.currentItem&&(osn.debug("view","FlyoverView: handleKeyboardNav "+this.displayName),"NEXT"!==e.action&&"PREV"!==e.action||e.target.attr("tabindex",-1),e.currentItem.attr("tabindex",0),e.currentItem.focus())},clean:function(){osn.debug("view","FlyoverView: cleaning "+this.displayName),this._viewPointers&&!t.isEmpty(this._viewPointers)&&(t.invoke(this._viewPointers,"clean"),delete this._viewPointers),this.overlay&&this.overlay.remove(),this.remove()}}),osn.views.FlyoverView})),define("core/view/InstantSearchCategory.template",["underscore"],(function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="cat-header"><h2 id="'+(null==(__t=o.headerId)?"":__t)+'"  class="osn-focusable" tabindex="-1">'+(null==(__t=o.header)?"":__t)+"</h2>",o.showMore&&(__p+='  <a id="'+(null==(__t=o.headerId)?"":__t)+"\" href='"+(null==(__t=o.headerLink)?"":_.escape(__t))+'\' tabindex="0">'+(null==(__t=osn.i18n.t("more"))?"":__t)+"</a>"),__p+='</div><div class="cat-content"></div>',o.footer&&(__p+='  <div class="cat-footer">    <div><a href="javascript:void(0);" class="osn-link osn-clickable osn-focusable" tabindex="-1">'+(null==(__t=o.footer)?"":__t)+"</a></div>  </div>"),__p+="";return __p}})),define("core/view/BoilerplateText.template",["underscore"],(function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="boilerplate" id="'+(null==(__t=id)?"":__t)+'">'+(null==(__t=text)?"":__t)+"</div>";return __p}})),define("core/view/BaseCollectionView",["jquery","underscore","core/osnGlobals","core/view/BaseView","common/plugin/scrollbar","core/view/BoilerplateText.template","core/util/FeatureFlags"],(function(e,t,osn,i,s,n){"use strict";return osn.views.BaseCollectionView=osn.views.BaseView.extend({spinnerClass:"default",initialize:function(){osn.debug("view","BaseCollectionView ("+this.displayName+") initializing"),t.bindAll(this,"addScrollHandler","onScroll"),this.orientation=this.options.orientation||"v",this.scrollEl=this.options.scrollEl||".mainViewContent",this._toBeAddedViewPointers={},this._viewPointers=[],this.isProgressiveLoading=!1,this.isExpandingAll=!1,this.clearSpinnerHeight=!1,this.setHeightForBoilerplateOnRender=!1,this.readyPromise=this.addAll(),this.listenTo(this.collection,"add",this.addOne),this.listenTo(this.collection,"remove",this.removeOne),this.listenTo(this.collection,"reset",this.resetView)},scrollProperties:{h:{scTop:"scrollLeft",scHeight:"scrollWidth",clHeight:"clientWidth"},v:{scTop:"scrollTop",scHeight:"scrollHeight",clHeight:"clientHeight"}},my:function(e){return this.scrollProperties[this.orientation][e]},addScrollHandler:function(){var e;this.options.disableScrollListener||(this.options.customScrollbar?(this.$scrollbar&&(this.$scrollbar.unMount(),delete this.$scrollbar),this.collection.length>0&&(this.$scrollbar=new s(this.getScrollEl()[0]),this.$scrollbar.recalculate(),this.$scrollbar.getScrollElement().addEventListener("scroll",t.debounce(this.onScroll,200)))):(osn.debug("view","BaseCollectionView ("+this.displayName+"): addScrollHandler"),(e=this.getScrollEl()).off("scroll"),e.on("scroll",t.debounce(this.onScroll,200)),this.scrollTop=e[this.my("scTop")]()))},ready:function(){return this.readyPromise},toggleBoilerplateAriaHelpers:function(e){t.isEmpty(this.boilerplateId)||this.options.disableScrollListener||(osn.debug("view","BaseCollectionView.toggleBoilerplateAriaHelpers() called."),t.result(this._viewPointers,"length")||e||0===this.collection.length?this.getScrollEl().removeAttr("aria-describedby").attr("tabindex","-1"):this.getScrollEl().attr("aria-describedby",this.boilerplateId).attr("tabindex","0"))},renderCollection:function(){var i;if(osn.debug("view","BaseCollectionView ("+this.displayName+"): renderCollection with "+this._viewPointers.length+" items."),this._renderedCollection&&this.resetDetachedScrollEl(),this._renderedCollection=!0,this.setBoilerplateHtml&&this.setBoilerplateHtml(),this.toggleBoilerplateAriaHelpers(),this.clearSpinnerHeight&&(this.spinnerView.resetExplicitHeightOnParent(),this.clearSpinnerHeight=!1),this._viewPointers.length)return i=t.map(this._viewPointers,(function(e){return e.el})),this.hideToolbarWhenBoilerplate&&e("#osn-view-options").show(),e(i);if("pending"===this.collection.buildState)return this.toggleSpinner(!0,this.spinnerClass),"default"==this.spinnerClass&&(this.spinnerView.setExplicitHeightOnParent(),this.clearSpinnerHeight=!0),this.spinnerView.el;if(this.boilerplateHtml){if(this.hideToolbarWhenBoilerplate&&e("#osn-view-options").hide(),this.$el.addClass("bp-overflow"),this.setHeightForBoilerplateOnRender){var s=osn.util.getHeadersHeight();this.$scrollEl.css("height","calc(100vh - "+s+"px)")}return this.boilerplateHtml}return e(n({text:this.boilerplateText,id:this.boilerplateId}))},addAll:function(){var i;return t.isFunction(this.collection.filterFn)?(i=this.collection.filterFn(),osn.debug("view","BaseCollectionView.addAll() "+i.length+" models after applying filterFn")):(i=this.collection.toArray(),osn.debug("view","BaseCollectionView.addAll() "+i.length+" models")),t.each(i,(function(e){var i=new this.itemView(t.extend({model:e,listId:this.options.listId},this.options.viewConfig));this._viewPointers.push(i),i.ready().done(t.bind((function(){i.wantsFocus&&(this.wantsFocus=i.wantsFocus)}),this))}),this),e.when.apply(null,t.invoke(this._viewPointers,"ready"))},addOne:function(e,i){osn.debug("view","BaseCollectionView.addOne()");var s,n,o=i.models;if(t.isFunction(this.collection.filterFn)){if(t.isEmpty(this.collection.filterFn(e)))return void osn.debug("view","BaseCollectionView.addOne() ignoring model added after applying filterFn");o=this.collection.filterFn()}n=t.indexOf(o,e),s=new this.itemView(t.extend({model:e,listId:this.options.listId},this.options.viewConfig)),0===this._viewPointers.length?(this._viewPointers.push(s),this.render(),this.$el.removeClass("bp-overflow")):n<this._viewPointers.length&&0===t.keys(this._toBeAddedViewPointers).length?(this._viewPointers.splice(n,0,s),n<1?this._viewPointers[0].$el.insertBefore(this._viewPointers[1].$el):this._viewPointers[n].$el.insertAfter(this._viewPointers[n-1].$el),this._viewPointers[n].postRender&&this._viewPointers[n].postRender()):(this._toBeAddedViewPointers[n]=s,t.keys(this._toBeAddedViewPointers).length+this._viewPointers.length===o.length&&t.each(t.keys(this._toBeAddedViewPointers).sort((function(e,t){return e-t})),(function(e){this._viewPointers.splice(e,0,this._toBeAddedViewPointers[e]),"0"===e?this._viewPointers[0].$el.insertBefore(this._viewPointers[1].$el):this._viewPointers[e].$el.insertAfter(this._viewPointers[e-1].$el),this._toBeAddedViewPointers[e]&&this._toBeAddedViewPointers[e].postRender&&this._toBeAddedViewPointers[e].postRender(),delete this._toBeAddedViewPointers[e]}),this)),this.options.scrollOnAdd&&!this.isProgressiveLoading?this.options.isConversationChats?this.putScrollAtBottom():this.putScrollAtTop():this.options.isConversationChats||this.isProgressiveLoading||"v"!==this.options.orientation||this.adjustScrollByOffset(s.$el.height())},isScrollAtBottom:function(){if(this.$scrollbar)return this.$scrollbar.getScrollElement().scrollHeight-this.$scrollbar.getScrollElement().scrollTop>10;var e=this.getScrollEl()[0];return e&&e[this.my("scHeight")]<=e[this.my("scTop")]+e[this.my("clHeight")]+3},putScrollAtBottom:function(){if(this.$scrollbar)this.$scrollbar.getScrollElement().scrollTop=this.$scrollbar.getScrollElement().scrollHeight;else{var e=this.getScrollEl().filter(":visible")[0];e&&(e[this.my("scTop")]=e[this.my("scHeight")]-e[this.my("clHeight")])}},putScrollAtTop:function(){var e=this.getScrollEl().filter(":visible")[0];e&&(e[this.my("scTop")]=0)},adjustScrollByOffset:function(e){var t=this.getScrollEl().filter(":visible")[0];t&&(t[this.my("scTop")]=t[this.my("scTop")]+e)},removeOne:function(i,s,n){osn.debug("view","BaseCollectionView.removeOne()");var o,a,l,r=n?n.index:-1;document.activeElement&&this.$el.has(e(document.activeElement)[0]).length&&(o=e(document.activeElement)[0].id||e(document.activeElement).attr("data-id")),this._viewPointers=t.reject(this._viewPointers,(function(e){if(i.id===e.model.id)return e.clean(),!0}),this),o&&o.indexOf(i.id)>=0&&r>-1&&(a=0===(l=this._viewPointers.length)?-1:r<l?r:l-1)>=0&&this._viewPointers[a]&&(this.resetTabIndices(this._viewPointers[a].$el),this._viewPointers[a].$el.focus()),this._viewPointers.length||this.render()},scroll:function(e,i){osn.debug("view","BaseCollectionView ("+this.displayName+"): scroll"),i=i||30;var s=t.contains(["up","left"],e)?-1*i:i;this.getScrollEl()[this.my("scTop")](s+this.getScrollEl()[this.my("scTop")]())},resetView:function(e,i){osn.debug("view","BaseCollectionView ("+this.displayName+"): reseting");var s,n=this.getScrollEl()[this.my("scTop")]();document.activeElement&&this.$(document.activeElement)[0]&&(s=this.$(document.activeElement)[0].id),t.invoke(this._viewPointers,"clean"),this._viewPointers=[],i&&i.loading||(this.addAll(),this.render()),s&&this.$("#"+s).focus(),this.getScrollEl()[this.my("scTop")](n)},onScroll:function(t){var i=t.target,s=this.scrollTop>=e(i)[this.my("scTop")]();this.isExpandingAll?this.isExpandingAll=!1:s&&this.nearTop(i)?(osn.debug("view","BaseCollectionView onScroll: call loadMore with 'up'"),this.loadMore(t,"up")):!s&&this.nearBottom(i)&&(osn.debug("view","BaseCollectionView onScroll: call loadMore with 'down'"),this.loadMore(t,"down")),this.scrollTop=this.getScrollEl()[this.my("scTop")]()},nearTop:function(e){var t=e[this.my("clHeight")];return e[this.my("scTop")]<t},nearBottom:function(e){var t=e[this.my("scHeight")],i=e[this.my("clHeight")];return t-e[this.my("scTop")]-i<i},loadMore:function(t){var i=this,s=e(document.activeElement);this.collection.hasMore&&(this.collection.isLoading?osn.debug("view","BaseCollectionView.loadMore() not loading more because currently waiting for results"):(osn.debug("view","BaseCollectionView.loadMore() attempting to load more results"),this.isProgressiveLoading=!0,this.toggleSpinner(!0),this.collection.build({isLoadingMore:!0}).done((function(){s.length&&s.closest(i.scrollEl).length&&e(s).focus(),osn.util.setStatusText(osn.i18n.t("moreLoaded")),i.isProgressiveLoading=!1,i.toggleSpinner(!1)}))))},resetTabIndices:function(t){var i=t?e(t):this.$("li:first-child");osn.debug("view",this.displayName+" resetTabIndices"),this.collection.length&&(this.$("li").attr("tabindex",-1),i.attr("tabindex",0))},getScrollEl:function(){return this.$scrollEl&&this.$scrollEl.length||(osn.debug("view",this.displayName+": getScrollEl("+this.scrollEl+") evaluating."),this.scrollEl===this.el?this.$scrollEl=e(this.el):(osn.debug("view",this.displayName+" getScrollEl: using closest()"),this.$scrollEl=this.$el.closest(this.scrollEl),this.$scrollEl.length||(osn.debug("view",this.displayName+" getScrollEl: searching within view."),this.$scrollEl=this.$(this.scrollEl),this.$scrollEl.length||(osn.debug("view",this.displayName+" getScrollEl: DOM search."),this.$scrollEl=e(this.scrollEl))))),this.$scrollEl},resetDetachedScrollEl:function(){this.getScrollEl().parents("html").length||(osn.debug("view","BaseCollectionView ("+this.displayName+"): resetDetachedScrollEl"),this.getScrollEl().off("scroll"),delete this.$scrollEl,this.addScrollHandler())},addBPClickListeners:function(){0===this._viewPointers.length&&this.boilerplateHtml&&this.addBPClickHandlers&&(osn.debug("view","BaseCollectionView.addBPClickListeners() called."),this.resize(),this.addBPClickHandlers())},cleanBPAndListeners:function(){this.addBPClickHandlers&&(osn.debug("view","BaseCollectionView.cleanBPAndListeners() called."),this.$("#"+this.boilerplateId).remove())},clean:function(e){e=e||{},osn.debug("view","BaseCollectionView ("+this.displayName+"): cleaning"),this.$scrollEl&&this.$scrollEl.off("scroll"),this.collection&&!e.noModelCleanup&&(this.collection.clean(),delete this.collection),osn.views.BaseView.prototype.clean.call(this),this.toggleBoilerplateAriaHelpers(!0)}}),osn.views.BaseCollectionView})),define("core/view/InstantSearchItem.template",["underscore"],(function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",o._thumbnail?(__p+="  ",o._thumbnail.uxIcon?__p+='    <span class="filetype-oj-ux-icon oj-ux-icon '+(null==(__t=o._thumbnail.uxIcon)?"":__t)+'"></span>  ':o._thumbnail.iconUrl?__p+='  \t<img class="filetype-icon-image" src="'+(null==(__t=o._thumbnail.iconUrl)?"":__t)+'" alt="" />  ':__p+='    <span class="containerview-thumbnail">      <span class="no-image">        <span class="" aria-label="'+(null==(__t=o._thumbnail.overlayText)?"":__t)+'" title="'+(null==(__t=o._thumbnail.overlayText)?"":__t)+'">          <span class="thumbType '+(null==(__t=o._thumbnail.overlayClass)?"":__t)+'" aria-label="">'+(null==(__t=o._thumbnail.overlayText.toLowerCase())?"":__t)+"</span>        </span>      </span>    </span>  ",__p+=""):o._foldericon?__p+='<span class="filetype-oj-ux-icon oj-ux-icon '+(null==(__t=o._foldericon)?"":__t)+'"></span>':o._icon?__p+='<img class="'+(null==(__t=o.WallID?"circle":"")?"":__t)+'" data-id="'+(null==(__t=o.ID)?"":__t)+'" src="'+(null==(__t=o.profilePic||o._icon.iconSrc)?"":__t)+'" alt="'+(null==(__t=o._icon.iconAltText)?"":__t)+'" title="'+(null==(__t=o._icon.iconAltText)?"":__t)+'"/>':o.ConversationID&&(__p+='<button class="conv-icon" data-id="'+(null==(__t=o.ID)?"":__t)+'" tabindex="-1"><span class="ui-icon ui-icon-conversation ui-icon-athena-4-1"></span></button>'),__p+='<div class="name" tabindex="-1"     title="'+(null==(__t=o._titleName)?"":_.escape(__t))+'">'+(null==(__t=o._titleNameWithHighlight)?"":__t)+"</div>";return __p}})),define("core/view/InstantSearchItemView",["jquery","underscore","backbone","core/osnGlobals","core/view/InstantSearchItem.template","core/view/BaseView"],(function(e,t,i,osn,s){"use strict";return osn.views.InstantSearchItemView=osn.views.BaseView.extend({displayName:"InstantSearchItem",tagName:"li",className:"instSrchItem osn-focusable",attributes:function(){return{tabindex:"-1",id:"inst-srch-"+this.model.id}},objType2UrlFormatter:{folders:"formatDocumentLink",documents:"formatDocumentLink",hashtags:"getHashtagsNavUrl"},events:{click:"handleItemNavigate",keydown:"handleKeydown"},initialize:function(){osn.debug("view","InstantSearchItemView: initializing"),this.viewType=this.options.listId,this.listenTo(this.model,"change:profilePic",this.render),this.render()},render:function(){return osn.debug("view","Rendering InstantSearchItemView for: "+this.model.get("DisplayName")),this.$el.html(s({o:this.model.attributes})),this},handleItemNavigate:function(){var e=this.getNavUrl();return osn.debug("view",this.displayName+": navigate to "+e),this.navigateToInternalLink(e),!1},getNavUrl:function(){return this[this.objType2UrlFormatter[this.viewType]||"formatConversationLink"](this.model.get("ID"),this.viewType)},getHashtagsNavUrl:function(){return this.formatHashtagLink(this.model.get("Name"))},getRouteByConvObjType:function(e){var t="conversations";return"waggle/wall"===e.ConversationObjectType?t="people":"waggle/wall-group"===e.ConversationObjectType&&(t="groups"),t},handleKeydown:function(t){if(t.keyCode===e.ui.keyCode.ENTER||t.keyCode===e.ui.keyCode.SPACE)return osn.debug("view",this.displayName+": handleKeydown() called"),this.handleItemNavigate()}}),osn.views.InstantSearchItemView})),define("core/view/InstantSearchCategoryListView",["jquery","underscore","backbone","core/osnGlobals","core/view/BaseCollectionView","core/view/InstantSearchItemView"],(function(e,t,i,osn){"use strict";var s={documents:"instSrchNoDocuments",folders:"instSrchNoFolders",conversations:"instSrchNoConversations"};return osn.views.InstantSearchCategoryListView=osn.views.BaseCollectionView.extend({displayName:"InstantSearchCategoryListView",className:"searchResultsList",tagName:"ul",attributes:function(){return{"aria-labelledby":this.options.listAriaLabel,tabindex:"-1"}},initialize:function(e){this.options.listId=this.options.listId||this.options.displayOption,this.collection=this.collection||this.model,this.itemView=osn.views.InstantSearchItemView,this.boilerplateId=e.boilerplateId||this.options.listId+"SearchResultsBoilerplate",this.boilerplateText=osn.i18n.t(s[this.options.listId],t.escape(this.collection.options.query)),osn.views.BaseCollectionView.prototype.initialize.call(this)},render:function(){return osn.debug("view","Rendering "+this.displayName),this.$el.html(this.renderCollection()),this}}),osn.views.InstantSearchCategoryListView})),define("core/view/InstantSearchCategoryView",["jquery","underscore","backbone","core/osnGlobals","core/view/InstantSearchCategory.template","core/view/BaseView","core/view/InstantSearchCategoryListView"],(function(e,t,i,osn,s){"use strict";var n={hashtags:"hashtags",messages:"messages",documents:"documents",folders:"folders",people:"people",groups:"groups",conversations:"conversations",collections:"collections"},o={documents:"instSrchNoDocuments",folders:"instSrchNoFolders",conversations:"instSrchNoConversations"};return osn.views.InstantSearchCategoryView=osn.views.BaseView.extend({displayName:"InstantSearchCategory",className:"inst-srch-cat inst-srch-up-down",tagName:"li",attributes:function(){return{"data-id":this.model.options.id}},events:{"click .cat-footer":"navigateToListView","click .cat-header a":"handleClickOnAnchor","keydown a,h2":"onKeydown"},initialize:function(){osn.debug("view",this.displayName+": initializing"),this.options.listId=this.model.options.id,this.options.listAriaLabel=this.options.listId+"-search-cat",this.options.disableScrollListener=!0,this.options.query=this.model.options.query,this.options.urlSrchTerm=decodeURI(encodeURIComponent(this.options.query)),this._viewPointers={},osn.views.BaseView.prototype.initialize.call(this),this.listenTo(osn.events,"keyboardNav",this.handleKeyboardNav)},render:function(){var e;return osn.debug("view",this.displayName+": render"),docs.common.checkFeatureFlag("FoldersSearch")||"folders"!==this.options.listId||(e="documents"),this.$el.html(s({o:{headerId:this.options.listAriaLabel,headerLink:this.formatSearchLink(this.options.urlSrchTerm,e||this.options.listId),header:this.getHeaderText(this.options.listId),showMore:"conversations"!==this.options.listId&&"folders"!==this.options.listId||this.model.options.threshold}})),this._viewPointers.contentView=new osn.views.InstantSearchCategoryListView(this.options),this._viewPointers.contentView.render().$el.appendTo(this.$(".cat-content")),this},getCategoryName:function(e){var i;return this._categoryName||(i=t.findWhere(this.options.searchObjTypes,{id:e}),this._categoryName=i?i.displayName:""),this._categoryName},getHeaderText:function(e){return n[e]?osn.i18n.t(n[e]):this.getCategoryName(e)},getFooterText:function(e){var i=this.getCategoryName(e),s=t.escape(this.model.options.query);return osn.i18n.t(o[e],s,i)},onKeydown:function(t){var i=e(t.target);return t.keyCode===e.ui.keyCode.DOWN?(osn.debug("view",this.displayName+": onKeydown DOWN"),i.is("a")||0===this.model.length?this.moveFocusToCategoryNearMe(t):this._viewPointers.contentView.$("li:first-child").focus(),!1):t.keyCode===e.ui.keyCode.UP?(osn.debug("view",this.displayName+": onKeydown UP"),i.is("a")?this._viewPointers.contentView.$("li:last-child").focus():this.moveFocusToCategoryNearMe(t),!1):void 0},handleKeyboardNav:function(e){"instSrchItem"===e.type&&e.target.closest("[data-id="+this.options.listId+"]").length&&("NEXT"!==e.action&&"PREV"!==e.action||e.target.attr("tabindex",-1),e.currentItem?(e.currentItem.attr("tabindex",0),e.currentItem.focus()):"PREV"===e.action?this.$(".cat-header h2").focus():0===this.$(".cat-footer a").focus().length&&this.moveFocusToCategoryNearMe(e))},moveFocusToCategoryNearMe:function(t){t.keyCode===e.ui.keyCode.UP?this.$el.prev().find(".osn-focusable:last").focus():this.$el.next().find(".osn-focusable:first").focus()},navigateToListView:function(){var e="/search/"+this.options.urlSrchTerm+"/"+this.options.listId;return osn.debug("view",this.displayName+": navigateToListView "+e),i.history.navigate(e,!0),!1}}),osn.views.InstantSearchCategoryView})),define("core/view/InstantSearchView",["jquery","underscore","backbone","core/osnGlobals","core/view/InstantSearch.template","core/view/FlyoverView","core/view/BaseCompositeView","core/view/InstantSearchCategoryView"],(function(e,t,i,osn,s){"use strict";var n=osn.views.BaseCompositeView.extend(osn.views.FlyoverView.prototype);return osn.views.InstantSearchView=n.extend({displayName:"InstantSearchView",className:"osn-inst-srch",tagName:"div",events:{"keydown .osn-focusable, .inst-srch-link":"onKeydown","click .inst-srch-link a":"handleClickOnAnchor"},attributes:function(){return{"aria-label":osn.i18n.t("searchOptionsAll"),tabindex:"-1"}},initialize:function(){osn.debug("view",this.displayName+": initializing"),t.bindAll(this,"clickOnContainerHandler","handleQueryChanged"),this._viewPointers={},osn.views.FlyoverView.prototype.initialize.call(this),this.listenTo(this.model,"srch-partial-completed",this.showResults),this.listenTo(this.model,"srch-completed",this.show),this.listenTo(this.model,"change:query",this.handleQueryChanged),this.listenTo(osn.events,"resize",this.handleResize)},createNestedViews:function(){var e=this.model.get("searchResults"),i=this.model.get("searchObjTypes");this.model.get("folderScopeGuid")&&(i=t.reject(i,(function(e){return"conversations"===e.id}))),osn.debug("view",this.displayName+": createNestedViews() called"),this.options.srchTerm=this.model.escape("query"),this.options.urlSrchTerm=decodeURI(encodeURIComponent(this.model.get("query"))),this.options.noResults=t.isEmpty(e),this.options.allLink=this.formatSearchLink(this.options.urlSrchTerm),this.$el.html(s({o:this.options})),this.$links=this.$(".inst-srch-links"),this.options.noResults||(this.$ul=this.$(".inst-srch-scroll"),t.each(t.pluck(i,"id"),(function(t){e[t]&&(this._viewPointers[t]=new osn.views.InstantSearchCategoryView({model:e[t],searchObjTypes:i}),this.$ul.append(this._viewPointers[t].render().$el))}),this)),this.$links.toggleClass("inst-divider",!t.isEmpty(e))},showSpinner:function(){osn.debug("view",this.displayName+": showSpinner() called"),this.clearView(),this.toggleSpinner(!0),this.show()},showResults:function(){osn.debug("view",this.displayName+": showResults() called"),this.createNestedViews(),this.show(),this.resize()},clearView:function(){this.$el.contents().length&&(osn.debug("view",this.displayName+": clearView() called"),this.hide(),t.invoke(this._viewPointers,"clean"),this._viewPointers={},this.toggleSpinner(!1),this.$el.empty())},handleQueryChanged:function(){var e=this.model.get("query");osn.debug("view",this.displayName+": handleQueryChanged() with query = '"+e+"'"),e?e&&this.showSpinner():this.clearView()},show:function(){osn.debug("view",this.displayName+": show() called"),osn.views.FlyoverView.prototype.show.call(this),this.listenTo(osn.events,"nav",this.hide),this.listenTo(osn.events,"sessionexpiry",this.hide),this.toggleDomEventListeners(!0),this.options.noResults||osn.util.setStatusText(osn.i18n.t("instantSrchResults",this.model.get("totalResults")))},hide:function(){osn.debug("view",this.displayName+": hide() called"),osn.views.FlyoverView.prototype.hide.call(this),this.$(".inst-srch-scroll .focusable[tabindex=0]").attr("tabindex",-1),this.toggleDomEventListeners(!1),this.stopListening(osn.events,"nav"),this.stopListening(osn.events,"sessionexpiry")},toggleDomEventListeners:function(e){var t=e?"on":"off";osn.debug("view",this.displayName+": toggleDomEventListeners("+e+") called"),this.getCachedEl("#content-wrapper")[t]("mousedown keydown touchdown touchmove",this.clickOnContainerHandler)},isFocusLeavingView:function(t){return e.contains(this.el,document.activeElement)},isEventTargetInView:function(t){return e(t.target).is(this.options.position.of)||e.contains(this.el,t.target)},setFocusOnKeydown:function(){t.size(this._viewPointers)>0?this.$(".osn-focusable:first").focus():this.$(".inst-srch-link:first a").focus()},clickOnContainerHandler:function(e){this.$el.contents().length&&!this.isEventTargetInView(e)&&(osn.debug("view",this.displayName+": clickOnContainerHandler - focus lost, closing"),this.hide())},setFocusOnSearchBoxWithoutSelect:function(){return e(this.options.position.of).data("noFocus",!0).focus().removeData("noFocus")},keydownCodesHandled:[e.ui.keyCode.ESCAPE,e.ui.keyCode.TAB,e.ui.keyCode.UP,e.ui.keyCode.DOWN,e.ui.keyCode.HOME,e.ui.keyCode.END],onKeydown:function(i){var s;if(t.include(this.keydownCodesHandled,i.keyCode)){if(s=e(i.target),osn.debug("view",this.displayName+": onKeydown ["+i.keyCode+"]"),i.keyCode===e.ui.keyCode.ESCAPE)return this.hide(),this.setFocusOnSearchBoxWithoutSelect(),!1;if(this.$links.has(i.target).length)if(i.keyCode===e.ui.keyCode.TAB){if(i.shiftKey){if(this.options.noResults)this.setFocusOnSearchBoxWithoutSelect();else{var n=this.$(".inst-srch-scroll [tabindex=0]:last");n.focus(),n.is(".osn-focusable")&&n.attr("tabindex",-1)}return!1}osn.debug("view",this.displayName+": onKeydown closing the flyover because TAB caused lost focus"),this.hide(),this.setFocusOnSearchBoxWithoutSelect().trigger(i)}else i.keyCode===e.ui.keyCode.DOWN?s.parent().next().find("a").focus():i.keyCode===e.ui.keyCode.UP?s.parent().prev().find("a").focus():i.keyCode===e.ui.keyCode.END?this.$(".inst-srch-link:last a").focus():i.keyCode===e.ui.keyCode.HOME&&this.$(".inst-srch-link:first a").focus();else if(i.keyCode===e.ui.keyCode.TAB){if(i.shiftKey)return this.setFocusOnSearchBoxWithoutSelect(),!1;s.attr("tabindex",0)}else i.keyCode===e.ui.keyCode.END?this.$(".osn-focusable:last").focus():i.keyCode===e.ui.keyCode.HOME&&this.$(".osn-focusable:first").focus()}},setFocus:t.noop,handleResize:function(){osn.debug("view",this.displayName+": handleResize() called."),this.$el.is(":visible")&&(this.resetPosition(),this.resize())},resize:function(){if(this.$el.is(":visible")&&this.$ul){var t,i,s=this.getCachedEl("#content-wrapper").height(),n=e("#osn-masthead").find(".branding").height();i=(t=Math.min(s-n-36,700))-this.$links.outerHeight(),this.$ul[0].scrollHeight>i?(osn.debug("view",this.displayName+".resize() - Setting height to: "+t),this.$el.css("max-height",t+36+"px"),this.$ul.height(i)):(osn.debug("view",this.displayName+".resize() - Setting height to auto"),this.$el.css("max-height",""),this.$ul.height("auto"))}}}),osn.views.InstantSearchView})),define("core/view/GlobalSearchBarView",["jquery","underscore","backbone","common/util/PositionUtils","core/osnGlobals","core/util/FeatureFlags","core/view/SearchBoxView","core/extensions","core/model/InstantSearchModel","core/view/InstantSearchView"],(function(e,t,i,s,osn,n){"use strict";return osn.views.GlobalSearchBarView=osn.views.SearchBoxView.extend({displayName:"GlobalSearchBar",className:"osn-search-box short globalSearchBar",events:t.extend({},osn.views.SearchBoxView.prototype.events,{"click .form-item-remove-button":"hideScopedSearch"}),initialize:function(e){var i=osn.cache.get("AppConfig");i.searchAutoCompleteEnabled?t.bindAll(this,"navigateToSearch","handleClearQuery","handleQueryChange"):t.bindAll(this,"navigateToSearch"),this.options.searchFn=this.navigateToSearch,this.options.placeholderText=osn.i18n.t("scopedSearchPlaceholder"),this.options.scopedSearch=!0,i.searchAutoCompleteEnabled&&(this.options.clearFn=this.handleClearQuery,this.options.typingFn=this.handleQueryChange,this.options.focusFn=this.handleQueryChange,this.instantSearchModel=e.instantSearchModel),osn.views.SearchBoxView.prototype.initialize.call(this)},handleClearQuery:function(){osn.debug("view",this.displayName+": handleClearQuery called"),this.instantSearchModel.resetSearchAndCollections(),this.instSrchView&&this.instSrchView.clearView()},instantSearchIgnoredKeydownCodes:[e.ui.keyCode.ENTER,e.ui.keyCode.TAB,e.ui.keyCode.ESCAPE],handleQueryChange:t.debounce((function(e){var i=this.getText();osn.util.isControlKeyPressed(e,{})||t.include(this.instantSearchIgnoredKeydownCodes,e.keyCode)||(osn.debug("view",this.displayName+": handleQueryChange called with query '"+i+"'"),i.length<2?this.handleClearQuery():(this.initializeInstantSearchViewOnce(),this.instantSearchModel.get("publicGroupScope")||this.instantSearchModel.searchAndBuild(i)))}),300),initializeInstantSearchViewOnce:function(){if(!this.instSrchView){osn.debug("view",this.displayName+": initializeInstantSearchViewOnce called"),this.instSrchView=new osn.views.InstantSearchView({model:this.instantSearchModel,className:"osn-flyover osn-inst-srch",appendTo:this.$el});var e=this.$el.height()+5;this.instSrchView.options.position=s.normalizeHorizontalAlignment({my:"start<1px top+"+e+"px",at:"start top",of:this.$(".osn-search-input"),within:"#content-wrapper"})}},isPillVisible:function(){return e("#osn-masthead").find(".form-item-bubble").is(":visible")},updateScopedSearchElements:function(){var e="folder"===osn.util.getRootRouteForCurrentContext()||0===osn.util.getHistoryFragment().indexOf("search/"+this.getText()+"/folder/"),t=0==osn.util.getHistoryFragment().indexOf("groups/discoverable")||0===osn.util.getHistoryFragment().indexOf("search/"+this.getText()+"/publicgroups");this.$(".form-item-bubble .bubble-label").text(osn.i18n.t(t?"publicGroupScopedSearchLabel":"currentFolder")),this.$(".form-item-bubble").toggle(e||t),e||this.updateFolderScopeGuid(),this.updateScopedPublicGroup(t)},updateFolderScopeGuid:function(e){this.instantSearchModel&&this.instantSearchModel.set("folderScopeGuid",e)},updateScopedPublicGroup:function(e){this.instantSearchModel&&this.instantSearchModel.set("publicGroupScope",e)},hideScopedSearch:function(){this.updateFolderScopeGuid(),this.updateScopedPublicGroup(),e("#osn-masthead").find(".form-item-bubble").hide();var s=i.history.getFragment().split("/");"search"!==osn.util.getRootRouteForCurrentContext()||"folder"!==s[2]&&"publicgroups"!==s[2]||t.isEmpty(this.getText())||i.history.navigate(s[0]+"/"+this.getText(),{replace:!0,trigger:!0})},navigateToSearch:function(){var e,t=this.getText(),s=osn.cache.get("AppConfig");t.length>0&&(e=this.getSearchUrl(encodeURIComponent(t))),e&&(osn.debug("view",this.displayName+": navigate to "+e),i.history.getFragment()===e&&i.history.navigate("search/",{trigger:!1,replace:!0}),i.history.navigate(e,!0),s.searchAutoCompleteEnabled&&(this.instantSearchModel.cancelInflightSearch(),setTimeout(this.instantSearchModel.cancelInflightSearch,300)))},getSearchUrl:function(e){var s=i.history.getFragment(),n="search/"+e,o=s.split("/");return this.isPillVisible()&&(o.length>1&&"folder"===o[0]&&"home"!==o[1]?n+="/folder/lastupdated/"+o[1]:2==o.length&&"groups"===o[0]&&"discoverable"===o[1]&&(n+="/publicgroups")),/^search/.test(s)&&t.find([/search\/[^\/]+(\/.)/,/search\/[^\/]+()/],(function(t){return n=s.replace(t,"search/"+e+"$1"),t.test(s)})),n},isInstantFlyoverOpen:function(){return this.instSrchView&&this.instSrchView.$el.is(":visible")},handleKeydown:function(t){var i=osn.cache.get("AppConfig");t.keyCode===e.ui.keyCode.ENTER?(t.preventDefault(),t.shiftKey||t.metaKey||this.doSearch()):t.keyCode===e.ui.keyCode.ESCAPE?(t.preventDefault(),i.searchAutoCompleteEnabled&&this.isInstantFlyoverOpen()?this.instSrchView.hide():e(t.target).val("")):!i.searchAutoCompleteEnabled||t.shiftKey||!this.isInstantFlyoverOpen()||t.keyCode!==e.ui.keyCode.TAB&&t.keyCode!==e.ui.keyCode.DOWN||(t.preventDefault(),this.instSrchView.setFocusOnKeydown())}}),osn.views.GlobalSearchBarView})),define("masthead/Brand.template",["underscore"],(function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="nav">  ',osn.authz.can("view","NavMenu")&&(__p+='  <button type="button" id="nav-btn" class="menu short osn-clickable" aria-label="'+(null==(__t=osn.i18n.t("navigationMenu"))?"":__t)+'" title="'+(null==(__t=osn.i18n.t("navigationMenu"))?"":__t)+'">    <span class="icon"></span>  </button>  '),__p+="</div>",osn.authz.can("view","NavMenu")?__p+='<a tabindex="-1" href="'+(null==(__t=o.url)?"":__t)+'"><img id="brandLogo" src="'+(null==(__t=o.logo)?"":__t)+'" alt="'+(null==(__t=osn.i18n.t("logoAlt",o.logoText?o.logoText:""))?"":_.escape(__t))+'"></a>':__p+='<a tabindex="-1"><img src="'+(null==(__t=o.logo)?"":__t)+'" alt="'+(null==(__t=osn.i18n.t("logoAlt",o.logoText?o.logoText:""))?"":_.escape(__t))+'"></a>',__p+='<h1 id="brandText">'+(null==(__t=o.logoText)?"":_.escape(__t))+"</h1>",docs.common.Globals.isStarterEdition&&(__p+='<h2 class="brandSubTitle">'+(null==(__t=osn.i18n.t("starterEdition"))?"":_.escape(__t))+"</h2>"),__p+="";return __p}})),define("masthead/BrandView",["jquery","underscore","masthead/Brand.template","core/osnGlobals","core/util/ImagesUtil","core/util/Constants","core/util/Globals"],(function(e,t,i){"use strict";return osn.views.BrandView=osn.views.BaseView.extend({className:"brand",displayName:"BrandView",events:{"click a":"handleClickOnAnchor","click button":"openMenu"},initialize:function(){osn.debug("view","BrandView: initialize"),t.bindAll(this,"resize"),this.listenTo(osn.events,"resize",this.resize),this.options.abbreviateLogoText=e(window).width()<=docs.common.Constants.productNameBreak;var i=this.options.abbreviateLogoText?docs.common.Constants.productNameAbr:docs.common.Constants.productName;this.options.logoText=t.isUndefined(docs.common.Globals.brandedText)||"null"===docs.common.Globals.brandedText?i:"none"===docs.common.Globals.brandedText?"":docs.common.Globals.brandedText,this.options.logo=docs.common.Globals.brandedLogo?docs.common.Globals.brandedLogo:osn.images.getEncodedImage("oracle_logo"),this.options.url=docs.common.Globals.routerRoot,this.render()},render:function(){this.$el.html(i({o:this.options}))},resize:function(){if(void 0===docs.common.Globals.headerLogoDesc||"null"===docs.common.Globals.headerLogoDesc){var t=e(window).width()<=docs.common.Constants.productNameBreak;t!==this.options.abbreviateLogoText&&(this.options.logoText=t?docs.common.Constants.productNameAbr:docs.common.Constants.productName,this.options.abbreviateLogoText=t,this.render())}}}),osn.views.BrandView})),define("masthead/MastheadToolbar.template",["underscore"],(function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<button class="flagsIndicator"        title="'+(null==(__t=osn.i18n.t("flagsIndicatorTitle"))?"":__t)+'">  <span class="icon"></span>  <span class="text"></span></button><div id=\'initTemp\' class=\'userStamp\'>',osn.authz.can("access","UserProfile")&&(__p+='<button class="clear" title="Help">  <span class="help"></span></button><img class="initProfPic" src="'+(null==(__t=o.avatarUrl)?"":__t)+'" alt="">'),__p+="</div>";return __p}})),define("masthead/UserStamp.template",["underscore"],(function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<button class="clear helpbtn" title="'+(null==(__t=osn.i18n.t("help"))?"":__t)+'">  <span class="help"></span></button>',docs.common.Globals.isPublicUser&&(__p+='<button aria-haspopup="true" type="button" class="themeable clear name signin" title="'+(null==(__t=o.model.get("DisplayName"))?"":_.escape(__t))+'">  <span class="name">'+(null==(__t=o.model.get("DisplayName"))?"":_.escape(__t))+"</span></button>"),__p+="",osn.authz.can("access","UserProfile")&&(__p+='<button class="profileButton">  <a class="profileMenu" tabindex=\'-1\' role="button" aria-expanded=\'false\' aria-label="'+(null==(__t=osn.i18n.t("openUserMenu"))?"":__t)+"\" title='"+(null==(__t=o.model.get("DisplayName"))?"":_.escape(__t))+"'>    <img class=\"profilePic"+(null==(__t=docs.common.Globals.isStandardExternalUser?" external-user-avatar":"")?"":_.escape(__t))+'" src="'+(null==(__t=o.model.get("profilePic"))?"":__t)+'" alt="">  </a></button>'),__p+="";return __p}})),define("masthead/UserStampMenu.template",["underscore"],(function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",obj.ojMenu?(__p+="",docs.common.Globals.isPublicUser||(__p+='<oj-option class="nameAndEmail" disabled="true">    <div class="displayName" href="" title=\''+(null==(__t=model.get("DisplayName"))?"":_.escape(__t))+"'>"+(null==(__t=model.get("DisplayName"))?"":_.escape(__t))+"</div>  ",model.get("EMailAddress")&&(__p+='    <div class="email" href="" title=\''+(null==(__t=model.get("EMailAddress"))?"":_.escape(__t))+"'>"+(null==(__t=model.get("EMailAddress"))?"":_.escape(__t))+"</div>  "),__p+="</oj-option>",osn.authz.can("access","UserProfile")&&(__p+='  <oj-option class="profileLink" data-route="'+(null==(__t=profileURL)?"":__t)+'">'+(null==(__t=osn.i18n.t("viewProfile"))?"":__t)+"</oj-option>"),__p+="",osn.authz.can("access","Preferences")&&(__p+='  <oj-option data-route="preferences">'+(null==(__t=osn.i18n.t("preferences"))?"":__t)+"</oj-option>"),__p+="",osn.authz.can("access","Groups")&&(__p+='<oj-option data-route="groups">'+(null==(__t=osn.i18n.t("groups"))?"":__t)+"</oj-option>"),__p+="",osn.authz.can("access","Settings_Downloads")&&(__p+="  ",downloadURL.startsWith("http")?__p+='    <oj-option data-menu-id="openExternalLink">'+(null==(__t=osn.i18n.t("downloadApps"))?"":__t)+"</oj-option>  ":__p+='    <oj-option data-route="'+(null==(__t=downloadURL)?"":__t)+'">'+(null==(__t=osn.i18n.t("downloadApps"))?"":__t)+"</oj-option>  ",__p+=""),__p+='<oj-option data-menu-id="whatsNewBanner" data-route="#">'+(null==(__t=osn.i18n.t("whatsNewMenuText"))?"":_.escape(__t))+"</oj-option>"),__p+='<oj-option data-menu-id="openExternalLink" data-route="'+(null==(__t=feedbackURL)?"":__t)+'">'+(null==(__t=osn.i18n.t("shareFeedback"))?"":__t)+"</oj-option>",docs.common.Globals.isPublicUser?__p+='<oj-option data-menu-id="login" data-route="#">'+(null==(__t=docs.i18n.t("GENERAL_LOGIN"))?"":__t)+"</oj-option>":__p+='<oj-option data-route="'+(null==(__t=aboutURL)?"":__t)+'">'+(null==(__t=osn.i18n.t("about"))?"":__t)+'</oj-option><oj-option data-menu-id="logout" data-route="#">'+(null==(__t=osn.i18n.t("logout"))?"":__t)+"</oj-option>",__p+=""):(__p+="",docs.common.Globals.isPublicUser||(__p+='<li class="nameAndEmail ui-state-disabled">  <a aria-disabled="true">    <div class="displayName" href="" title=\''+(null==(__t=model.get("DisplayName"))?"":_.escape(__t))+"'>"+(null==(__t=model.get("DisplayName"))?"":_.escape(__t))+"</div>  ",model.get("EMailAddress")&&(__p+='    <div class="email" href="" title=\''+(null==(__t=model.get("EMailAddress"))?"":_.escape(__t))+"'>"+(null==(__t=model.get("EMailAddress"))?"":_.escape(__t))+"</div>  "),__p+="  </a></li>",osn.authz.can("access","UserProfile")&&(__p+='  <li><a class="profileLink" href="'+(null==(__t=profileURL)?"":__t)+'">'+(null==(__t=osn.i18n.t("viewProfile"))?"":__t)+"</a></li>"),__p+="",osn.authz.can("access","Preferences")&&(__p+='  <li><a href="preferences">'+(null==(__t=osn.i18n.t("preferences"))?"":__t)+"</a></li>"),__p+="",osn.authz.can("access","Groups")&&(__p+='<li><a href="groups">'+(null==(__t=osn.i18n.t("groups"))?"":__t)+"</a></li>"),__p+="",osn.authz.can("access","Settings_Downloads")&&(__p+="  ",downloadURL.startsWith("http")?__p+='    <li data-menu-id="openExternalLink"><a href="'+(null==(__t=downloadURL)?"":__t)+'">'+(null==(__t=osn.i18n.t("downloadApps"))?"":__t)+"</a></li>  ":__p+='    <li><a href="'+(null==(__t=downloadURL)?"":__t)+'">'+(null==(__t=osn.i18n.t("downloadApps"))?"":__t)+"</a></li>  ",__p+=""),__p+='<li data-menu-id="whatsNewBanner"><a href="#">'+(null==(__t=osn.i18n.t("whatsNewMenuText"))?"":_.escape(__t))+"</a></li>"),__p+='<li data-menu-id="openExternalLink"><a href="'+(null==(__t=feedbackURL)?"":__t)+'">'+(null==(__t=osn.i18n.t("shareFeedback"))?"":__t)+"</a></li>",docs.common.Globals.isPublicUser?__p+='<li data-menu-id="login"><a href="#">'+(null==(__t=docs.i18n.t("GENERAL_LOGIN"))?"":__t)+"</a></li>":__p+='<li><a href="'+(null==(__t=aboutURL)?"":__t)+'">'+(null==(__t=osn.i18n.t("about"))?"":__t)+'</a></li><li data-menu-id="logout"><a href="#">'+(null==(__t=osn.i18n.t("logout"))?"":__t)+"</a></li>",__p+=""),__p+="";return __p}})),define("core/view/OJBaseMenuView",["jquery","underscore","backbone","core/osnGlobals","knockout","ojs/ojcore","core/extensions","core/util/util","ojs/ojmenu","ojs/ojoption","ojs/ojcontext","jqueryui-amd/widgets/menu"],(function(e,t,i,osn,s,n){"use strict";return osn.views.OJBaseMenuView=i.View.extend({ojMenuSupported:function(){return checkFeatureFlag(this.featureFlag)},tagName:function(){return this.ojMenuSupported()?"oj-menu":"ul"},attributes:function(){return this.ojMenuSupported()?{"data-oj-context":""}:{}},initialize:function(){osn.debug("view","MenuView: initializing "+this.displayName),t.bindAll(this,"render","closeMenu","hide","onBlur","onOjMenuAction"),this.listenTo(osn.events,"closeMenus",this.closeMenu),this.options.ojMenu=this.ojMenuSupported(),this.render()},events:function(){return this.ojMenuSupported()?{focus:"onFocus",touchstart:"onFocus"}:{menublur:"onBlur",menufocus:"onFocus",keydown:"onKeydown",menuselect:"onMenuSelect",focus:"onFocus",touchstart:"onFocus"}},setSelectedMenuItems:function(e){t.each(this.options.menuItems,(function(i){(t.isArray(e)&&t.contains(e,i.id)||!t.isArray(e)&&e===i.id)&&(i.className=i.className+" osn-selected",this.ojMenuSupported()||(i.label&&!i.spanClassName&&(i.label="<span aria-label='"+osn.i18n.t("selected")+"'></span>"+i.label),i.displayName&&(i.displayName="<span aria-label='"+osn.i18n.t("selected")+"'></span>"+i.displayName)))}),this)},setMenuItems:function(e,i){this.options.menuItems=t.map(e,(function(e){return{id:e,label:this.getMenuItemLabel(e)}}),this),this.setSelectedMenuItems(i)},getMenuItemLabel:function(e){var t=this.options.specialI18NKeys&&this.options.specialI18NKeys[e]||e;return osn.i18n.t(t)},render:function(){var i={disabled:!0,position:t.extend({},t.pick(this.options.position,"collision","within"))};return this.$el.html(this.template(this.options)),this.renderSubmenus(),this.ojMenuSupported()?(s.applyBindings({},this.el),this.renderCompletePromise=n.Context.getContext(this.el).getBusyContext().whenReady(),this.renderCompletePromise.then(t.bind((function(){this.$el.on("ojBeforeOpen",t.bind((function(t){t.detail.openOptions.launcher=e(this.options.position.of)[0],t.detail.openOptions.display="dropDown",t.detail.openOptions.initialFocus=this.options.initialFocus||"firstItem",t.detail.openOptions.position=this.options.position}),this)),this.$el.on("ojAnimateStart",t.bind((function(e){e.preventDefault(),e.detail.endCallback()}),this))}),this))):(this.$el.menu(i).blur(this.onBlur),this.adjustMenuPaddingIfIconsPresent()),this.options.noCloseMenus||osn.events.trigger("closeMenus",this.$el.attr("id")),this},adjustMenuPaddingIfIconsPresent:function(){this.ojMenuSupported()||this.$el.menu().toggleClass("ui-menu-icons",this.$el.menu().children().find("img, .oj-ux-icon:not(.oj-ux-ico-caret-menu), .osn-selected").length>0)},renderSubmenus:function(){},onBlur:function(e){this.delayHideTimeout||this.isHidden()||(osn.debug("view",this.displayName+": started timer for closing menu"),this.delayHideTimeout=setTimeout(this.hide,250))},onFocus:function(e){this.delayHideTimeout&&(osn.debug("view",this.displayName+": canceled timer for closing menu"),clearTimeout(this.delayHideTimeout),delete this.delayHideTimeout)},onKeydown:function(t){if(t.keyCode===e.ui.keyCode.TAB)return osn.debug("view",this.displayName+": closing the menu because TAB used"),this.hide(),this.setFocusOnClose(),void(this.options.position&&e(this.options.position.of).trigger(t));t.keyCode===e.ui.keyCode.ESCAPE&&(osn.debug("view",this.displayName+": closing the menu because ESCAPE used"),this.hide(),this.setFocusOnClose()),t.preventDefault(),t.stopPropagation()},setFocusOnClose:function(){this.options.returnFocus?this.options.returnFocus():this.options.position&&e(this.options.position.of).focus()},onMenuSelect:function(e,t){var i;(e.keyCode||0===e.button)&&(i=t.item.attr("data-route")||t.item.find("a").attr("href")||"",e.preventDefault(),e.stopPropagation(),osn.debug("view",this.displayName+": selecting menu item with HREF: "+i),t.item.data("let-through")?window.location.replace(i):(this.options.noHideOnSelect||this.hide(),osn.views.BaseView.prototype.navigateToInternalLink.call({},i)))},onOjMenuAction:function(t){t.button=0,this.onMenuSelect(t.detail&&t.detail.originalEvent||t,{item:e(t.target)})},setStale:function(){this.stale=!0},hide:function(){osn.debug("view",this.displayName+": hide menu"),this.$el.detach(),this.ojMenuSupported()?this.$el.hasClass(".oj-complete")&&(this.el.close(),this.el.disabled=!0):this.$el.data("ui-menu")&&(this.$el.menu("blur"),this.$el.menu("disable")),clearTimeout(this.delayHideTimeout),delete this.delayHideTimeout,this.options.onHide&&this.options.onHide()},closeMenu:function(e){!this.$el.attr("id")||e===this.$el.attr("id")||this.isHidden()||this.isClean||this.hide()},getRenderCompletePromise:function(){return this.ojMenuSupported()?this.renderCompletePromise:e.Deferred().resolve()},show:function(){this.isHidden()&&(this.ojMenuSupported()?(this.el.disabled=!1,this.$el.appendTo(e(this.options.appendTo)),this.renderCompletePromise.then(t.bind((function(){this.el.open(null),this.$el.off("ojAction",this.onOjMenuAction),this.$el.on("ojAction",this.onOjMenuAction)}),this))):(this.$el.menu("enable"),this.$el.appendTo(e(this.options.appendTo))),this.options.onShow&&(this.ojMenuSupported()?(this.$el.off("ojOpen",this.options.onShow),this.$el.on("ojOpen",this.options.onShow)):this.options.onShow()),this.options.onHide&&this.ojMenuSupported()&&(this.$el.off("ojClose",this.options.onHide),this.$el.on("ojClose",this.options.onHide)),this.resetPosition(),this.options.noAutoFocus||this.$el.focus())},resetPosition:function(){this.ojMenuSupported()||(osn.debug("view","OJBaseMenuView: resetPosition"),this.$el.parent().is("#osn-view-options")&&this.$el.css("max-height",osn.util.getViewOptionsDropDownMaxHeight()+"px"),this.$el.position(this.options.position))},isHidden:function(){return this.ojMenuSupported()?!this.$el.is(":visible"):this.$el.menu("option","disabled")},toggle:function(){this.isHidden()?(this.show(),this.options.noCloseMenus||osn.events.trigger("closeMenus",this.$el.attr("id"))):this.hide()},clean:function(){osn.debug("view","MenuView: cleaning "+this.displayName),this.stopListening(),this.delayHideTimeout&&clearTimeout(this.delayHideTimeout),this.ojMenuSupported()||this.$el.menu()&&this.$el.menu("destroy"),this.remove(),this.isClean=!0},selectedMarkup:function(){return this.ojMenuSupported()?"<span aria-label='"+osn.i18n.t("selected")+"' class='aria-selected oj-ux-ico-check' slot='startIcon'></span>":"<span aria-label='"+osn.i18n.t("selected")+"' class='aria-selected'></span>"},toggleSelectedItem:function(e,t){var i;e&&(i=this.ojMenuSupported()?this.$el.find("oj-option[data-menu-id='"+e+"']"):this.$el.find("li[data-menu-id='"+e+"'] a"),this._toggleSelectedElements(i,t))},_toggleSelectedElements:function(e,t){e&&e.length&&(e.toggleClass("osn-selected",t),t?e.prepend(this.selectedMarkup()):e.find(".aria-selected").remove())},updateMenuItemLabel:function(e){var t;e&&e.id&&e.label&&((t=this.ojMenuSupported()?this.$el.find("oj-option[data-menu-id="+e.id+"]"):this.$el.find("li[data-menu-id="+e.id+"] a")).length&&(t.text(e.label),"osn-selected"===e.className&&t.prepend(this.selectedMarkup())))}}),osn.views.OJBaseMenuView})),define("navigation/NavigationMenu.template",["underscore"],(function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="\x3c!-- Do not remove the li>div needed by jquery-ui v12 --\x3e",_.each(menuItems,(function(e){__p+="",e.show&&!e.isCollaborationItem&&(__p+='    <li data-route="'+(null==(__t=e.route)?"":__t)+'" data-let-through="'+(null==(__t=e.externalLink)?"":__t)+'" class="'+(null==(__t=e.liClass)?"":__t)+'" title="'+(null==(__t=e.name)?"":__t)+'" aria-label="'+(null==(__t=e.name)?"":__t)+'" tabindex="-1">      <a href="'+(null==(__t=e.route)?"":__t)+'" class="'+(null==(__t=e.iconClass)?"":__t)+' nav osn-clickable">      <span class="icon"> </span>      <span class="title">'+(null==(__t=e.name)?"":__t)+"</span></a></li>"),__p+=""})),__p+="",hasCollaborationItems&&(__p+='  <li class="section-title">    <a tabindex="-1" class="nav disabled">      <span class="section-divider"></span>      <span class="title">'+(null==(__t=osn.i18n.t("navMenuCollaboration"))?"":__t)+"</span>    </a>  </li>"),__p+="",_.each(menuItems,(function(e){__p+="",e.show&&e.isCollaborationItem&&(__p+="  ",e.showExternalLink?__p+='    <li data-route="'+(null==(__t=e.route)?"":__t)+'" data-let-through="'+(null==(__t=e.externalLink)?"":__t)+'" class="'+(null==(__t=e.liClass)?"":__t)+'" title="'+(null==(__t=e.name)?"":__t)+'" aria-label="'+(null==(__t=e.name)?"":__t)+'" tabindex="-1">      <a href="javascript:void(0);" class="'+(null==(__t=e.iconClass)?"":__t)+' nav osn-clickable">      <span class="icon"> </span>      <span class="title">'+(null==(__t=e.name)?"":__t)+'</span>      <span class="external-icon"> </span></a></li>  ':__p+='    <li data-route="'+(null==(__t=e.route)?"":__t)+'" data-let-through="'+(null==(__t=e.externalLink)?"":__t)+'" class="'+(null==(__t=e.liClass)?"":__t)+'" title="'+(null==(__t=e.name)?"":__t)+'" aria-label="'+(null==(__t=e.name)?"":__t)+'" tabindex="-1">      <a href="'+(null==(__t=e.route)?"":__t)+'" class="'+(null==(__t=e.iconClass)?"":__t)+' nav osn-clickable">      <span class="icon"> </span>      <span class="title">'+(null==(__t=e.name)?"":__t)+"</span></a></li>  ",__p+=""),__p+=""})),__p+="",_.findWhere(adminItems,{show:!0})&&(__p+='  <li class="section-title">    <a tabindex="-1" class="nav disabled">      <span class="section-divider"></span>      <span class="title">'+(null==(__t=osn.i18n.t("navMenuAdmin"))?"":__t)+"</span>    </a>  </li>  ",_.each(adminItems,(function(e){__p+="  ",e.show&&(__p+='      <li data-route="'+(null==(__t=e.route)?"":__t)+'" data-let-through="'+(null==(__t=e.externalLink)?"":__t)+'" class="'+(null==(__t=e.liClass)?"":__t)+'" title="'+(null==(__t=e.name)?"":__t)+'" aria-label="'+(null==(__t=e.name)?"":__t)+'" tabindex="-1">        <a href="'+(null==(__t=e.route)?"":__t)+'" class="'+(null==(__t=e.iconClass)?"":__t)+' nav osn-clickable">        <span class="icon"> </span>        <span class="title">'+(null==(__t=e.name)?"":__t)+"</span></a></li>  "),__p+="  "})),__p+=""),__p+="";return __p}})),define("navigation/NavigationMenuControls.template",["underscore"],(function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<ul id=\'nav-controls\' class="nav-menu-controls ui-menu" role="menu"><li id="nav-toggle" data-route="/toggle" class="ui-menu-item nav-control" tabindex="-1">  <button id=\'toggle\' title="'+(null==(__t=osn.i18n.t(isInMaxi?"collapseNavMenu":"expandNavMenu"))?"":__t)+'" tabindex=\'0\' role="menuitem">    <span class="expand oj-ux-ico-chevron-right"></span>    <span class="collapse oj-ux-ico-chevron-left"></span>  </button></li>',userFeedbackFeatureFlag&&(__p+='<li id="user-feedback-dlg" data-route="/feedback" class="ui-menu-item nav-control" title="'+(null==(__t=osn.i18n.t("navUserFeedback"))?"":__t)+'" tabindex="-1">  <div id=\'nav-fb-links\'>    <a href="" class="nav_assets_admin nav osn-clickable ui-menu-item-wrapper" tabindex="-1" role="menuitem">      <span class="title feedback-text">'+(null==(__t=osn.i18n.t("navUserFeedback"))?"":__t)+'</span>      <span class="icon emoji-sad-icon"></span>      <span class="icon emoji-meh-icon"></span>      <span class="icon emoji-smile-icon"></span>    </a>  </div></li>'),__p+="</ul>";return __p}})),define("navigation/NavigationMenuView",["require","jquery","underscore","core/osnGlobals","core/util/Globals","core/util/FeatureFlags","core/embedapi/EmbedApi","navigation/NavigationMenu.template","navigation/NavigationMenuControls.template","core/util/SitesGlobals","core/view/BaseView","core/view/BaseMenuView","jqueryui-amd/widgets/menu"],(function(require,e,t,osn,docs,i,s,n,o){"use strict";var a=docs.common.Globals;return osn.views.NavigationMenuView=osn.views.BaseMenuView.extend({displayName:"NavigationMenu",className:"nav-menu",attributes:function(){return{"aria-label":osn.i18n.t("navigation"),tabindex:"-1"}},cssTransitionDelay:400,events:{"keydown li":"onKeydown",menuselect:"onMenuSelect","focusin li":"onFocusin"},initialize:function(i){osn.debug("view",this.displayName+": initializing."),t.bindAll(this,"closeMenu","hide","updateScrollable","handleViewClick","onSauceMenuSelect","resize","handleTabsSwitch","adjustOverlayCoverTop","show","hide","toggle","postToggle","onMenuControlSelect","onKeydownMenuControlSection"),this.appRoot=osn.cache.get("AppConfig").contextPath+"/",this._viewPointers={},this.options.noHideOnSelect=!0,this.isShown(),this.me=osn.cache.get("me"),this.$mainEl=e("#content-wrapper"),this.$mastheadEl=e("#osn-masthead"),this.$coverEl=e("<div id='osn-view-cover'></div>"),this.$parentDiv=e(`<div id='nav-panels' class='scrollbar-dark' data-simplebar data-simplebar-direction='${docs.common.Globals.dir}'></div>`).appendTo("#osn-nav-menu"),this.$helperDiv=this.$parentDiv.siblings("#osn-nav-helper"),this.options.userFeedbackFeatureFlag=!!docs.common.checkFeatureFlag("UserFeedback"),this.options.userFeedbackFeatureFlag&&this.$mainEl.addClass("user-feedback"),this.options.resetOnNewUpdate&&this.resetMenuStateForNewVersion(),this.render(),this.$("li.ui-menu-item:first").attr("tabindex",0),this.$el.appendTo(this.$parentDiv),this.$helperDiv.text(osn.i18n.t("navMenuSRHelper")),this.listenTo(osn.events,"resize",this.handleResize),this.listenTo(osn.events,"loginInfo-updated",this.render),this.$parentDiv.parent().append(this.$controlsDiv),this.$controlsDiv.find(".nav-control").click(this.onMenuControlSelect).on("keydown",this.onKeydownMenuControlSection)},render:function(){var s=this;osn.debug("view",this.displayName+": render."),this.resolveMenuItems(),this.options.hasCollaborationItems=!1,t.each(this.options.menuItems,function(e){e.show&&e.isCollaborationItem&&(this.options.hasCollaborationItems=!0)}.bind(this)),this.$el.html(n(this.options)),this.options.isInMaxi=this.isInMaxi||!1,this.options.shown&&!this.rendered&&(this.handleResize(),this.rendered=!0),t.isEmpty(this.$el.data("ui-menu"))?(this.$el.menu({enabled:!0,select:function(t,n){osn.debug("view","NavigationMenuView: menu select event of type: "+(t.originalEvent?t.originalEvent.type:t.type)),("click"===t.type&&!t.originalEvent||t.originalEvent&&"click"===t.originalEvent.type)&&e(document.activeElement).blur();var o=e(t.originalEvent.target);i("SauceRedirect")&&o.hasClass("nav_sauce")&&s.onSauceMenuSelect()},focus:function(e,t){("menufocus"===e.type&&!e.originalEvent||e.originalEvent&&"focus"===e.originalEvent.type)&&(osn.debug("view","NavigationMenuView: menu focus event of type: "+(e.originalEvent?e.originalEvent.type:e.type)),t.item.attr("tabindex",0).focus().siblings().attr("tabindex",-1))}}).off("keydown"),this.$controlsDiv=e(o(this.options)),this.$controlsDiv.$toggleBtnEl=this.$controlsDiv.find("button"),this.$controlsDiv.$userFeedbackLinkEl=this.$controlsDiv.find("a"),this.delegateEvents()):(this.$el.menu("refresh"),this.updateSelected()),this.$el.attr("tabindex",-1)},toggleMaxiWidthMenu:function(){this.isInMaxi=!this.isOpenMaximized(),this.$mainEl.toggleClass("maxi",this.isInMaxi),this.$mainEl.toggleClass("mini",!this.isInMaxi),this.$mainEl.one(docs.common.Utils.getTransitionEndEventForBrowser(),(function(){osn.events.trigger("navbar:toggled")})),osn.util.setAlertText(this.isInMaxi?osn.i18n.t("navMenuExpanded"):osn.i18n.t("navMenuCollapsed")),this.$controlsDiv.$toggleBtnEl.attr("title",this.isInMaxi?osn.i18n.t("collapseNavMenu"):osn.i18n.t("expandNavMenu")),this.handleMenuStateChange()},showUserFeedback:function(){docs.common.checkFeatureFlag("UserFeedback")&&(docs.common.checkFeatureFlag("UserFeedbackLite")?require(["feedback/FeedbackDialogLite"],(function(e){e.show()})):require(["feedback/FeedbackDialog"],(function(e){e.show()})))},isShown:function(e){return t.isUndefined(e)||window.localStorage.setItem("navMenuShown",JSON.stringify(e)),e=window.localStorage.getItem("navMenuShown"),this.options.shown=t.isUndefined(e)||null===e||JSON.parse(e),this.options.shown},initRouteToTabMap:function(){if(t.isUndefined(this.routeToTabMap)){var e=this.getNavItemConfigs(),i=this;this.routeToTabMap={},t.each(t.keys(e),(function(s){t.each(e[s],(function(e){i.routeToTabMap[e.route]=s}))})),this.routeToTabMap[this.appRoot+"folder"]="manage",this.routeToTabMap[this.appRoot+"fileview"]="manage"}return osn.views.NavigationMenuView.routeToTabMap=this.routeToTabMap,this.routeToTabMap},getNavItemConfigs:function(e){var t={home:{route:this.appRoot+"home",name:osn.i18n.t("home"),show:osn.authz.can("access","Home")&&s.options.navigation.home,iconClass:"nav_home"},docs:{route:this.appRoot+"folder/home",name:osn.i18n.t("documents"),show:!this.options.scopedTo&&osn.authz.can("access","Documents")&&s.options.navigation.documents,iconClass:"nav_docs",isCollaborationItem:!0},conversations:{route:this.appRoot+"conversations",name:osn.i18n.t("conversations"),show:!this.options.scopedTo&&osn.authz.can("access","Conversations")&&s.options.navigation.conversations,iconClass:"nav_convs",isCollaborationItem:!0},sauce:{route:"",externalLink:!0,showExternalLink:!0,name:osn.i18n.t("sauceNav"),isCollaborationItem:!0,show:i("SauceRedirect")&&(a.isSauceEnabled="EVERYONE"===a.sauceShowNav)&&"DEV"!==a.oceEnvironment,iconClass:"nav_sauce"},assets:{route:this.appRoot+"assets",name:osn.i18n.t("navMenuAssets"),show:!this.options.scopedTo&&osn.authz.can("access","Assets")&&s.options.navigation.assets,iconClass:"nav_dam"},sites:{route:this.appRoot+"sites",name:docs.i18n.t("SITES"),show:osn.authz.can("access","Sites")&&s.options.navigation.sites&&!docs.common.checkFeatureFlag("SitePlansUI"),iconClass:"nav_sites"},siteoptions:{route:this.appRoot+"siteoptions",name:docs.i18n.t("SITE_MANAGEMENTS"),show:osn.authz.can("access","Sites")&&s.options.navigation.siteoptions&&docs.common.checkFeatureFlag("SitePlansUI"),iconClass:"nav_siteoptions"},experiences:{route:this.appRoot+"experiences",name:osn.i18n.t("navMenuExperiences"),show:!this.options.scopedTo&&osn.authz.can("access","Experiences")&&s.options.navigation.experiences&&a.experiencesEnabled&&("OCI-N"===a.podPlatform||"DEV"===a.oceEnvironment),iconClass:"nav_experiences"},recommendations:{route:this.appRoot+"recommendations",name:osn.i18n.t("navMenuRecommendations"),show:!this.options.scopedTo&&osn.authz.can("access","EnterpriseUser")&&s.options.navigation.recommendations,iconClass:"nav_recommendations"},developer:{route:this.appRoot+"developer",name:docs.i18n.t("DEVELOPER_CENTER"),show:(a.isDeveloperUser||a.isSitesAdmin||a.isContentAdmin)&&s.options.navigation.developer,iconClass:"nav_dev"},analytics:{route:this.appRoot+"analytics",name:osn.i18n.t("analytics"),show:(a.isEnterpriseUser&&!docs.common.Globals.isStarterEdition||a.isAdmin)&&s.options.navigation.analytics,iconClass:"nav_analytics"}};return e?t[e]:t},getNavAdminItemConfigs:function(){return{admin:{route:this.appRoot+"administration",name:osn.i18n.t("navMenuSystemSettings"),show:!this.options.scopedTo&&a.isAdmin,iconClass:"nav_admin"},integrations:{route:this.appRoot+"integrations",name:osn.i18n.t("applications"),show:!this.options.scopedTo&&(a.isDeveloperUser||a.isAdmin||a.isSitesAdmin||a.isContentAdmin),iconClass:"nav_integrations"},assetsAdmin:{route:this.appRoot+"assetsadmin",name:osn.i18n.t("navMenuAssetAdmin"),show:!this.options.scopedTo&&(docs.common.Globals.isContentAdmin||docs.common.Globals.isRepositoryAdmin),iconClass:"nav_assets_admin"},capture:{route:this.appRoot+"capture",name:osn.i18n.t("navMenuCapture"),show:a.isCaptureAdmin,iconClass:"nav_capture"},applications:{route:this.appRoot+"applications",name:osn.i18n.t("navMenuApplications"),show:!this.options.scopedTo&&a.isAdmin&&docs.common.Globals.enableApplications,iconClass:"nav_applications"}}},resolveMenuItems:function(){var e=this.getNavItemConfigs();this.options.menuItems=t.values(e),this.options.adminItems=this.getNavAdminItemConfigs()},show:function(){osn.debug("view",this.displayName+": show menu"),this.isInWideView()?(this.isShown(!0),this.$mainEl.toggleClass(this.isInMaxi?"maxi":"mini",!0)):(this.$mainEl.prevAll().addBack().addClass("activeMenu"),this.$mainEl.find("#osn-view").prepend(this.$coverEl),this.$coverEl.click(this.handleViewClick)),this.$el.scrollTop(this.scrollPos||0),t.delay(t.bind((function(){this.options.onShow(),!this.shownOnce&&this.isInWideView()||this.postToggle(),this.shownOnce=!0}),this),this.shownOnce||!this.isInWideView()?this.cssTransitionDelay:0)},resetMenuStateForNewVersion:function(){this.options.shown=this.isInMaxi=!0},hide:function(){osn.debug("view",this.displayName+": hide menu"),this.isInMaxi=this.isOpenMaximized(),this.isInWideView()?this.isShown(!1):(this.scrollPos=this.$el.scrollTop(),this.$mainEl.prevAll().addBack().removeClass("activeMenu"),this.$coverEl.parent().length&&this.$coverEl.remove()),this.$mainEl.toggleClass("mini maxi",!1),t.delay(t.bind((function(){this.options.onHide(),this.postToggle()}),this),this.cssTransitionDelay)},toggle:function(){this.isOpenMaximized()||this.isOpenMinimized()||this.$mainEl.is(".activeMenu")?this.hide():this.show(),this.handleMenuStateChange()},postToggle:function(){osn.events.trigger("navbar:toggled",{silent:!0}),this.adjustOverlayCoverTop()},adjustOverlayCoverTop:function(){if(this.$coverEl.parent().length){var e=this.$mastheadEl.find(".brand").outerHeight()||0;console.log("Setting cover top to: "+e),this.$coverEl.css("top",e)}},handleResize:function(e){osn.debug("view",this.displayName+": handleResize"),this.isInWideView()?(this.options.shown&&!this.isOpenMinimized()&&!this.isOpenMaximized()&&this.show(),this.$coverEl.parent().length&&this.$coverEl.remove()):this.hide(),this.analyticsInitialized||(this.analyticsInitialized=!0,this.handleMenuStateChange("view"),this.handleMenuSelectionChange("view",window.location.pathname))},handleMenuStateChange:function(e){var t=this.getMainMenuState();t&&(docs.events.trigger("analytics:action",{feature:"main-menu","event-type":e||"click",action:"main-menu-toggle","main-nav-state":t,"main-nav-prev-state":this.analyticsMenuState||"",duration:this.analyticsMenuStateStart?Date.now()-this.analyticsMenuStateStart:0}),this.analyticsMenuState=t,this.analyticsMenuStateStart=Date.now())},handleMenuSelectionChange:function(e,t,i){docs.events.trigger("analytics:setState",{section:t}),docs.events.trigger("analytics:action",{feature:"webclient","event-type":e||"click",action:"main-menu-navigation","main-nav-target":t,"main-nav-source":this.analyticsMenuRoute||"",duration:this.analyticsMenuRouteStart?Date.now()-this.analyticsMenuRouteStart:0}),this.analyticsMenuRoute=t,this.analyticsMenuRouteStart=Date.now()},getMainMenuState:function(){var e="";return this.isInWideView()&&(e=this.isOpenMaximized()?"label":this.isOpenMinimized()?"icon":"hidden"),e},handleViewClick:function(e){return osn.debug("view",this.displayName+": handleViewClick"),this.toggle(),!1},handleTabsSwitch:function(){osn.debug("view",this.displayName+": handleTabsSwitch"),this.render()},updateScrollable:function(t){var i=this.$el.scrollTop(),s=this.$el[0].scrollHeight,n=this.$el.outerHeight();osn.debug("view",this.displayName+": updateScrollable"),i>1?(e(".scroll-top-overlay").length||this.$el.addClass("scroll-top-overlay"),this.createTopValue("top",".scroll-top-overlay::before",i)):this.$el.removeClass("scroll-top-overlay"),n+i+1<s?(e(".scroll-btm-overlay").length||this.$el.addClass("scroll-btm-overlay"),this.createTopValue("bottom",".scroll-btm-overlay::after",i+this.$el[0].offsetHeight-60)):this.$el.removeClass("scroll-btm-overlay")},createTopValue:function(t,i,s){e('head [data-id="'+t+'"]').remove(),e('<style data-id="'+t+'">'+i+" { top: "+s+"px; }</style>").appendTo("head")},isOpenInNarrowView:function(){return 1===this.$coverEl.parent().length},isOpenMaximized:function(){return this.$mainEl.is(".maxi")},isOpenMinimized:function(){return this.$mainEl.is(".mini")},isInWideView:function(){return"1"!==this.$helperDiv.css("z-index")},updateSelected:function(e){osn.debug("view",this.displayName+": updateSelected"),e&&!t.isEmpty(e)||(e=this._getSelectionBasedOnRoute()),e&&e.length&&!e.is(".osn-selected")?(this.$(".osn-selected").removeClass("osn-selected"),e.addClass("osn-selected").attr("tabindex",0).siblings().attr("tabindex",-1)):e.length||(this.$(".osn-selected").removeClass("osn-selected"),this.$("li.ui-menu-item:first").attr("tabindex",0).siblings().attr("tabindex",-1))},_getSelectionBasedOnRoute:function(){var e=osn.views.NavigationMenuView.getRouteFragmentAdjustedUsingBreadcrumbs();return this.$("li[data-route='"+e+"']")},onMenuSelect:function(e,t){if(osn.debug("view",this.displayName+": onMenuSelect"),t&&t.item&&t.item.data){var i=t.item.data("route");this.handleMenuSelectionChange("click",i)}osn.views.BaseMenuView.prototype.onMenuSelect.call(this,e,t),this.isOpenInNarrowView()&&this.hide()},onMenuControlSelect:function(t){var i=e(t.currentTarget);t.preventDefault(),t.stopPropagation(),i.is("#nav-toggle")?(this.$mainEl.addClass("animatable"),this.toggleMaxiWidthMenu()):this.showUserFeedback(t)},onFocusin:function(t){if(!e(t.target).children(".ui-state-active").length)return osn.debug("view","onFocusin"),t.stopPropagation(),t.preventDefault(),this.$el.menu("focus",null,e(t.currentTarget)),!1},resize:function(){var e,t=this.$mainEl.height(),i=this.$mastheadEl.outerHeight(!0)+this.getCachedEl("#osn-header").outerHeight(!0);osn.debug("view",this.displayName+": resize"),e=t-i-5,this.$el.height(e),this.$mainEl.height(e),this.updateScrollable()},getCachedEl:osn.views.BaseView.prototype.getCachedEl,onKeydown:function(t){var i,s;return t.keyCode===e.ui.keyCode.ENTER||t.keyCode===e.ui.keyCode.SPACE?(this.$el.menu("select",t),!1):t.keyCode===e.ui.keyCode.RIGHT||t.keyCode===e.ui.keyCode.DOWN?((i=e(t.target).next("li")).length>0&&i.is(":visible")&&(this.$el.menu("next"),i.is(".section-title")&&this.$el.menu("next")),!1):t.keyCode===e.ui.keyCode.UP||t.keyCode===e.ui.keyCode.LEFT?((s=e(t.target).prev("li")).length>0&&s.is(":visible")&&(this.$el.menu("previous"),s.is(".section-title")&&this.$el.menu("previous")),!1):void(t.keyCode===e.ui.keyCode.TAB&&this.$el.menu("blur"))},onKeydownMenuControlSection:function(t){var i,s;return s=e(t.target),t.keyCode===e.ui.keyCode.ENTER||t.keyCode===e.ui.keyCode.SPACE||(t.keyCode===e.ui.keyCode.RIGHT||t.keyCode===e.ui.keyCode.DOWN?e(t.target).is("button")&&(i=this.$controlsDiv.$userFeedbackLinkEl):t.keyCode!==e.ui.keyCode.UP&&t.keyCode!==e.ui.keyCode.LEFT||e(t.target).is("a")&&(i=this.$controlsDiv.$toggleBtnEl),!i||(s.attr("tabindex",-1),i.focus().attr("tabindex",0),!1))},onSauceMenuSelect:function(){var t,i={},s="OCI-N"===a.podPlatform&&"DEV"!==a.oceEnvironment,n=docs.common.Globals.sauceEndpoint;t=n?n+"/user_auth/oce/login/redirect":s?"https://api.sauce.video/api/user_auth/oce/login/redirect":"https://devapi.sauce.video/api/user_auth/oce/login/redirect";var o=e.sessionStorage("tempServiceUrl")||window.location.origin,l=docs.common.Globals.serviceRoot+"?IdcService=GET_OAUTH_TOKEN&IsJson=1";e.ajax({url:l,type:"GET",async:!1,success:function(e){e.LocalData&&"0"===e.LocalData.StatusCode&&(i.tokenValue=e.LocalData.tokenValue,i.expiration=e.LocalData.expiration,i.refreshTokenValue=e.LocalData.refreshTokenValue,i.service_url=o,i.dUserFullName=e.LocalData.dUserFullName)},error:function(e){e.errorHandled=!0}});var r=e("<form id='sinfo' target='_blank' style='display:none;'></form>");r.attr("method","POST").attr("action",t),i&&(r.append("<input type='hidden' name='service_url' value='"+i.service_url+"'>"),r.append("<input type='hidden' name='access_token' value='"+i.tokenValue+"'>"),r.append("<input type='hidden' name='refresh_token' value='"+i.refreshTokenValue+"'>"),r.append("<input type='hidden' name='expires_in' value='"+i.expiration+"'>"),r.append("<input type='hidden' name='display_name' value='"+i.dUserFullName+"'>"),r.append("<input type='submit'>")),e("body").append(r);var c=e("body").find("#sinfo");c.ready((function(e){c.submit(),c.remove()}))},clean:function(){osn.views.BaseMenuView.prototype.clean.call(this),t.invoke(this._viewPointers,"clean")}},{getRouteFragmentFromURL:function(){var e,t=osn.util.getHistoryFragment().split("/");return"all"===(e=t[0]||"overview")&&(e="overview"),t.length>1&&(osn.util.isNumeric(t[1])||(e="folder"===t[0]||"fileview"===t[0]?"folder/home":"sites"===t[0]&&"trash"===t[1]?"sites/trash":"collections"===t[0]?"collections/all":t[0])),"people"===t[0]&&osn.authz.can("access","Groups")&&(e="groups"),osn.views.NavigationMenuView.developerRoutes.indexOf(e)>-1&&(e="developer"),osn.views.NavigationMenuView.assetsAdminRoutes.indexOf(e)>-1&&(e="assetsadmin"),e=osn.cache.get("AppConfig").contextPath+"/"+e},mapRouteFragment2NavRoute:{assets:"Assets","folder/home":"Docs",sites:"Sites","sites/trash":"SitesTrash",themes:"Themes",components:"Components",templates:"Templates",developer:"Developer",repositories:"Repositories",channels:"Channels",localizations:"Localizations",workflows:"Workflows",workflowroles:"WorkflowRoles",editorialroles:"EditorialRoles",contenttypes:"ContentTypes",taxonomies:"Taxonomy",audienceattributes:"Audience",recommendations:"Recommendations",experiences:"Experiences",conversations:"Conversations",people:"People",rankingpolicies:"RankingPolicy"},regexMapRouteFragment2NavRoute:function(e){return t.find(this.mapRouteFragment2NavRoute,(function(t,i){var s=new RegExp(i+"$|"+i+"/.*");return e.match(s)}))},getExperienceRoutes:t.once((function(){return["Themes","Sites","Templates","Components","SitesTrash","Developer","Recommendations","Experiences","Assets","Analytics","Admin","Integrations","Repositories","Channels","Localizations","Workflows","WorkflowRoles","EditorialRoles","ContentTypes","Taxonomy","Audience","RankingPolicy","Applications"]})),getExperienceFragments:t.once((function(){return t.values(t.pick(t.invert(this.mapRouteFragment2NavRoute),this.getExperienceRoutes()))})),developerRoutes:["themes","templates","components"],assetsAdminRoutes:["repositories","repository","channels","channel","localizations","audienceattributes","workflows","workflowroles","editorialroles","localization","contenttypes","contenttype","taxonomies","taxonomy","rankingpolicies","rankingpolicy"],getContextHelpUrl:function(e){var t=docs.common.Globals.URLs.help.main,i=osn.views.NavigationMenuView.getHelpLinkGuid(e);return t=t.replace("cecshelp",i)},openHelpLink:function(e){"capture/admin"===(e||osn.util.getHistoryFragment())?window.frames.capture_iframe.contentWindow.postMessage(!1,window.origin):window.open(osn.util.inferUrlProtocol(osn.views.NavigationMenuView.getContextHelpUrl(e)),"_blank");return!1},getRouteFragmentFromBreadcrumbIfFound:function(){var t=e(".containerview .breadcrumb_list a.root");if(t.length&&t.attr("href").length){var i=t.attr("href");if(0===i.indexOf("folder"))return;return 0===i.indexOf("developer")&&(t[0].href.indexOf("themes")>0?i="themes":t[0].href.indexOf("components")>0?i="components":t[0].href.indexOf("templates")>0&&(i="templates")),i.indexOf("/")>-1&&(i=i.substring(0,i.indexOf("/"))),i}},getRouteFragmentAdjustedUsingBreadcrumbs:function(){var e=this.getRouteFragmentFromBreadcrumbIfFound();return e?osn.cache.get("AppConfig").contextPath+"/"+e:osn.views.NavigationMenuView.getRouteFragmentFromURL()},getHelpLinkGuid:function(e){var i,s=e||osn.util.getHistoryFragment();return(i=t.find(osn.util.getHelpURIMap(),(function(e){return e.regex.test(s)})))?i.guid:osn.util.getHelpURIMap().default.guid}}),osn.views.NavigationMenuView})),define("masthead/UserStampMenuView",["jquery","underscore","backbone","core/osnGlobals","core/util/Globals","core/util/FeatureFlags","masthead/UserStampMenu.template","core/view/OJBaseMenuView","navigation/NavigationMenuView"],(function(e,t,i,osn,docs,s,n){"use strict";return osn.views.UserStampMenuView=osn.views.OJBaseMenuView.extend({displayName:"UserStampMenu",className:"osn-icon-menu",template:n,featureFlag:"OJMenus2151",attributes:{id:"userStampMenu"},initialize:function(e){t.bindAll(this,"onShow");var i=osn.cache.get("XLoginInfo");this.options.supportDescription=i.SupportDescription||"",this.options.feedbackURL=osn.util.inferUrlProtocol(docs.common.Globals.URLs.help.feedback),this.options.downloadURL=osn.util.inferUrlProtocol(docs.common.Globals.URLs.download),this.options.profileURL=osn.cache.get("AppConfig").contextPath+"/people/"+this.model.id,this.options.aboutURL=osn.cache.get("AppConfig").contextPath+"/preferences/about",this.options.onShow=this.onShow,osn.views.OJBaseMenuView.prototype.initialize.call(this,e),docs.common.Globals.isPublicUser||this.listenTo(this.model,"change:DisplayName",this.setStale)},onMenuSelect:function(e,t){osn.debug("view","UserStampMenuView: onMenuSelect"),t.item.data("menuId")?(e.preventDefault(),e.stopPropagation(),this.hide(),this[t.item.data("menuId")](t)):osn.views.OJBaseMenuView.prototype.onMenuSelect.call(this,e,t)},hide:function(){this.options.active(!1),osn.views.OJBaseMenuView.prototype.hide.call(this)},show:function(){this.options.active(!0);var e=this.model.get("EMailAddress")?this.model.get("DisplayName")+this.model.get("EMailAddress"):this.model.get("DisplayName");osn.util.setAlertText(e),osn.views.OJBaseMenuView.prototype.show.call(this)},onShow:function(){this.ojMenuSupported()?this.$("oj-option[data-menu-id='whatsNewBanner']").toggle(this.hasAvailableWidthForAnnouncements()):this.$("li[data-menu-id='whatsNewBanner']").toggle(this.hasAvailableWidthForAnnouncements())},hasAvailableWidthForAnnouncements:function(){return e(".branding").width()>745},logout:function(){osn.fc.sendRequest("XConnectModule$Server","logout",[]).done(t.bind((function(){this.getSessionStorage().clear(),localStorage.removeItem("loggedin"),i.history.navigate("logout",{trigger:!1,replace:!0}),this.getWindowLocation().replace(docs.common.Globals.routerRoot+"logout")}),this))},login:function(){var e=this.getWindowLocation().href.replace("link","authlink");this.getWindowLocation().replace(e)},whatsNewBanner:function(){window.open("https://docs.oracle.com/en/cloud/paas/content-cloud/whats-new/index.html#CECSW-GUID-F0C3D768-2A47-42D5-856A-74E6FA513918")},openExternalLink:function(e){window.open(this.ojMenuSupported()?e.item.attr("data-route"):e.item.find("a").attr("href"),"_blank")},getSessionStorage:function(){return window.sessionStorage},getWindowLocation:function(){return window.location}}),osn.views.UserStampMenuView})),define("masthead/UserStampView",["jquery","underscore","backbone","core/osnGlobals","masthead/UserStamp.template","common/util/PositionUtils","core/view/BaseView","core/util/FeatureFlags","masthead/UserStampMenuView"],(function(e,t,i,osn,s,n){"use strict";return osn.views.UserStampView=osn.views.BaseView.extend({className:"userStamp",displayName:"UserStampView",events:{"click a":"handleClickOnAnchor","click button.name":"onLogin","click button.helpbtn":"openHelpLink","click a.profileMenu":"openMenu","keydown button.profileButton":"onKeydown"},initialize:function(e){osn.debug("view","UserStampView: initialize"),t.bindAll(this,"onMenuOpen","onMenuHide","onLogin"),this._viewPointers={},osn.authz.can("access","UserProfile")&&(this.options.wall=this.formatUserLink(this.model.id)),this.render(),docs.common.Globals.isPublicUser||(this.listenTo(this.model,"change:profilePic",this.updateProfilePic),this.listenTo(this.model,"change:DisplayName",this.updateDisplayName)),this.menuClickSelector=docs.common.Globals.isPublicLink?".userStamp button":".profileMenu"},render:function(){return osn.debug("view","UserStampView: render"),this.$el.html(s({o:this.options})),docs.common.Globals.isPublicUser||this.$el.addClass("noUserNameButton"),this},onMenuOpen:function(){this.$(this.menuClickSelector).attr("aria-expanded",!0)},onMenuHide:function(){this.$(this.menuClickSelector).attr("aria-expanded",!1)},onLogin:function(){var e=window.location.href.replace("link","authlink");window.location.replace(e)},openMenu:function(e){var i=docs.common.Globals.isPublicUser?".userStamp button":".profileMenu .profilePic";return this._viewPointers.menu&&this._viewPointers.menu.stale&&(this._viewPointers.menu.clean(),delete this._viewPointers.menu),this._viewPointers.menu||(this._viewPointers.menu=new osn.views.UserStampMenuView({model:this.model,active:t.bind((function(e){this.$(".profileMenu").toggleClass("active",e)}),this),noArrow:!0,appendTo:"#osn-view",position:n.normalizeHorizontalAlignment({my:"end top",at:"end bottom",of:i}),onHide:this.onMenuHide,onShow:this.onMenuOpen})),this._viewPointers.menu.show(),!1},updateDisplayName:function(){osn.debug("view","UserStampView: updateDisplayName"),this.$(".name").text(this.model.get("DisplayName")),this.$("button").attr("title",this.model.get("DisplayName"))},updateProfilePic:function(){osn.debug("view","UserStampView: updateProfilePic"),this.$(".profilePic").attr("src",this.model.get("profilePic"))},openHelpLink:function(){return osn.views.NavigationMenuView.openHelpLink()},onKeydown:function(t){var i=e(t.target).find("a");return t.keyCode===e.ui.keyCode.ENTER||t.keyCode===e.ui.keyCode.SPACE?(i.click(),!1):t.keyCode!==e.ui.keyCode.RIGHT&&t.keyCode!==e.ui.keyCode.DOWN||!i.is("a.profileMenu")||(i.click(),!1)},clean:function(){osn.views.BaseView.prototype.clean.call(this)}}),osn.views.UserStampView})),define("masthead/MastheadToolbarView",["jquery","underscore","backbone","core/osnGlobals","core/util/Globals","masthead/MastheadToolbar.template","core/util/Service","core/util/ImagesUtil","core/model/UserModel","masthead/MastheadFlagModel","masthead/UserStampView"],(function(e,t,i,osn,docs,s){"use strict";return osn.views.MastheadToolbarView=i.View.extend({displayName:"MastheadToolbarView",className:"toolbar",events:{"click .flagsIndicator":"flagsIndicatorClick"},initialize:function(e){osn.debug("view","MastheadToolbarView: initialize"),this.options.avatarUrl=this.getAvatarUrl(),this.resizeToolbar=e.resizeCallback},render:function(){this.$el.html(s({o:this.options})),this.$(".flagsIndicator").show(),this.listenToOnce(osn.events,"osn-fcbc-ready",this.buildModels)},getAvatarUrl:function(){return docs.common.Globals.isStandardExternalUser?osn.images.getDefaultExternalUserProfilePicture():osn.images.getDefaultProfilePicture()},buildModels:function(){osn.models.UserModel.build(osn.cache.get("XLoginInfo").UserInfo.ID).done(t.bind((function(e){this.userStamp=new osn.views.UserStampView({model:e}),this.$("#initTemp").remove(),this.$el.append(this.userStamp.$el),this.resizeToolbar&&this.resizeToolbar()}),this)),this.model=new osn.models.MastheadFlagModel,this.model.has("flagsCount")&&this.updateFlagsIndicator(),this.listenTo(this.model,"change:flagsCount",this.flagsCountChange)},updateFlagsIndicator:function(){var e=this.model.get("flagsCount");this.$(".flagsIndicator").attr("aria-label",osn.i18n.t("flagsIndicatorAriaLabel",e)).show(),this.$(".flagsIndicator .text").text(e||"")},flagsCountChange:function(){this.updateFlagsIndicator()},flagsIndicatorClick:function(){var e=i.history.getFragment();/^flags/.test(e)||i.history.navigate("/flags",!0)}}),osn.views.MastheadToolbarView})),define("masthead/MastheadPublicToolbarView",["jquery","underscore","backbone","core/osnGlobals","core/util/Globals","masthead/MastheadToolbar.template","masthead/UserStampView"],(function(e,t,i,osn,docs,s){"use strict";return osn.views.MastheadPublicToolbarView=i.View.extend({displayName:"MastheadPublicToolbarView",className:"toolbar",initialize:function(){osn.debug("view","MastheadToolbarView: initialize"),this.userStamp=new osn.views.UserStampView({model:new i.Model({DisplayName:docs.i18n.t("GENERAL_LOGIN")})})},render:function(){this.$el.html(s()),this.$el.append(this.userStamp.$el)}}),osn.views.MastheadPublicToolbarView})),define("masthead/MastheadView",["jquery","underscore","backbone","core/osnGlobals","core/util/Globals","core/util/SitesGlobals","core/util/FirstTimeSinceUpdate","core/util/FirstTimeActions","masthead/OnboardingVideo.template","core/util/FeatureFlags","core/view/BaseCompositeView","core/view/GlobalSearchBarView","masthead/BrandView","masthead/MastheadToolbarView","masthead/MastheadPublicToolbarView","navigation/NavigationMenuView","core/authz","core/util/util","core/router/DocsController","knockout","ojs/ojcore","ojs/ojknockout","ojs/ojdialog"],(function(e,t,i,osn,docs,sites,s,n,o){"use strict";var a;return osn.views.MastheadView=osn.views.BaseCompositeView.extend({el:"#osn-masthead",displayName:"MastheadView",events:{"click #nav-btn":"toggleNavMenu"},initialize:function(){this.appConfig=osn.cache.get("AppConfig"),osn.debug("view","MastheadView: initialize"),t.bindAll(this,"resize","update","updateOnDocsNav"),this._viewPointers={},this.options.navMenu=this.appConfig.navMenu,this.options.navMenu=this.options.navMenu&&this.options.navMenu.toLowerCase(),osn.authz.can("view","NavMenu")&&(this._viewPointers=this._viewPointers||{},this._viewPointers.navMenu=new osn.views.NavigationMenuView({isScoped:"scoped"===this.options.navMenu,resetOnNewUpdate:!s.get("whatsnew"),onHide:t.bind((function(){this.$("#nav-btn").removeClass("active"),osn.util.setAlertText(osn.i18n.t("navMenuClosed")),this.resize()}),this),onShow:t.bind((function(){this.$("#nav-btn").addClass("active"),osn.util.setAlertText(osn.i18n.t("navMenuOpened")),this.resize()}),this)})),osn.authz.can("view","MastHead")&&this.$el.show(),this.$el.append(e('<div class="branding"></div>')),osn.views.BaseCompositeView.prototype.initialize.call(this),e("#content-wrapper").addClass("osn-standalone"),this.listenTo(osn.events,"nav",this.update),this.listenTo(osn.events,"resize",this.resize),this.listenTo(osn.events,"navigation-jump",this.goToNavMenu),this.listenTo(osn.events,"navigation:sidebar-model-updated",this.updateSidebarModel),this.listenTo(osn.events,"keyboardShortcut",this.handleKeyboardShortcut),this.listenTo(docs.router,"navigate",this.updateOnDocsNav),this.listenTo(docs.events,"docs:main:nav",this.updateOnDocsFolderNav),a=this},appendVideo:function(e){require(["knockout","masthead/OnboardingVideoModel","css!geminiCss/gemini-home"],function(i,s){this.onboardingVideo=new s,this.$el.append(o()),i.applyBindings(this.onboardingVideo,document.getElementById("video-dialog")),t.defer(function(){this.onboardingVideo.openListener(e)}.bind(this))}.bind(this))},appendView:function(e){var t;(osn.debug("view","MastheadView: appendView"),this.$(".branding").append(e.$el),n.occurred("welcome_seenDialog"))||(docs.common.Globals.isContentAdmin||docs.common.Globals.isRepositoryAdmin||docs.common.Globals.isAdmin?(t="https://apexapps.oracle.com/pls/apex/f?p=44785:265:0::::P265_CONTENT_ID:30000",this.appendVideo(t)):docs.common.Globals.isEnterpriseUser&&(t="https://apexapps.oracle.com/pls/apex/f?p=44785:265:0::::P265_CONTENT_ID:29629",this.appendVideo(t)))},createNestedViews:function(){osn.debug("view","MastheadView: createNestedViews");var t=e.Deferred();return this._viewPointers.brand=new osn.views.BrandView,this.appendView(this._viewPointers.brand),this.appConfig.publicUser?this.appConfig.publicUser&&(this._viewPointers.toolbar=new osn.views.MastheadPublicToolbarView({}),this._viewPointers.toolbar.render(),this.appendView(this._viewPointers.toolbar),t.resolve()):(this._viewPointers.toolbar=new osn.views.MastheadToolbarView({resizeCallback:this.resize}),this._viewPointers.toolbar.render(),this.appendView(this._viewPointers.toolbar),this.appendSearch(),t.resolve()),t.promise()},appendSearch:function(){osn.authz.can("view","Search")&&(this.appConfig.searchAutoCompleteEnabled&&(this.instantSearchModel=new osn.models.InstantSearchModel),this._viewPointers.narrowSearchBar||(this._viewPointers.narrowSearchBar=new osn.views.GlobalSearchBarView({instantSearchModel:this.instantSearchModel}),this._viewPointers.narrowSearchBar.render(),this._viewPointers.narrowSearchBar.updateScopedSearchElements(),this.appendView(this._viewPointers.narrowSearchBar),this.$(".globalSearchBar").wrap("<div class='searchBarNarrow ui-helper-hidden'></div>"),this.$(".branding").append("<div class='clear'></div>")),this._viewPointers.searchBar||(this._viewPointers.searchBar=new osn.views.GlobalSearchBarView({instantSearchModel:this.instantSearchModel}),this._viewPointers.searchBar.render(),this._viewPointers.searchBar.updateScopedSearchElements(),this.$(".toolbar").prepend(this._viewPointers.searchBar.$el),this.$(".toolbar .globalSearchBar").wrap("<div class='searchBar ui-helper-hidden'></div>")),this.resize(),this._lastNavEventArgs&&(this.update(this._lastNavEventArgs),delete this._lastNavEventArgs))},update:function(e){var t=osn.views.NavigationMenuView.regexMapRouteFragment2NavRoute(i.history.getFragment())||e.routeName;("Docs"!==t||e.force)&&(this.options.viewName=t,this.updateNavMenu(),this.haveNavigated=!0,this.updateSearchBox(e))},updateOnDocsNav:function(e,t){var i=e.replace(/\/$/,"").replace(/\/([A-Z0-9]+)(\/[a-z]+)*$/,""),s=osn.views.NavigationMenuView.regexMapRouteFragment2NavRoute(i.toLowerCase())||"Docs";0===i.indexOf("sites")&&(s=osn.views.NavigationMenuView.mapRouteFragment2NavRoute.sites),0===i.indexOf("components")&&(s=osn.views.NavigationMenuView.mapRouteFragment2NavRoute.components),0===i.indexOf("taxonomies")&&(s=osn.views.NavigationMenuView.mapRouteFragment2NavRoute.taxonomies),osn.debug("nav","MasterheadView.updateOnDocsNave: called with route: "+i),(e.startsWith("folder/home")||!e.startsWith("folder/")&&!e.startsWith("fileview/"))&&this.update({routeName:s,force:!0})},updateOnDocsFolderNav:function(e){var t,s={framework:"Docs","framework.dam":"Docs","framework.site":"Sites","framework.site.theme":"Themes","framework.site.app":"Components","framework.site.template":"Templates"};e&&e.application&&s[e.application]?(this.update({routeName:s[e.application],force:!0}),"Docs"===s[e.application]&&("folder"===(t=i.history.getFragment().split("/"))[0]?this.updateScopedFolderForInstantSearch(t[1]):"groups"===t[0]&&"discoverable"===t[1]&&this.updateScopedPublicGroupForInstantSearch(!0))):this.updateScopedFolderForInstantSearch(null)},updateScopedFolderForInstantSearch:function(e){t.each([this._viewPointers.searchBar,this._viewPointers.narrowSearchBar],t.bind((function(t){t&&t.instantSearchModel&&t.updateFolderScopeGuid(e)}),this))},updateScopedPublicGroupForInstantSearch:function(e){t.each([this._viewPointers.searchBar,this._viewPointers.narrowSearchBar],t.bind((function(t){t&&t.instantSearchModel&&t.updateScopedPublicGroup(e)}),this))},updateModel:function(e){osn.debug("view","MastheadView.updateModel called"),this.options.mainModel=e,delete this.options.sidebarModel},updateSidebarModel:function(e){osn.debug("view","MastheadView.updateSidebarModel called"),this.options.sidebarModel=e},updateSearchBox:function(e){if(this._viewPointers.searchBar){if(osn.authz.can("view","Search")&&this._viewPointers.searchBar){osn.debug("view",this.displayName+": updateSearchBox");var i=this._viewPointers.searchBar.$el.parent(),s=this._viewPointers.narrowSearchBar.$el.parent();"Search"===e.routeName?e.id&&!t.isEmpty(e.id.trim())&&(this._viewPointers.searchBar.setText(e.id),this._viewPointers.narrowSearchBar.setText(e.id)):(this._viewPointers.searchBar.clearText({noFocus:!0}),this._viewPointers.narrowSearchBar.clearText({noFocus:!0})),this._viewPointers.narrowSearchBar.updateScopedSearchElements(),this._viewPointers.searchBar.updateScopedSearchElements(),t.include(osn.views.NavigationMenuView.getExperienceRoutes(),e.routeName)?(i.addClass("ui-helper-hidden osn-disabled"),s.addClass("ui-helper-hidden osn-disabled")):(i.removeClass("osn-disabled"),s.removeClass("osn-disabled"),this.resize())}}else this._lastNavEventArgs=e},setSearchFocus:function(){osn.authz.can("view","Search")&&(this.$("button.search"),this.isStacked()?this._viewPointers.narrowSearchBar.setFocus():this._viewPointers.searchBar.setFocus())},resize:function(e){var t=this.$el.outerHeight();if(this._viewPointers.searchBar&&this.haveNavigated&&(osn.debug("view",this.displayName+": resize handler"),this._viewPointers.searchBar)){var i=this._viewPointers.searchBar.$el.parent(),s=this._viewPointers.narrowSearchBar.$el.parent();i.is(".osn-disabled")||((e=e||{}).silent=!0,this.hasAvailWidthForSearch()?(this.$el.removeClass("brandingBarStacked"),i.removeClass("ui-helper-hidden"),s.addClass("ui-helper-hidden"),this._viewPointers.searchBar.setText(this._viewPointers.narrowSearchBar.getText()),this._viewPointers.searchBar.$(".form-item-bubble").is(":visible")?this._viewPointers.searchBar.$(".form-item-bubble").width():0):(this.$el.addClass("brandingBarStacked"),i.addClass("ui-helper-hidden"),s.removeClass("ui-helper-hidden"),this._viewPointers.narrowSearchBar.setText(this._viewPointers.searchBar.getText()),this._viewPointers.narrowSearchBar.$(".form-item-bubble").is(":visible")?this._viewPointers.narrowSearchBar.$(".form-item-bubble").width():0),(e.extraHeight||t!=this.$el.outerHeight())&&osn.views.BaseView.prototype.resize.call(this,e))}},isStacked:function(){return this.$el.is(".brandingBarStacked")},hasAvailWidthForSearch:function(){var e=this.getCachedEl(".searchBar").outerWidth(!0),t=this.getCachedEl(".branding").width(),i=this.getCachedEl(".flagsIndicator").outerWidth(!0),s=this.$(".userStamp").outerWidth(!0);return t-(this.getCachedEl(".brand").outerWidth(!0)+i+s)>e},toggleNavMenu:function(t){return e("#content-wrapper").addClass("animatable"),this._viewPointers.navMenu&&(this._viewPointers.navMenu.toggle(),osn.events.trigger("closeMenus",this._viewPointers.navMenu.$el.attr("id"))),!1},goToNavMenu:function(){return this._viewPointers.navMenu&&(this._viewPointers.navMenu.show(),e(".nav-menu > li:first ").focus(),e(".nav-menu > li.osn-selected ").focus(),osn.events.trigger("closeMenus",this._viewPointers.navMenu.$el.attr("id"))),!1},updateNavMenu:function(e,t){t&&!1===t.trigger||!this._viewPointers.navMenu||(osn.debug("view","MastheadView: updateNavMenu"),this._viewPointers.navMenu.updateSelected())},handleKeyboardShortcut:function(e,t){this[e.fn]&&this[e.fn](t)},openShortcuts:function(e){var t=this;require(["masthead/KeyboardShortcutsDialogView"],(function(){osn.views.DialogView.show({DialogClass:osn.views.KeyboardShortcutsDialogView,viewName:t.options.viewName,mainModel:t.options.mainModel||t.options.sidebarModel}),osn.debug("view","KeyboardShortcutsDialog opened for type: "+t.options.viewName)}))}},{getViewObject:function(){return a}}),osn.views.MastheadView})),define("masthead-nav-15b22b9.cache",(function(){}));