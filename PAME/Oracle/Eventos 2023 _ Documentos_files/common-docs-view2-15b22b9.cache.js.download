define("docs/container/tableview/VersionTableCellView.template",["underscore"],(function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="<span class='containerview-table-cell cv-table-cell-value "+(null==(__t=classes)?"":_.escape(__t))+"' title='"+(null==(__t=title&&title.length?title:"")?"":_.escape(__t))+"'>",verDispLink?__p+='  <a href="#" title="'+(null==(__t=title)?"":_.escape(__t))+'" aria-label="'+(null==(__t=title)?"":_.escape(__t))+'" class="folderLink text_button containerview-versionClick">'+(null==(__t=value)?"":_.escape(__t))+"</a>":value&&value.length>0&&(__p+="  "+(null==(__t=value)?"":_.escape(__t))),__p+="</span>";return __p}})),define("common/container/tableview/VersionTableCellView",["jquery","underscore","backbone","core/util/Globals","docs/container/tableview/VersionTableCellView.template"],(function(e,t,i,docs,n){"use strict";return i.View.extend({initialize:function(e){return this.options=e||{},this.model&&this.options.column.updateOnAttrChange&&this.listenTo(this.model,"change:"+this.options.column.updateOnAttrChange,this.updateValue),this},render:function(){var e=this.options.column.getValue(this.model,this.options);return this.setElement(n({verDispLink:this.options.parentView.renderData.verDispLink,classes:this.options.column.classes||"",value:e,title:t.isFunction(this.options.column.getTitle)?this.options.column.getTitle(this.model,this.options):e})),this},updateValue:function(e,t){this.$(".containerview-versionClick").text(t)}})})),define("common/container/view/BreadCrumbView",["jquery","underscore","backbone","core/util/Globals","core/util/SitesGlobals","core/util/Service","core/util/UrlParams","core/util/Session","common/site/SitesUtils","core/router/DocsController","common/model/PathFolders","common/plugin/jquery.ui.breadcrumb"],(function(e,t,i,docs,sites,n,o,s,a){"use strict";var r=docs.common.Globals,l=i.Model.extend({url:function(){return n.formatServiceUrl("FLD_INFO")+"&item=fFileGUID:"+this.id},initialize:function(e){this.options=e||{}},fetch:function(e){for(var i=e.get("parentID"),o=e.get("name"),s=o,a=t(docs.views.BreadCrumbView.trail).last();a&&a.id!==i;)docs.views.BreadCrumbView.trail.pop(),a=t(docs.views.BreadCrumbView.trail).last();docs.views.BreadCrumbView.trail.push({id:e.id,name:o,displayName:s,parentID:i}),e.isSearchResults&&docs.views.BreadCrumbView.trail.push({displayName:docs.i18n.t("SEARCH_RESULTS_FOLDER_SCOPED_VALUE")});var r=this.options.urlParams.hide_folder;if(e.id!==r)if(docs.views.BreadCrumbView.trail.length>1||void 0===i||"F:USER"===i.slice(0,6)||"file"===e.get("type")&&n.linkId&&"LD"===n.linkId.slice(0,2)){if(r){var l=docs.views.BreadCrumbView.trail.find((function(e){return e.id===r}));if(l)for(;docs.views.BreadCrumbView.trail[0]!==l;)docs.views.BreadCrumbView.trail.shift()}this.set({id:e.id,trail:docs.views.BreadCrumbView.trail})}else this.loadPath(e)},loadPath:function(e){e.isSearchResults&&(e.id=e.get("searchScope"));var t=docs.models.PathFolders.syncFetch(e);t.path.items.length>0&&"F:USER"===t.path.items[0].id.slice(0,6)&&t.path.items.shift(),e.isSearchResults&&t.path.items.push({id:t.id,name:e.get("name"),parentID:e.get("parentID")});var i=this.options.urlParams.hide_folder;if(i){var n=t.path.items.find((function(e){return e.id===i}));if(n)for(;t.path.items[0]!==n;)t.path.items.shift()}docs.views.BreadCrumbView.trail=t.path.items.concat(docs.views.BreadCrumbView.trail),this.set({id:t.id,trail:docs.views.BreadCrumbView.trail})}});return docs.views.BreadCrumbView=i.View.extend({events:{"click a.breadcrumb":"breadCrumbClick"},tagName:"ul",className:"breadcrumb_list",Model:l,initialize:function(e){t.bindAll(this,"render","changeTrail","updateTrailEnd"),this.docsTmpl=docs.template("<li tabindex='-1'><a class='root breadcrumb text_button skipTargetBackup' href='{{baseUrl}}folder/home{{ config }}' data-navigate='folder/home{{ config }}'>{{ i18n.t('GENERAL_HOME') }}</a></li>"),this.sitesTrashTmpl=docs.template("<li tabindex='-1'><a class='root breadcrumb text_button skipTargetBackup' href='{{baseUrl}}sites{{ config }}' data-navigate='sites{{ config }}'>{{ i18n.t('SITES') }}</a></li>"),this.developerCenterTmpl=docs.template("<li tabindex='-1'><a class='root breadcrumb text_button skipTargetBackup' href='{{baseUrl}}developer{{ config }}' data-navigate='developer{{ config }}'>{{ i18n.t('DEVELOPER_CENTER') }}</a></li>"),this.themesTmpl=docs.template("<li tabindex='-1'><a class='root breadcrumb text_button skipTargetBackup' href='{{baseUrl}}themes{{ config }}' data-navigate='themes{{ config }}'>{{ i18n.t('THEMES') }}</a></li>"),this.appsTmpl=docs.template("<li tabindex='-1'><a class='root breadcrumb text_button skipTargetBackup' href='{{baseUrl}}components{{ config }}' data-navigate='components{{ config }}'>{{ i18n.t('APPS') }}</a></li>"),this.templatesTmpl=docs.template("<li tabindex='-1'><a class='root breadcrumb text_button skipTargetBackup' href='{{baseUrl}}templates{{ config }}' data-navigate='templates{{ config }}'>{{ i18n.t('TEMPLATES') }}</a></li>"),this.itemTmpl=this.itemTmpl||docs.template("<li tabindex='-1'><a class='breadcrumb text_button' href='{{baseUrl}}{{ type }}/{{ id }}{{ config }}' data-navigate='{{ type }}/{{ id }}{{ config }}' title='{{{ name }}}'>{{{ name }}}</a></li>"),this.titleTmpl=docs.template("<li tabindex='-1'><span class='breadcrumb_name_label' title='{{{ name }}}'>{{{ name }}}</span></li>"),this.model=new this.Model(e),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"change:trail",this.changeTrail),this.loadTrail(e),this.listenTo(osn.events,"resize",this.resize)},loadTrail:function(e){this.model.fetch(e.folderItem)},render:function(){var i;this.$el.hide();var n,l=this.model.get("trail");if(this.$el.empty(),l.length<=1&&(r.isPublicLink&&s.isAnonymous()||r.isAppLink||r.isGuestWithHybLink)||!r.embed&&r.isStarterEdition&&(this.model.get("folderItem").isFile||this.model.get("folderItem").isFolder))return this;var c,h=o.getConfigUrlPart(this.options.urlParams);h+=o.getViewConfigUrlPart(this.options.urlParams);var d=1,u=window.location.origin+r.routerRoot;r.isPublicLink||r.isAppLink||r.isGuestWithHybLink?(s.isAnonymous()||r.isAppLink||r.isGuestWithHybLink?c=0:(n=a.isTheme(this.options.folderItem)?this.themesTmpl({i18n:docs.i18n,config:h,baseUrl:u}):a.isApp(this.options.folderItem)?this.appsTmpl({i18n:docs.i18n,config:h,baseUrl:u}):a.isTemplate(this.options.folderItem)?this.templatesTmpl({i18n:docs.i18n,config:h,baseUrl:u}):this.docsTmpl({i18n:docs.i18n,config:h,baseUrl:u}),this.$el.append(n),(i=e('<span class="breadcrumb-sep">')).text(" ... "),this.$el.append(i),c=1),d=0):(c=0,t.isFunction(this.getHomeHtml)?n=this.getHomeHtml(h):a.isSites(this.options.folderItem)?(this.options.urlParams.hide_developer||(n=this.developerCenterTmpl({i18n:docs.i18n,config:h,contextRoot:r.routerRoot,baseUrl:u}),this.$el.append(n),i=e('<span class="breadcrumb-sep" aria-hidden="true"> </span>'),this.$el.find("li:first-child").append(i)),this.options.folderItem.isTrash?n=this.sitesTrashTmpl({i18n:docs.i18n,config:h,baseUrl:u}):a.isApp(this.options.folderItem)?n=this.appsTmpl({i18n:docs.i18n,config:h,baseUrl:u}):a.isTemplate(this.options.folderItem)?this.options.urlParams.hide_templates||(n=this.templatesTmpl({i18n:docs.i18n,config:h,baseUrl:u})):n=this.themesTmpl({i18n:docs.i18n,config:h,baseUrl:u})):n=a.isDeveloperCenterPage(this.options.folderItem)||this.options.folderItem.isSitesTrash?this.developerCenterTmpl({i18n:docs.i18n,config:h,baseUrl:u}):this.docsTmpl({i18n:docs.i18n,config:h,baseUrl:u}),this.$el.append(n));var p=l.slice(0,l.length-1);t(p).each((function(e){var t=e.displayName?e.displayName:e.name;t!==docs.i18n.t("SEARCH_FOLDER_SCOPED_VALUE")&&(n=this.itemTmpl({config:h,type:e.type||"folder",id:e.id,name:t,baseUrl:u}),this.$el.append(n))}),this);var m=t(l).last();if(m){var _=m.displayName?m.displayName:m.name;n=this.titleTmpl({id:m.id,name:_,baseUrl:u}),this.$el.append(n)}var g=this;return t.defer((function(e){g.$el.breadcrumb({label:docs.i18n.t("YOU_ARE_HERE"),leftFixed:d,rightFixed:2,useMenuButtonBorder:!1,crumbCharLength:6,separator:"&gt;",menuSeparator:"<img src='"+r.staticRoot+"images/overflow_icon.png'alt='' role='presentation'/>",menuAriaContext:docs.i18n.t("BREADCRUMB_MENU_LABEL"),sepStartPosition:c,showBack:e.breadcrumb&&e.breadcrumb.back,showList:!(e.breadcrumb&&e.breadcrumb.hide)})}),this.options),this},changeTrail:function(){docs.events.trigger("breadcrumb:changeTrail",this.model.get("trail"))},resize:function(){this.$el.hasClass("ui-breadcrumb")&&this.$el.breadcrumb("refreshview")},updateTrailEnd:function(e){if(e){this.$el.find(".breadcrumb_name_label").attr({title:e}).html(e),this.resize();var i=this.model.get("trail"),n=t(i).last();n&&(n.displayName=e,this.model.set({trail:i},{silent:!0}),this.changeTrail())}},breadCrumbClick:function(t){var i=e(t.target).data("navigate")?e(t.target).data("navigate"):e(t.target).attr("href");return docs.router.navigate(i,{trigger:!0}),!1},remove:function(){i.View.prototype.remove.apply(this,arguments)}},{trail:[]}),docs.views.BreadCrumbView})),define("docs/container/template/ContainerThumbCell.template",["underscore"],(function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="thumbContainer">  <div class="thumbWrapper containerview-thumbClick ',isImage||(__p+=" no-image"),__p+='">  ',model.isFile||model.isCollection?(__p+='    <div class="containerview-icon" title="'+(null==(__t=data.thumbnailTitle)?"":_.escape(__t))+'">    ',isImage?__p+='      <img src="'+(null==(__t=data.thumbnailSrc)?"":_.escape(__t))+'" alt="" />    ':__p+='      <span class="extension">'+(null==(__t=extension)?"":_.escape(__t))+"</span>    ",__p+="    </div>  "):isFolder?__p+='    <div class="containerview-icon"><span class="containerview-folderthumb" title="'+(null==(__t=data.thumbnailTitle)?"":_.escape(__t))+'"></span>      <div class="containerview-textarea1">        <div class="containerview-name">          <a href="#" title="'+(null==(__t=data.nameTitle)?"":__t)+'" aria-label="'+(null==(__t=data.nameTitle)?"":__t)+'" class="folderLink text_button containerview-openClick">'+(null==(__t=model.get("name"))?"":__t)+'</a>        </div>        <img class="containerview-folderSticker" alt="" title="'+(null==(__t=data.thumbnailTitle)?"":_.escape(__t))+'"/>      </div>    </div>  ':__p+='    <div class="containerview-iconx containerview-icon-file-bkg">      <img src="'+(null==(__t=data.largeThumbnailSrc)?"":_.escape(__t))+'" alt="" />    </div>  ',__p+='  </div>  <div class="containerview-block containerview-iconarea">    <div class="containerview-check custom-checkbox"><input type="checkbox" title="'+(null==(__t=data.chkTitle)?"":__t)+'" /></div>  </div></div>';return __p}})),define("docs/container/template/ContainerThumbTile.template",["underscore"],(function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="thumbContainer">  <div class="thumbWrapper containerview-thumbClick ',isImage||(__p+=" no-image"),__p+='">    <div class="containerview-icon">      ',isImage?__p+='        <img src="'+(null==(__t=data.thumbnailSrc)?"":_.escape(__t))+'" alt="" />      ':__p+='        <span class="extension">'+(null==(__t=extension)?"":_.escape(__t))+"</span>      ",__p+="    </div>  </div></div>";return __p}})),define("docs/container/template/ContainerThumbCard.template",["underscore"],(function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="thumbContainer">  <div class="thumbWrapper containerview-thumbClick ',isImage||(__p+=" no-image"),__p+='">    ',data.appType?__p+='      <div class="containerview-iconx containerview-icon-file-bkg">        <img src="'+(null==(__t=data.largeThumbnailSrc)?"":_.escape(__t))+'" alt="" />      </div>    ':(__p+='      <div class="containerview-icon ',isSVG&&(__p+="svg-icon-image"),__p+='">        ',isImage?(__p+='          <img src="'+(null==(__t=data.thumbnailSrc)?"":_.escape(__t))+'" alt="'+(null==(__t=data.nameTitle)?"":_.escape(__t))+'" class="',isOfficeIcon&&(__p+="office-filetype-icon-image"),__p+='"/>        '):(__p+="          ",iconUrl?__p+='            <img class="filetype-icon-image" src="'+(null==(__t=iconUrl)?"":_.escape(__t))+'" alt="" />            <span class="extension">'+(null==(__t=extension)?"":_.escape(__t))+"</span>          ":__p+='          <span class="extension">'+(null==(__t=extension)?"":_.escape(__t))+"</span>          ",__p+="        "),__p+="      </div>    "),__p+="  </div></div>";return __p}})),define("docs/container/template/ContainerThumbRowCompact.template",["underscore"],(function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<span class="thumbWrapper containerview-thumbClick ',isImage||(__p+=" no-image"),__p+='">',model.isFile||"File"===model.get("ObjectType")||model.isOldCollection?(__p+="  ",isImage?(__p+='  <span class="containerview-icon',isSVG&&(__p+=" svg-icon-image"),__p+='" title="'+(null==(__t=data.thumbnailTitle)?"":_.escape(__t))+'"><img src="'+(null==(__t=data.thumbnailSrc)?"":_.escape(__t))+'" alt="'+(null==(__t=data.nameTitle)?"":__t)+'" class="',isOfficeIcon&&(__p+="office-filetype-icon-image"),__p+='"/></span>  '):(__p+='  <span class="thumbOverlay" aria-label="'+(null==(__t=data.nameTitle)?"":_.escape(__t))+'" title="'+(null==(__t=data.thumbnailTitle)?"":_.escape(__t))+'">    <span class="thumbBorder"></span>    ',thumbDetails.thumbUxIcon?__p+='      <span class="filetype-icon-image filetype-oj-ux-icon oj-ux-icon '+(null==(__t=thumbDetails.thumbUxIcon)?"":_.escape(__t))+'"></span>    ':__p+='      <img class="filetype-icon-image" src="'+(null==(__t=iconUrl)?"":_.escape(__t))+'" alt="" />    ',__p+='    <span class="thumbType '+(null==(__t=overlayClass)?"":_.escape(__t))+'" aria-label="'+(null==(__t=data.nameTitle)?"":__t)+'">'+(null==(__t=overlayText)?"":_.escape(__t))+"</span>  </span>  "),__p+=""):isFolder||"Folder"===model.get("ObjectType")?(__p+='  <span class="containerview-icon"><span class="containerview-folderthumb" title="'+(null==(__t=data.thumbnailTitle)?"":_.escape(__t))+'"></span>  ',model.isSharedToYou()||model.isSharedByYou()?__p+='    <span  class="containerview-folderSticker oj-ux-icon oj-ux-ico-layers" alt="'+(null==(__t=data.nameTitle)?"":__t)+'" title="'+(null==(__t=data.thumbnailTitle)?"":_.escape(__t))+'"></span>  ':__p+='    <img class="containerview-folderSticker" alt="'+(null==(__t=data.nameTitle)?"":__t)+'" title="'+(null==(__t=data.thumbnailTitle)?"":_.escape(__t))+'" />  ',__p+="  </span>"):model.uxIcon?__p+='  <span  class="containerview-icon containerview-iconmap iconmap-ui-icon oj-ux-icon '+(null==(__t=model.uxIcon)?"":_.escape(__t))+'"></span>':model.uxIconClass?__p+='  <span  class="containerview-icon containerview-iconmap ux-icon-map oj-ux-icon '+(null==(__t=model.uxIconClass)?"":_.escape(__t))+'"></span>':data.iconMap?__p+='  <span  class="containerview-icon containerview-iconmap"><img src="'+(null==(__t=data.thumbnailSrc)?"":_.escape(__t))+'" alt="'+(null==(__t=data.nameTitle)?"":__t)+'" /></span>':(__p+='  <span class="containerview-icon',isImage&&isSVG&&(__p+=" svg-icon-image"),__p+='">  ',isImage?(__p+="    ",isOfficeIcon&&model.get("thumbDetails")?__p+='      <span class="filetype-icon-image filetype-oj-ux-icon oj-ux-icon '+(null==(__t=model.get("thumbDetails").thumbUxIcon)?"":_.escape(__t))+'"></span>    ':__p+='      <img src="'+(null==(__t=data.thumbnailSrc)?"":_.escape(__t))+'" alt="'+(null==(__t=data.nameTitle)?"":__t)+'" />    ',__p+="  "):thumbDetails.thumbUxIcon?__p+='    <span class="filetype-icon-image filetype-oj-ux-icon oj-ux-icon '+(null==(__t=thumbDetails.thumbUxIcon)?"":_.escape(__t))+'"></span>  ':__p+='    <img src="'+(null==(__t=data.thumbnailSrc)?"":_.escape(__t))+'" alt="'+(null==(__t=data.nameTitle)?"":__t)+'" />  ',__p+="  </span>"),__p+="</span>";return __p}})),define("docs/container/template/ContainerThumbRow.template",["underscore"],(function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<span class="thumbWrapper containerview-thumbClick ',isImage||(__p+=" no-image"),__p+='">',model.isFile||model.isCollection?(__p+="  ",isImage?(__p+='  <span class="containerview-icon ',isSVG&&(__p+=" svg-icon-image"),__p+='"><img src="'+(null==(__t=data.thumbnailSrc)?"":_.escape(__t))+'" alt="'+(null==(__t=data.nameTitle)?"":__t)+'" class="',isOfficeIcon&&(__p+="office-filetype-icon-image"),__p+='"/></span>  '):__p+='  <span class="containerview-icon"><img class="filetype-icon-image" src="'+(null==(__t=iconUrl)?"":_.escape(__t))+'" alt="" /><span class="extension">'+(null==(__t=extension)?"":_.escape(__t))+"</span></span>  ",__p+='  <span class="thumbOverlay" aria-label="'+(null==(__t=data.nameTitle)?"":__t)+'" title="'+(null==(__t=data.thumbnailTitle)?"":_.escape(__t))+'">    <span class="thumbBorder"></span>    <span class="thumbType '+(null==(__t=overlayClass)?"":_.escape(__t))+'">'+(null==(__t=overlayText)?"":_.escape(__t))+"</span>  </span>"):isFolder?(__p+='  <span class="containerview-icon"><span class="containerview-folderthumb" title="'+(null==(__t=data.thumbnailTitle)?"":_.escape(__t))+'"></span>  ',model.isSharedToYou()||model.isSharedByYou()?__p+='    <span  class="containerview-folderSticker oj-ux-icon oj-ux-ico-layers" alt="'+(null==(__t=data.nameTitle)?"":__t)+'" title="'+(null==(__t=data.thumbnailTitle)?"":_.escape(__t))+'"></span>  ':__p+='    <img class="containerview-folderSticker" alt="'+(null==(__t=data.nameTitle)?"":__t)+'" title="'+(null==(__t=data.thumbnailTitle)?"":_.escape(__t))+'" />  ',__p+="  </span>"):(__p+='  <span class="containerview-icon">  ',model.uxIconClass?__p+='    <span  class="iconmap-ui-icon oj-ux-icon '+(null==(__t=model.uxIconClass)?"":_.escape(__t))+'"></span>  ':__p+='    <img src="'+(null==(__t=data.thumbnailSrc)?"":_.escape(__t))+'" alt="'+(null==(__t=data.nameTitle)?"":__t)+'" />  ',__p+="  </span>"),__p+="</span>";return __p}})),define("common/plugin/jquery.fittext",["jquery"],(function(e){"use strict";e.fn.fittext=function(t){var i=e(this),n=i.parent().width()-10;i.css("fontSize","");var o=parseInt(i.css("fontSize"),10)*(n/i.width());o<t&&i.css("fontSize",o)}})),define("common/plugin/jquery.naturalsize",["jquery"],(function(e){"use strict";e.naturalSize=function(t){var i=e(t);if(void 0===i.prop("naturalWidth")){var n=e("<img/>").attr("src",i.attr("src"));i.prop("naturalWidth",n[0].width),i.prop("naturalHeight",n[0].height)}return{width:i.prop("naturalWidth"),height:i.prop("naturalHeight")}}})),define("common/plugin/jquery.ui.centerthumb",["jquery","underscore","core/util/Globals","common/plugin/jquery.naturalsize"],(function(e,t){"use strict";var i=docs.common.Globals;e.widget("ui.centerthumb",{options:{errorImg:i.staticRoot+"images/spacer.png",fitGrid:void 0},_create:function(){this._on(this.element,{load:this.imageLoaded,error:this.imageError}),e("<img/>").attr("src",this.options.errorImg).remove()},_destroy:function(){e(this.element).css({position:"",top:"",left:"",width:"",height:"","margin-left":"","margin-top":""}),e(this.element).removeData("ct-loaded"),this._super()},imageLoaded:function(){var t=e(this.element);if(this.revokeObjUrl)try{URL.revokeObjectURL(t[0].src)}catch(e){console.log(e)}finally{delete this.revokeObjUrl}if(this.options.noCenter||this._centerImage(),this.options.triggerLoaded&&docs.events.trigger(this.options.triggerLoaded,this.options.triggerId),t.data({"ct-loaded":!0}),!t.data("naturalSize")){var i=e.naturalSize(t);if(this.options.resizeImage&&(i.width>300||i.height>300)){var n=document.createElement("canvas");if(n.getContext){var o=n.getContext("2d");const e=36;let s=i.width,a=i.height;s>a?s>e&&(a*=e/s,s=e):a>e&&(s*=e/a,a=e),s=Math.floor(s),a=Math.floor(a),n.width=s,n.height=a,o.drawImage(t[0],0,0,s,a),this.changeSrc(n.toDataURL("image/jpeg")),o.clearRect(0,0,s,a)}else t.data("naturalSize",i)}}},_centerImage:function(){var t,i,n,o,s=e(this.element),a=e.naturalSize(s),r=a.width,l=a.height;s.data("naturalSize",a);var c=s.parent(),h=c.width(),d=c.height(),u=h/d;if(this.options.fitGrid||r<=l*u){var p=d/l;if(h/r*l<d)s.css({position:"",width:"100%",height:"auto","margin-left":0,"margin-top":"auto","margin-bottom":"auto"});else t=(h-p*r)/2+"px",s.css({position:"",width:"auto",height:"100%","margin-left":t,"margin-right":"auto","margin-top":0})}else{r>l?(n="auto",o="100%",t="-50%",i="-"+50*l/r+"%"):(n="100%",o="auto",i="-50%",t="-"+50*r/l+"%");var m=this.options.isInTrash&&this.options.isSites?"":"50%";s.css({position:"absolute",top:"50%",left:m,width:o,height:n,"margin-left":t,"margin-top":i})}},imageError:function(){var i=e(this.element);if(!i.data("ct-loaded")){if(e.naturalSize(i).width>0)return;if(this._off(this.element,"error"),this.revokeObjUrl)try{URL.revokeObjectURL(i[0].src)}finally{delete this.revokeObjUrl}i.attr("src",this.options.errorImg),t.isString(this.options.errorImg)&&-1!==this.options.errorImg.indexOf("_redwood.svg")&&i.addClass("filetype-icon-image")}},changeSrc:function(t){this._off(this.element,"load"),this._off(this.element,"error"),this._on(this.element,{load:this.imageLoaded,error:this.imageError}),e(this.element).removeData("ct-loaded naturalSize").attr("src",t)},forceChangeSrc:function(t,n){if(!(n=n||{}).srcIsData){var o=e(this.element).attr("src");-1===t.indexOf(i.staticRoot)&&(t===o||o.indexOf("&ts=")>-1)&&(t=t.replace(/&ts=\d+/g,"")+"&ts="+(new Date).getTime())}n.revokeObjUrl&&(this.revokeObjUrl=n.revokeObjUrl),this.changeSrc(t)},recenter:function(){this._centerImage()}})})),define("common/plugin/jquery.ui.stretchthumb",["jquery","underscore","core/util/Globals"],(function(e,t){"use strict";var i=docs.common.Globals;e.widget("ui.stretchthumb",{options:{errorImg:i.staticRoot+"images/spacer.png",aspect:void 0,alignTop:void 0},_create:function(){this._on(this.element,{load:this.imageLoaded,error:this.imageError}),e("<img/>").attr("src",this.options.errorImg).remove()},_destroy:function(){e(this.element).css({position:"",top:"",right:"",bottom:"",left:"","margin-right":"",transform:"","-webkit-transform":"","-ms-transform":"",width:"",height:""}),e(this.element).removeData("ct-loaded"),this._super()},imageLoaded:function(){this._stretchImage(),e(this.element).data({"ct-loaded":!0})},_stretchImage:function(){var t=e(this.element),i=e.naturalSize(t),n=i.width/i.height,o=t.parent(),s=o.width(),a=this.options.aspect?s/this.options.aspect:o.height(),r=this.options.aspect?this.options.aspect:s/a,l="",c="",h="",d="",u="",p="",m="",_="";t.data("naturalSize",i),Math.abs(r-n)<.001?(l="0",c="0",h="0",d="0",m="100%"):this.options.alignTop?(l="0",d="0",m="100%"):n>1?(l="50%",c="0",d="0",p="translate(0, -50%)",m="100%"):(l="0",d="50%",u="-50%",p="translate(-50%, 0%)",_="100%"),t.css({position:"absolute",top:l,right:c,bottom:h,left:d,"margin-right":u,transform:p,"-webkit-transform":p,"-ms-transform":p,width:m,height:_})},imageError:function(){var t=e(this.element);if(!t.data("ct-loaded")){if(e.naturalSize(t).width>0)return;this._off(this.element,"error"),t.attr("src",this.options.errorImg)}},changeSrc:function(t){this._off(this.element,"load"),this._off(this.element,"error"),this._on(this.element,{load:this.imageLoaded,error:this.imageError}),e(this.element).removeData("ct-loaded").attr("src",t)},forceChangeSrc:function(t){var n=e(this.element).attr("src");-1===t.indexOf(i.staticRoot)&&(t===n||n.indexOf("&ts=")>-1)&&(t=t.replace(/&ts=\d+/g,"")+"&ts="+(new Date).getTime()),this.changeSrc(t)},restretch:function(){this._stretchImage()}})})),define("common/plugin/jquery.ui.clipthumb",["jquery","underscore","core/util/Globals","common/plugin/jquery.naturalsize"],(function(e,t){"use strict";var i=docs.common.Globals;e.widget("ui.clipthumb",{options:{errorImg:i.staticRoot+"images/spacer.png",fitGrid:void 0},_create:function(){this._on(this.element,{load:this.imageLoaded,error:this.imageError}),e("<img/>").attr("src",this.options.errorImg).remove()},_destroy:function(){e(this.element).css({position:"",top:"",left:"",width:"",height:"","margin-left":"","margin-top":""}),e(this.element).removeData("ct-loaded"),this._super()},imageLoaded:function(t){var i={width:t.currentTarget.naturalWidth,height:t.currentTarget.naturalHeight};this.options.noCenter||this._clipAndCenterImage(i),this.options.triggerLoaded&&docs.events.trigger(this.options.triggerLoaded,this.options.triggerId);var n=e(this.element);n.data({"ct-loaded":!0}),n.data("naturalSize")||n.data("naturalSize",i)},_clipAndCenterImage:function(t){var i=e(this.element),n=i.parent();n.removeClass("clipcenter"),i.data("naturalSize",t);var o=t.width/t.height,s=n.width()/n.height(),a={width:"auto",height:"auto"};o>s||o<1&&o>1/s?a.height="100%":a.width="100%",i.css(a),n.addClass("clipcenter")},imageError:function(){var i=e(this.element);if(!i.data("ct-loaded")){if(e.naturalSize(i).width>0)return;this._off(this.element,"error"),i.attr("src",this.options.errorImg),t.isString(this.options.errorImg)&&-1!==this.options.errorImg.indexOf("_redwood.svg")&&i.addClass("filetype-icon-image")}},changeSrc:function(t){this._off(this.element,"load"),this._off(this.element,"error"),this._on(this.element,{load:this.imageLoaded,error:this.imageError}),e(this.element).removeData("ct-loaded").attr("src",t)},forceChangeSrc:function(t,n){if(!(n=n||{}).srcIsData){var o=e(this.element).attr("src");-1===t.indexOf(i.staticRoot)&&(t===o||o.indexOf("&ts=")>-1)&&(t=t.replace(/&ts=\d+/g,"")+"&ts="+(new Date).getTime())}this.changeSrc(t)},readjust:function(){var t=e(this.element),i={width:t[0].naturalWidth,height:t[0].naturalHeight};this._clipAndCenterImage(i)}})})),define("common/container/view/ContainerThumbView",["jquery","underscore","backbone","core/util/Globals","core/util/SitesGlobals","core/util/Browser","core/util/Thumbs","common/util/O365Edit","docs/container/template/ContainerThumbCell.template","docs/container/template/ContainerThumbTile.template","docs/container/template/ContainerThumbCard.template","docs/container/template/ContainerThumbRowCompact.template","docs/container/template/ContainerThumbRow.template","common/site/SitesUtils","common/plugin/jquery.fittext","common/plugin/jquery.ui.centerthumb","common/plugin/jquery.ui.stretchthumb","common/plugin/jquery.ui.clipthumb"],(function(e,t,i,docs,sites,n,o,s,a,r,l,c,h,d){"use strict";var u=docs.common.Globals,p=u.staticRoot+"images/shared_folder_status.svg";"redwood"!==(u.UITheme||"redwood")&&(p=docs.common.Globals.staticRoot+"images/shared_folder_status_white.svg");var m={none:{imgClass:"",imgSrc:"",display:!1},sharedToMe:{imgClass:"folderview-sharedto",imgSrc:p,display:!0},sharedByMe:{imgClass:"folderview-sharedby",imgSrc:p,display:!0},damFolder:{imgClass:"damFolder",imgSrc:docs.common.Globals.staticRoot+"images/Digital_Asset_Overlay_wht_16.svg"}};return docs.views.ContainerThumbView=i.View.extend({initialize:function(e){return e.gridView?(this.template=a,this.gridView=!0):e.tileView?(this.template=r,this.tileView=!0):e.cardView?(this.template=l,this.cardView=!0):e.contextActions&&"layout_compact"===e.contextActions.containerLayout()||e.layout&&"layout_compact"===e.layout?(this.template=c,this.compactView=!0):e.tableView?(this.template=c,this.compactView=!0,this.tableView=!0):(this.template=h,this.listView=!0),this.largeThumbs=e.largeThumbs,this.realThumbs=e.realThumbs,this.deferThumb=e.deferThumb,this.rowThumbSelector=t.isUndefined(e.rowThumbSelector)?(this.model.isFile,".containerview-icon img"):e.rowThumbSelector,this.gridThumbSelector=t.isUndefined(e.gridThumbSelector)?this.model.isFolder?".thumbOverlayBar .containerview-icon img":".thumbWrapper img":e.gridThumbSelector,this.largeGridThumbSelector=t.isUndefined(e.largeGridThumbSelector)?".thumbWrapper img":e.largeGridThumbSelector,this.renderData=e.renderData,this.removed=!1,this.listenTo(this.model,"change:flags",this.flagsChange),this.listenTo(this.model,"change:thumbnail",this.thumbChanged),this.render()},render:function(){var e=this.getThumbDetails();return this.setElement(this.template({overlayClass:e.overlayClass,overlayText:e.overlayText,isFolder:this._isRealFolder(),isImage:!this.model.isFile&&"file"!==this.model.get("type")||this.hasThumbnail(),iconUrl:e.thumbSVG||e.thumb40?u.staticRoot+"images/thumbs/"+(e.thumbSVG?e.thumbSVG:e.thumb40):"",isOfficeIcon:!!e.isOfficeIcon,extension:this.model.isFile?this.model.get("extension").toLowerCase():"",isSVG:e.isSVG,i18n:docs.i18n,model:this.model,data:this.options.renderData,thumbDetails:e})),this.hasThumbnail()&&(this.gridView?this.options.noCenterThumb?this.$(this.rowThumbSelector).centerthumb({errorImg:this.renderData.errorImg,noCenter:this.options.noCenterThumb}):(this.$(this.gridThumbSelector).stretchthumb(),(this.options.fullCells||this.model.get("searchResult")||this.model.has("flags")&&this.model.get("flags").isInTrash)&&this.$(this.largeGridThumbSelector).stretchthumb({errorImg:this.renderData.errorImg,alignTop:(!this.model.has("flags")||!this.model.get("flags").isInTrash)&&e.gridAlignTop,aspect:4/3}),this.listenTo(docs.events,"resize:finished",this._resizeFinished,this),this.listenTo(docs.events,"action:toggleSidebar",this._resizeFinished,this),this.listenTo(osn.events,"navbar:toggled",this._resizeFinished,this)):this.tileView?this.$(this.rowThumbSelector).centerthumb({errorImg:this.renderData.errorImg,noCenter:!0,triggerLoaded:"TileView:ImageLoaded",triggerId:this.options.model?this.options.model.get("id"):""}):this.cardView?e.noClip?this.$(this.rowThumbSelector).centerthumb({errorImg:this.renderData.errorImg,noCenter:this.options.noCenterThumb,triggerLoaded:"CardView:ImageLoaded",triggerId:this.options.model?this.options.model.get("id"):""}):this.$(this.rowThumbSelector).clipthumb({noCenter:!!this.options.noCenterThumb,errorImg:this.renderData.errorImg,triggerLoaded:"CardView:ImageLoaded",triggerId:this.options.model?this.options.model.get("id"):""}):this.$(this.rowThumbSelector).centerthumb({errorImg:this.renderData.errorImg,noCenter:this.options.noCenterThumb,isInTrash:this.model.get("flags")&&this.model.get("flags").isInTrash,isSites:d.isSites(this.model),resizeImage:this.options.resizeImage})),this},hasThumbnail:function(){if(this._isRealFolder())return!1;if(this.model.get("flags")&&this.model.get("flags").isInTrash)return!t.isUndefined(this.model.get("scsFlags"))||this.model.isSite;var e=this.getThumbDetails();return e.isImage&&(checkFeatureFlag("svg.thumbnail")||".svg"!==e.extension)||this.gridView&&e.hasRealThumbnail||this.listView&&e.hasRealThumbnail||this.tileView&&e.hasRealThumbnail||this.cardView&&e.hasRealThumbnail},flagsChange:function(){if(this.thumbChanged(),this.model.isFile&&this.model.isVirusScanInfected())e(".thumbOverlay",this.el).hide();else if(this.model.isFile){var t=this.getThumbDetails(),i=e(".thumbType",this.el);i.removeClass().addClass("thumbType").addClass(t.overlayClass).text(t.overlayText),this.gridView&&i.fittext(16)}},updateErrorImage:function(){var e=this.renderData;e&&e.errorImg&&this.$(this.rowThumbSelector).attr("src",e.errorImg).addClass("filetype-icon-image")},thumbChanged:function(e){e=e||{};var i=this.model.isFile&&this.model.isVirusScanInfected(),n=this.getThumbDetails();this.hasThumbnail()?this.gridView?this.options.noCenterThumb?Promise.resolve(this.model.getThumbnailUrl(this.largeThumbs,this.realThumbs,this.gridView||this.tileView||this.cardView,i)).then(t.bind((function(e){this.removed||(this.$(this.rowThumbSelector).centerthumb("forceChangeSrc",e),this.applyFolderSticker())}),this)):this.options.fullCells||this.model.get("searchResult")||this.model.has("flags")&&this.model.get("flags").isInTrash?Promise.resolve(this.model.getThumbnailUrl(!0,this.realThumbs,this.gridView,i)).then(t.bind((function(e){this.removed||(this.$(this.largeGridThumbSelector).stretchthumb("forceChangeSrc",e),this.applyFolderSticker())}),this)):Promise.resolve(this.model.getThumbnailUrl(this.largeThumbs,this.realThumbs,this.gridView||this.tileView||this.cardView,i)).then(t.bind((function(e){this.removed||(this.$(this.gridThumbSelector).stretchthumb("forceChangeSrc",e),this.applyFolderSticker())}),this)):this.tileView?Promise.resolve(this.model.getThumbnailUrl(!0,!0,!0,i)).then(t.bind((function(e){this.removed||(this.$(this.rowThumbSelector).centerthumb("forceChangeSrc",e),this.applyFolderSticker())}),this)):this.cardView?Promise.resolve(this.model.getThumbnailUrl(!0,!0,!0,i)).then(t.bind((function(e){if(!this.removed){if(-1!==e.indexOf("_redwood.svg")||-1!==e.indexOf("AntiVirus-card."))this.$(this.gridThumbSelector).addClass("filetype-icon-image");n.noClip?this.$(this.rowThumbSelector).centerthumb("forceChangeSrc",e):this.$(this.rowThumbSelector).clipthumb("forceChangeSrc",e),this.applyFolderSticker()}}),this)):"function"==typeof this.model.getUXIconClass?Promise.resolve(this.model.getUXIconClass()).then(t.bind((function(e){this.removed||this.$(".containerview-icon.ux-icon-map").removeClass().addClass("containerview-icon containerview-iconmap ux-icon-map oj-ux-icon "+e)}),this)):Promise.resolve(this.model.getThumbnailUrl(this.largeThumbs,this.realThumbs,this.gridView||this.tileView||this.cardView,i||this.deferThumb&&!e.renderDeferredThumb)).then(t.bind((function(e){if(!this.removed){let i,n=e;t.isObject(e)&&(n=e.url,i={revokeObjUrl:e.revokeObjUrl}),this.$(this.rowThumbSelector).centerthumb("forceChangeSrc",n,i),this.applyFolderSticker()}}),this)):this.applyFolderSticker()},thumbChangedHaveSrcData:function(e){var i=e,n={srcIsData:!0};if(this.hasThumbnail()&&this.cardView){var o=this.model.isFile&&this.model.isVirusScanInfected();o?Promise.resolve(this.model.getThumbnailUrl(this.largeThumbs,this.realThumbs,this.gridView||this.tileView||this.cardView,o)).then(t.bind((function(e){this.removed||(n.srcIsData=!1,this.$(this.rowThumbSelector).clipthumb("forceChangeSrc",e,n),this.applyFolderSticker())}),this)):(this.$(this.rowThumbSelector).clipthumb("forceChangeSrc",i,n),this.applyFolderSticker())}else this.hasThumbnail()&&this.tableView?(this.$(this.rowThumbSelector).centerthumb("forceChangeSrc",i,n),this.applyFolderSticker()):this.applyFolderSticker()},restretch:function(){if(this.gridView){var e=this.$(this.gridThumbSelector);e.data("stretchthumb")&&(n.isSafari?t.defer((function(){e.stretchthumb("restretch")})):e.stretchthumb("restretch")),(this.options.fullCells||this.model.get("searchResult")||this.model.has("flags")&&this.model.get("flags").isInTrash)&&(e=this.$(this.largeGridThumbSelector)).data("stretchthumb")&&(n.isSafari?t.defer((function(){e.stretchthumb("restretch")})):e.stretchthumb("restretch"))}},readjust:function(){if(this.cardView){var e=this.$(this.rowThumbSelector);e.data("uiClipthumb")&&t.defer((function(){e.clipthumb("readjust")}))}},getThumbDetails:function(){var e;return this.model.isFile||"file"===this.model.get("type")?(e=o.getThumbDetails(this.model.get("extension"),{thumbDetailsCB:s.getThumbDetails,model:this.model}),this.compactView&&e.overlayText&&(e.overlayText=e.overlayText.toLowerCase())):e={isImage:!0},e},applyFolderSticker:function(){if(this._isRealFolder()){var e,t=this.$(".containerview-icon img");e=this.model.id.indexOf("F:DIGITALASSETS:")>-1?m.damFolder:this.model.isSharedToYou()?m.sharedToMe:this.model.isSharedByYou()?m.sharedByMe:m.none,this.options.tableView&&e.imgSrc&&(e.imgSrc=p),t.attr({class:"containerview-folderSticker "+e.imgClass,src:e.imgSrc})}},_isRealFolder:function(){return!!this.model.isFolder&&(!this.model.get("flags").isInTrash||(!d.isSites(this.model)||t.isUndefined(this.model.get("scsFlags"))))},remove:function(){this.removed=!0,this.stopListening()}}),docs.views.ContainerThumbView})),define("core/plugin/jquery.ui.checkbox",["jquery","css!geminiCss/gemini-form-controls"],(function(e){"use strict";e.widget("ui.checkbox",{_create:function(){this.element.wrap("<span class='ui-checkbox ui-widget'></span>"),this.element.after("<span class='ui-checkbox-icon'></span>")},setValue:function(e){this.element.prop("checked",e)},getValue:function(){return this.element.is(":checked")},show:function(){this.element.parent().show()},hide:function(){this.element.parent().hide()},indeterminate:function(e){this.element.toggleClass("ui-checkbox-indeterminate",e)},isIndeterminate:function(){return this.element.hasClass("ui-checkbox-indeterminate")}})})),define("common/container/view/ContainerItemView",["jquery","underscore","backbone","core/util/Globals","core/util/Browser","core/util/Utils","core/util/Session","common/container/view/ContainerThumbView","core/plugin/jquery.naturaldate","core/plugin/jquery.ui.checkbox"],(function(e,t,i,docs,n,o,s){"use strict";var a=docs.common.Globals;return docs.views.ContainerItemView=i.View.extend({mainFocusItem:".containerview-item",activeFocusItems:".containerview-check input, button, a, .containerview-openClick, .containerview-versionClick, [role='button'], .focus-when-active",initialize:function(e){this.options=e||{},this.contextActions=e.contextActions,this.template=e.template,this.gridView=e.gridView,this.compactView=e.compactView,this.tileView=e.tileView,this.cardView=e.cardView,this.tableView=e.tableView,this.performanceView=e.performanceView,this.supportsLazyLoading=e.supportsLazyLoading,this.showModifiedBy=!!this.options.showModifiedBy,e.renderdataAlreadyComputed||(this.renderData=this._computeRenderData()),this.listenTo(this.model,"change:description",this.descChange),this.listenTo(this.model,"destroy",this.onRemove),this.listenTo(this.model,"offPage",this.onRemove),this.listenTo(this.model,"change:modifiedAt",this.modifiedAtChange),this.listenTo(this.model,"change:flags",this.flagsChanged),this.supportsLazyLoading&&this.listenToOnce(docs.events,"containerViewDetail:itemVisible:"+this.model.get("id"),this.itemVisible),this.keydownEventId="keydown."+this.model.get("id")},parentClosing:function(){this.close()},parentClearing:function(){this.close()},render:function(){var i=this.template({i18n:docs.i18n,row:this.model,data:this.renderData});this.options.willAnimate?this.setElement(e(i).hide().on("animationFinished",e.proxy(this.postAnimate,this))):this.setElement(e(i)),this.options.cssProps&&this.$el.css(this.options.cssProps);var o=this.gridView?".thumbSpacer":this.tileView?".filetile-thumbnail":this.cardView||this.performanceView?".containerview-card-thumbnail":".containerview-thumbnail";if(this.$(o).length>0)if(this.thumbView=new docs.views.ContainerThumbView(t.extend({},this.options,{renderData:this.renderData})),this.$(o).html(this.thumbView.el),this.gridView||n.isSafari){var s=this;t.defer((function(){s.thumbView&&!s.delayThumbUpdate&&s.thumbView.flagsChange()}))}else this.delayThumbUpdate||this.thumbView.flagsChange();this.updateAriaLabel(),this.model.get("flags")&&this.model.get("flags").isInTrash&&this.$el.addClass("folderview-trashrow containerview-no-open"),(this.options.urlParams.singlesel||this.model.collection.container.isSearchResults||this.model.collection.container.isFavorites)&&this.$el.addClass("single-select"),this.model.isFile?(!this.model.get("searchResult")&&this.model.isAllowedAction("fileRead")&&this.$el.addClass("aa-fileRead"),this.options.urlParams.noview&&this.$el.addClass("containerview-no-open")):this.options.urlParams.noopen&&this.$el.addClass("containerview-no-open"),this.$(".custom-checkbox input[type='checkbox']").checkbox(),this.postRender();var a=this.renderItemButtons(),r=e(".containerview-buttons",this.$el).append(a);this.configureItemButtons(r);const l=this.getFocusItem();return l.on("focus",e.proxy(this.onFocusItem,this)),l.on("blur",e.proxy(this.onBlurItem,this)),l.find(".containerview-check input").on("click",e.proxy(this.checkBoxClick,this)),l.find(".containerview-openClick").on("click",e.proxy(this.onOpenItem,this)),l.find(".containerview-thumbClick").on("click",e.proxy(this.onOpenItem,this)),l.find(".containerview-versionClick").on("click",e.proxy(this.onVersionActivity,this)),l.on("click",e.proxy(this.onClickItem,this)),l.on("contextmenu",e.proxy(this.showContextMenu,this)),l.on("mousedown",e.proxy(this.onMouseDown,this)),l.on("mouseenter",e.proxy(this.enterHover,this)),l.on("mouseleave",e.proxy(this.exitHover,this)),l.on(this.keydownEventId,e.proxy(this.handleKeyDown,this)),l.find(this.activeFocusItems).on("blur",e.proxy(this.onBlurItem,this)).attr({tabindex:-1}),this},_computeRenderData:function(){var e={},i=this.model.has("flags")&&this.model.get("flags").isInTrash;e.rowLabel=this.getAriaLabel(),e.thumbnailTitle=t.unescape(this.model.get("name"))+(this.model.get("description")?": \n"+this.model.get("description"):""),e.statusDisplay=this.gridView||this.cardView?o.getGridStatusDisplay(this.model):o.getStatusDisplay(this.model,{dateOnlyAfterDaySpan:!0,showModified:this.showModifiedBy}),e.statusDisplayTitle=this.gridView||this.cardView||i?o.getStatusDisplay(this.model,{dateOnlyAfterDaySpan:!0}):"",e.thumbnailSrc=this.model.get("thumbnail")?this.model.get("thumbnail").url:a.staticRoot+"images/spacer.png",e.errorImg=a.staticRoot+"images/spacer.png",this.model.isFile?(e.nameTitle=this.model.get("flags").isInTrash?t.unescape(this.model.get("name")):docs.i18n.t("CONTAINER_ITEM_NAME_TITLE",t.unescape(this.model.get("name"))),e.chkTitle=docs.i18n.t("CONTAINER_ITEM_CHECK_TITLE",t.unescape(this.model.get("name"))),e.href=docs.common.Globals.routerRoot+"fileview/"+this.model.id):(e.nameTitle=this.model.has("flags")&&this.model.get("flags").isInTrash?t.unescape(this.model.get("name")):docs.i18n.t("CONTAINER_NAME_TITLE",t.unescape(this.model.get("name"))),e.chkTitle=docs.i18n.t("CONTAINER_CHECK_TITLE",t.unescape(this.model.get("name"))),e.folderContains=this.gridView?o.getFolderContainsString(this.model):"",e.largeThumbnailSrc=a.staticRoot+"images/spacer.png",e.href=docs.common.Globals.routerRoot+"folder/"+this.model.id);var n=o.splitDisplayNameForEllipsisInMiddle(this.model.get("name"));return e.nameStart=n[0],e.nameEnd=n[1],e.hideStatusDisplay=this.compactView&&this.options.urlParams.simpleDisplay,this.getRenderData(e)},getRenderData:function(e){return e},postRender:function(){},renderItemButtons:function(){},configureItemButtons:function(){},postAnimate:function(){this._resizeFinished()},_resizeFinished:function(){this.thumbView&&this.thumbView.restretch()},descChange:function(){var i=this.model.get("description");e(".containerview-description",this.el).text(i).attr("title",t.escape(i)),this.updateAriaLabel()},onRemove:function(){var e=this.getFocusItem();docs.events.trigger("containerItem:removingItem",e),this.prepareToRemove(),this.remove()},prepareToRemove:function(){},modifiedAtChange:function(){this.$(".containerview-status").html(this.gridView?o.getGridStatusDisplay(this.model):o.getStatusDisplay(this.model,{dateOnlyAfterDaySpan:!0})),this.gridView&&this.$(".containerview-status").attr("title",o.getStatusDisplay(this.model,{dateOnlyAfterDaySpan:!0})),this.updateAriaLabel()},getAriaLabel:function(){throw"Derived ContainerItemView must override getAriaLabel function"},flagsChanged:function(){this.updateAriaLabel()},updateAriaLabel:function(){var e=this.getAriaLabel();this.$(".containerview-table-row-content, .containerview-row-content, .containerview-card-frame").attr("aria-label",t.unescape(e))},remove:function(){this.getFocusItem().off(this.keydownEventId),this.thumbView&&(this.thumbView.remove(),delete this.thumbView),i.View.prototype.remove.call(this)},getUpdateInfo:function(t){var i=e.naturalDate(this.model.get("modifiedAt"),docs.common.Globals.userTimeZone),n=o.isYou(this.model,"modifiedBy"),s=t?"DELETED_AT_BY":"LAST_MODIFIED_BY",a=n?s+"_YOU":s,r=n?docs.i18n.t("YOU"):this.model.get("modifiedByName");return{updateDate:i,updateText:docs.i18n.t(a,i,r)}},refocusItem:function(){this.getFocusItem().removeClass("focused active"),this.getFocusItem().find(this.activeFocusItems).attr({tabindex:-1});var e=this.getFocusItem();docs.events.trigger("containerItem:focusItem",e,!0)},onFocusItem:function(i){var n=this.getFocusItem();i&&i.currentTarget&&!n.hasClass("hover")&&t.isEqual(e(i.currentTarget).attr("id"),this.model.get("id"))&&n.addClass("focused")},onBlurItem:function(){var i=this;t.delay((function(){var n=e(document.activeElement),o=n.closest(i.mainFocusItem).attr("id")||n.attr("id");t.isEqual(o,i.model.get("id"))||(i.getFocusItem().removeClass("focused active"),i.getFocusItem().find(i.activeFocusItems).attr({tabindex:-1}))}),100)},handleKeyDown:function(t){var i=t.keyCode||t.which,n=this.getFocusItem(),o=n.find(this.activeFocusItems).filter(":visible"),s=e(document.activeElement),a=(o.index(s[0]),this.mainFocusItem.slice(1));switch(i){case e.ui.keyCode.LEFT:n.hasClass("active")||(t.preventDefault(),t.stopPropagation(),docs.events.trigger("containerItem:move",n,"LEFT",this.mainFocusItem));break;case e.ui.keyCode.RIGHT:n.hasClass("active")||(t.preventDefault(),t.stopPropagation(),docs.events.trigger("containerItem:move",n,"RIGHT",this.mainFocusItem));break;case e.ui.keyCode.UP:if(s.parents(".dropmenu_topmenu").length>0&&n.hasClass("active"))return;n.hasClass("active")||(t.preventDefault(),t.stopPropagation(),docs.events.trigger("containerItem:move",n,"UP",this.mainFocusItem));break;case e.ui.keyCode.DOWN:if((s.hasClass("dropmenu_button")||s.parents(".dropmenu_topmenu").length>0)&&n.hasClass("active"))return;n.hasClass("active")||(t.preventDefault(),t.stopPropagation(),docs.events.trigger("containerItem:move",n,"DOWN",this.mainFocusItem));break;case e.ui.keyCode.TAB:if(o.length>0&&n.hasClass("active")){var r=o.first()[0]===s[0],l=o.last()[0]===s[0];(t.shiftKey&&r||!t.shiftKey&&l)&&(t.preventDefault(),t.stopPropagation(),n.removeClass("active"),o.attr({tabindex:-1}),docs.events.trigger("containerItem:focusItem",n,!0))}break;case e.ui.keyCode.ENTER:t.shiftKey&&o.length>0&&s.hasClass(a)?(t.preventDefault(),t.stopPropagation(),n.addClass("active"),o.attr({tabindex:0}),o.first().focus()):(s.hasClass(a)||s.hasClass("containerview-openClick"))&&(t.preventDefault(),t.stopPropagation(),this.$el.hasClass("containerview-no-open")||this.model.get("flags")&&this.model.get("flags").isInTrash?docs.events.trigger("containerItem:selectItem",n,t):docs.events.trigger("containerItem:openItem",n,t));break;case e.ui.keyCode.ESCAPE:t.isDefaultPrevented()||(n.removeClass("active"),o.attr({tabindex:-1}),docs.events.trigger("containerItem:focusItem",n,!0));break;case e.ui.keyCode.SPACE:s.hasClass(a)&&!n.hasClass("active")?(t.preventDefault(),t.stopPropagation(),docs.events.trigger("containerItem:selectItem",n,t)):s.hasClass("containerview-openClick")&&(t.preventDefault(),t.stopPropagation(),this.$el.hasClass("containerview-no-open")||this.model.get("flags")&&this.model.get("flags").isInTrash?docs.events.trigger("containerItem:selectItem",n,t):docs.events.trigger("containerItem:openItem",n,t));break;case 121:t.shiftKey&&s.hasClass(a)&&(t.preventDefault(),t.stopPropagation(),this.isSelected()||docs.events.trigger("containerItem:selectItem",n,t),t.type="contextmenu",t.shiftKey=!1,t.pageX=n.offset().left,t.pageY=n.offset().top,docs.events.trigger("containerItem:showContextMenu",t,!0))}return!0},onClickItem:function(t){var i=this.getFocusItem();if(e(t.target).is(this.activeFocusItems)||e(t.target).parents(this.activeFocusItems).length>0)return docs.events.trigger("containerItem:focusItem",i,!1),i.addClass("active"),void i.find(this.activeFocusItems).filter(":visible").attr({tabindex:0});if(t.preventDefault(),t.stopPropagation(),docs.events.trigger("containerItem:selectItem",i,t,!0),this.dblClickTimer)window.clearTimeout(this.dblClickTimer),this.dblClickTimer=null,i.hasClass("containerview-no-open")||docs.events.trigger("containerItem:openItem",i,t);else{var n=this;this.dblClickTimer=window.setTimeout((function(){n.dblClickTimer=null}),500)}},checkBoxClick:function(e){e.stopPropagation();var t=this.getFocusItem();t.addClass("active"),t.find(this.activeFocusItems).filter(":visible").attr({tabindex:0}),docs.events.trigger("containerItem:selectItem",t,e)},onOpenItem:function(e){if(e.preventDefault(),!e.isPropagationStopped()){e.stopPropagation();var t=this.getFocusItem();this.$el.hasClass("containerview-no-open")||this.model.get("flags")&&this.model.get("flags").isInTrash?docs.events.trigger("containerItem:selectItem",t,e):docs.events.trigger("containerItem:openItem",t,e)}},onVersionActivity:function(e){if(e.preventDefault(),!e.isPropagationStopped()){e.stopPropagation();var t=this.getFocusItem();this.model.get("flags")&&this.model.get("flags").isInTrash?docs.events.trigger("containerItem:selectItem",t,e):docs.events.trigger("containerItem:versionActivityItem",t,e)}},showContextMenu:function(e){if(!e.ctrlKey){e.preventDefault(),e.stopPropagation(),this.dblClickTimer&&(window.clearTimeout(this.dblClickTimer),this.dblClickTimer=null);var t=!1;if(1===e.which||0===e.which)t=!0;else if(0===e.pageX&&0===e.pageY){var i=this.getFocusItem();t=!0,e.pageX=i.offset().left,e.pageY=i.offset().top}return docs.events.trigger("containerItem:showContextMenu",e,t),!1}},getFocusItem:function(){return this.$el.hasClass(this.mainFocusItem.slice(1))?this.$el:this.$el.find(this.mainFocusItem)},isSelected:function(){var e=this.getFocusItem().find(".containerview-check input");return!!(e&&e.length>0&&!0===e.prop("checked"))},onMouseDown:function(e){var t=this.getFocusItem();t.addClass("mousedown"),t.removeClass("focused")},enterHover:function(e){var t=this.getFocusItem();t.hasClass("selected")||t.addClass("hover")},exitHover:function(e){this.getFocusItem().removeClass("hover mousedown")},itemVisible:function(e){this.itemLazyLoad()},itemLazyLoad:function(){},disableTransformForDropMenu:function(){if(this.cardView){var e=this,i=function(t){e.$el.toggleClass("dropmenuDisableTransform",t)};this.$el.find(".dropmenu_button").on({mousedown:t.partial(i,!0),mouseup:t.partial(i,!1)})}}}),docs.views.ContainerItemView})),define("docs/container/template/ContextToolbarItem.template",["underscore"],(function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<button id="'+(null==(__t=itemId)?"":_.escape(__t))+'" type="button" class=" ',itemIconClass&&!itemIcon?__p+=" cxt_toolbar_icon oj-ux-icon "+(null==(__t=itemIconClass)?"":_.escape(__t))+" ":__p+=" cxt_toolbar_item text_button_nohover ",__p+='" tabindex="0" role="menuitem" title="'+(null==(__t=itemTooltip)?"":_.escape(__t))+'">',itemIconClass&&!itemIcon||(__p+=""+(null==(__t=itemText)?"":_.escape(__t))),__p+="</button>";return __p}})),define("docs/container/template/ContextDropMenuItem.template",["underscore"],(function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<li id="'+(null==(__t=itemId)?"":_.escape(__t))+'"><a href="#" title="'+(null==(__t=itemTooltip)?"":_.escape(__t))+'">',itemIcon&&itemIconClass&&(__p+="<img ",itemIconClass&&(__p+='class="'+(null==(__t=itemIconClass)?"":_.escape(__t))+'"'),__p+=' src="'+(null==(__t=itemIcon)?"":_.escape(__t))+'"/>'),__p+=(null==(__t=itemText)?"":_.escape(__t))+"</a></li>";return __p}})),define("docs/container/template/ContextDropMenu.template",["underscore"],(function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<span id="'+(null==(__t=prefix)?"":_.escape(__t))+'_dropmenu" class="cxt_toolbar_dropmenu">\t<button id="'+(null==(__t=prefix)?"":_.escape(__t))+'_button" type="button" class="dropmenu_button ',itemIconClass?__p+=" cxt_toolbar_icon font-icon-menu oj-ux-icon "+(null==(__t=itemIconClass)?"":_.escape(__t))+" ":__p+=" cxt_toolbar_item text_button_nohover ",__p+='">\t\t<span class="dropmenu_label" title="'+(null==(__t=tooltip)?"":_.escape(__t))+'">',itemIconClass||(__p+=""+(null==(__t=text)?"":_.escape(__t))),__p+='</span>\t</button>\t<ul id="'+(null==(__t=prefix)?"":_.escape(__t))+'_topmenu" class="dropmenu_topmenu">\t</ul></span>';return __p}})),define("common/container/view/ContextToolbarView",["jquery","underscore","backbone","common/upload/Manager","core/util/Globals","core/util/Logger","docs/container/template/ContextToolbarItem.template","docs/container/template/ContextDropMenuItem.template","docs/container/template/ContextDropMenu.template"],(function(e,t,i,n,docs,o,s,a,r){"use strict";var l=docs.common.Globals,c=l.IS_TEST_MODE?0:300,h=i.View.extend({events:{"click .cxt_toolbar_item":"toolbarItemClick","click .cxt_toolbar_icon":"toolbarItemClick","keypress .cxt_toolbar_item":"keyPressedOnToolbarItem","keypress .cxt_toolbar_icon":"keyPressedOnToolbarItem"},initialize:function(){t.bindAll(this,"render","toolbarItemClick","keyPressedOnToolbarItem","moreMenuItemClick","closeMoreMenu","_createToolbarUploader","_destroyToolbarUploader","resizeMenu","onCloseView"),this.toolbar_uploader=null,this.listenTo(this.collection,"reset",this.render),this.listenTo(osn.events,"navbar:toggled",this.resizeMenu)},render:function(){this._destroyToolbarUploader(),this.uploadId=null;var i=e("<div></div>"),n=e('<div class="cxt_toolbar_sep"></div>'),r=this.getItemWidth(n);this.menus=[],this.menus.push(this.createMenu("moremenu",this.collection.moreMenu.text?this.collection.moreMenu.text:docs.i18n.t("CONTEXT_TOOLBAR_MORE"),this.collection.moreMenu.tooltip?this.collection.moreMenu.tooltip:"",docs.i18n.t("MORE_MENU_LABEL")));var l=this.getMenu("moremenu");if(this.collection.length>0){o("ContextToolbarView").debug("adding toolbar actions");var c,d=e(window).width();h.resolveMenuItems(this.collection);var u=[];this.collection.each((function(t){if(!h.skipAction(t,d))if(t.has("isMenu")){var i=t.has("fontIcon")&&t.collection.selection.length&&docs.container.ActionsConfig.isIconToolbarScopeSupported(t.collection.scopeKey)&&docs.container.ActionsConfig.getIconFontClassForAction(t.get("id"),t.collection.selection[0].actionType);this.menus.push(this.createMenu(t.get("id"),t.get("label"),t.get("tooltip"),t.get("aria"),i)),c=this.getMenu(t.get("id")).menu,u.push(this.getItemWidth(c))}else t.get("id")?(c=e(s(h.getItemProps(t,this.collection.tool_prefix))),u.push(this.getItemWidth(c))):t.get("separator")&&u.push(r)}),this);var p=0;this.$el.is(":visible")?p=this.$el.outerWidth():d>300&&(this.$el.show(),p=this.$el.outerWidth(),this.$el.hide());var m=this.getFirstMoreActionIndex(u,p,r);this.collection.each((function(o,r){if(!h.skipAction(o))if(r>=m){if(o.has("isMenu")?(c=e(),t.each(this.collection.models,(function(i){if(t.contains(o.get("children"),i.get("id"))){var n=e(a(h.getItemProps(i,this.collection.tool_prefix)));c=c.add(n)}}),this)):o.get("id")?c=e(a(h.getItemProps(o,this.collection.tool_prefix,{context:this}))):o.get("separator")&&(c=n.clone()),null!==c){if(o.has("isMenu")){var d=l.dropMenu.children().last();d.hasClass("cxt_toolbar_sep")||(d=n.clone(),l.dropMenu.append(d)),d.addClass("ui-widget-content ui-menu-divider menu-header").append("<span>"+o.get("label")+"</span>")}l.dropMenu.append(c)}}else o.has("isMenu")?(c=this.getMenu(o.get("id")).menu,t.each(this.collection.models,(function(i){if(t.contains(o.get("children"),i.get("id"))){var n=e(a(h.getItemProps(i,this.collection.tool_prefix)));this.getMenu(o.get("id")).dropMenu.append(n)}}),this)):o.get("id")?c=e(s(h.getItemProps(o,this.collection.tool_prefix,{context:this}))):o.get("separator")&&(c=n.clone()),null!==c&&i.append(c)}),this),this._removeUnnecessarySeparators(i),this._removeUnnecessarySeparators(l.dropMenu),l.dropMenu.find("li").length>0&&i.append(l.menu)}this.$el.toggleClass("no-selection",this.collection.first()&&"action_select_all"===this.collection.first().id),this.$el.html(i.html()),this.$el.closest(".containerview-toolbar").toggleClass("selected",!!i.html());var _=!1;if(null!==this.uploadId){var g="#"+this.uploadId;e(g).is(".cxt_toolbar_item, .cxt_toolbar_icon")&&(_=!0,this._createToolbarUploader(null,!1))}l.afterOpen=_?void 0:this._createToolbarUploader,t.each(this.menus,(function(t){var i=e("#"+t.prefix+"_dropmenu",this.$el);1===i.length&&(o("ContextToolbarView").trace("creating dropmenu for "+t.prefix),i.dropmenu({select:this.moreMenuItemClick,afterOpen:t.afterOpen,afterClose:t.afterClose,ariaContext:t.ariaContext,align:"right"}))}),this);var f=this.$el.find(".cxt_toolbar_icon");this.$el.find(".cxt_toolbar_item").toggleClass("no-ui-icons",0===f.length),n.remove(),t.each(this.menus,(function(e){e.menu.remove(),delete e.dropMenu,delete e.dropMenu})),i.remove()},getMenu:function(e){return t.findWhere(this.menus,{prefix:e})},createMenu:function(t,i,n,o,s){var a={prefix:t,text:i,tooltip:n,ariaContext:o||docs.i18n.t("UI_DROPDOWN_MENU_LABEL",i)};return a.menu=e(r({prefix:t,text:i,tooltip:n,itemIconClass:s})),a.dropMenu=e("#"+t+"_topmenu",a.menu),a},_createToolbarUploader:function(t,i){if(null!==this.uploadId){var s=null;1===this.collection.selection.length&&(s=this.collection.selection[0].folderItem),null==i&&(i=!0);var a=!0!==i;o("ContextToolbarView").debug("creating toolbar uploader");var r=this,l={parentModel:s,parentFolder:this.options.folder,browse_button_id:this.uploadId,is_menu:i,is_toolbar:!i,persist:a,applyButtonClasses:!1,single_selection:this.uploadId===this.collection.tool_prefix+"action_upload_version",input_click_callback:function(){r.closeMoreMenu(null)},input_cancel_callback:function(){r.closeMoreMenu(null)}};e.extend(l,this.options.uploader_options?this.options.uploader_options:{}),this.toolbar_uploader=n.newUploader(l),t&&(t.inputId=n.getInputId(this.uploader)),o("ContextToolbarView").debug("finished creating toolbar uploader")}},onCloseView:function(){this.stopListening(),this._destroyToolbarUploader(),delete this.menus},_destroyToolbarUploader:function(e){this.toolbar_uploader&&(o("ContextToolbarView").debug("destroying toolbar uploader"),n.destroyUploader(this.toolbar_uploader),this.toolbar_uploader=null,e&&(e.inputId=void 0))},keyPressedOnToolbarItem:function(t){13===(t.keyCode||t.which)&&(o("ContextToolbarView").debug("enter key pressed",t),t.preventDefault(),e(t.currentTarget).trigger("click"))},toolbarItemClick:t.debounce((function(t){var i=e(t.currentTarget).get(0).id;if("moremenu_button"!==i){var s=e(t.target).get(0).id;if(o("ContextToolbarView").trace("toolbar item click","actionId=",i,"itemId=",s,t),i){if(this.triggerAction(i,t),s&&""!==s&&n.isInputElement(s))return;if("ct_action_upload_to_folder"===s||"ct_action_upload_version"===s)return;if("moremenu_dropmenu"===i||0===i.indexOf("ct_action_"))return o("ContextToolbarView").trace("toolbar item click return false"),!1}}}),c,!0),triggerAction:function(e,t){this.collection.triggerAction(e,t)},moreMenuItemClick:function(t,i){var s=e(i.item).attr("id");if(o("ContextToolbarView").trace("toolbar item click","actionId=",s),s){if(this.triggerAction(s,t),s&&""!==s&&n.isInputElement(s))return;if("ct_action_upload_to_folder"===s||"ct_action_upload_version"===s)return;if("moremenu_dropmenu"===s||0===s.indexOf("ct_action_"))return o("ContextToolbarView").trace("toolbar item click return false"),!1}},closeMoreMenu:function(t){o("ContextToolbarView").trace("closeMoreMenu","action=",t?t.id:t);var i=this.getMenu("moremenu"),n=e("#"+i.prefix+"_dropmenu",this.$el);n.data("ui-dropmenu")&&n.dropmenu("collapseMenu"),t&&this.triggerAction(t.id)},getItemWidth:function(t){var i=t.clone();i.css({position:"absolute",left:"-5000px",top:"-5000px"}),i.addClass("toolbar-width-test"),i.removeAttr("id"),e("body").append(i);var n=e(".toolbar-width-test").outerWidth(!0);return e(".toolbar-width-test").remove(),n},getFirstMoreActionIndex:function(e,t,i){for(var n=0,o=this.getItemWidth(this.getMenu("moremenu").menu),s=0;s<e.length;s++){if(!(t>n+e[s])){if(t>n+o)return s;for(var a=s-1;a>=0&&!(t>(n-=e[a])+o);a--);return a}n+=e[s]}return 1/0},_removeUnnecessarySeparators:function(e){for(;e.children().first().is(".cxt_toolbar_sep:not(.menu-header)");)e.children().first().remove();for(;e.children().last().hasClass("cxt_toolbar_sep");)e.children().last().remove();e.children(".cxt_toolbar_sep + .cxt_toolbar_sep").prev().remove()},resizeMenu:function(){var e=this.$el.outerWidth(),t=this.$el.outerHeight();this.lastWidth===e&&this.lastHeight===t||(this.lastWidth=e,this.lastHeight=t,this.render())}},{resolveMenuItems:function(e){e.each((function(e,i,n){var o=e.get("children");if(o){var s=n.filter((function(e){return t.contains(o,e.get("id"))}));if(s.length>1||s.length>0&&e.get("keepMenuWithOneItem"))h.setSubMenu(e,s);else if(1===s.length&&e.has("must_children"))t.contains(e.get("must_children"),s[0].get("id"))&&e.get("label")!==s[0].get("label")?h.setSubMenu(e,s):h.clearSubMenu(e);else if(1!==s.length||e.get("keepMenuWithOneItem"))h.clearSubMenu(e);else{var a=s[0].get("singleMenuItemLabel");a&&s[0].set("label",a),h.clearSubMenu(e)}}}),this)},setSubMenu:function(e,i){e.set("isMenu",!0),t.each(i,(function(e){e.set("isMenuItem",!0)}))},clearSubMenu:function(e){e.set("hidden",!0)},skipAction:function(e,t){return!!(l.embed&&e.get("embed")&&t<e.get("embed"))||!(!e.has("hidden")&&!e.has("isMenuItem"))},getItemProps:function(e,t,i){var n,o="";(i=i||{}).noTooltip||(o=e.get("tooltip")?e.get("tooltip"):e.get("label")),n=e.has("fontIcon")&&e.collection.selection.length&&docs.container.ActionsConfig.isIconToolbarScopeSupported(e.collection.scopeKey)&&docs.container.ActionsConfig.getIconFontClassForAction(e.get("id"),e.collection.selection[0].actionType);var s={itemId:t+e.id,itemText:e.get("label"),itemTooltip:o,itemIcon:e.has("icon")?e.get("icon"):null,itemIconClass:e.has("iconClass")&&e.has("icon")?e.get("iconClass"):n};return!i.context||"action_upload_to_folder"!==e.id&&"action_upload_version"!==e.id||(i.context.uploadId=s.itemId),s}});return docs.views.ContextToolbarView=h,docs.views.ContextToolbarView})),define("docs/container/template/ContextMenu.template",["underscore"],(function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div>  <span id="cxt_menu">    <ul id=\'cxt_topmenu\' class="dropmenu_topmenu"></ul>  </span></div>';return __p}})),define("common/container/view/ContextMenuView",["jquery","underscore","backbone","common/upload/Manager","core/util/Globals","core/util/Logger","common/container/view/ContextToolbarView","docs/container/template/ContextMenu.template","docs/container/template/ContextDropMenuItem.template"],(function(e,t,i,n,docs,o,s,a,r){"use strict";return docs.views.ContextMenuView=i.View.extend({initialize:function(){t.bindAll(this,"render","showMenu","closeMenu","itemClick","_createUploader","_destroyUploader","onCloseView")},render:function(i,n){var o=e(a()),l=e("#cxt_topmenu",o),c=e('<div class="dropmenu_sep"></div>');this.uploadId=null,this.item=n,this.folder=i,this._destroyUploader(),l.empty();var h=e(window).width();if(this.collection.length>0){var d;s.resolveMenuItems(this.collection);var u=!1,p=!1;if(this.collection.each((function(i){if(!s.skipAction(i,h)){if(d=void 0,i.get("separator"))u||(d=c.clone(),u=!0);else{if(u=!1,i.has("isMenu")){var n=l.children().last();n.hasClass("dropmenu_sep")||(n=c.clone(),l.append(n)),n.addClass("ui-widget-content ui-menu-divider menu-header").append("<span>"+i.get("label")+"</span>"),d=e("<ul></ul>");var o=i.get("children"),a=this.collection.filter((function(e){return t.contains(o,e.get("id"))})),m=!1;t.each(a,(function(t){var i=e(r(s.getItemProps(t,this.collection.tool_prefix)));e(d).append(i),m=!0}),this),m&&(d=e("li",d).clone().add(c.clone()),u=!0,p=!0)}else d=e(r(s.getItemProps(i,this.collection.menu_prefix,{context:this,noTooltip:!0})));p=!0}d&&p&&l.append(d)}}),this),u){var m=e(".dropmenu_sep:last",l);m&&m.remove()}var _=docs.template(o.html());this.$el.html(_),this.menu=this.$("#cxt_menu").dropmenu({contextMenu:!0,select:this.itemClick,afterOpen:this._createUploader,at:this.options.at,within:this.options.within}).dropmenu("adjustMenuPaddingIfIconsPresent")}else delete this.menu;c.remove(),l.remove(),o.remove()},showMenu:function(t,i,n,s,a){o("ContentMenuView").trace("showMenu"),this.render(i,s),this.menu&&this.menu.dropmenu("showDropDownMenu",t,{focusFirstItem:n,focusOnClose:a||e(t.currentTarget).find(":focusable").first()})},closeMenu:function(e){o("ContentMenuView").trace("closeMenu","actionId=",e),this.menu&&this.menu.dropmenu("collapseMenu")},_createUploader:function(t){if(null!==this.uploadId){o("ContentMenuView").debug("creating context menu uploader");var i=this,s={parentModel:this.item,parentFolder:this.folder,browse_button_id:this.uploadId,is_menu:!0,single_selection:this.uploadId===this.collection.menu_prefix+"action_upload_version",input_click_callback:function(){i.closeMenu(null)},input_cancel_callback:function(){i.closeMenu(null)}};e.extend(s,this.options.uploader_options?this.options.uploader_options:{}),this.uploader=n.newUploader(s),t&&(t.inputId=n.getInputId(this.uploader)),o("ContentMenuView").debug("finished creating context menu uploader")}},_destroyUploader:function(e){this.uploader&&(o("ContentMenuView").debug("destroying uploader"),n.destroyUploader(this.uploader),this.uploader=null,e&&(e.inputId=void 0))},onCloseView:function(){this._destroyUploader(),this.menu&&(this.menu.dropmenu("destroy"),delete this.menu)},itemClick:function(t,i){var s=e(i.item).attr("id");o("ContentMenuView").trace("context menu item click",s),"cm_action_upload_to_folder"===s||"cm_action_upload_version"===s||n.isInputElement(s)||n.isInputWrapper(s)||s&&this.collection.triggerAction(s,t)}}),docs.views.ContextMenuView})),define("docs/container/template/TableHeaderView.template",["underscore"],(function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",_.each(columns,(function(e){__p+="",e.sort&&e.sort.length>0?__p+="<span class='containerview-table-header-cell' data-name='"+(null==(__t=e.name)?"":_.escape(__t))+"' data-sort-options='"+(null==(__t=e.sort.join(","))?"":_.escape(__t))+"'>  <span title='"+(null==(__t=e.tooltip)?"":_.escape(__t))+"'>"+(null==(__t=e.label)?"":_.escape(__t))+'</span>  <a href="#" title=\''+(null==(__t=e.tooltip)?"":_.escape(__t))+"' class='containerview-table-header-button' aria-label='"+(null==(__t=e.tooltip)?"":_.escape(__t))+'\'>    <span class="ui-button-icon ui-icon ui-icon-table-hdr-sort"></span>  </a></span>':__p+="<span class='containerview-table-header-cell' data-name='"+(null==(__t=e.name)?"":_.escape(__t))+"'>"+(null==(__t=e.label)?"":_.escape(__t))+"</span>",__p+=""})),__p+="";return __p}})),define("common/container/view/TableHeaderView",["jquery","underscore","backbone","core/util/Globals","docs/container/template/TableHeaderView.template"],(function(e,t,i,docs,n){"use strict";return i.View.extend({events:{"click .containerview-table-header-button":"onHeaderButtonClick"},initialize:function(e){return this.options=e||{},this.columns=t.result(this.options.ContainerTableRowView,"tableColumns"),t.isFunction(this.options.ContainerTableRowView.filterTableColumns)&&(this.columns=this.options.ContainerTableRowView.filterTableColumns(this.columns,this.options)||this.columns),this.options.contextActions.container&&(this.listenTo(this.options.contextActions.container,"change:sortOrder",this.sortOrderChanged),t.defer(function(){this.sortOrderChanged(this.options.contextActions.container,this.options.contextActions.container.get("sortOrder"))}.bind(this))),this},render:function(){return this.$el.html(n({i18n:docs.i18n,columns:this.columns})),t.each(this.columns,function(e,i){var n=this.$("[data-name="+e.name+"]");if(e.width){var o=t.isFunction(e.width)?e.width(this.options.model):e.width;n.css({width:o,flex:"0 0 auto"})}else n.css({flex:"1 1 auto"});n.addClass("cv-table-col-"+i)}.bind(this)),this},setSortedColumn:function(e,t){this.$(".containerview-table-header-cell[data-sort]").removeAttr("data-sort").removeData("sort"),e&&t&&e.attr("data-sort",t)},onHeaderButtonClick:function(t){var i=e(t.target).closest(".containerview-table-header-cell"),n=i.attr("data-sort"),o=i.attr("data-sort-options").split(",");if(n){var s=(o.indexOf(n)+1)%o.length;n=o[s]}else n=o[0];this.setSortedColumn(i,n);var a=n.split(":")[0];this.options.contextActions.containerSort(a),this.options.contextActions.container&&this.options.contextActions.container.set("sortOrder",a,{ignoreTableHeaderUpdate:!0})},sortOrderChanged:function(e,i,n){if(!n||!n.ignoreTableHeaderUpdate){var o,s=t.find(this.columns,(function(e){return!!t.find(e.sort,(function(e){return e.indexOf(i)>-1&&(o=e,!0)}))})),a=s&&this.$(".containerview-table-header-cell[data-name='"+s.name+"']");this.setSortedColumn(a,o)}}})})),define("docs/container/template/Pager.template",["underscore"],(function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div>\t<div class="containerview-pager-control" role="navigation">\t\t<a href="#" data-pagenum="first" class="containerview-pager-first ui-corner-all" title="'+(null==(__t=i18n.t("PAGER_FIRST_PAGE"))?"":_.escape(__t))+'" role="link"><span class="visuallyhidden">'+(null==(__t=i18n.t("PAGER_FIRST_PAGE"))?"":_.escape(__t))+'</span></a>\t\t<a href="#" data-pagenum="prev" class="containerview-pager-prev ui-corner-all" title="'+(null==(__t=i18n.t("PAGER_PREVIOUS_PAGE"))?"":_.escape(__t))+'" role="link"><span class="visuallyhidden">'+(null==(__t=i18n.t("PAGER_PREVIOUS_PAGE"))?"":_.escape(__t))+'</span></a>\t\t<a href="#" class="containerview-pager-num ui-corner-all" role="link">1</a>\t\t<span class="containerview-pager-elipsis pager_elipsis" title="'+(null==(__t=i18n.t("PAGER_MORE_PAGES"))?"":_.escape(__t))+'">&hellip;<span class="visuallyhidden">'+(null==(__t=i18n.t("PAGER_MORE_PAGES"))?"":_.escape(__t))+'</span></span>\t\t<a href="#" data-pagenum="next" class="containerview-pager-next ui-corner-all" title="'+(null==(__t=i18n.t("PAGER_NEXT_PAGE"))?"":_.escape(__t))+'" role="link"><span class="visuallyhidden">'+(null==(__t=i18n.t("PAGER_NEXT_PAGE"))?"":_.escape(__t))+'</span></a>\t\t<a href="#" data-pagenum="last" class="containerview-pager-last ui-corner-all" title="'+(null==(__t=i18n.t("PAGER_LAST_PAGE"))?"":_.escape(__t))+'" role="link"><span class="visuallyhidden">'+(null==(__t=i18n.t("PAGER_LAST_PAGE"))?"":_.escape(__t))+"</span></a>\t</div></div>";return __p}})),define("common/container/view/PagerView",["jquery","underscore","backbone","core/view/MessageBar","docs/container/template/Pager.template"],(function(e,t,i,n,o){"use strict";return docs.views.PagerView=i.View.extend({events:{"click .containerview-pager-first, .containerview-pager-last, .containerview-pager-prev, .containerview-pager-next, .containerview-pager-num":"pagerButtonClicked","keydown .containerview-pager-first, .containerview-pager-last, .containerview-pager-prev, .containerview-pager-next, .containerview-pager-num":"keyPressedOnPagerButton"},initialize:function(e){this.options=e||{},this.pagerLinkFormatText=this.options.pagerNumString,t.bindAll(this,"render","pagerButtonClicked","keyPressedOnPagerButton"),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"error:pagePastEnd",this.pagePastEndError),this.listenTo(this.model,"error:missingPreviousPage",this.missingPreviousPageError)},render:function(){var t=o({i18n:docs.i18n}),i=e(t),n=e(".containerview-pager-control",i),s=e(".containerview-pager-prev",n).detach(),a=e(".containerview-pager-next",n).detach(),r=e(".containerview-pager-num",n).detach(),l=e(".containerview-pager-elipsis",n).detach(),c=e(".containerview-pager-first",n).detach(),h=e(".containerview-pager-last",n).detach();n.empty();var d=this.model.get("pageCount"),u=this.model.pageSize,p=this.model.get("totalCount"),m=this.model.maxPages||d;if(d>m&&(d=m),this.$el.toggle(d>1),d>1){var _=this.model.get("page");if(_>1&&(this._createPagerButton(n,c),this._createPagerButton(n,s)),d<6)for(var g=1;g<=d;g++)this._createPagerButton(n,r,g,u,p);else this._createPagerButton(n,r,1,u,p),_<4?(this._createPagerButton(n,r,2,u,p),this._createPagerButton(n,r,3,u,p),this._createPagerButton(n,r,4,u,p),n.append(l.clone()),this._createPagerButton(n,r,d,u,p)):_>d-4?(n.append(l.clone()),this._createPagerButton(n,r,d-3,u,p),this._createPagerButton(n,r,d-2,u,p),this._createPagerButton(n,r,d-1,u,p),this._createPagerButton(n,r,d,u,p)):(n.append(l.clone()),this._createPagerButton(n,r,_-1,u,p),this._createPagerButton(n,r,_,u,p),this._createPagerButton(n,r,_+1,u,p),n.append(l.clone()),this._createPagerButton(n,r,d,u,p));if(_<d)this._createPagerButton(n,a),this.model.get("pageCount")<=m&&this._createPagerButton(n,h);var f=i.html();this.$el.html(f),this.$el.show(),this.$(".containerview-pager-num").removeClass("selected");var v=".containerview-pager-num.containerview-pager-p"+_;this.$(v).addClass("selected")}},_createPagerButton:function(e,i,n,o,s){var a=i.clone();if(!t.isUndefined(n)){a.addClass("containerview-pager-p"+n),a.attr("title",n),a.attr("data-pageNum",n);var r=(n-1)*o+1,l=Math.min(s,n*o);a.html(docs.i18n.t(this.pagerLinkFormatText,n,r,l))}var c=a.attr("tabindex");t.isUndefined(c)&&a.attr("tabindex",0),e.append(a)},keyPressedOnPagerButton:function(e){13===e.keyCode&&(e.preventDefault(),this.pagerButtonClicked(e))},pagerButtonClicked:function(t){t.preventDefault();var i=e(t.currentTarget);switch(i.attr("data-pageNum")){case"first":this.trigger("fetchPage","first");break;case"last":this.trigger("fetchPage","last");break;case"prev":this.trigger("fetchPage","prev");break;case"next":this.trigger("fetchPage","next");break;default:i.hasClass("containerview-pager-num")&&(this.$(".containerview-pager-num").removeClass("selected"),i.addClass("selected"),this.trigger("fetchPage",i.attr("data-pageNum")))}this._scrollToTop()},_scrollToTop:function(){e("html, body").animate({scrollTop:0},"fast")},hasPrevPage:function(){var e=this.model.get("pageCount"),t=this.model.get("page");return e>1&&t>1},hasNextPage:function(){var e=this.model.get("pageCount"),t=this.model.maxPages||e;return e>t&&(e=t),this.model.get("page")<e},goPrevPage:function(){this.hasPrevPage()&&this.trigger("fetchPage","prev")},goNextPage:function(){this.hasNextPage()&&this.trigger("fetchPage","next")},pagePastEndError:function(){var e=(this.model.get("pageCount")-this.model.getPage()+1)*this.model.pageSize,t=this.model.get("totalCount")-e;this.model.updatePageCount(t);var i=this.model.get("startRow")/this.model.pageSize+1;this.model.setPage(i),this.render(),new n({messageText:docs.i18n.t("PAGER_PAGE_FETCH_ERROR"),messageType:"error"})},missingPreviousPageError:function(){new n({messageText:docs.i18n.t("PAGER_FETCH_PREV_ERROR",this.model.getPage()),messageType:"error"}),this.trigger("fetchPage","first")}}),docs.views.PagerView})),define("docs/container/template/ToolbarButtonsView.template",["underscore"],(function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",searchOptions&&(__p+='<span class="containerview-search"></span>'),__p+="",filterOptions&&filterOptions.items&&filterOptions.items.length>1&&(__p+='<span class="containerview-filter-list" >  <span role="status" class="containerview-filter-list offscreen"></span>  <button title="" class="containerview-filter-button containerview-toolbar-button dropmenu_button" value="'+(null==(__t=filterValue)?"":_.escape(__t))+'"></button>  <ul class="dropmenu_topmenu">    ',_.each(filterOptions.items,(function(e){__p+='    <li data-action="'+(null==(__t=e.id)?"":_.escape(__t))+'" data-checked="false" title="'+(null==(__t=e.tooltip)?"":_.escape(__t))+'" class="remove_button_style"><a href="#">'+(null==(__t=e.label)?"":_.escape(__t))+"</a></li>    "})),__p+="  </ul></span>"),__p+="",pagerOptions&&pagerOptions.length>1&&(__p+='<span class="containerview-pagesize" >  <span role="status" class="containerview-pagesize-status offscreen"></span>  <button title="" class="containerview-pagesize-button containerview-toolbar-button dropmenu_button" value="'+(null==(__t=pageSizeValue)?"":_.escape(__t))+'"></button>  <ul class="dropmenu_topmenu">    ',_.each(pagerOptions,(function(e){__p+='    <li data-action="'+(null==(__t=e.value)?"":_.escape(__t))+'" data-checked="false" title="'+(null==(__t=e.title)?"":_.escape(__t))+'" class="remove_button_style"><a href="#">'+(null==(__t=e.text)?"":_.escape(__t))+"</a></li>    "})),__p+="  </ul></span>"),__p+="",sortOptions.none||(__p+='<span class="containerview-sort" >  <span role="status" class="containerview-sort-status offscreen"></span>  <button title="" class="containerview-sort-button containerview-toolbar-button dropmenu_button" value="'+(null==(__t=sortValue)?"":_.escape(__t))+'"></button>  <ul class="dropmenu_topmenu">    ',sortOptions.relevanceSort&&(__p+='      <li data-action="sort_relevance" data-checked="false" title="'+(null==(__t=i18n.t("SORT_RELEVANCE_TOOLTIP"))?"":_.escape(__t))+'" class="remove_button_style"><a href="#">'+(null==(__t=i18n.t("SORT_RELEVANCE"))?"":_.escape(__t))+"</a></li>    "),__p+='    <li data-action="sort_nameasc" data-checked="false" title="'+(null==(__t=i18n.t("SORT_NAMEASC_TOOLTIP"))?"":_.escape(__t))+'" class="remove_button_style"><a href="#">'+(null==(__t=i18n.t("SORT_NAMEASC"))?"":_.escape(__t))+"</a></li>    ",sortOptions.custom&&_.isArray(sortOptions.custom)?(__p+="      ",_.each(sortOptions.custom,(function(e){__p+='      <li data-action="'+(null==(__t=e.action||"")?"":_.escape(__t))+'" data-checked="false"  title="'+(null==(__t=e.title||"")?"":_.escape(__t))+'" class="remove_button_style"><a href="#">'+(null==(__t=e.text||"")?"":_.escape(__t))+"</a></li>      "})),__p+="    "):sortOptions.trashSort?__p+='    <li data-action="sort_updated" data-checked="false" title="'+(null==(__t=i18n.t("SORT_DELETED_TOOLTIP"))?"":_.escape(__t))+'" class="remove_button_style"><a href="#">'+(null==(__t=i18n.t("SORT_DELETED"))?"":_.escape(__t))+"</a></li>    ":sortOptions.appSort?__p+='    <li data-action="sort_created" data-checked="false" title="'+(null==(__t=i18n.t("SORT_CREATED_TOOLTIP"))?"":_.escape(__t))+'" class="remove_button_style"><a href="#">'+(null==(__t=i18n.t("SORT_CREATED"))?"":_.escape(__t))+"</a></li>    ":sortOptions.nameOnlySort||(__p+="      ",sortOptions.updatedBySort&&(__p+='      <li data-action="sort_updatedby" data-checked="false" title="'+(null==(__t=i18n.t("SORT_UPDATED_BY_TOOLTIP"))?"":_.escape(__t))+'" class="remove_button_style"><a href="#">'+(null==(__t=i18n.t("SORT_UPDATED_BY"))?"":_.escape(__t))+"</a></li>      "),__p+='      <li data-action="sort_updated" data-checked="false" title="'+(null==(__t=i18n.t("SORT_UPDATED_TOOLTIP"))?"":_.escape(__t))+'" class="remove_button_style"><a href="#">'+(null==(__t=i18n.t("SORT_UPDATED"))?"":_.escape(__t))+"</a></li>      ",sortOptions.statusSort&&(__p+='      <li data-action="sort_status" data-checked="false" title="'+(null==(__t=i18n.t("SORT_STATUS_TOOLTIP"))?"":_.escape(__t))+'" class="remove_button_style"><a href="#">'+(null==(__t=i18n.t("SORT_STATUS"))?"":_.escape(__t))+"</a></li>      "),__p+="      ",sortOptions.expirySort&&(__p+='      <li data-action="sort_expiry" data-checked="false" title="'+(null==(__t=i18n.t("SORT_EXPIRY_TOOLTIP"))?"":_.escape(__t))+'" class="remove_button_style"><a href="#">'+(null==(__t=i18n.t("SORT_EXPIRY"))?"":_.escape(__t))+"</a></li>      "),__p+="      ",sortOptions.connectorSort&&(__p+='      <li data-action="sort_connector" data-checked="false" title="'+(null==(__t=i18n.t("SORT_CONNECTOR_TOOLTIP"))?"":_.escape(__t))+'" class="remove_button_style"><a href="#">'+(null==(__t=i18n.t("SORT_CONNECTOR"))?"":_.escape(__t))+"</a></li>      "),__p+="    "),__p+="     ",sortOptions.dateCreatedSort&&(__p+='      <li data-action="sort_created" data-checked="false" title="'+(null==(__t=i18n.t("SORT_DATE_CREATED_TOOLTIP"))?"":_.escape(__t))+'" class="remove_button_style"><a href="#">'+(null==(__t=i18n.t("SORT_DATE_CREATED"))?"":_.escape(__t))+"</a></li>    "),__p+="   ",sortOptions.dateCompletedSort&&(__p+='      <li data-action="sort_updated" data-checked="false" title="'+(null==(__t=i18n.t("SORT_DATE_COMPLETED_TOOLTIP"))?"":_.escape(__t))+'" class="remove_button_style"><a href="#">'+(null==(__t=i18n.t("SORT_DATE_COMPLETED"))?"":_.escape(__t))+"</a></li>    "),__p+="    ",sortOptions.performanceSort&&(__p+='      <div class="ui-menu-divider menu-header"><span>'+(null==(__t=i18n.t("ASSET_PERF_LABEL"))?"":_.escape(__t))+'</span></div>      <li data-action="sort_views" data-checked="false" title="'+(null==(__t=i18n.t("SORT_VIEWS_TOOLTIP"))?"":_.escape(__t))+'" class="remove_button_style"><a href="#">'+(null==(__t=i18n.t("SORT_VIEWS"))?"":_.escape(__t))+'</a></li>      <li data-action="sort_trend" data-checked="false" title="'+(null==(__t=i18n.t("SORT_TREND_TOOLTIP"))?"":_.escape(__t))+'" class="remove_button_style"><a href="#">'+(null==(__t=i18n.t("SORT_TREND"))?"":_.escape(__t))+"</a></li>    "),__p+="  </ul></span>"),__p+="",languageFilterOptions.show&&(__p+='<span class="containerview-language-filter" >  <span role="status" class="containerview-language-filter-status offscreen"></span>  <button title="" class="containerview-language-filter-button containerview-toolbar-button dropmenu_button" value="'+(null==(__t=languageFilterValue)?"":_.escape(__t))+'"></button>  <ul class="dropmenu_topmenu">    ',languageFilterOptions.custom&&_.isArray(languageFilterOptions.custom)&&(__p+="      ",_.each(languageFilterOptions.custom,(function(e){__p+='        <li data-action="show_'+(null==(__t=e.id||"")?"":_.escape(__t))+'" data-checked="false"  title="'+(null==(__t=e.name||"")?"":_.escape(__t))+'" class="remove_button_style"><a href="#">'+(null==(__t=e.name||"")?"":_.escape(__t))+"</a></li>        ",e.seperator&&(__p+='          <div class="ui-menu-divider"></div>        '),__p+="      "})),__p+="    "),__p+="  </ul></span>"),__p+="";return __p}})),define("common/container/view/LayoutSwitchModel",["jquery","underscore","knockout","core/util/Globals","core/embedapi/EmbedApi","core/apm/apmHelper","ojs/ojbutton"],(function(e,t,i,docs,n,o){"use strict";var s=docs.i18n,a=docs.common.Globals,r={card:{id:"layout_card",label:s.t("LAYOUT_GRID"),icon:"oj-ux-ico-grid-view-large"},list:{id:"layout_list",label:s.t("LAYOUT_LIST"),icon:"oj-ux-ico-list"},table:{id:"layout_table",label:s.t("LAYOUT_TABLE"),icon:"oj-ux-ico-list-bulleted"},perf:{id:"layout_perf",label:s.t("LAYOUT_PERFORMANCE"),icon:"oj-ux-ico-chart"}};return function(e){var s=e.contextActions,l=e.layoutOptions||{},c=s.containerLayout();this.i18n=docs.i18n,this.layouts=[],this.ojColorInvert="dark"===a.UITheme?"oj-color-invert":"",t.each(r,function(e,t){l[t]&&this.layouts.push(e)}.bind(this)),this.layout=i.observable(c||this.layouts[0]),i.computed((function(){var e=this.layout();s.setContainerLayout(e),n.events.layoutChanged(e),o.setViewMetaData("layout",e)}),this)}})),define("text!common/container/templates/LayoutSwitchBtns.html",[],(function(){return'<div class="layout-switch-btns-wrapper">\n    <oj-buttonset-one chroming="outlined" class="oj-buttonset-width-auto oj-button-sm" :class="[[ojColorInvert]]" value="{{layout}}" display="icons">\n        \n        <oj-bind-for-each data="[[layouts]]">\n            <template>\n            <oj-option value="[[$current.data.id]]" :data-action="[[$current.data.id]]">\n                <span slot="startIcon" :class="[[$current.data.icon]]"></span>\n                <span>\n                    <oj-bind-text value="[[$current.data.label]]"></oj-bind-text>\n                </span>\n            </oj-option>\n            </template>\n        </oj-bind-for-each>\n    </oj-buttonset-one>\n</div>'})),define("common/container/view/ToolbarButtonsView",["jquery","underscore","backbone","knockout","core/embedapi/EmbedApi","core/view/SearchBoxView","docs/container/template/ToolbarButtonsView.template","common/container/view/LayoutSwitchModel","text!common/container/templates/LayoutSwitchBtns.html","core/apm/apmHelper","core/util/FeatureFlags","common/plugin/jquery.ui.dropmenu","jqueryui-amd/widgets/button"],(function(e,t,i,n,o,s,a,r,l,c){"use strict";return docs.views.ToolbarButtonsView=i.View.extend({initialize:function(e){return this.options=e||{},this.options.languageFilterOptions=this.options.languageFilterOptions||{},t.bindAll(this,"render","sortMenuItemClicked","updateSortMenuItems","pageSizeMenuItemClicked","updatePageSizeMenuItems","filterMenuItemClicked","updateFilterMenuItems","updateDisplayedLanguageFilterValue","updateLanguageFilterMenuItems","languageFilterValueChanged","languageFilterMenuItemClicked"),this.render()},render:function(){var e=this.options.sortOptions||{};this.options.languageFilterOptions.custom=[{id:"existing_languages",name:docs.i18n.t("SHOW_EXISTING_LANGUAGES")},{id:"repository_languages",name:docs.i18n.t("SHOW_REPOSITORY_LANGUAGES")}],this.options.contextActions.container&&this.options.contextActions.container.get("masterAsset")&&this.options.contextActions.container.get("masterAsset")&&this.options.contextActions.container.get("masterAsset").get("channels")&&this.options.contextActions.container.get("masterAsset").get("channels").data&&this.options.contextActions.container.get("masterAsset").get("channels").data.length>0&&this.options.languageFilterOptions.custom.push({id:"targeted_channels",name:docs.i18n.t("ALL_TARGETED_CHANNELS"),seperator:!0}),this.options.contextActions.repository&&this.options.contextActions.repository.get("channels")&&this.options.contextActions.repository.get("channels").length>0&&t.each(this.options.contextActions.repository.get("channels"),(function(e){t.isEmpty(e.localizationPolicy)||this.options.languageFilterOptions.custom.push(e)}),this);var i=a({i18n:docs.i18n,sortValue:this.options.contextActions.containerSort(),layoutValue:this.options.contextActions.containerLayout(),pageSizeValue:this.options.contextActions.getContainerPageSize(),filterValue:this.options.contextActions.getContainerFilter(),sortOptions:e,layoutOptions:this.options.layoutOptions||{},pagerOptions:this.options.pagerOptions||[],filterOptions:this.options.filterOptions||{},searchOptions:this.options.searchOptions,languageFilterValue:this.options.contextActions.containerLanguageFilter(),languageFilterOptions:this.options.languageFilterOptions});this.$el.html(i);var o=this.options.layoutOptions||{};if(t.filter(o).length>1&&(this.$el.append(l),this.knockoutModel=new r({contextActions:this.options.contextActions,layoutOptions:this.options.layoutOptions}),n.applyBindings(this.knockoutModel,this.$el.find(".layout-switch-btns-wrapper")[0])),this.options.searchOptions){var c=t.debounce((function(e){var t=this.containerViewSearch.getText();this.model.set("searchTerm",t),this.model.items.pagerData&&this.model.items.pagerData.reset(),docs.views.ContainerViewDetail.prototype.skipFocusOnRender=!0,this.fetchDfd&&"pending"===this.fetchDfd.state()&&(this.fetchDfd.fail((function(e){e.errorHandled=!0})),this.fetchDfd.abort()),this.fetchDfd=this.model.items.fetch()}),300);this.containerViewSearch=new s({fieldId:"containerSearch",model:this.model,initialValue:this.model.get("searchTerm"),placeholderText:this.options.searchOptions.placeholder,disableSearchBtn:!0,clearFn:c.bind(this),typingFn:c.bind(this),shortHeight:!0,selectTextOnFocus:!1}),this.containerViewSearch.render(),this.$(".containerview-search").html(this.containerViewSearch.$el)}this.$(".containerview-sort").dropmenu({align:"right",select:this.sortMenuItemClicked,dropdown:this.updateSortMenuItems});var h=this.options.contextActions.containerSort(void 0,e.defaultSortOrder?e.defaultSortOrder:"sort_nameasc"),d=this.$('[data-action="'+h+'"]');if(this.updateDisplayedSortValue(void 0,{item:d[0]}),this.options.contextActions.container&&this.listenTo(this.options.contextActions.container,"change:sortOrder",this.sortValueChanged),this.options.pagerOptions&&this.options.pagerOptions.length>1)if(this.$(".containerview-pagesize").dropmenu({align:"right",select:this.pageSizeMenuItemClicked,dropdown:this.updatePageSizeMenuItems}),h=this.options.contextActions.getContainerPageSize()||50,(d=this.$('li[data-action="'+h+'"]')).length>0){var u=d.text(),p=d.attr("title");this.updateDisplayedPageSizeValue(h,u,p)}else this.updateDisplayedPageSizeValue(h,h,h);if(this.options.filterOptions&&this.options.filterOptions.items&&this.options.filterOptions.items.length>1)if(this.$(".containerview-filter-list").dropmenu({align:"right",select:this.filterMenuItemClicked,dropdown:this.updateFilterMenuItems}),h=this.options.contextActions.getContainerFilter()||"filter_all",(d=this.$('li[data-action="'+h+'"]')).length>0){var m=d.text(),_=d.attr("title");this.updateDisplayedFilterValue(h,m,_)}else this.updateDisplayedFilterValue(h,h,h);return this.$(".containerview-language-filter").dropmenu({align:"right",select:this.languageFilterMenuItemClicked,dropdown:this.updateLanguageFilterMenuItems}),h="show_existing_languages",d=this.$('[data-action="'+h+'"]'),this.updateDisplayedLanguageFilterValue(void 0,{item:d[0]}),this.options.contextActions.container&&this.listenTo(this.options.contextActions.container,"change:languageFilter",this.languageFilterValueChanged),this},updateSortMenuItems:function(){var e=this.$(".containerview-sort button").val();this.$(".containerview-sort [data-action]").attr("data-checked","false"),this.$('.containerview-sort [data-action="'+e+'"]').attr("data-checked","true")},updateDisplayedSortValue:function(t,i){var n=e(i.item).data("action"),s=e(i.item).text(),a=e(i.item).attr("title");return this.$(".containerview-sort .dropmenu_button").val(n).attr({title:a}).button("option","label",s),this.$(".containerview-sort .containerview-sort-status").text(a),this.$(".containerview-sort").dropmenu("changeAriaContext",docs.i18n.t("SORT_MENU_LABEL",s)),o.events.sortChanged(n),c.setViewMetaData("sort",n),n},sortMenuItemClicked:function(e,t){var i=this.updateDisplayedSortValue(e,t);this.options.contextActions.containerSort(i),this.options.contextActions.container&&this.options.contextActions.container.set("sortOrder",i)},sortValueChanged:function(e,t){var i=this.$('[data-action="'+t+'"]');this.updateDisplayedSortValue(void 0,{item:i})},updatePageSizeMenuItems:function(){var e=this.$(".containerview-pagesize button").val();this.$(".containerview-pagesize [data-action]").attr("data-checked","false"),this.$('.containerview-pagesize [data-action="'+e+'"]').attr("data-checked","true")},updateDisplayedPageSizeValue:function(e,t,i){this.$(".containerview-pagesize .dropmenu_button").val(e).attr({title:i}).attr("aria-label",docs.i18n.t("UI_DROPDOWN_MENU_LABEL",t)).button("option","label",t),this.$(".containerview-pagesize .containerview-pagesize-status").text(i)},pageSizeMenuItemClicked:function(t,i){var n=e(i.item).data("action"),o=e(i.item).text(),s=e(i.item).attr("title");this.updateDisplayedPageSizeValue(n,o,s),this.options.contextActions.setContainerPageSize(n),this.options.contextActions.container&&this.options.contextActions.container.set("pageSize",n)},updateFilterMenuItems:function(){var e=this.$(".containerview-filter-list button").val();this.$(".containerview-filter-list [data-action]").attr("data-checked","false"),this.$('.containerview-filter-list [data-action="'+e+'"]').attr("data-checked","true")},updateDisplayedFilterValue:function(e,t,i){this.$(".containerview-filter-list .dropmenu_button").val(e).attr({title:i}).button("option","label",t),this.$(".containerview-filter-list .containerview-filter-status").text(i),this.$(".containerview-filter-list").dropmenu("changeAriaContext",docs.i18n.t("FILTER_MENU_LABEL",t)),c.setViewMetaData("filter",e)},filterMenuItemClicked:function(t,i){var n=e(i.item).data("action"),o=e(i.item).text(),s=e(i.item).attr("title");if(this.updateDisplayedFilterValue(n,o,s),this.options.contextActions.setContainerFilter(n),this.options.contextActions.container){n=n.slice(7);var a=docs.common.UrlParams.getConfigUrlPart(this.options.urlParams);a+=docs.common.UrlParams.getViewConfigUrlPart(this.options.urlParams);var r=this.options.filterOptions.base+"/"+n+a;docs.router.navigate(r,{trigger:!0,replace:!0,modelOptions:{searchTerm:this.model.get("searchTerm")}})}},languageFilterMenuItemClicked:function(e,t){var i=this.updateDisplayedLanguageFilterValue(e,t);this.options.contextActions.containerLanguageFilter(i),this.options.contextActions.container&&this.options.contextActions.container.set("languageFilter",i)},languageFilterValueChanged:function(e,t){var i=this.$('[data-action="'+t+'"]');this.updateDisplayedLanguageFilterValue(void 0,{item:i})},updateLanguageFilterMenuItems:function(){var t=e(".containerview-language-filter button").val();e(".containerview-language-filter [data-action]").attr("data-checked","false"),e('.containerview-language-filter [data-action="'+t+'"]').attr("data-checked","true")},updateDisplayedLanguageFilterValue:function(t,i){var n=e(i.item).data("action"),o=e(i.item).text(),s=e(i.item).attr("title");return this.$(".containerview-language-filter .dropmenu_button").val(n).attr({title:s}).button("option","label",o),this.$(".containerview-language-filter .containerview-language-filter-status").text(s),this.$(".containerview-language-filter .dropmenu_button").attr("aria-label",docs.i18n.t("UI_DROPDOWN_MENU_LABEL",s)),n}}),docs.views.ToolbarButtonsView})),define("docs/container/template/ContainerViewDetail.template",["underscore"],(function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="containerview-toolbar">  <span class="containerview-check"><input class="containerview-allcheck" type="checkbox" role="checkbox" aria-checked="false" title="'+(null==(__t=i18n.t("GENERAL_CMD_SELECT_ALL"))?"":_.escape(__t))+'"/></span>  <span class="containerview-context-toolbar" role=\'menubar\'></span>  <span class="containerview-toolbar-buttons"></span></div><div class="containerview-context-menu"></div><div class="containerview-table-header"></div><div class="containerview-list '+(null==(__t=viewType)?"":_.escape(__t))+'" data-simplebar data-simplebar-direction="'+(null==(__t=docs.common.Globals.dir)?"":_.escape(__t))+'">  <ul class="containerview-items" role="listbox" tabindex="-1" aria-label="'+(null==(__t=listLabel)?"":_.escape(__t))+'"></ul>  <div class="containerview-pager"></div>  <div id="contextMenuHelp" class="offscreen"></div></div>';return __p}})),define("docs/container/tableview/NameAndDescTableCellView.template",["underscore"],(function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<span class=\'containerview-table-cell name-and-desc-cell rowView compact\'>  <span class="containerview-thumbnail"></span>  <span class="containerview-content-area noDescription">    <span class="containerview-textarea1">      <span class="containerview-name">            <span class="nameStart">'+(null==(__t=nameStart)?"":__t)+'</span><span class="nameEnd">'+(null==(__t=nameEnd)?"":__t)+'</span>            <a href="#" title="'+(null==(__t=name)?"":_.escape(__t))+'" aria-label="'+(null==(__t=name)?"":_.escape(__t))+'" class="text_button containerview-openClick '+(null==(__t=classes)?"":_.escape(__t))+'"><span class="nameStart">'+(null==(__t=nameStart)?"":__t)+'</span><span class="nameEnd">'+(null==(__t=nameEnd)?"":__t)+'</span></a>      </span>      <div class="restoration-scheduled-flag" style="display:none">        <div class="scheduled-flag-wrapper">          <span class="scheduled-text">'+(null==(__t=docs.i18n.t("ASSET_STATUS_RESTORATION_SCHEDULED"))?"":_.escape(__t))+'</span>        </div>      </div>    </span>    <span class="containerview-textarea2">      <span class="containerview-description" title="'+(null==(__t=description)?"":_.escape(__t))+'">'+(null==(__t=description)?"":_.escape(__t))+"</span>    </span>  </span></span>";return __p}})),define("common/container/tableview/NameAndDescTableCellView",["jquery","underscore","backbone","core/util/Globals","core/util/Utils","common/container/view/ContainerThumbView","docs/container/tableview/NameAndDescTableCellView.template"],(function(e,t,i,docs,n,o,s){"use strict";var a=docs.common.Globals;return i.View.extend({initialize:function(e){return this.options=e||{},this.options.template=s,this.listenTo(this.model,"remove",this.onRemove),this.listenTo(this.model,"destroy",this.onRemove),this.listenTo(this.model,"offPage",this.onRemove),this.listenTo(this.model,"change:name",this.nameChange),this},render:function(){var e=this.model.collection.container.get("sortOrder"),i=this.options.column,s=i.classes||"";e&&t.isArray(i.sort)&&i.sort.length>0&&-1!==i.sort[0].indexOf(e)&&(s+=" table-cell-sorted");var r=n.splitDisplayNameForEllipsisInMiddle(this.options.column.getValue?this.options.column.getValue(this.model,this.options):this.model.get("name"));this.setElement(this.options.template({i18n:docs.i18n,name:this.getValue(),description:this.model.get("description"),nameStart:r[0],nameEnd:r[1],classes:s,isRestorationScheduled:this.model.get("isRestoreScheduled")}));var l=this.model.getThumbnailUrl(!1,!1,!1,!0),c="function"==typeof this.model.modelType&&this.model.modelType(),h=!(!c||"queueItem"!==c),d={thumbnailTitle:t.unescape(this.model.get("name"))+(this.model.get("description")?": \n"+this.model.get("description"):""),nameTitle:docs.i18n.t("CONTAINER_ITEM_NAME_TITLE",this.model.get("name")),thumbnailSrc:h?l:a.staticRoot+"images/spacer.png",errorImg:l};return this.model.iconColor&&(d.iconMap=!0),this.options.column.showDescription&&this.$(".containerview-content-area").removeClass("noDescription"),this.thumbView=new o({tableView:!0,largeThumbs:!1,noCenterThumb:!0,model:this.model,renderData:d,deferThumb:h}),this.$(".containerview-thumbnail").html(this.thumbView.el),this.thumbView.flagsChange(),this.$(".containerview-openClick").on("click",this.onOpenClick.bind(this)),this.$(".containerview-thumbClick").on("click",this.onOpenClick.bind(this)),this},updateDeferredThumb:function(){this.thumbView.thumbChanged({renderDeferredThumb:!0})},onOpenClick:function(e){e.preventDefault(),e.stopPropagation();var t=this.options.parentView.getFocusItem();this.options.parentView.$el.hasClass("containerview-no-open")||this.model.get("flags")&&this.model.get("flags").isInTrash?docs.events.trigger("containerItem:selectItem",t,e):docs.events.trigger("containerItem:openItem",t,e)},onCloseView:function(){this.thumbView&&(this.thumbView.close(),delete this.thumbView)},onRemove:function(){this.thumbView&&(this.thumbView.remove(),delete this.thumbView)},getValue:function(){return this.options.column.getValue?this.options.column.getValue(this.model,this.options):t.unescape(this.model.get("name"))},nameChange:function(){var e=this.getValue(),t=n.splitDisplayNameForEllipsisInMiddle(this.getValue());this.$(".containerview-name a").attr({title:e,"aria-label":e}),this.$(".containerview-name .nameStart").html(t[0]),this.$(".containerview-name .nameEnd").html(t[1])}})})),define("docs/container/tableview/CapsuleTableCellView.template",["underscore"],(function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="<span class='containerview-table-cell flex'>",value.length>0&&(__p+='<span class="'+(null==(__t=className)?"":_.escape(__t))+'" title="'+(null==(__t=value)?"":_.escape(__t))+'">'+(null==(__t=value)?"":_.escape(__t))+"</span>"),__p+="</span>";return __p}})),define("common/container/tableview/CapsuleTableCellView",["jquery","underscore","backbone","core/util/Globals","docs/container/tableview/CapsuleTableCellView.template"],(function(e,t,i,docs,n){"use strict";return i.View.extend({initialize:function(e){return this.options=e||{},this},render:function(){var e=this.options.column.className||"capsule",t=this.model;return(t.get("extension")||"DigitalAsset"===t.get("contentType"))&&(e+=" filetype-extension-text"),this.setElement(n({i18n:docs.i18n,model:t,className:e,value:this.options.column.getValue(t)})),this}})})),define("docs/container/tableview/ContainerTableCellView.template",["underscore"],(function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="<span class='containerview-table-cell cv-table-cell-value "+(null==(__t=classes)?"":_.escape(__t))+"' title='"+(null==(__t=title&&title.length?title:"")?"":_.escape(__t))+"'>",value&&value.length>0&&(__p+=""+(null==(__t=value)?"":_.escape(__t))),__p+="</span>";return __p}})),define("common/container/tableview/DateTableCellView",["jquery","underscore","backbone","core/util/Globals","docs/container/tableview/ContainerTableCellView.template"],(function(e,t,i,docs,n){"use strict";var o=docs.common.Globals;return i.View.extend({initialize:function(e){return this.options=e||{},this},render:function(){var t,i=this.model.collection.container.get("sortOrder"),s=this.options.column,a=s.classes||"";let r=this.model.get(this.options.column.dateField);return r&&r.value&&(r=r.value),t=r.length>0?e.naturalDate(r,o.userTimeZone,{dateOnlyAfterDaySpan:!0,midstring:!1}):docs.i18n.t("PENDING"),i&&-1!==s.sort[0].indexOf(i)&&(a+=" table-cell-sorted"),this.setElement(n({i18n:docs.i18n,model:this.model,classes:a,value:t,title:t})),this}})})),define("common/container/tableview/ContainerTableCellView",["jquery","underscore","backbone","core/util/Globals","docs/container/tableview/ContainerTableCellView.template"],(function(e,t,i,docs,n){"use strict";return i.View.extend({initialize:function(e){return this.options=e||{},this.model&&this.options.column.updateOnAttrChange&&this.listenTo(this.model,"change:"+this.options.column.updateOnAttrChange,this.updateValue),this},render:function(){var e=this.options.column.getValue(this.model,this.options);return this.setElement(n({i18n:docs.i18n,model:this.model,classes:this.options.column.classes||"",value:e,title:t.isFunction(this.options.column.getTitle)?this.options.column.getTitle(this.model,this.options):e})),this},updateValue:function(e,t){this.$el.text(t)}})})),define("common/container/tableview/UserNameTableCellView",["jquery","underscore","backbone","core/util/Globals","core/util/Utils","common/container/tableview/ContainerTableCellView","docs/container/tableview/ContainerTableCellView.template"],(function(e,t,i,docs,n,o,s){"use strict";return o.extend({render:function(){var e=this.options.column.userIdField,t=this.options.column.userNameField||e+"Name",i=n.isYou(this.model,e,this.options.column.forceUserLoginAsID)?sites.i18n.t("BY_YOU"):this.model.get(t);return this.setElement(s({i18n:docs.i18n,model:this.model,classes:this.options.column.classes||"",value:i,title:i})),this},updateValue:function(e,t){var i=n.isYou(this.model,this.options.column.userIdField,this.options.column.forceUserLoginAsID)?sites.i18n.t("BY_YOU"):t;this.$el.text(i)}})})),define("docs/container/tableview/ContainerTableRowView.template",["underscore"],(function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<li id="'+(null==(__t=row.get("id"))?"":_.escape(__t))+'" tabindex="0" class="containerview-item containerview-table-row skipTarget '+(null==(__t=data.rowClass)?"":_.escape(__t))+'" role="listitem" aria-describedby="contextMenuHelp">  <div class=\'scs-progress-bar\'></div>  <div class="containerview-table-row-content" aria-label="'+(null==(__t=data.rowLabel)?"":_.escape(__t))+'" role="group">    <span class="containerview-check custom-checkbox"><input type="checkbox" title="'+(null==(__t=data.chkTitle)?"":_.escape(__t))+'" /></span>  </div></li>';return __p}})),define("common/container/tableview/ContainerTableRowView",["jquery","underscore","backbone","core/util/Globals","common/container/view/ContainerItemView","common/container/tableview/NameAndDescTableCellView","common/container/tableview/CapsuleTableCellView","common/container/tableview/DateTableCellView","common/container/tableview/UserNameTableCellView","docs/container/tableview/ContainerTableRowView.template"],(function(e,t,i,docs,n,o,s,a,r,l){"use strict";docs.common.Globals;return n.extend({initialize:function(e){return(e=e||{}).template=l,e.largeThumbs=!1,e.noCenterThumb=!0,n.prototype.initialize.call(this,e),this.tableColumns=t.result(this.constructor,"tableColumns"),this.cells=[],this},getAriaLabel:function(){return docs.i18n.t("CONTENT_ITEM")+" "+this.model.get("name")},render:function(){n.prototype.render.call(this)},postRender:function(){t.each(this.tableColumns,function(e,i){if(this.cells[i]=new e.ContainerTableCellView(t.defaults({model:this.model,parentView:this,column:e,urlParams:this.options.urlParams},this.options)),this.cells[i].render(),e.width){var n=t.isFunction(e.width)?e.width(this.options.model):e.width;this.cells[i].$el.css({width:n,flex:"0 0 auto"})}else this.cells[i].$el.css({flex:"1 1 auto","min-width":"0"});this.cells[i].$el.addClass("cv-table-col-"+i),this.$(".containerview-table-row-content").append(this.cells[i].$el)}.bind(this))},onCloseView:function(){t.each(this.cells,(function(e){e.close()}))}},{nameColumn:{name:"name",label:docs.i18n.t("NAME"),tooltip:docs.i18n.t("SORT_NAMEASC_TOOLTIP"),ContainerTableCellView:o,sort:["sort_nameasc:asc"],priority:0},typeColumn:{name:"type",label:docs.i18n.t("TYPE"),ContainerTableCellView:s,className:"containerview-capsule-text"},createdColumn:{name:"created",label:docs.i18n.t("SORT_CREATED"),tooltip:docs.i18n.t("SORT_CREATED_TOOLTIP"),ContainerTableCellView:a,dateField:"createdAt",sort:["sort_created:dsc"],width:"150px"},lastUpdatedColumn:{name:"lastUpdated",label:docs.i18n.t("SORT_UPDATED"),tooltip:docs.i18n.t("SORT_UPDATED_TOOLTIP"),ContainerTableCellView:a,dateField:"modifiedAt",sort:["sort_updated:dsc"],width:"150px"},ownerColumn:{name:"owner",label:docs.i18n.t("PROP_OWNER"),classes:"owner",ContainerTableCellView:r,userIdField:"createdBy",width:"180px"},lastUpdatedByColumn:{name:"lastUpdatedBy",label:docs.i18n.t("SORT_UPDATED_BY"),classes:"owner",ContainerTableCellView:r,userIdField:"modifiedBy",width:"180px"},buildTableColumns:function(e){return t(e).map((function(e){return e.base?t.extend({},e.base,t.omit(e,"base")):e}))}})})),function(e){"use strict";"function"==typeof define&&define.amd?define("jqueryui-amd/jquery-var-for-color",["jquery","./version"],e):e(jQuery)}((function(e){"use strict"})),
/*!
 * jQuery Color Animations v2.2.0
 * https://github.com/jquery/jquery-color
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Sun May 10 09:02:36 2020 +0200
 */
function(e,t){"function"==typeof define&&define.amd?define("jqueryui-amd/vendor/jquery-color/jquery.color",["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(e.jQuery)}(this,(function(e,t){var i,n={},o=n.toString,s=/^([\-+])=\s*(\d+\.?\d*)/,a=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})?/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),e[4]?(parseInt(e[4],16)/255).toFixed(2):1]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])?/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),e[4]?(parseInt(e[4]+e[4],16)/255).toFixed(2):1]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],r=e.Color=function(t,i,n,o){return new e.Color.fn.parse(t,i,n,o)},l={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},c={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},h=r.support={},d=e("<p>")[0],u=e.each;function p(e){return null==e?e+"":"object"==typeof e?n[o.call(e)]||"object":typeof e}function m(e,t,i){var n=c[t.type]||{};return null==e?i||!t.def?null:t.def:(e=n.floor?~~e:parseFloat(e),isNaN(e)?t.def:n.mod?(e+n.mod)%n.mod:Math.min(n.max,Math.max(0,e)))}function _(t){var n=r(),o=n._rgba=[];return t=t.toLowerCase(),u(a,(function(e,i){var s,a=i.re.exec(t),r=a&&i.parse(a),c=i.space||"rgba";if(r)return s=n[c](r),n[l[c].cache]=s[l[c].cache],o=n._rgba=s._rgba,!1})),o.length?("0,0,0,0"===o.join()&&e.extend(o,i.transparent),n):i[t]}function g(e,t,i){return 6*(i=(i+1)%1)<1?e+(t-e)*i*6:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}d.style.cssText="background-color:rgba(1,1,1,.5)",h.rgba=d.style.backgroundColor.indexOf("rgba")>-1,u(l,(function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}})),e.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){n["[object "+t+"]"]=t.toLowerCase()})),r.fn=e.extend(r.prototype,{parse:function(n,o,s,a){if(n===t)return this._rgba=[null,null,null,null],this;(n.jquery||n.nodeType)&&(n=e(n).css(o),o=t);var c=this,h=p(n),d=this._rgba=[];return o!==t&&(n=[n,o,s,a],h="array"),"string"===h?this.parse(_(n)||i._default):"array"===h?(u(l.rgba.props,(function(e,t){d[t.idx]=m(n[t.idx],t)})),this):"object"===h?(u(l,n instanceof r?function(e,t){n[t.cache]&&(c[t.cache]=n[t.cache].slice())}:function(t,i){var o=i.cache;u(i.props,(function(e,t){if(!c[o]&&i.to){if("alpha"===e||null==n[e])return;c[o]=i.to(c._rgba)}c[o][t.idx]=m(n[e],t,!0)})),c[o]&&e.inArray(null,c[o].slice(0,3))<0&&(null==c[o][3]&&(c[o][3]=1),i.from&&(c._rgba=i.from(c[o])))}),this):void 0},is:function(e){var t=r(e),i=!0,n=this;return u(l,(function(e,o){var s,a=t[o.cache];return a&&(s=n[o.cache]||o.to&&o.to(n._rgba)||[],u(o.props,(function(e,t){if(null!=a[t.idx])return i=a[t.idx]===s[t.idx]}))),i})),i},_space:function(){var e=[],t=this;return u(l,(function(i,n){t[n.cache]&&e.push(i)})),e.pop()},transition:function(e,t){var i=r(e),n=i._space(),o=l[n],s=0===this.alpha()?r("transparent"):this,a=s[o.cache]||o.to(s._rgba),h=a.slice();return i=i[o.cache],u(o.props,(function(e,n){var o=n.idx,s=a[o],r=i[o],l=c[n.type]||{};null!==r&&(null===s?h[o]=r:(l.mod&&(r-s>l.mod/2?s+=l.mod:s-r>l.mod/2&&(s-=l.mod)),h[o]=m((r-s)*t+s,n)))})),this[n](h)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),o=r(t)._rgba;return r(e.map(i,(function(e,t){return(1-n)*o[t]+n*e})))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,(function(e,t){return null!=e?e:t>2?1:0}));return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),(function(e,t){return null==e&&(e=t>2?1:0),t&&t<3&&(e=Math.round(100*e)+"%"),e}));return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")"},toHexString:function(t){var i=this._rgba.slice(),n=i.pop();return t&&i.push(~~(255*n)),"#"+e.map(i,(function(e){return 1===(e=(e||0).toString(16)).length?"0"+e:e})).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),r.fn.parse.prototype=r.fn,l.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,n=e[0]/255,o=e[1]/255,s=e[2]/255,a=e[3],r=Math.max(n,o,s),l=Math.min(n,o,s),c=r-l,h=r+l,d=.5*h;return t=l===r?0:n===r?60*(o-s)/c+360:o===r?60*(s-n)/c+120:60*(n-o)/c+240,i=0===c?0:d<=.5?c/h:c/(2-h),[Math.round(t)%360,i,d,null==a?1:a]},l.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],n=e[2],o=e[3],s=n<=.5?n*(1+i):n+i-n*i,a=2*n-s;return[Math.round(255*g(a,s,t+1/3)),Math.round(255*g(a,s,t)),Math.round(255*g(a,s,t-1/3)),o]},u(l,(function(e,i){var n=i.props,o=i.cache,a=i.to,l=i.from;r.fn[e]=function(e){if(a&&!this[o]&&(this[o]=a(this._rgba)),e===t)return this[o].slice();var i,s=p(e),c="array"===s||"object"===s?e:arguments,h=this[o].slice();return u(n,(function(e,t){var i=c["object"===s?e:t.idx];null==i&&(i=h[t.idx]),h[t.idx]=m(i,t)})),l?((i=r(l(h)))[o]=h,i):r(h)},u(n,(function(t,i){r.fn[t]||(r.fn[t]=function(n){var o,a,r,l,c=p(n);return a=(o=this[l="alpha"===t?this._hsla?"hsla":"rgba":e]())[i.idx],"undefined"===c?a:("function"===c&&(c=p(n=n.call(this,a))),null==n&&i.empty?this:("string"===c&&(r=s.exec(n))&&(n=a+parseFloat(r[2])*("+"===r[1]?1:-1)),o[i.idx]=n,this[l](o)))})}))})),r.hook=function(t){var i=t.split(" ");u(i,(function(t,i){e.cssHooks[i]={set:function(t,n){var o,s,a="";if("transparent"!==n&&("string"!==p(n)||(o=_(n)))){if(n=r(o||n),!h.rgba&&1!==n._rgba[3]){for(s="backgroundColor"===i?t.parentNode:t;(""===a||"transparent"===a)&&s&&s.style;)try{a=e.css(s,"backgroundColor"),s=s.parentNode}catch(e){}n=n.blend(a&&"transparent"!==a?a:"_default")}n=n.toRgbaString()}try{t.style[i]=n}catch(e){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=r(t.elem,i),t.end=r(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}}))},r.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),e.cssHooks.borderColor={expand:function(e){var t={};return u(["Top","Right","Bottom","Left"],(function(i,n){t["border"+n+"Color"]=e})),t}},i=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})),
/*!
 * jQuery UI Effects 1.13.2
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
function(e){"use strict";"function"==typeof define&&define.amd?define("jqueryui-amd/effect",["jquery","./jquery-var-for-color","./vendor/jquery-color/jquery.color","./version"],e):e(jQuery)}((function(e){"use strict";var t,i="ui-effects-",n="ui-effects-style",o="ui-effects-animated";return e.effects={effect:{}},function(){var t,i=["add","remove","toggle"],n={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};function o(e){var t,i,n,o=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,s={};if(o&&o.length&&o[0]&&o[o[0]])for(i=o.length;i--;)"string"==typeof o[t=o[i]]&&(s[(n=t,n.replace(/-([\da-z])/gi,(function(e,t){return t.toUpperCase()})))]=o[t]);else for(t in o)"string"==typeof o[t]&&(s[t]=o[t]);return s}e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],(function(t,i){e.fx.step[i]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(jQuery.style(e.elem,i,e.end),e.setAttr=!0)}})),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(t,s,a,r){var l=e.speed(s,a,r);return this.queue((function(){var s,a=e(this),r=a.attr("class")||"",c=l.children?a.find("*").addBack():a;c=c.map((function(){return{el:e(this),start:o(this)}})),(s=function(){e.each(i,(function(e,i){t[i]&&a[i+"Class"](t[i])}))})(),c=c.map((function(){return this.end=o(this.el[0]),this.diff=function(t,i){var o,s,a={};for(o in i)s=i[o],t[o]!==s&&(n[o]||!e.fx.step[o]&&isNaN(parseFloat(s))||(a[o]=s));return a}(this.start,this.end),this})),a.attr("class",r),c=c.map((function(){var t=this,i=e.Deferred(),n=e.extend({},l,{queue:!1,complete:function(){i.resolve(t)}});return this.el.animate(this.diff,n),i.promise()})),e.when.apply(e,c.get()).done((function(){s(),e.each(arguments,(function(){var t=this.el;e.each(this.diff,(function(e){t.css(e,"")}))})),l.complete.call(a[0])}))}))},e.fn.extend({addClass:(t=e.fn.addClass,function(i,n,o,s){return n?e.effects.animateClass.call(this,{add:i},n,o,s):t.apply(this,arguments)}),removeClass:function(t){return function(i,n,o,s){return arguments.length>1?e.effects.animateClass.call(this,{remove:i},n,o,s):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(i,n,o,s,a){return"boolean"==typeof n||void 0===n?o?e.effects.animateClass.call(this,n?{add:i}:{remove:i},o,s,a):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:i},n,o,s)}}(e.fn.toggleClass),switchClass:function(t,i,n,o,s){return e.effects.animateClass.call(this,{add:i,remove:t},n,o,s)}})}(),function(){var t;function s(t,i,n,o){return e.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),"function"==typeof i&&(o=i,n=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(o=n,n=i,i={}),"function"==typeof n&&(o=n,n=null),i&&e.extend(t,i),n=n||i.duration,t.duration=e.fx.off?0:"number"==typeof n?n:n in e.fx.speeds?e.fx.speeds[n]:e.fx.speeds._default,t.complete=o||i.complete,t}function a(t){return!(t&&"number"!=typeof t&&!e.fx.speeds[t])||("string"==typeof t&&!e.effects.effect[t]||("function"==typeof t||"object"==typeof t&&!t.effect))}function r(e,t){var i=t.outerWidth(),n=t.outerHeight(),o=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/.exec(e)||["",0,i,n,0];return{top:parseFloat(o[1])||0,right:"auto"===o[2]?i:parseFloat(o[2]),bottom:"auto"===o[3]?n:parseFloat(o[3]),left:parseFloat(o[4])||0}}e.expr&&e.expr.pseudos&&e.expr.pseudos.animated&&(e.expr.pseudos.animated=(t=e.expr.pseudos.animated,function(i){return!!e(i).data(o)||t(i)})),!1!==e.uiBackCompat&&e.extend(e.effects,{save:function(e,t){for(var n=0,o=t.length;n<o;n++)null!==t[n]&&e.data(i+t[n],e[0].style[t[n]])},restore:function(e,t){for(var n,o=0,s=t.length;o<s;o++)null!==t[o]&&(n=e.data(i+t[o]),e.css(t[o],n))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),float:t.css("float")},n=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),o={width:t.width(),height:t.height()},s=document.activeElement;try{s.id}catch(e){s=document.body}return t.wrap(n),(t[0]===s||e.contains(t[0],s))&&e(s).trigger("focus"),n=t.parent(),"static"===t.css("position")?(n.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],(function(e,n){i[n]=t.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")})),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(o),n.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).trigger("focus")),t}}),e.extend(e.effects,{version:"1.13.2",define:function(t,i,n){return n||(n=i,i="effect"),e.effects.effect[t]=n,e.effects.effect[t].mode=i,n},scaledDimensions:function(e,t,i){if(0===t)return{height:0,width:0,outerHeight:0,outerWidth:0};var n="horizontal"!==i?(t||100)/100:1,o="vertical"!==i?(t||100)/100:1;return{height:e.height()*o,width:e.width()*n,outerHeight:e.outerHeight()*o,outerWidth:e.outerWidth()*n}},clipToBox:function(e){return{width:e.clip.right-e.clip.left,height:e.clip.bottom-e.clip.top,left:e.clip.left,top:e.clip.top}},unshift:function(e,t,i){var n=e.queue();t>1&&n.splice.apply(n,[1,0].concat(n.splice(t,i))),e.dequeue()},saveStyle:function(e){e.data(n,e[0].style.cssText)},restoreStyle:function(e){e[0].style.cssText=e.data(n)||"",e.removeData(n)},mode:function(e,t){var i=e.is(":hidden");return"toggle"===t&&(t=i?"show":"hide"),(i?"hide"===t:"show"===t)&&(t="none"),t},getBaseline:function(e,t){var i,n;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=e[1]/t.width}return{x:n,y:i}},createPlaceholder:function(t){var n,o=t.css("position"),s=t.position();return t.css({marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()),/^(static|relative)/.test(o)&&(o="absolute",n=e("<"+t[0].nodeName+">").insertAfter(t).css({display:/^(inline|ruby)/.test(t.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight"),float:t.css("float")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).addClass("ui-effects-placeholder"),t.data(i+"placeholder",n)),t.css({position:o,left:s.left,top:s.top}),n},removePlaceholder:function(e){var t=i+"placeholder",n=e.data(t);n&&(n.remove(),e.removeData(t))},cleanUp:function(t){e.effects.restoreStyle(t),e.effects.removePlaceholder(t)},setTransition:function(t,i,n,o){return o=o||{},e.each(i,(function(e,i){var s=t.cssUnit(i);s[0]>0&&(o[i]=s[0]*n+s[1])})),o}}),e.fn.extend({effect:function(){var t=s.apply(this,arguments),i=e.effects.effect[t.effect],n=i.mode,a=t.queue,r=a||"fx",l=t.complete,c=t.mode,h=[],d=function(t){var i=e(this),s=e.effects.mode(i,c)||n;i.data(o,!0),h.push(s),n&&("show"===s||s===n&&"hide"===s)&&i.show(),n&&"none"===s||e.effects.saveStyle(i),"function"==typeof t&&t()};if(e.fx.off||!i)return c?this[c](t.duration,l):this.each((function(){l&&l.call(this)}));function u(s){var a=e(this);function r(){"function"==typeof l&&l.call(a[0]),"function"==typeof s&&s()}t.mode=h.shift(),!1===e.uiBackCompat||n?"none"===t.mode?(a[c](),r()):i.call(a[0],t,(function(){a.removeData(o),e.effects.cleanUp(a),"hide"===t.mode&&a.hide(),r()})):(a.is(":hidden")?"hide"===c:"show"===c)?(a[c](),r()):i.call(a[0],t,r)}return!1===a?this.each(d).each(u):this.queue(r,d).queue(r,u)},show:function(e){return function(t){if(a(t))return e.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="show",this.effect.call(this,i)}}(e.fn.show),hide:function(e){return function(t){if(a(t))return e.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="hide",this.effect.call(this,i)}}(e.fn.hide),toggle:function(e){return function(t){if(a(t)||"boolean"==typeof t)return e.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)}}(e.fn.toggle),cssUnit:function(t){var i=this.css(t),n=[];return e.each(["em","px","%","pt"],(function(e,t){i.indexOf(t)>0&&(n=[parseFloat(i),t])})),n},cssClip:function(e){return e?this.css("clip","rect("+e.top+"px "+e.right+"px "+e.bottom+"px "+e.left+"px)"):r(this.css("clip"),this)},transfer:function(t,i){var n=e(this),o=e(t.to),s="fixed"===o.css("position"),a=e("body"),r=s?a.scrollTop():0,l=s?a.scrollLeft():0,c=o.offset(),h={top:c.top-r,left:c.left-l,height:o.innerHeight(),width:o.innerWidth()},d=n.offset(),u=e("<div class='ui-effects-transfer'></div>");u.appendTo("body").addClass(t.className).css({top:d.top-r,left:d.left-l,height:n.innerHeight(),width:n.innerWidth(),position:s?"fixed":"absolute"}).animate(h,t.duration,t.easing,(function(){u.remove(),"function"==typeof i&&i()}))}}),e.fx.step.clip=function(t){t.clipInit||(t.start=e(t.elem).cssClip(),"string"==typeof t.end&&(t.end=r(t.end,t.elem)),t.clipInit=!0),e(t.elem).cssClip({top:t.pos*(t.end.top-t.start.top)+t.start.top,right:t.pos*(t.end.right-t.start.right)+t.start.right,bottom:t.pos*(t.end.bottom-t.start.bottom)+t.start.bottom,left:t.pos*(t.end.left-t.start.left)+t.start.left})}}(),t={},e.each(["Quad","Cubic","Quart","Quint","Expo"],(function(e,i){t[i]=function(t){return Math.pow(t,e+2)}})),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;e<((t=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,(function(t,i){e.easing["easeIn"+t]=i,e.easing["easeOut"+t]=function(e){return 1-i(1-e)},e.easing["easeInOut"+t]=function(e){return e<.5?i(2*e)/2:1-i(-2*e+2)/2}})),e.effects})),define("common/container/view/ContainerViewDetail",["jquery","underscore","backbone","core/osnGlobals","core/util/Globals","core/util/Service","core/util/Utils","common/container/model/ContextActions","common/container/view/ContextMenuView","common/container/view/ContextToolbarView","common/container/view/TableHeaderView","common/container/view/PagerView","common/container/config","common/upload/Manager","core/embedapi/EmbedApi","core/util/UrlParams","core/util/Browser","core/util/Logger","core/dialog/MessageDialog","common/container/view/ToolbarButtonsView","common/notification/view/ProgressBar","common/notification/model/TimeredProgressable","docs/container/template/ContainerViewDetail.template","common/container/tableview/ContainerTableRowView","core/plugin/jquery.ui.checkbox","core/plugin/jquery.storage","jqueryui-amd/effect"],(function(e,t,i,osn,docs,n,o,s,a,r,l,c,h,d,u,p,m,_,g,f,v,b,w){"use strict";var T=docs.common.Globals,E={},I="left";return docs.views.ContainerViewDetail=i.View.extend({initialToolbarTop:T.embed?60:95,itemUploader:!0,events:{"keydown .containerview-list":"keydownOnList"},itemMainFocus:".containerview-item",activeFocusItems:".containerview-check input, button, a, .containerview-openClick, [role='button'], .focus-when-active",skipFocusOnRender:!1,initialize:function(i){this.options=i||{},delete this.options.el,this.options.urlParams=this.options.urlParams||{},this.options.layoutOptions=this.options.layoutOptions||{},this.options.listLabel=this.options.listLabel||docs.i18n.t("ITEMS_LIST_LABEL"),t.bindAll(this,"onResize","allCheckClick","resizeFinished","shortestColumn","longestColumn","determineColumn","tileImages","incomingRevision","incomingRevisionSwap","adjustColumnAddTile","adjustColumnRemoveTile","adjustContainerHeight","initTilePositions","moveToItem","updateTabItemEntry","itemSelected","itemOpened","showContextMenu","itemIsMine","removingView","buildTableQueries","cleanUpTableViewQueries"),this.pagerNumString="PAGER_NUMBER_LINK_TEXT",this.listenTo(this.collection,"sync",this.onSync),this.listenTo(this.collection,"add",this.addNewItem),this.listenTo(this.collection,"remove",this.onRemove),this.options.updateStatusMetadata&&this.listenTo(this.model,"change:sortOrder",this.sortOrderChangeHandler),this.containerView=i.containerView,this.contextActions=i.contextActions||new s;const n=Boolean(this.options.layout);n&&(this.contextActions.setContainerLayout(this.options.layout),delete this.options.layout);const o=this.options.layoutOptions;let a=this.contextActions.containerLayout(),r=a&&t.isString(a)?a.slice(a.indexOf("_")+1):void 0;if(this.options.availableLayouts&&this.options.availableLayouts.length){const e=this.options.availableLayouts.indexOf("grid");e>-1&&this.options.availableLayouts.splice(e,1,"card"),n&&"grid"===r&&(r="card",a="layout_card",this.contextActions.setContainerLayout(this.options.layout,!0));const i=t.contains(this.options.availableLayouts,"none");if(t.isUndefined(r)||!t.has(o,r)||!o[r]){let e;i||(e=t.find(this.options.availableLayouts,(e=>o[e]))),r=e||t.findKey(o,(e=>e)),a=`layout_${r}`,this.contextActions.setContainerLayout(a,!0)}!n||i||t.contains(this.options.availableLayouts,r)||this.options.availableLayouts.push("grid"===r?"card":r),t.each(o,((e,n)=>{i&&n!==r?o[n]=!1:i||(o[n]=e&&t.contains(this.options.availableLayouts,n))}))}if("layout_compact"!==a||t.isUndefined(o.compact)||o.compact)if("layout_list"!==a||t.isUndefined(o.list)||o.list)if("layout_card"!==a||t.isUndefined(o.card)||o.card)if("layout_table"!==a||t.isUndefined(o.table)||o.table||!o.list){if("layout_grid"===a&&!t.isUndefined(o.card)&&o.card)this.contextActions.setContainerLayout("layout_card",!0);else if(r&&!t.isUndefined(o[r])&&!o[r]){var l=t.findKey(o,(function(e){return e}));this.contextActions.setContainerLayout("layout_"+l,!0)}}else this.contextActions.setContainerLayout("layout_list",!0);else this.contextActions.setContainerLayout("layout_list",!0);else this.contextActions.setContainerLayout("layout_card",!0);else this.contextActions.setContainerLayout(o.table?"layout_table":"layout_list",!0);(o.tile||o.smalltile)&&(a=this.contextActions.containerLayout(),"layout_smalltile"===a?this.tileWidth=228:(this.contextActions.setContainerLayout("layout_tile",!0),this.tileWidth=300)),a=this.contextActions.containerLayout(),"layout_tile"!==a&&"layout_smalltile"!==a&&"layout_grid"!==a||!o.card||this.contextActions.setContainerLayout("layout_card",!0),a=this.contextActions.containerLayout(),this.gridView="layout_grid"===a,this.compactView="layout_compact"===a,this.tileView="layout_tile"===a||"layout_smalltile"===a,this.cardView="layout_card"===a,this.tableView="layout_table"===a,this.performanceView="layout_perf"===a,this.contextActions.setContainer(this.collection.container),this.listenTo(this.contextActions,"clearSelection",this._handleClearSelection),this.listenTo(this.contextActions,"setSelection",this._handleSetSelection),this.listenTo(docs.events,"embedapi:clearSelection",this._handleClearSelection),this.listenTo(docs.events,"embedapi:selectItem",this._handleSelectItem),this.listenTo(docs.events,"embedapi:clearItem",this._handleClearItem),this.listenTo(docs.events,"folder:movecopy",this._handleMoveCopy),this.listenTo(docs.events,"movecopyfailed",this._handleMoveCopy),this.listenTo(docs.events,"action:toggleSidebar",this.onResize,this),this.listenTo(osn.events,"navbar:toggled",this.onResize),this.listenTo(docs.events,"osn:chatUpdated",this.chatUpdated,this),this.listenTo(docs.events,"TileView:ImageLoaded",this.tileImages),this.listenTo(this.model,"incomingRevision",this.incomingRevision),this.listenTo(this.model,"incomingRevisionSwap",this.incomingRevisionSwap),this.listenTo(docs.events,"Asset:incomingRevisionSwap",this.incomingRevisionSwap),this.listenTo(docs.events,"DAM:updateAssetThumb",this.incomingRevisionSwap),this.listenTo(docs.events,"containerItem:move",this.moveToItem),this.listenTo(docs.events,"containerItem:focusItem",this.updateTabItemEntry),this.listenTo(docs.events,"containerItem:selectItem",this.itemSelected),this.listenTo(docs.events,"containerItem:openItem",this.itemOpened),this.listenTo(docs.events,"containerItem:showContextMenu",this.showContextMenu),this.listenTo(this.collection,"containerItem:contextMenuReady",this.contextMenuReady),this.listenTo(docs.events,"containerItem:refreshSelection",this.refreshSelection),this.listenTo(docs.events,"containerItem:removingItem",this.removingView),this.initRender(),window.self!==window.top&&(E={}),e('*[dir="rtl"]').length>0&&(I="right")},initRender:function(){var e=w,i=this.cardView?"cardView":this.gridView?"cellView":this.tileView?"tileView":this.tableView?"tableView":this.performanceView?"cardView":"rowView",n=this.contextActions.containerLayout();"layout_compact"===n&&(i+=" compact"),"layout_smalltile"===n&&(i+=" smalltile"),this.options.fullCells&&(i+=" fullCells"),docs.common.checkFeatureFlag("SmallCards")&&(i+=" cardView-small");var o=e({i18n:docs.i18n,viewType:i,listLabel:this.options.listLabel});this.$el.html(o),this.contextMenu=new a({el:this.$(".containerview-context-menu"),collection:this.contextActions,uploader_options:this.uploader_options,at:"right-10 top",within:this.$el}),this.options.toolbar&&this.options.toolbar.hide?this.$el.addClass("hideToolbar"):(this.$el.removeClass("hideToolbar"),this.contextToolbarView=new r({el:this.$(".containerview-context-toolbar"),collection:this.contextActions,folder:this.collection.container,uploader_options:this.uploader_options,at:"right-10 top",within:this.$el})),this.toolbarButtonsView=new docs.views.ToolbarButtonsView({model:this.model,el:this.$(".containerview-toolbar-buttons"),contextActions:this.contextActions,sortOptions:this.options.sortOptions,layoutOptions:this.options.layoutOptions,pagerOptions:this.options.pagerOptions,filterOptions:this.options.filterOptions,searchOptions:this.options.searchOptions,languageFilterOptions:this.options.languageFilterOptions}),this.options.filterToolbarButtonsView&&(this.filterToolbarButtonsView=new this.options.filterToolbarButtonsView({model:this.model,contextActions:this.contextActions,sortOptions:this.options.sortOptions,layoutOptions:this.options.layoutOptions,pagerOptions:this.options.pagerOptions,filterOptions:this.options.filterOptions}),this.$(".containerview-toolbar-buttons").prepend(this.filterToolbarButtonsView.$el)),"multiple"!==this.options.select||this.model.get("isAllSelect")?this.$(".containerview-allcheck").remove():(this.$(".containerview-allcheck").checkbox(),this.$(".containerview-allcheck").click(this.allCheckClick)),window.IntersectionObserver&&(this.observer=new window.IntersectionObserver(t.bind(this.handleIntersection,this),{root:this.$(".containerview-list")[0],threshold:.05}),this.supportsLazyLoading=!0);var s=!!this.containerView&&t.result(this.containerView,"layoutOptions");s&&s.table?(this.tableHeaderView=new l(t.defaults({el:this.$(".containerview-table-header"),ContainerTableRowView:this.ContainerTableRowView,contextActions:this.contextActions,model:this.model},this.options)),this.tableHeaderView.render(),this.toggleTableHeader(),this.listenTo(osn.events,"navbar:toggled",this.buildTableQueries),this.listenTo(docs.events,"action:toggleSidebar",this.buildTableQueries),this.listenTo(docs.events,"slidein:opened",this.buildTableQueries),this.listenTo(this.collection,"remove add sync reset",this.toggleTableHeader)):this.$(".containerview-table-header").hide(),this.pagerView=new c({el:this.$(".containerview-pager"),model:this.collection.pagerData,pagerNumString:this.pagerNumString}),this.pagerView.render(),this.listenTo(this.pagerView,"fetchPage",this.onFetchPage),this.$listEl=this.$(".containerview-items"),this.listenTo(this.contextActions,"contextActions:layoutChanged",this.layoutChanged),this.listenTo(osn.events,"resize",this.onResize),this.listenTo(osn.events,"resize",this.resizeFinished)},toggleTableHeader:function(){this.tableHeaderView&&this.tableHeaderView.$el&&this.tableHeaderView.$el.toggle(this.tableView&&!(!this.collection||!this.collection.length))},onSync:function(){var e,t=arguments[2]||{};t.ignoreSync||(this.observer&&this.observer.disconnect(),t.retainSelection&&(e=this.getSelection()),this.render(e))},sortOrderChangeHandler:function(){this.updateRenderedStatusMetadata("fetching")},updateRenderedStatusMetadata:function(e){this.options.updateStatusMetadata&&t.isString(e)&&this.$(".containerview-list").attr("data-rendered",e)},render:function(i){this.updateRenderedStatusMetadata("rendering"),this.initiallyHide=!1,this.showHideBoilerPlate(),this.trigger("clearing"),e("br",this.$listEl).remove();var n=this.collection.first(this.collection.pagerData.pageSize),o=i&&(i.length>1||1===i.length&&i[0].checked);if(this.tileView&&(this.$(".containerview-list").removeClass("animate"),this.numRenderItems=n.length,this.tilesAdjusted=0,this.initTilePositions(n)),t(n).each((function(e){i&&t.find(i,(function(t){return t.id===e.id}))&&(e.set("selected",!0,{silent:!0}),o&&e.set("checked",!0,{silent:!0})),this.addNew(e,!0,!0)}),this),this.updateSelection(i?this.getSelection():[]),this.updateContextToolbar(),this.showHideBoilerPlate(),this.updateUrl(),this.initiallyHide){var s=this;t.defer((function(){var e=this.$(".containerview-item");s._animateItems(e)}))}this.skipFocusOnRender||!t.isUndefined(u.options)&&!u.options.takeFocus||this.setFocus(),this.$(".containerview-list").scrollTop(0),this.$(".containerview-items").attr("aria-label",docs.i18n.t("NUM_ITEMS_LABEL",n.length,this.collection.pagerData.get("totalCount"))+" "+this.options.listLabel),this.tableView&&this.buildTableQueries(),this.updateRenderedStatusMetadata("complete")},_addFolderFileSeparatorBefore:function(e){this._addFolderFileSeparator(e,"before")},_addFolderFileSeparator:function(t,i){if((this.gridView||this.cardView)&&!this.options.mixedContent){var n=this.gridView?e("<br/>"):e('<div class="folder-break"></div>');"before"===i?t.before(n):t.append(n)}},_animateItems:function(t,i){i||(i=0);var n=t[i],o=this;if(n){var s={duration:100,queue:!1,complete:function(){e(this).removeAttr("style"),e(this).trigger("animationFinished")},progress:function(n,s){e(this).trigger("animationProgress"),s>=.2&&o._animateItems(t,++i)}};this.gridView?e(n).fadeIn(s):e(n).slideDown(s)}},cleanUpTableViewQueries:function(){this.tableMQEvents&&this.tableMQEvents.length>0&&this.tableMQEvents.forEach((function(e){e.mql.removeListener(e.event)}),this);var e=this.$el.attr("class").replace(/\shide-table-col-\d+/g,"");this.$el.removeClass().addClass(e),this.tableMQEvents=[]},onCloseView:function(){this.observer&&(this.observer.disconnect(),delete this.observer,delete this.supportsLazyLoading),this.toolbarButtonsView&&this.toolbarButtonsView.close(),this.contextmenu&&this.contextmenu.close(),this.tableHeaderView&&(this.tableHeaderView.close(),delete this.tableHeaderView),this.pagerView&&(this.pagerView.close(),delete this.pagerView),this.contextToolbarView&&this.contextToolbarView.close(),this.boilerplateUploader&&(d.destroyUploader(this.boilerplateUploader),this.boilerplateUploader=null),this.cleanUpTableViewQueries(),this.stopListening(osn.events,"navbar:toggled"),this.stopListening(docs.events,"action:toggleSidebar"),this.trigger("closing")},updateUrl:function(){},showHideBoilerPlate:function(){if(0===this.collection.length){!this.contextToolbarView||this.options.filterOptions||this.options.filterToolbarButtonsView||this.$el.addClass("hideToolbar");var e=this.getEmptyBoilerplateHtml();e&&(this.$bpEl&&0!==this.$bpEl.length?(this.$bpEl.remove(),this.boilerplateUploader&&(d.destroyUploader(this.boilerplateUploader),this.boilerplateUploader=null),this.$(".containerview-list").append(e)):(this.$(".containerview-items").hide(),this.$(".containerview-list").append(e).addClass("drag-border")),this.$bpEl=this.$(".containerview-list").find(".folder-bp"),this.$(".containerview-list").find("#bp-upload-link").length>0&&(this.boilerplateUploader=d.newUploader({parentModel:this.collection.container,browse_button_id:"bp-upload-link",persist:!0})))}else this.removeBoilerPlate()},removeBoilerPlate:function(){this.$bpEl&&(this.$bpEl.remove(),delete this.$bpEl,this.boilerplateUploader&&(d.destroyUploader(this.boilerplateUploader),this.boilerplateUploader=null)),this.contextToolbarView&&this.$el.removeClass("hideToolbar"),this.$(".containerview-list .bp_class").remove(),this.$(".containerview-items").show(),this.$(".containerview-list").removeClass("drag-border")},getEmptyBoilerplateHtml:function(){},addNewItem:function(e){this.addNew(e),this.tableView&&this.buildTableQueries()},addNew:function(i,n,o){o||this.showHideBoilerPlate();var s=this.collection.indexOf(i);if(s<this.collection.pagerData.pageSize){var a,r=t.result(i,"modelType");if(this.tableView)a=this.ContainerTableRowView;else{var l=this.gridView?"cellViews":this.tileView?"tileViews":this.cardView?"cardViews":this.performanceView?"performanceViews":"rowViews";a=h[l][r]}var c=new a(t.defaults({model:i,contextActions:this.contextActions,willAnimate:this.initiallyHide,gridView:this.gridView,compactView:this.compactView,tileView:this.tileView,cardView:this.cardView,tableView:this.tableView,performanceView:this.performanceView,fullCells:this.options.fullCells,mixedContent:this.options.mixedContent,urlParams:this.options.urlParams,needWrite:this.options.needWrite,cssProps:this.replacingTile&&this.replacingTile[i.get("id")]?this.replacingTile[i.get("id")].cssProps:void 0,supportsLazyLoading:!!this.supportsLazyLoading},this.options));c.render(),this.initiallyHide&&c.$el.hide(),("none"===this.options.select||this.options.selectableTypes&&!t(this.options.selectableTypes).contains(r))&&c.$el.addClass("containerview-noselect");var u=this.$listEl.children(),p=u.index(u.filter(this.cardView?".folder-break":"br"));p>-1&&s>=p&&"folder"!==r&&s++;var m=u.eq(s);if(m.length>0)p>-1&&s-p==1&&"folder"===r?m.prev().before(c.el):(m.before(c.el),p<0&&"folder"===r&&this._addFolderFileSeparatorBefore(m));else if(p>0&&"folder"===r){var _=this.$listEl.children().last().filter("br");_.length>0?_.before(c.el):this.$listEl.append(c.el)}else this.$listEl.append(c.el),p<0&&"folder"===r&&this._addFolderFileSeparator(this.$listEl);!0===i.get("selected")&&(e(c.el).addClass("selected"),e(c.el).removeClass("hover mousedown")),"none"!==this.options.select&&(!0===i.get("checked")||!0===i.checked||!0===i.get("selected")&&"single"===this.options.select)&&(e(c.el).find("input").prop("checked",!0),"single"===this.options.select&&e(c.el).siblings().each((function(){e(this).removeClass("selected mousedown"),e(".containerview-check input",this).prop("checked",!1)}))),o||this.updateSelection(this.getSelection()),i.unset("selected",{silent:!0}),i.unset("checked",{silent:!0}),delete i.checked;var g=this.collection.container;if((t.isUndefined(this.options.actions)&&t.isUndefined(this.options.tile)||!t.isUndefined(this.options.actions)&&this.options.actions.move||!t.isUndefined(this.options.card)&&this.options.card.drag)&&this.setupDragDropMove(c,i,g),!c.noItemUploader&&this.itemUploader&&(t.isUndefined(this.options.actions)||i.isFile&&this.options.actions.uploadNewVersion||i.isFolder&&this.options.actions.uploadToFolder)&&d.setupDnDUpload(c,i,g,this.uploader_options),c.listenTo(i,"remove",c.remove),c.listenTo(this,"closing",c.parentClosing),c.listenTo(this,"clearing",c.parentClearing),!n&&this.initiallyHide){var f=this;t.defer((function(){var e=[c.el];f._animateItems(e)}))}this.supportsLazyLoading&&this.observer&&this.observer.observe(e(c.$el)[0])}o||this.updateContextToolbar()},_onRemoveFirst:function(e,t,i){},_onRemoveLast:function(e,t,i){},onRemove:function(e,t,i){var n=t.pagerData,o=n.pageSize,s=t.length;if(this._onRemoveFirst(e,t,i),this.removedTile=this.removedTile||[],this.removedTile.push(e.get("id")),0===s&&n.get("page")>1)t.fetchPage("prev");else{if(s<=o&&n.get("hasMore"))return void t.fetch({add:!0,async:!1});n.decrementTotalCount();var a=t.at(o-1);a&&this.addNew(a);var r=this.$listEl.children(),l=r.index(r.filter("br"));l>-1&&0===r.filter("li.folderview-fldrrow").length&&this.$listEl[0].removeChild(r[l]),this.updateContextToolbar(),this.showHideBoilerPlate(),this.onResize(),this._onRemoveLast(e,t,i)}},enterHover:function(t){var i=e(t.target).closest(".containerview-item");i.hasClass("selected")||i.addClass("hover")},exitHover:function(t){e(t.target).closest(".containerview-item").removeClass("hover mousedown")},openNavigate:function(i,o,s){if(t.isUndefined(s)&&(s=!this.options.actions||this.options.actions.open),s){var a=o,r=p.getConfigUrlPart(this.options.urlParams);a+=r+=p.getViewConfigUrlPart(this.options.urlParams);var l=docs.common.Browser.isMac;if(!l&&i.ctrlKey||l&&i.metaKey||i.shiftKey){var c=T.routerRoot.replace("/embed/","/");return n.linkId&&(c+=n.isAppLink?"link/app/":"link/"+n.linkId+"/"),c+=a,window.open(c,"_blank"),!1}docs.router.navigate(a,{trigger:!0})}else{var h=e(i.target).closest(".containerview-item");this.itemSelected(h,i)}},allCheckClick:function(t){var i=e(t.target).prop("checked");this.selectAll(i)},selectAll:function(e){var t=this.$(".containerview-item").not(".containerview-noselect");t.toggleClass("selected",e),t.find(".containerview-check input").prop("checked",e).change();var i=this.getSelection(),n=this.$(".containerview-allcheck");n.checkbox("indeterminate",!1),0===i.length?(n.prop("checked",!1),n.attr("aria-checked","false")):(n.prop("checked",!0),n.attr("aria-checked","true")),this.updateSelection(i)},selectItem:function(e){var t=this.$("#"+e).find(".containerview-check input");1===t.length&&!1===t.prop("checked")&&t.click()},clearItem:function(e){var t=this.$("#"+e),i=t.find(".containerview-check input");if(1===i.length)if(!0===i.prop("checked"))i.click();else if(t.hasClass("selected")){t.toggleClass("selected",!1),t.toggleClass("hover",!1),this.updateAllCheckButton();var n=this.getSelection();this.updateSelection(n)}},updateSelection:function(t,i){t&&t.length?e("#contextMenuHelp").text(docs.i18n.t("CONTEXT_MENU_HELP")):e("#contextMenuHelp").text(""),this.contextActions.setSelection(t,i)},_handleSetSelection:function(){this.sendSelectionNotification()},updateAllCheckButton:function(){var e=this.$(".containerview-item .containerview-check input:checked").length,t=this.$(".containerview-item").length,i=this.$(".containerview-noselect").length,n=e>0,o=n&&e<t-i,s=this.$(".containerview-allcheck");s.prop("checked",n),o?s.attr("aria-checked","mixed"):e===t-i?s.attr("aria-checked","true"):s.attr("aria-checked","false"),s.checkbox("indeterminate",o)},containerItemfromRowEl:function(t){var i=e(t).closest(".containerview-item").attr("id");return this.collection.where({id:i})[0]},getSelection:function(){var t=[],i=this;return this.$(".containerview-item.selected").each((function(){var n=i.containerItemfromRowEl(this);if(n){var o=n.getSelectionData();o.checked=e(this).find("input").prop("checked"),n.get("revision")&&(o.revision=n.get("revision")),"file"===o.type&&(o.size=n.get("size")),i.options.contextActions&&i.options.contextActions.container&&i.options.contextActions.container.get("id")===n.get("parentID")&&(o.fParentId=i.options.contextActions.container.get("id"),o.fParentName=i.options.contextActions.container.get("name"),o.fParentAllowedActions=i.options.contextActions.container.get("allowedActions")),t.push(o)}})),t},showContextMenu:function(t,i){var n;if(n=window.getSelection&&window.getSelection()&&window.getSelection().toString().length>0||document.getSelection&&document.getSelection().toString().length>0||document.selection&&document.selection.createRange().text.length>0,!t.ctrlKey&&!n){var o=e(t.target).closest(".containerview-item");if(!this.itemIsMine(o))return;o.hasClass("selected")||this.itemSelected(o,t);var s=this.getSelection();this.contextMenuReady(t,i,s,o),t.preventDefault()}},contextMenuReady:function(e,t,i,n){if(1===i.length){var o=i[0].folderItem;this.contextMenu.showMenu(e,this.collection.container,t,o,n)}else this.contextMenu.showMenu(e,this.collection.container,t,null,n)},onFetchPage:function(e){this.collection.fetchPage(e)},layoutChanged:function(){var e,t,i=this.contextActions.containerLayout();this.cardView="layout_card"===i,this.performanceView="layout_perf"===i,this.gridView="layout_grid"===i,this.compactView="layout_compact"===i,this.tableView="layout_table"===i,this.tileView="layout_tile"===i||"layout_smalltile"===i,"layout_list"===i?(e="rowView",t="cellView compact cardView tableView"):"layout_compact"===i?(e="rowView compact",t="cellView cardView tableView"):"layout_smalltile"===i?(e="tileView smalltile",t="cellView compact rowView cardView tableView",this.tileWidth=228):"layout_tile"===i?(e="tileView",t="smalltile cellView compact rowView cardView tableView",this.tileWidth=300):"layout_card"===i||"layout_perf"===i?(e="cardView",t="rowView compact cellView tableView"):"layout_table"===i?(e="tableView",t="rowView compact cellView cardView"):(e="cellView",t="rowView compact cardView tableView"),this.tableHeaderView&&this.toggleTableHeader(),this.$(".containerview-list").switchClass(t,e,0),this.trigger("layoutChanged"),this.render(this.getSelection()),this.updateAllCheckButton()},updateContextToolbar:function(){var e=this.$(".containerview-allcheck"),i=!0;switch(e.prop("checked",!1),e.attr("aria-checked","false"),this.options.selectable){case"documents":t.filter(this.collection.models,(function(e){return"file"===e.get("type")})).length>0&&(i=!1);break;case"folders":t.filter(this.collection.models,(function(e){return"folder"===e.get("type")})).length>0&&(i=!1);break;default:i=0===this.collection.length}i?(e.checkbox("hide"),this.$(".containerview-context-toolbar").hide()):(e.checkbox("show"),this.$(".containerview-context-toolbar").show(),this.updateAllCheckButton())},sidebarToggled:function(){this.onResize()},onResize:function(){this.contextToolbarView&&this.contextToolbarView.resizeMenu(),this.tileView&&this.tileImages()},resizeFinished:t.debounce((function(){docs.events.trigger("resize:finished")}),500),_handleClearSelection:function(){this.selectAll(!1)},_handleSelectItem:function(e){this.selectItem(e.id)},_handleClearItem:function(e){this.clearItem(e.id)},sendSelectionNotification:function(){u.events.selectionChanged&&t.isFunction(u.events.selectionChanged)&&(E.selection=u.events.selectionChanged(this.contextActions.selection,this.collection.container,E.selection))},setupDragDropMove:function(){},_handleMoveCopy:function(e){this.collection.container.isTrash||e&&e.targetId&&0===e.targetId.indexOf("F:TRASH:")?this.updateSelection([]):this.updateSelection(this.getSelection());var t=this.$(".containerview-item :first :tabbable");0===t.length&&(t=this.$(".containerview-list :tabbable :first")),0===t.length&&(t=this.$("#content-header :tabbable")),t.first().focus()},actionTrash:function(i){var n,o=1===i.length,s=i[0].folderItem.isFile||i[0].folderItem.isFolder||!1,a=o?s?i[0].folderItem.get("name"):t.escape(i[0].folderItem.get("name")):"";o&&"contenttype"===i[0].type&&(a=t.escape(i[0].folderItem.get("displayName")));var r=(n=t.has(this.trashConfirmResources,i[0].type)?o?this.trashConfirmResources[i[0].type].single:this.trashConfirmResources[i[0].type].multi:o?this.trashConfirmResources.single:this.trashConfirmResources.multi).title,l=docs.i18n.t(r,a),c=!0,h=!1;t(i).each((function(e){var t=e.folderItem.isFolder&&(e.folderItem.isSharedToYou()||e.folderItem.isSharedByYou());c=c&&!t?t:c,h=!h&&t?t:h}));var d=[];h&&d.push(c?docs.i18n.t("DELETE_WARN_SHARED"):docs.i18n.t("DELETE_WARN_SOMESHARED"));var u=n.message;d.push(docs.i18n.t(u,a));var p=e(document.activeElement);g.show({title:l,message:d,context:this,danger:!0,cancelButtonText:docs.i18n.t("NO"),cancelCallback:function(){p&&p.focus()},okButtonText:docs.i18n.t("YES"),callback:function(e){e.doTrash(i)},reverseButtons:"no",defaultButton:"ok",showCallback:function(e){e.trashConfirmationShown&&e.trashConfirmationShown(i,e.md$el)},disableScriptProtection:!0})},trashConfirmResources:{single:{title:"DELETE_CONFIRM_SINGLE_TITLE",message:"DELETE_CONFIRM_SINGLE"},multi:{title:"DELETE_CONFIRM_MULTI_TITLE",message:"DELETE_CONFIRM_MULTI"}},actionRename:function(e){var i=this.collection.where({id:e[0].id})[0],n=this;require(["common/dialog/RenameDialog"],(function(o){if(i&&i.rename){e[0].checked&&i.set("checked",!0,{silent:!0});var s=t.unescape(i.get("name")),a=i.get("extension");o.show({showFolderNameErrors:!0,isCollection:i.isCollection,type:i.get("type"),curName:s,curExt:a,cbOk:function(e){i.rename(e)},cbContext:n})}}))},actionShare:function(){},deleteItems:function(e){var i=new b(t.extend({minPercent:20},this.deleteResources.errorMap?{errorMap:this.deleteResources.errorMap}:{},this.deleteResources.action?{action:this.deleteResources.action}:{})),n=t.escape(e[0].name);"contenttype"===e[0].type&&(n=t.escape(e[0].folderItem.get("displayName")));var o=t.extend({},this.deleteResources.inProgressMsg?{inProgress:docs.i18n.t1orN(this.deleteResources.inProgressMsg,e.length,n)}:{},this.deleteResources.completeWithErrorsMsg?{completeWithErrors:docs.i18n.t(this.deleteResources.completeWithErrorsMsg)}:{},this.deleteResources.errorMsg?{error:docs.i18n.t(this.deleteResources.errorMsg)}:{}),s=new v({model:i,type:"indeterminate-progress",messages:o}),a=this;this.model.deleteItems(e).always((function(t,o){s.options.messages.complete=docs.i18n.t1orN(a.deleteResources.completeMsg,t.length,e.length,n),i.set({errorList:o}),i.stopProgressTimer(t.length<=0),a.updateSelection(a.getSelection())}))},deleteResources:{errorMap:null,inProgressMsg:"DELETE_ITEMS_IN_PROGRESS",completeMsg:"DELETE_ITEMS_COMPLETE"},chatUpdated:function(e){if(e.conversationId&&e.chatId&&e.isCurrentWindow){var i=this.getSelection();t.each(i,(function(t){var i=t.folderItem;i&&(!0===e.isRemoved?i.removeAnnotation(e.conversationId,e.chatId):!0===e.isRestored&&i.restoreAnnotation(e.conversationId,e.chatId))}),this)}},setFocus:function(){if(this.itemMainFocus){var e=this.$(this.itemMainFocus).first();this.updateTabItemEntry(e,!0)}},shortestColumn:function(e,i){if(e<=1)return 0;var n=t.min(i);return t.indexOf(i,n)},longestColumn:function(e,i){if(e<=1)return 0;var n=t.max(i);return t.indexOf(i,n)},determineColumn:function(e,i,n){if(e<=1)return 0;var o=t.min(i);if(0===o)return t.indexOf(i,o);for(var s=[],a=0;a<e;a++){var r=0===a?t.max(i.slice(1)):i[a-1];s[a]=n-t.max([0,r-i[a]])}var l=Math.floor(.85*n),c=Math.floor(.3333*n),h=0,d=!1;i[1]-i[0]>l&&(d=!0);for(var u=1;u<e;u++){if(!d&&s[u]<s[h]&&i[u]+35<i[h])if(e-1!==u||h>0)h=u;else{var p=t.max(i.slice(0,u)),m=n-t.max([0,p-i[u]]);(0===t.max([0,m])||n-m>c)&&(h=u)}else i[u-1]-i[u]>l&&i[h]-i[u]>35&&(d=!0,h=u)}return h},buildTableQueries:function(){this.cleanUpTableViewQueries();var e=this.$(".containerview-table-row:first");if(0!==e.length){var i,n=parseInt(e.css("padding-left").slice(0,-2),10)+parseInt(e.css("padding-right").slice(0,-2),10),o=(e.innerWidth(),(this.ContainerTableRowView&&t.isFunction(this.ContainerTableRowView.filterTableColumns)?this.ContainerTableRowView.filterTableColumns(t.result(this.ContainerTableRowView,"tableColumns"),this.options):t.result(this.ContainerTableRowView,"tableColumns")).map((function(i,n){var o=t.clone(i);if(i.hasOwnProperty("priority")||(o.priority=100+n),o.selector=".cv-table-col-"+n,o.hideClass="hide-table-col-"+n,i.width)o.requiredWidth=e.find(o.selector).outerWidth(!0);else{var s=e.find(o.selector);s&&s.css("min-width")?o.requiredWidth=parseInt(s.css("min-width").slice(0,-2),10)+parseInt(s.css("margin-left").slice(0,-2),10)+parseInt(s.css("margin-right").slice(0,-2),10):o.requiredWidth=200}return o})).sort((function(e,t){return e.priority-t.priority}))),s=this.$(".containerview-items").width();if("dialog"===this.options.viewContext){var a=this.$el.parents(".full-page-dialog").width()||0;i=a-s}else i=window.innerWidth-s;var r=n+e.find(".containerview-check").outerWidth(!0)+o.shift().requiredWidth;o.forEach((function(e){(r+=e.requiredWidth)<=s||this.$el.addClass(e.hideClass);var t=r+i,n=window.matchMedia("(max-width: "+t+"px)"),o=function(t){t.matches?this.$el.addClass(e.hideClass):this.$el.removeClass(e.hideClass)}.bind(this);n.addListener(o),this.tableMQEvents.push({mql:n,event:o})}),this)}},tileImages:function(i){if(this.tileView){if(this.tilesAdjusted++,i){var n=228===this.tileWidth,o=n?128:168,s=n?405:533,a=this.$el.find("#"+i),r=e(".filetile-thumbnail img",a).length>0;r&&this.replacingTile&&this.replacingTile[i]&&e(".filetile-thumbnail img",a).removeAttr("style");var l=e(".contentitem-content",a).length>0,c=r?parseInt(e(".filetile-thumbnail img",a).outerHeight(!0),10):l?o:parseInt(e(".filetile-thumbnail .extension",a).outerHeight(!0),10);c<o&&(c=o,r&&(e(".filetile-thumbnail img",a).width("auto").height(o+"px"),e(".filetile-thumbnail .containerview-icon",a).addClass("clipcenter").css({"max-height":s,"min-height":o}))),c>s&&(c=s,r&&e(".filetile-thumbnail .containerview-icon",a).addClass("clipcenter").css({"max-height":s,"min-height":o})),e(".filetile-thumbnail .containerview-icon",a).height(c),e(".contentitem-content",a).height(c),e(".filetile-status",a).height(c),c+=n?90:120,e(".filetile-overlay",a).height(c),e(".containerview-row-content",a).height(c+"px").attr("max-height",c+"px")}if(this.replacingTile&&!t.isUndefined(i)&&this.replacingTile[i])this.adjustColumnAddTile(i);else if(!this.replacingTile||t.isEmpty(this.replacingTile)||!this.removedTile||t.isEmpty(this.removedTile)){var h=[],d=this.$el.find(".containerview-items .containerview-item");t.each(d,(function(t){var i={item:t,itemHeight:e(t).outerHeight(!0)};h.push(i)}));var u=this.tileWidth+12,p=this.$el.find(".containerview-items").parent().width(),m=Math.floor(p/u),_=m*u+2*(m-1);_>p&&(_=(m-=1)*u+2*(m-1)),this.$el.find(".containerview-items").width(_);for(var g=new Array(m),f=new Array(m),v=0;v<m;v++)g[v]=0,f[v]=0;t.each(h,(function(t){var i=this.determineColumn(m,g,t.itemHeight);t.left=12+u*i+2*i,t.top=g[i]+1,g[i]+=t.itemHeight+2;var n={top:t.top,width:u};n[I]=t.left,e(t.item).css(n).data({column:i,row:f[i],top:t.top}),f[i]+=1}),this),this.$el.find(".containerview-items").height(g[this.longestColumn(m,g)]),this.tilesAdjusted>=this.numRenderItems&&this.$(".containerview-list").addClass("animate")}else this.adjustColumnRemoveTile()}},incomingRevision:function(e){if(!this.replacingTile||!t.has(this.replacingTile,e)){var i=this.$el.find("#"+e);if(i.length>0){var n=i.data(),o=i.outerHeight(!0),s={column:n.column,row:n.row,top:n.top,itemHeight:o,cssProps:i.css(["top",I]),replace:!1};s.cssProps.top=s.top,this.replacingTile=this.replacingTile||{},this.replacingTile[e]=s}}},incomingRevisionSwap:function(e){if(!this.replacingTile||!t.has(this.replacingTile,e)){var i=this.$el.find("#"+e);if(i.length>0){var n=i.data(),o=i.outerHeight(!0),s={column:n.column,row:n.row,top:n.top,itemHeight:o,cssProps:i.css(["top",I]),replace:!0};s.cssProps.top=s.top,this.replacingTile=this.replacingTile||{},this.replacingTile[e]=s}}},adjustColumnAddTile:function(i){var n=this.replacingTile[i],o=this.$el.find("#"+i),s=e(o).outerHeight(!0),a=this.$el.find(".containerview-item").filter((function(t,i){var o=e(i).data();return n.replace?o.column===n.column&&o.row>n.row:o.column===n.column&&o.row>=n.row}));t.each(a,(function(t){var i=e(t).data(),o=parseInt(i.top,10);if(n.replace){var a=s-n.itemHeight,r={top:o+a};e(t).css(r).data("top",o+a)}else{var l={top:o+s+2};e(t).css(l).data({row:i.row+1,top:o+s+2})}}),this);var r=this.tileWidth+12,l=12+r*n.column+2*n.column,c={top:n.top,width:r};c[I]=l,e(o).css(c).data({column:n.column,row:n.row,top:n.top}),this.adjustContainerHeight(),delete this.replacingTile[i]},adjustColumnRemoveTile:function(){var i=this.removedTile.shift();if(t.has(this.replacingTile,i)){var n=this.replacingTile[i],o=this.$el.find(".containerview-item").filter((function(t,i){var o=e(i).data();return o.column===n.column&&o.row>n.row}));t.each(o,(function(t){var i=e(t).data(),o=parseInt(i.top,10),s={top:o-(n.itemHeight+2)};e(t).css(s).data({row:i.row-1,top:o-(n.itemHeight+2)})}),this),this.adjustContainerHeight()}else this.tileImages()},adjustContainerHeight:function(){for(var i=this.tileWidth+12,n=this.$el.find(".containerview-items").parent().width(),o=Math.floor(n/i),s=new Array(o),a=0;a<o;a++)s[a]=0;var r=this.$el.find(".containerview-item");t.each(r,(function(t){var i=e(t).data(),n=parseInt(i.top,10)+parseInt(e(t).outerHeight(!0),10)+2;s[i.column]=Math.max(s[i.column],n)}),this),this.$el.find(".containerview-items").height(s[this.longestColumn(o,s)])},initTilePositions:function(e){var i=this.tileWidth+12,n=this.$el.find(".containerview-items").parent().width(),o=Math.floor(n/i),s=o*i+2*(o-1);s>n&&(s=(o-=1)*i+2*(o-1)),this.$el.find(".containerview-items").width(s);var a=0,r=0,l=0;t.each(e,(function(e){e.set({initialPosition:{left:12+i*a+2*a,top:r*i+1,width:i,leftOrRight:I}},{silent:!0}),++a===o&&(r++,a=0),l=(r+1)*i+2})),this.$el.find(".containerview-items").height(l)},itemIsMine:function(e){return this.$el.find(e).length>0},moveToItem:function(t,i){if(this.itemIsMine(t)){this.$(this.itemMainFocus).removeClass("current"),t.addClass("current");for(var n=this.$el.find(this.itemMainFocus),o=n.length,s=(this.$el.find(".containerview-items").height(),this.$el.find(".containerview-items").width()),a=t.outerWidth(!0),r=-1,l=!!this.cardView,c=0;c<o;c++)if(e(n[c]).hasClass("current")){r=c;break}var h={up:-1,down:-1,left:-1,right:-1};if(r>=0){var d=l?Math.floor(s/a):1,u=(r+1)/d<=1,p=(r+1)/d>Math.floor(o/d),m=r%d==0,_=r%d==d-1;h.up=u?-1:r-d,h.down=p||r+d>=o?-1:r+d;var g=e.sessionStorage("containerItemMove",void 0,docs.views.ContainerViewDetail.Movement.CYCLE_THRU);g===docs.views.ContainerViewDetail.Movement.WRAP_ROW?(h.left=m?p?o-1:r+(d-1):r-1,h.right=_?r-(d-1):r+1===o?r-r%d:r+1):g===docs.views.ContainerViewDetail.Movement.CYCLE_THRU?(h.left=r-1>=0?r-1:-1,h.right=r+1<o?r+1:-1):(h.left=m?-1:r-1,h.right=_||r+1>=o?-1:r+1)}switch(i){case"UP":h.up>=0&&this.updateTabItemEntry(e(n[h.up]),!0);break;case"DOWN":h.down>=0&&this.updateTabItemEntry(e(n[h.down]),!0);break;case"LEFT":h.left>=0&&this.updateTabItemEntry(e(n[h.left]),!0);break;case"RIGHT":h.right>=0&&this.updateTabItemEntry(e(n[h.right]),!0)}}},updateTabItemEntry:function(e,t){this.itemIsMine(e)&&(this.$(this.itemMainFocus).removeAttr("tabindex"),e.attr({tabindex:0}),t&&(this.$(this.itemMainFocus).removeClass("focused"),e.focus(),e.find(this.activeFocusItems).attr({tabindex:0})))},itemOpened:function(e,i){if(this.itemIsMine(e)){var n=this.containerItemfromRowEl(e);if(n.get("flags")&&n.get("flags").isInTrash||e.hasClass("containerview-no-open"))this.itemSelected(e,i);else{var o=[{id:n.id,rev:n.get("revision"),folderItem:n}];t.isFunction(this.actionOpen)&&this.actionOpen(o,i)}}},rowClick:function(t){var i=e(t.target).closest(".containerview-item");this.itemSelected(i,t)},itemSelected:function(i,n,o){if(this.itemIsMine(i)){e("body").removeClass("showNav");var s="single"===this.options.select,a=!!this.model.get("isAllSelect"),r=e(n.target).is(".containerview-check input"),l=docs.common.Browser.isMac,c=!s&&n.shiftKey,h=!s&&(!l&&n.ctrlKey||l&&n.metaKey||r),d=this.$(".containerview-item.selected").length,u=i.hasClass("selected");if(o&&(!l&&n.ctrlKey||l&&n.metaKey)&&(o=!1),(c||h)&&(document.selection?document.selection.empty():window.getSelection&&window.getSelection()&&window.getSelection().removeAllRanges()),a)t.noop();else if(s)i.siblings().each((function(){e(this).removeClass("selected mousedown"),e(".containerview-check input",this).prop("checked",!1).change()})),!o&&u?(i.removeClass("selected mousedown"),i.find(".containerview-check input").prop("checked",!1).change()):i.hasClass("containerview-noselect")||(i.addClass("selected"),i.removeClass("mousedown"));else{if(c)u||i.hasClass("containerview-noselect")||(i.addClass("selected"),i.removeClass("mousedown")),i.nextUntil(".selected").length<i.nextAll().length?i.nextUntil(".selected").each((function(){var t=e(this);t.hasClass("containerview-noselect")||(t.addClass("selected"),t.removeClass("hover mousedown"))})):i.prevUntil(".selected").each((function(){var t=e(this);t.hasClass("containerview-noselect")||(t.addClass("selected"),t.removeClass("hover mousedown"))}));else h?u?(i.removeClass("selected mousedown"),i.find(".containerview-check input").prop("checked",!1).change()):i.hasClass("containerview-noselect")||(i.addClass("selected"),i.removeClass("mousedown")):(i.siblings().each((function(){e(this).removeClass("selected mousedown"),e(".containerview-check input",this).prop("checked",!1).change()})),!o&&u&&1===d?(i.removeClass("selected mousedown"),i.find(".containerview-check input").prop("checked",!1).change()):i.hasClass("containerview-noselect")||(i.addClass("selected"),i.removeClass("mousedown")))}this.$(".containerview-item.selected").length>0&&this.$(".containerview-item.selected").find(".containerview-check input").prop("checked",!0).change(),this.updateTabItemEntry(i,!r),this.updateAllCheckButton();var p=this.getSelection();this.updateSelection(p,n)}},keydownOnList:function(t){var i=t.keyCode||t.which,n=docs.common.Browser.isMac,o=(!n&&t.ctrlKey||n&&t.metaKey,t.altKey);switch(i){case e.ui.keyCode.HOME:var s=this.$(".containerview-item").first();s.length>0&&(t.preventDefault(),t.stopPropagation(),this.updateTabItemEntry(s,!0));break;case e.ui.keyCode.END:var a=this.$(".containerview-item").last();a.length>0&&(t.preventDefault(),t.stopPropagation(),this.updateTabItemEntry(a,!0));break;case e.ui.keyCode.PAGE_UP:o&&this.pagerView&&(t.preventDefault(),t.stopPropagation(),this.pagerView.goPrevPage());break;case e.ui.keyCode.PAGE_DOWN:o&&this.pagerView&&(t.preventDefault(),t.stopPropagation(),this.pagerView.goNextPage())}},refreshSelection:function(e){var i=this.getSelection();t.where(i,{id:e.id}).length>0?this.contextActions.setSelection(i):t.isEmpty(e)&&this.contextActions.setSelection([])},removingView:function(e){this.observer&&e.length>0&&this.itemIsMine(e)&&this.observer.unobserve(e[0])},handleIntersection:function(i,n){t.each(i,(function(i){if(i.isIntersecting||t.isUndefined(i.isIntersecting)&&i.intersectionRatio>=.05){var n=e(i.target).attr("id");docs.events.trigger("containerViewDetail:itemVisible:"+n)}}),this)},getBoilerplateHtml:function(e,t,i,n,s){return o.getGenericBoilerplateHtml(e,T.staticRoot+"images/"+t,i,n,s)}},{Movement:{WRAP_ROW:0,CYCLE_THRU:1,ROW_ENDS:2}}),docs.views.ContainerViewDetail})),define("common/container/view/DragAndDropUtils",["jquery","underscore","core/util/Globals","core/util/Service"],(function(e,t,docs,i){"use strict";var n=docs.common.Globals;return{setupExternalMove:function(t,i){this.containerView=t,this.externalDrag=t.externalDrag,e(i).prop("draggable",!0).on("dragstart.extdnd",this.externalDragStart.bind(this)).on("dragend.extdnd",this.externalDragEnd.bind(this))},externalDragStart:function(o){var s=e(o.target).closest(".containerview-item");s.hasClass("selected")?docs.common.Browser.isFirefox||docs.common.Browser.isSafari||s[0].scrollIntoView():this.containerView.rowClick(o);var a=docs.common.EmbedApi.events.getDragData(this.containerView.contextActions.selection),r=t.map(this.containerView.contextActions.selection,(function(e){return e.folderItem.isAsset?i.getBaseUrl()+n.memberRoot+"assets/view/"+e.folderItem.id:e.url||e.folderItem.getLinkUrl()})),l=o.originalEvent.dataTransfer;if(l.effectAllowed="copy",docs.common.Browser.IEVersion>-1?(l.setData("URL",r.join("\n#\n")),l.setData("Text",JSON.stringify(a))):(l.setData("oracle/sel",JSON.stringify(a)),l.setData("text/uri-list",r.join("\n#\n")),l.setData("text/plain",r.join("\n"))),docs.common.EmbedApi.events.dragStart&&t.isFunction(docs.common.EmbedApi.events.dragStart)&&docs.common.EmbedApi.events.dragStart(a),l.setDragImage&&(!t.isObject(this.externalDrag)||!this.externalDrag.hideHelperLabel||!this.externalDrag.hideHelperImage)){var c=document.createElement("canvas");if(c.getContext){var h=c.getContext("2d"),d=0,u=0;if(t.isObject(this.externalDrag)&&this.externalDrag.hideHelperImage||(h.strokeStyle="blue",h.lineWidth=2,t.find(a,(function(i,n){if(t.isObject(this.externalDrag)&&this.externalDrag.maxHelperImages&&n>=this.externalDrag.maxHelperImages)return!0;var o,s=10*n,a=e("#"+i.id+" .containerview-icon img",this.$el);a.length>0?(o=a.data("naturalSize"))||(o={width:200,height:200}):((a=e("<img></img>")).attr("src","data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' id='Layer_1' x='0px' y='0px' width='24px' height='24px' viewBox='0 0 24 24' enable-background='new 0 0 24 24' xml:space='preserve' preserveAspectRatio='xMidYMid meet' %3e%3crect id='svgEditorBackground' x='0' y='0' width='24' height='24' style='fill: none%3b stroke: none%3b'/%3e %3crect x='6.37032' y='7.67893' fill='%23878C90' width='16.5' height='3' transform='matrix(1.46562 0 0 1.03908 -9.53905 -0.304612)'/%3e %3crect x='7.51' y='2.83443' fill='%23878C90' width='16.5' height='3' id='e255_rect' /%3e%3crect x='-0.03195969589580283' y='17.985390520848753' fill='%23878C90' width='16.5' height='3' id='e305_rect'/%3e%3crect x='6.40033' y='12.7366' fill='%23878C90' width='16.5' height='3' transform='matrix(1.46562 0 0 1.03908 -9.53905 -0.304612)' id='e485_rect'/%3e%3c/svg%3e"),o={width:200,height:200}),d=Math.max(d,o.height+s),u=Math.max(u,o.width+s),h.drawImage(a[0],s,s,o.width,o.height),h.strokeRect(s,s,o.width,o.height)}),this),h.height=""+d,h.width=""+u),!t.isObject(this.externalDrag)||!this.externalDrag.hideHelperLabel){var p;h.fillStyle="blue";var m=a.length;p=m>1?docs.i18n.t("FOLDERVIEW_DRAG_HELPER_TEXT",m):docs.i18n.t("FOLDERVIEW_DRAG_SINGLE_HELPER_TEXT",m),h.font="16px Arial",h.textAlign="center",h.textBaseline="middle";var _={y:4,x:30,width:h.measureText(p).width+12,height:24};d<_.height+_.y&&(d=_.height+_.y),u<_.width+_.x&&(u=_.width+_.x),h.height=""+d,h.width=""+u,h.strokeStyle="#000000",h.lineWidth=2,h.strokeRect(_.x,_.y,_.width,_.height),h.fillStyle="#ffffff",h.fillRect(_.x,_.y,_.width,_.height),h.fillStyle="#000000",h.fillText(p,_.x+_.width/2,_.y+_.height/2)}var g=new Image;g.src=c.toDataURL(),l.setDragImage(g,10,10)}}},externalDragEnd:function(){docs.common.EmbedApi.events.dragEnd&&t.isFunction(docs.common.EmbedApi.events.dragEnd)&&docs.common.EmbedApi.events.dragEnd()}}})),define("common/dialog/movecopy/model/MoveCopyMgr",["jquery","underscore","core/util/Globals","core/util/Service","core/util/Jsonify","core/util/Utils","docs/notification/template/ProgressViewLink.template","core/util/Logger","core/util/Session","common/notification/model/TimeredProgressable","core/view/MessageBar"],(function(e,t,docs,i,n,o,s,a,r,l,c){"use strict";var h=docs.common.Globals,d={csFldUnableToMoveItems:{causes:{csCloudItemInsufficientPrivileges:{formatString:"ITEM_MOVE_ERROR_TARGET_INSUFFICIENT_PREVILEGE"},csUnprivilegedSystemError:{formatString:"ITEM_MOVE_ERROR_TARGET_INSUFFICIENT_PREVILEGE"},csSecurityValidationFailed:{causes:{csFldDoesNotExist:{formatString:"ITEM_DOES_NOT_EXIST"}}},csFldItemInTrash:{formatString:"MOVE_ERROR_ITEMS_DO_NOT_EXIST"},defaultMsg:{formatString:"MOVE_ERROR_DEFAULT"}}},csFldUnableToCopyItems:{causes:{csCloudItemInsufficientPrivileges:{formatString:"ITEM_COPY_ERROR_TARGET_INSUFFICIENT_PREVILEGE"},csUnprivilegedSystemError:{formatString:"ITEM_COPY_ERROR_TARGET_INSUFFICIENT_PREVILEGE"},csFldItemInTrash:{formatString:"COPY_ERROR_ITEMS_DO_NOT_EXIST"},csSecurityValidationFailed:{causes:{csFldDoesNotExist:{formatString:"ITEM_DOES_NOT_EXIST"}}},defaultMsg:{formatString:"COPY_ERROR_DEFAULT"}}},csFldUnableToDeleteItems:{causes:{csFldSourceInDestination:{formatString:"ITEM_DELETE_EROROR_ITEM_IN_TRASH"},csSecurityValidationFailed:{causes:{csFldDoesNotExist:{formatString:"ITEM_DELETED"}}},csCloudItemInsufficientPrivileges:{formatString:"DELETE_ERROR_INSUFFICIENT_PREVILEGE"},csDAMCantDeletePublishedItem:{formatString:"MSG_DELETE_ASSET_ERR_PUBLISHED"},defaultMsg:{formatString:"TRASH_ERROR_DEFAULT"}}},csFldUnableToRestoreItems:{causes:{csFldDoesNotExist:{formatString:"ITEM_RESTORE_EROROR_ITEM_DOES_NOT_EXIST"}}},csScsUnableToRestoreItems:{causes:{csFldDoesNotExist:{formatString:"ITEM_RESTORE_EROROR_ITEM_DOES_NOT_EXIST"},csScsUnableToRestoreItems:{formatString:"ITEM_RESTORE_EROROR_ITEM_DOES_NOT_EXIST"},csStarterEditionCreateSiteLimitReached:{formatString:"ITEM_RESTORE_ERROR_STARTER_EDITION_LIMIT"}}},csScsUnableToDeleteUsedContentItemsDigitalAssets:{formatString:"MSG_DELETE_ASSET_ERR_IN_USE"},csCheckInFileInfected:{formatString:"COPY_ERROR_INFECTED_FILE"},csFldDoesNotExist:{formatString:"ITEM_DOES_NOT_EXIST"},csFldItemInTrash:{formatString:"ITEM_IN_TRASH"},csFldQuotaSizeExceeded:{formatString:"ITEM_COPY_QUOTA_EXCEEDED"},csFldOwnersQuotaSizeExceeded:{formatString:"ITEM_COPY_OWNER_QUOTA_EXCEEDED"},defaultMsg:{formatString:"UNKNOWN_ERROR"}},u={csFldUnableToMoveItems:{causes:{csCloudItemInsufficientPrivileges:{formatString:"MOVE_ERROR_TARGET_INSUFFICIENT_PREVILEGE"},csUnprivilegedSystemError:{formatString:"MOVE_ERROR_TARGET_INSUFFICIENT_PREVILEGE"},csSecurityValidationFailed:{causes:{csFldDoesNotExist:{formatString:"MOVE_ERROR_ITEMS_DO_NOT_EXIST"}}},csFldDoesNotExist:{formatString:"MOVE_ERROR_ITEMS_DO_NOT_EXIST"},csFldItemInTrash:{formatString:"MOVE_ERROR_ITEMS_DO_NOT_EXIST"},csFldChangeOfOwnerNotAllowed:{formatString:"MOVE_ERROR_DIFFERENT_FOLDER_OWNER"}}},csFldUnableToCopyItems:{causes:{csCloudItemInsufficientPrivileges:{formatString:"COPY_ERROR_TARGET_INSUFFICIENT_PREVILEGE"},csUnprivilegedSystemError:{formatString:"COPY_ERROR_TARGET_INSUFFICIENT_PREVILEGE"},csSecurityValidationFailed:{causes:{csFldDoesNotExist:{formatString:"COPY_ERROR_ITEMS_DO_NOT_EXIST"}}},csFldItemInTrash:{formatString:"COPY_ERROR_ITEMS_DO_NOT_EXIST"}}},csFldUnableToDeleteItems:{causes:{csFldSourceInDestination:{formatString:"ITEM_DELETE_EROROR_ITEM_IN_TRASH"},csSecurityValidationFailed:{causes:{csFldDoesNotExist:{formatString:"ITEMS_DELETED"}}},csCloudItemInsufficientPrivileges:{formatString:"DELETE_ERROR_INSUFFICIENT_PREVILEGE"},csDAMCantDeletePublishedItem:{formatString:"MSG_DELETE_ASSET_ERR_PUBLISHED"}}},csFldUnableToRestoreItems:{causes:{csFldDoesNotExist:{formatString:"RESTORE_EROROR_ITEM_DOES_NOT_EXIST"}}},csFldQuotaSizeExceeded:{formatString:"ITEM_COPY_QUOTA_EXCEEDED"},csFldOwnersQuotaSizeExceeded:{formatString:"ITEM_COPY_OWNER_QUOTA_EXCEEDED"},csDAMCantDeletePublishedItem:{formatString:"ITEMS_PUBLISHED"},csDAMCantDeleteCollectionWithPublishedContentItem:{formatString:"DELETE_ERROR_COLLECTION_HAS_PUBLISHED_ITEMS",args:1},csScsUnableToDeleteUsedContentItemsDigitalAssets:{formatString:"MSG_DELETE_ASSET_ERR_IN_USE"},csBillingFilesCountOverLimit:{formatString:"ERROR_FILE_COUNT_EXCEEDED",args:2},defaultMsg:{formatString:"UNKNOWN_ERROR"}},p={deletePermanently:{csFldSourceInDestination:"ITEM_DELETE_EROROR_ITEM_IN_TRASH",csFldDoesNotExist:{defaultMsg:"ITEM_PERMANENTLY_DELETED",completed:"ITEMS_PERMANENTLY_DELETED"},csCloudItemInsufficientPrivileges:"DELETE_ERROR_INSUFFICIENT_PREVILEGE",defaultMsg:"TRASH_ERROR_DEFAULT"},hideFromTrash:{csFldSourceInDestination:"ITEM_DELETE_EROROR_ITEM_IN_TRASH",csFldDoesNotExist:{defaultMsg:"ITEM_ALREADY_HIDDEN_FROM_TRASH",completed:"ITEM_ALREADY_HIDDEN_FROM_TRASH"},csCloudItemInsufficientPrivileges:"HIDE_FROM_TRASH_ERROR_INSUFFICIENT_PREVILEGE",defaultMsg:"HIDE_FROM_TRASH_ERROR_DEFAULT"}},m=function(e,t){return{csFldUnableToDeleteItems:{causes:{csFldSourceInDestination:{formatString:p[e].csFldSourceInDestination},csSecurityValidationFailed:{causes:{csFldDoesNotExist:{formatString:p[e].csFldDoesNotExist[t?"completed":"defaultMsg"]}}},csCloudItemInsufficientPrivileges:{formatString:p[e].csCloudItemInsufficientPrivileges},defaultMsg:{formatString:p[e].defaultMsg}}}}},_={move:{IN_PROGRESS:"MOVE_IN_PROGRESS",IN_PROGRESS_ITEM:"MOVE_IN_PROGRESS_SINGLE_ITEM",COMPLETE:"MOVE_COMPLETE",COMPLETE_ITEM:"MOVE_COMPLETE_SINGLE_ITEM",COMPLETE_WITH_ERRORS:"MOVE_COMPLETE_WITH_ERRORS",COMPLETE_WITH_ERRORS_ITEM:"MOVE_COMPLETE_WITH_ERRORS_SINGLE_ITEM",ERRORS:"MOVE_ERRORS",ERROR_DEFAULT:"MOVE_ERROR_MULTIPLE_ITEMS",ERROR_DEFAULT_ITEM:"MOVE_ERROR_SINGLE_ITEM",TITLE_IN_PROGRESS:"MOVE_TITLE_IN_PROGRESS",TITLE_COMPLETE:"MOVE_TITLE_COMPLETE"},copy:{IN_PROGRESS:"COPY_IN_PROGRESS",IN_PROGRESS_ITEM:"COPY_IN_PROGRESS_SINGLE_ITEM",COMPLETE:"COPY_COMPLETE",COMPLETE_ITEM:"COPY_COMPLETE_SINGLE_ITEM",COMPLETE_WITH_ERRORS:"COPY_COMPLETE_WITH_ERRORS",COMPLETE_WITH_ERRORS_ITEM:"COPY_COMPLETE_WITH_ERRORS_SINGLE_ITEM",ERRORS:"COPY_ERRORS",ERROR_DEFAULT:"COPY_ERROR_MULTIPLE_ITEMS",ERROR_DEFAULT_ITEM:"COPY_ERROR_SINGLE_ITEM",TITLE_IN_PROGRESS:"COPY_TITLE_IN_PROGRESS",TITLE_COMPLETE:"COPY_TITLE_COMPLETE"},trash:{IN_PROGRESS:"MOVE_IN_PROGRESS",IN_PROGRESS_ITEM:"MOVE_IN_PROGRESS_SINGLE_ITEM",COMPLETE:"MOVE_COMPLETE",COMPLETE_ITEM:"MOVE_COMPLETE_SINGLE_ITEM",COMPLETE_WITH_ERRORS:"MOVE_COMPLETE_WITH_ERRORS",COMPLETE_WITH_ERRORS_ITEM:"MOVE_COMPLETE_WITH_ERRORS_SINGLE_ITEM",ERRORS:"MOVE_ERRORS",ERROR_DEFAULT:"TRASH_ERROR_MULTIPLE_ITEMS",ERROR_DEFAULT_ITEM:"TRASH_ERROR_SINGLE_ITEM",TITLE_IN_PROGRESS:"MOVE_TITLE_IN_PROGRESS",TITLE_COMPLETE:"MOVE_TITLE_COMPLETE"},restore:{IN_PROGRESS:"RESTORE_IN_PROGRESS",IN_PROGRESS_ITEM:"RESTORE_IN_PROGRESS_SINGLE_ITEM",COMPLETE:"RESTORE_COMPLETE",COMPLETE_ITEM:"RESTORE_COMPLETE_SINGLE_ITEM",COMPLETE_WITH_ERRORS:"RESTORE_COMPLETE_WITH_ERRORS",COMPLETE_WITH_ERRORS_ITEM:"RESTORE_COMPLETE_WITH_ERRORS_SINGLE_ITEM",ERRORS:"RESTORE_ERRORS",ERROR_DEFAULT:"RESTORE_ERROR_MULTIPLE_ITEMS",ERROR_DEFAULT_ITEM:"RESTORE_ERROR_SINGLE_ITEM",TITLE_IN_PROGRESS:"RESTORE_TITLE_IN_PROGRESS",TITLE_COMPLETE:"RESTORE_TITLE_COMPLETE"},emptyTrash:{IN_PROGRESS:"EMPTYTRASH_IN_PROGRESS",IN_PROGRESS_ITEM:"EMPTYTRASH_IN_PROGRESS",COMPLETE:"EMPTYTRASH_COMPLETE",COMPLETE_ITEM:"EMPTYTRASH_COMPLETE",COMPLETE_WITH_ERRORS:"EMPTYTRASH_ERRORS",COMPLETE_WITH_ERRORS_ITEM:"EMPTYTRASH_ERRORS",ERRORS:"EMPTYTRASH_ERRORS",ERROR_DEFAULT:"EMPTY_TRASH_ERROR",ERROR_DEFAULT_ITEM:"EMPTY_TRASH_ERROR",TITLE_IN_PROGRESS:"EMPTYTRASH_TITLE_IN_PROGRESS",TITLE_COMPLETE:"EMPTYTRASH_TITLE_COMPLETE"},deletePermanently:{IN_PROGRESS:"DELETE_IN_PROGRESS",IN_PROGRESS_ITEM:"DELETE_IN_PROGRESS_SINGLE_ITEM",COMPLETE:"DELETE_COMPLETE",COMPLETE_ITEM:"DELETE_COMPLETE_SINGLE_ITEM",COMPLETE_WITH_ERRORS:"DELETE_COMPLETE_WITH_ERRORS",COMPLETE_WITH_ERRORS_ITEM:"DELETE_COMPLETE_WITH_ERRORS_SINGLE_ITEM",ERRORS:"DELETE_ERRORS",ERROR_DEFAULT:"DELETE_ERROR_MULTIPLE_ITEMS",ERROR_DEFAULT_ITEM:"DELETE_ERROR_SINGLE_ITEM",TITLE_IN_PROGRESS:"DELETE_TITLE_IN_PROGRESS",TITLE_COMPLETE:"DELETE_TITLE_COMPLETE"},hideFromTrash:{IN_PROGRESS_ITEM:"HIDE_FROM_TRASH_IN_PROGRESS_SINGLE_ITEM",COMPLETE_ITEM:"HIDE_FROM_TRASH_COMPLETE_SINGLE_ITEM",ERROR_DEFAULT_ITEM:"HIDE_FROM_TRASH_ERROR_SINGLE_ITEM",TITLE_IN_PROGRESS:"HIDE_FROM_TRASH_TITLE_IN_PROGRESS",TITLE_COMPLETE:"HIDE_FROM_TRASH_TITLE_COMPLETE"}};return _.restoreExtend=_.restore,docs.models.MoveCopyMgr=docs.models.TimeredProgressable.extend({className:"MoveCopyMgr",logger:"MoveCopy",defaults:{timerInterval:2e3,isPageReloading:!1},initialize:function(e){switch(t.bindAll(this,"progressTitle","completeTitle","progressMessage","completeMessage","getItemErrors","getCompleteFailureErrors","progressPolling"),docs.models.TimeredProgressable.prototype.initialize.call(this,e),this.set("itemCount",this.get("selection").length),this.get("action")){case"trash":this.set("target",{id:docs.common.Session.getTrashFolderId(),name:docs.i18n.t("TRASH")}),"favorites"===this.get("sourceId")?this.set("sourceId","FLD_FAVORITES:"+h.userid):"collections"===this.get("sourceId")&&this.set("sourceId",docs.common.COLLECTION.FOLDER_ID);break;case"deletePermanently":case"hideFromTrash":this.isRemoveFromTrashAction=!0;case"restore":case"restoreExtend":this.set("sourceId",docs.common.Session.getTrashFolderId())}},locationLink:function(){var e=this.get("action"),t="",n=s,a=this.get("hide_trash_link");if(["trash","restore","restoreExtend","deletePermanently","hideFromTrash"].indexOf(e)>=0)t=h.embed||h.isPublicLink||h.isAppLink||a?docs.i18n.t("TRASH"):n({href:h.memberRoot+(this.get("trashLink")?this.get("trashLink"):"folder/home/trash"),name:docs.i18n.t("TRASH")});else{var r=this.get("target")&&this.get("target").name;r?t=h.embed||h.isAppLink?i.breakWords(r):n({href:o.getLocation(this.get("target").id),name:i.breakWords(r)}):this.get("itemName")&&(t=i.breakWords(this.get("itemName")))}return t},progressTitle:function(){var e=this.get("action");return docs.i18n.t(_[e].TITLE_IN_PROGRESS)},completeTitle:function(){var e=this.get("action");return docs.i18n.t(_[e].TITLE_COMPLETE)},progressMessage:function(){var e=this.get("action");return 1===this.get("itemCount")?docs.i18n.t(_[e].IN_PROGRESS_ITEM,i.breakWords(this.get("selection")[0].name),this.locationLink()):_[e].IN_PROGRESS?docs.i18n.t(_[e].IN_PROGRESS,this.get("itemCount"),this.locationLink()):"multiple item in progress string not provided"},completeMessage:function(){for(var e,n=["fFileGUID","fFolderGUID"],o=this.get("action"),s=this.get("itemCount"),a=this.get("errorList"),r=this.get("actionStatusList").slice(0),l=r.length-1;l>=0;l--)-1===t.indexOf(n,r[l].idType)&&"deprovision"!==o&&r.splice(l,1);if(a.length>0)e=1===s?docs.i18n.t(_[o].COMPLETE_WITH_ERRORS_ITEM,r.length,s,this.locationLink()):_[o].COMPLETE_WITH_ERRORS?docs.i18n.t(_[o].COMPLETE_WITH_ERRORS,r.length,s,this.locationLink()):"multiple item complete with error string not provided";else if(1===r.length){var c=this.locationLink();e=-1===c.indexOf("<a href=")&&c.replace(/\u200b/g,"")===r[0].newName?docs.i18n.t(_[o].COMPLETE_ITEM,i.breakWords(r[0].name),c):docs.i18n.t(_[o].COMPLETE_ITEM,i.breakWords(r[0].newName),c)}else e=_[o].COMPLETE?docs.i18n.t(_[o].COMPLETE,r.length,s,this.locationLink()):"multiple item complete string not provided";return e},perform:function(n){var o,s=this.get("selection");switch(this.get("action")){case"copy":o="FLD_COPY";break;case"trash":o=this.get("service")?this.get("service"):"FLD_MOVE_TO_TRASH";break;case"restore":o=this.get("service")?this.get("service"):"FLD_RESTORE";break;case"hideFromTrash":case"deletePermanently":o=this.get("service")?this.get("service"):"FLD_DELETE_FROM_TRASH";break;default:o="FLD_MOVE"}var a=i.getServiceParamsForPost(o);if("copy"===this.get("action")||"move"===this.get("action")){var r=this.get("target");a.data.destination="fFolderGUID:"+r.id}var l=[];t(s).each((function(e){var t=("file"===e.type||"digitalasset"===e.type?"fFileGUID:":"fFolderGUID:")+e.id;l.push(t)})),a.data.items=l.join(","),this.get("additionalData")&&e.extend(a.data,this.get("additionalData")),this.startProgressTimer(s);var c=this;e(window).on("beforeunload.moveCopyMgr",(function(){c.set("isPageReloading",!0)})),c.action=this.get("action"),this.get("useBackgroundJob")&&(a.data.useBackgroundThread=!0),e.ajax(a.url,{type:"POST",data:a.data,success:function(t){e(window).off("beforeunload.moveCopyMgr"),c.jobSuccessCallback(t,c,c)},error:function(e,t,i){c.jobErrorCallback(e,t,i,c,c)}})},progressPolling:function(){var n=i.formatServiceUrl("FLD_GET_BACKGROUND_JOB_STATUS");n+="&JobID="+this.get("jobID"),require(["core/util/SitesJsonify"],t.bind((function(o){e.ajax(n,{type:"GET",success:t.bind((function(n){var s=o.parse_SCS_GET_JOB_STATUS(n)[0];t.contains(["COMPLETE","FAILED","CANCELLED"],s.jobStatus)&&(window.clearInterval(this.progressTimer2),delete this.progressTimer2,e.ajax({url:i.formatServiceUrl("FLD_GET_BACKGROUND_JOB_RESPONSE_DATA")+"&JobID="+this.get("jobID"),type:"GET",success:t.bind((function(e){this.jobSuccessCallback(e,this,this)}),this),error:t.bind((function(e,t,i){this.jobErrorCallback(e,t,i,this,this)}),this)}))}),this),error:function(e,t,i){console.log(i)}})}),this))},jobSuccessCallback:function(e,t,i){var o=i,s=n.parse_FLD_MOVECOPY(e);if(o.get("useBackgroundJob")&&s.jobId&&0===s.actionStatusList.length)return o.set("jobID",s.jobId),o.progressPolling(),void(this.progressTimer2=window.setInterval(o.progressPolling,o.get("timerInterval")));var a=o.parseResponse(s,o.action);a.actionStatusList.length>0?(o.get("itemName")&&1===a.actionStatusList.length&&o.set({itemName:a.actionStatusList[0].newName},{silent:!0}),o.onSuccess(a.actionStatusList,a.errorList,t)):(t.stopProgressTimer(),t.set({errorList:a.errorList,errorMap:o.getCompleteFailureErrors()}),t.trigger("progressableFailed",o.action),t.trigger("movecopyfailed",o.action))},jobErrorCallback:function(e,t,i,o,s){var a=s;if(e.responseData){var r=n.parse_FLD_MOVECOPY(e.responseData),l=a.parseResponse(r,a.action);if(void 0!==i.errorMsgKey&&0===l.errorList.length){docs.common.Logger("MoveCopy").error("Error performing action",a.action,t,e);var c=[];c.push(i),o.set({errorList:c,errorMap:a.getItemErrors(),commonError:i.statusMessage,responseData:e.responseData}),o.stopProgressTimer(!0),o.trigger("movecopyfailed",a.action)}else l.actionStatusList.length<=0?(o.set({errorList:l.errorList,errorMap:a.getCompleteFailureErrors(),responseData:e.responseData}),o.stopProgressTimer(!0),o.trigger("movecopyfailed",a.action)):a.onSuccess(l.actionStatusList,l.errorList,o)}else{if(docs.common.Logger("MoveCopy").error("Error performing action",a.action,t,i),a.get("isPageReloading"))return e.reauthenticate=!1,void(e.errorHandled=!0);o.set({errorMessage:a.getDefaultError(a.action)}),a.stopProgressTimer(!0),a.trigger("movecopyfailed")}e.errorHandled=!0},getDefaultError:function(e){var t,n=this.get("selection"),o=!0;return n.length>1?o=!1:t=i.breakWords(n[0].name),o?docs.i18n.t(_[e].ERROR_DEFAULT_ITEM,t,this.locationLink()):_[e].ERROR_DEFAULT?docs.i18n.t(_[e].ERROR_DEFAULT,this.locationLink()):"multiple item error string not provided"},parseResponse:function(e){var i=this.get("sourceId"),n=this.get("target")?this.get("target").id:this.get("targetId"),o=this.get("selection"),s=this.get("model");docs.common.Logger("MoveCopy").debug("parse response","sourceId",i,"targetId",n,"selection",o);var a={actionStatusList:[],errorList:[],newDocInfo:e.newdocinfo};return t(e.actionStatusList).each((function(e){if(docs.common.Logger("MoveCopy").debug("processing actionStatus",e),e.success){if("copy"!==e.action&&"move"!==e.action&&"delete"!==e.action)return;var o=t.escape(e.resolvedName?e.resolvedName:e.displayName),r=e.itemId;if(0===e.action.indexOf("copy")&&this.itemList)if(1===this.itemList.length)r=this.itemList[0].id,o=this.itemList[0].name;else{var l=t.findWhere(this.itemList,{name:o});l&&(r=l.id)}a.actionStatusList.push({model:s,type:e.action,id:e.itemId,idType:e.itemType,name:e.displayName,newId:r,newName:o,sourceId:i,targetId:n})}else a.errorList.push(e)}),e),a},onSuccess:function(e,i,n){docs.common.Logger("MoveCopy").trace("MoveCopyManager.OnSuccess ActionStatusList",e),t(e).each((function(e){docs.events.trigger("folder:movecopy",e)})),this.set({actionStatusList:e,errorList:i,errorMap:this.getItemErrors()}),n.stopProgressTimer()},getItemErrors:function(){if(this.get("itemErrors"))return this.get("itemErrors");if(this.isRemoveFromTrashAction){var e=m(this.get("action"));return t.extend({},d,e)}return d},getCompleteFailureErrors:function(){if(this.get("completeFailureErrors"))return this.get("completeFailureErrors");if(this.isRemoveFromTrashAction){var e=m(this.get("action"),!0);return t.extend({},u,e)}return u}}),docs.models.MoveCopyMgr})),define("common/mixin/ConversationsMixin",["jquery","underscore","core/util/Globals","common/site/SitesUtils","core/util/SitesGlobals","common/plugin/jquery.stringformat"],(function(e,t,docs,i){"use strict";var n=docs.common.Globals;return docs.mixins.ConversationsMixin={pinnedIndicatorClass:"folderview-conversation-pinned",pinnedIndicatorSelector:function(){return"."+this.pinnedIndicatorClass},pinnedIndicatorImgSelector:function(){return"."+this.pinnedIndicatorClass+" img"},_conversationPinnedTemplate:function(e,t){if(this.isConversationsEnabled()){var i="containerview-item-button ";return t&&t.hideOpenClick||(i+="containerview-openClick "),i+="conversationType ws-toolbar-button",docs.template('<span class="containerview-action folderview-conversation-pinned never-text"><button class="'+i+'" title="{{ title }}" aria-label="{{ title }}"><span class="ui-icon ui-icon-conversation"></span></button></span>')(e)}return""},_getIndicatorMarkup:function(e,t,i){return this._conversationPinnedTemplate({title:e,alt:t},i)},getConversationIndicatorMarkup:function(t){var i=t||{},n=this.model.isFile?docs.i18n.t("FILE_CONVERSATION_PINNED_TT"):this.model.isFolder?docs.i18n.t("FOLDER_CONVERSATION_PINNED_TT"):docs.i18n.t("FILE_CONVERSATION_PINNED_ALT",this.model.get("name")),o=e.stringFormat(this.model.isFile?docs.i18n.t("FILE_CONVERSATION_PINNED_ALT"):docs.i18n.t("FOLDER_CONVERSATION_PINNED_ALT"),this.model.get("name"));return this._getIndicatorMarkup(n,o,i)},setupItemConversationIndicator:function(t,i){var n=e(i),o=n.find(".folderview-conversation-pinned"),s=n.find(".folderview-conversation-pinned-placeholder");t?(o.remove(),s.remove()):(s.length>0?(o.detach().insertBefore(s),s.remove()):o.detach().prependTo(n),this.updatePinnedConversation())},setupContainerConversationIndicator:function(t,i){var n=this.$(this.pinnedIndicatorSelector());if(i)n.remove();else{if(0===n.length){var o=this.model.isFolder?docs.i18n.t("FOLDER_CONVERSATION_PINNED_TT"):docs.i18n.t("FILE_CONVERSATION_PINNED_TT"),s=this.model.isFolder?docs.i18n.t("FOLDER_CONVERSATION_PINNED_ALT"):docs.i18n.t("FILE_CONVERSATION_PINNED_ALT");t.append(this._getIndicatorMarkup(o,e.stringFormat(s,this.model.get("name"))))}this.updatePinnedConversation()}},updatePinnedConversation:function(e){if((e=e||{}).useLayoutRefresh){var i=!t.isEmpty(this.model.get("conversationId"));this.$(".asset-flag-conversation").toggleClass("hide-icon",!i)}else{var n=this.model.get("flags"),o=this.$(".folderview-conversation-pinned button");this.model.get("conversationId")||n&&n.hasAssocConversation?(o.show(),this.$(".folderview-conversation-pinned").removeClass("hidden")):(o.hide(),this.$(".folderview-conversation-pinned").addClass("hidden"))}t.isFunction(this.updateAriaLabel)&&this.updateAriaLabel()},getConversationAriaLabel:function(){if(this.isConversationsEnabled()){var e=this.model.get("flags");if(this.model.get("conversationId")||e&&e.hasAssocConversation)return" "+docs.i18n.t("CONVERSATION_PINNED_ARIA_LABEL")}return""},isConversationsEnabled:function(e){return!(n.isAppLink||n.isPublicLink||i.isSites(e))}},docs.mixins.ConversationsMixin})),define("common/plugin/jquery.ui.bubblewrap",["jquery","underscore","jqueryui-amd/widgets/button","css!geminiCss/gemini-form-controls"],(function(e,t){"use strict";e.widget("ui.bubblewrap",{_create:function(){this.element.addClass("ui-bubble-wrap"),this.element.empty(),this.options.placeholder=this.options.placeholder||"",this.$userInput=e('<input class="ui-bubble-input metadata-value" type="text" maxlength="50" placeholder="'+this.options.placeholder+'" />'),this.options.label?this.$userInput.attr("aria-label",this.options.label):this.options.labeledBy&&this.$userInput.attr("aria-labelledby",e(this.options.labeledBy).attr("id")),this.element.append(this.$userInput),this._startListening(),t.has(this.options,"allowHashPrefix")||(this.options.allowHashPrefix=!0),this.options.initialBubbles&&this.options.initialBubbles.length&&this._resetBubbles(this.options.initialBubbles)},_startListening:function(){this.$userInput.on({keydown:e.proxy(this._userInputKeydown,this),input:e.proxy(this._userInputChanged,this)}),this.element.on("click.bubblewrap","button.bubble-wrap-item-remove",e.proxy(this._removeBubble,this))},_stopListening:function(){this.$userInput.off(),this.element.off(".bubblewrap")},_destroy:function(){this._stopListening()},_addBubble:function(e){if(!e||!t.isString(e)||t.isEmpty(e.trim()))throw"Parameter must be defined string with non whitespace length";var i=this._appendPrefix(e.trim()),n=this._createBubble(i);n.insertBefore(this.$userInput),t.isFunction(this.options.styleBubbleCallback)&&this.options.styleBubbleCallback(n),!this.controlAdding&&t.isFunction(this.options.addBubbleCallback)&&this.options.addBubbleCallback(i)},_resetBubbles:function(i){e(".bubble-wrap-item",this.element).remove(),this.controlAdding=!0;try{t.each(i,(function(e){this._addBubble(e)}),this)}finally{this.controlAdding=!1}},_appendPrefix:function(e){return this.options.prefixChar&&0!==e.indexOf(this.options.prefixChar)&&(e=this.options.prefixChar+e),e},_createBubble:function(i){var n=t.escape(i),o=e('<div class="bubble-wrap-item" data-bubble="'+n+'" title="'+n+'">');e('<span class="bubble-wrap-item-text">').text(i).appendTo(o);var s=t.escape(docs.i18n.t("UI_USERSELECTOR_REMOVE_USER",i)),a=e('<button type="button" class="bubble-wrap-item-remove containerview-header-button" label="'+s+'" title="'+s+'"></button>');return a.button({text:!1,icons:{primary:"ui-icon-closethick oj-ux-icon oj-ux-ico-close-circle-s"}}),a.removeClass("ui-button-text-icon-primary"),a.attr("aria-label",s),a.appendTo(o),o},_removeBubble:function(i){var n=e(i.target).closest(".bubble-wrap-item"),o=t.unescape(n.data("bubble"));n.remove(),t.isFunction(this.options.removeBubbleCallback)&&this.options.removeBubbleCallback(o),i.stopPropagation()},getValue:function(){var i=e(".bubble-wrap-item",this.element),n=[];return t.each(i,(function(i){n.push(t.unescape(e(i).data("bubble").toString()))}),this),n},setValue:function(e){this._resetBubbles(e)},enterKey:function(){var e=this.$userInput.val();e&&!t.isEmpty(e.trim())&&(this._addBubble(e),this.$userInput.val(""))},isDirty:function(){var e=this.$userInput.val();return e&&!t.isEmpty(e.trim())},disable:function(){e.Widget.prototype.disable.call(this,arguments)},enable:function(){e.Widget.prototype.enable.call(this,arguments)},_userInputKeydown:function(i){if(i.which===e.ui.keyCode.BACKSPACE&&0===this.$userInput.val().length)return i.stopPropagation(),void i.preventDefault();var n=this.$userInput[0].selectionStart,o=this.$userInput[0].selectionEnd,s=this.$userInput.val().length,a=0===n,r=n===o&&o===s;if(i.which===e.ui.keyCode.ENTER||i.which===e.ui.keyCode.COMMA&&r&&(","===i.key||i.originalEvent&&"U+002C"===i.originalEvent.keyIdentifier)||r&&(";"===i.key||i.originalEvent&&"U+003B"===i.originalEvent.keyIdentifier)){var l=this.$userInput.val();if(l&&!t.isEmpty(l.trim()))return"#"!==l&&this.enterKey(),i.stopPropagation(),void i.preventDefault()}this.options.prefixChar&&this.options.prefixChar.length&&this.restrictedKeys().indexOf(this.options.prefixChar);var c=i.originalEvent&&i.originalEvent.keyIdentifier?this.restrictedIdentifiers():this.restrictedKeys(),h=i.originalEvent&&i.originalEvent.keyIdentifier?i.originalEvent.keyIdentifier:i.key,d=c.indexOf(h);this.options.allowHashPrefix;d>=0&&(i.stopPropagation(),i.preventDefault())},_userInputKeyup:function(){},_userInputChanged:function(){var e=this.$userInput[0].selectionStart,i=this.$userInput.val(),n="",o=!1,s=this.options.allowHashPrefix;i=i?i.toString():"";var a=s&&i.length&&"#"===i.charAt(0),r=i.split(/[#]/g);r=t.filter(r,(function(e,t,i){var n=0===e.trim().length,o=t===i.length-1;return!n||o}));var l=[];if(t.each(r,(function(e,t){(a||t>0)&&(e="#"+e);var i=e.split(/[,;]/g);Array.prototype.push.apply(l,i)})),(l=t.filter(l,(function(e,t,i){var n=0===e.trim().length;return!(t!==i.length-1&&"#"===e)&&!n}))).length>1){this.controlAdding=!!this.options.oneUpdateOnBreak;for(var c=0;c<l.length-1;c++){var h=l[c];h=this._filterValue(h),this._addBubble(h)}this.controlAdding&&(this.controlAdding=!1,t.isFunction(this.options.addBubbleCallback)&&this.options.addBubbleCallback()),i=l[l.length-1],e=(n=this._filterValue(i)).length,o=!0}else n=this._filterValue(i),o=!t.isEqual(n,i);o&&(this.$userInput.val(n),this.$userInput[0].selectionStart=e,this.$userInput[0].selectionEnd=e)},_filterValue:function(e){e=e?e.toString():"";var t=this.options.prefixChar,i=this.options.allowHashPrefix;return e=e.replace(/[#*&|<?>{}()`,;=+^\\]/g,(function(e,n){return 0===n&&(t&&t.length&&t===e||i&&"#"===e)?e:""}))},_restrictedChars:[{key:"*",keyIdentifier:"U+002A"},{key:"&",keyIdentifier:"U+0026"},{key:"|",keyIdentifier:"U+007C"},{key:"<",keyIdentifier:"U+003C"},{key:"?",keyIdentifier:"U+003F"},{key:">",keyIdentifier:"U+003E"},{key:"{",keyIdentifier:"U+007B"},{key:"}",keyIdentifier:"U+007D"},{key:"(",keyIdentifier:"U+0028"},{key:")",keyIdentifier:"U+0029"},{key:"`",keyIdentifier:"U+0060"},{key:"=",keyIdentifier:"U+003D"},{key:"+",keyIdentifier:"U+002B"},{key:"^",keyIdentifier:"U+005E"},{key:"\\",keyIdentifier:"U+005C"}],restrictedKeys:function(){return this.restrictedKeyValues||(this.restrictedKeyValues=t.pluck(this._restrictedChars,"key")),this.restrictedKeyValues},restrictedIdentifiers:function(){return this.restrictedIdentifierValues||(this.restrictedIdentifierValues=t.pluck(this._restrictedChars,"keyIdentifier")),this.restrictedIdentifierValues}})})),define("common/share/ShareErrorMap",["jquery","underscore"],(function(e,t){"use strict";return{SharingErrorMap:{csUnableToShareFolder:{causes:{csSecurityValidationFailed:{causes:{csFldDoesNotExist:{formatString:"SHARED_FOLDER_DOES_NOT_EXIST",args:0,responseArgs:["LocalData.folderName"]}}},csItemInTrash:{formatString:"SHARED_FOLDER_IN_TRASH",args:0,responseArgs:["LocalData.folderName"]},csCloudItemInsufficientPrivileges:{formatString:"SHARE_INSUFFICIENT_PRIVS",args:0,responseArgs:["LocalData.folderName"]}}},csFolderAlreadyShared:{formatString:"FOLDER_ALREADY_SHARED",args:2},csAssetChannelAlreadyShared:{formatString:"FOLDER_ALREADY_SHARED",args:0,responseArgs:["LocalData.folderName","LocalData.dUserIDs"]},csAssetChannelAlreadySharedSamePrivilege:{formatString:"FOLDER_ALREADY_SHARED",args:0,responseArgs:["LocalData.folderName","LocalData.dUserIDs"]},csAssetsCannotShareRepositoryWithUserNotEnt:{formatString:"CANT_SHARE_WITH_NON_ENT",args:0,responseArgs:["LocalData.folderName"]},csAssetsUserNotEnterprise:{formatString:"CANT_SHARE_WITH_NON_ENT",args:0,responseArgs:["LocalData.folderName"]},csCannotShareEnterpriseSiteWithStandardUser:{formatString:"CANT_SHARE_WITH_NON_ENT",args:0,responseArgs:["LocalData.folderName"]},csAssetsFolderInsufficientPrivilege:{formatString:"CANT_SHARE_WITH_NO_REPO_ACCESS",args:0,responseArgs:["LocalData.folderName"]},csUserNotFound:{formatString:"CANT_SHARE_DOES_NOT_EXIST",args:0,responseArgs:["LocalData.folderName"]},defaultMsg:{formatString:"GENERIC_ADD_MEMBER_ERROR",args:0,responseArgs:["LocalData.folderName"]}},UnshareAssetMap:{csSecurityValidationFailed:{causes:{csFldDoesNotExist:{formatString:"REMOVE_USER_ITEM_DOES_NOT_EXIST",args:0,responseArgs:["LocalData.folderName"]}}},csItemInTrash:{formatString:"REMOVE_USER_ITEM_IN_TRASH",args:0,responseArgs:["LocalData.folderName"]},csCloudItemInsufficientPrivileges:{formatString:"REMOVE_USER_INSUFFICIENT_PRIVS",args:0,responseArgs:["LocalData.folderName"]},defaultMsg:{formatString:"GENERIC_REMOVE_USER_ERROR",args:0,responseArgs:["LocalData.folderName"]}}}})),define("docs/sidebar/template/BaseSideboard.template",["underscore"],(function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="sideboard-wrapper">  <div class="sideboard-content"></div></div>';return __p}})),define("docs/sidebar/template/SampleSidebarPane.template",["underscore"],(function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="sample-sidebar-wrapper">  <div class="sample-sidebar-content"></div></div>';return __p}})),define("common/sidebar/view/BaseSideboard",["jquery","underscore","backbone","core/util/Globals","core/util/Logger","docs/sidebar/template/BaseSideboard.template","docs/sidebar/template/SampleSidebarPane.template"],(function(e,t,i,docs,n,o,s){"use strict";var a=n("BaseSideboard");return docs.views.BaseSideboard=i.View.extend({className:"full-height-pane",template:s,sideboardName:"sample",title:void 0,renderData:function(){},postRender:function(){},setWantFocus:null,initialize:function(){a.debug("Initializing"),t.bindAll(this,"onContainerChange"),this.container=this.model.get("container"),this.listenTo(this.model,"change:container",this.onContainerChange)},onContainerChange:function(e){a.debug("Handling container change to "+this.model.get("container").id);var t=this.isActive;this.deactivate(),this.container=e?e.get("container"):this.model.get("contextActions").container,t&&(this.render(),this.activate())},render:function(){var e=t.extend({i18n:docs.i18n},t.result(this,"renderData"));this.$el.empty(),this.$el.html(o({i18n:docs.i18n})),this.$el.find(".sideboard-content").html(this.template(e)),this.postRender()},activate:function(){a.debug("Activating"),this.isActive=!0},deactivate:function(){a.debug("Deactivating"),this.isActive=!1},closePaneHandler:function(){a.debug("Handling pane close"),docs.events.trigger("sidebar:toggleSidebar",this.sideboardName)},close:function(){a.debug("Closing"),this.remove()}}),docs.views.BaseSideboard})),define("common/util/IconMap",["core/util/Globals"],(function(docs){"use strict";var e=docs.common.Globals.staticRoot+"images/iconmap/";return docs.common.IconMap={components:{Article_Block_1:{label:"ICONMAP_ARTICLE_BLOCK_1",gray:e+"article-block-1.svg",white:e+"article-block-1-white.svg",uxIcon:"oj-ux-ico-file-doc-alt"},Article_Block_2:{label:"ICONMAP_ARTICLE_BLOCK_2",gray:e+"article-block-2.svg",white:e+"article-block-2-white.svg",uxIcon:"oj-ux-ico-notes"},Article_Detail:{label:"ICONMAP_ARTICLE_DETAIL",gray:e+"article-detail.svg",white:e+"article-detail-white.svg",uxIcon:"oj-ux-ico-article-detail"},Article_Summary:{label:"ICONMAP_ARTICLE_SUMMARY",gray:e+"article-summary.svg",white:e+"article-summary-white.svg",uxIcon:"oj-ux-ico-article-summary"},Banner:{label:"ICONMAP_BANNER",gray:e+"banner.svg",white:e+"banner-white.svg",uxIcon:"oj-ux-ico-advertisement"},Bulletted_List:{label:"ICONMAP_BULLETTED_LIST",gray:e+"bulletted-list.svg",white:e+"bulletted-list-white.svg",uxIcon:"oj-ux-ico-list-bulleted"},Calendar_Item:{label:"ICONMAP_CALENDAR_ITEM",gray:e+"calendar-item.svg",white:e+"calendar-item-white.svg",uxIcon:"oj-ux-ico-event"},Carousel:{label:"ICONMAP_CAROUSEL",gray:e+"carousel.svg",white:e+"carousel-white.svg",uxIcon:"oj-ux-ico-carousel"},Component:{label:"ICONMAP_COMPONENT",gray:e+"component.svg",white:e+"component-white.svg",uxIcon:"oj-ux-ico-component-general"},Component_Group:{label:"ICONMAP_COMPONENT_GROUP",gray:e+"component-group.svg",white:e+"component-group-white.svg",uxIcon:"oj-ux-ico-components-group"},Content_Form:{label:"ICONMAP_CONTENT_FORM",gray:e+"content-form.svg",white:e+"content-form-white.svg",uxIcon:"oj-ux-ico-create-options"},Content_Group:{label:"ICONMAP_CONTENT_GROUP",gray:e+"content-group.svg",white:e+"content-group-white.svg",uxIcon:"oj-ux-ico-option"},Content_Layout:{label:"ICONMAP_CONTENT_LAYOUT",gray:e+"content-layout.svg",white:e+"content-layout-white.svg",uxIcon:"oj-ux-ico-content-layout"},Content_Type:{label:"ICONMAP_CONTENT_TYPE",gray:e+"content-type.svg",white:e+"content-type-white.svg",uxIcon:"oj-ux-ico-file-text"},Collection:{label:"ICONMAP_COLLECTION",gray:e+"collection.svg",white:e+"collection-white.svg",uxIcon:"oj-ux-ico-collections"},Field_Editor:{label:"ICONMAP_CONTENT_FIELD_EDITOR",gray:e+"field-editor.svg",white:e+"field-editor-white.svg",uxIcon:"oj-ux-ico-edit-box"},Gallery:{label:"ICONMAP_GALLERY",gray:e+"gallery.svg",white:e+"gallery-white.svg",uxIcon:"oj-ux-ico-grid-view-small"},List_Horizontal:{label:"ICONMAP_LIST_HORIZONTAL",gray:e+"list-horizontal.svg",white:e+"list-horizontal-white.svg",uxIcon:"oj-ux-ico-list-h"},List_Vertical:{label:"ICONMAP_LIST_VERTICAL",gray:e+"list-vertical.svg",white:e+"list-vertical-white.svg",uxIcon:"oj-ux-ico-list-round"},Listing:{label:"ICONMAP_LISTING",gray:e+"listing.svg",white:e+"listing-white.svg",uxIcon:"oj-ux-ico-dollar-note"},Local_Component:{label:"ICONMAP_LOCAL_COMPONENT",gray:e+"local-component.svg",white:e+"local-component-white.svg",uxIcon:"oj-ux-ico-chevron-circle-down-alt"},Polls:{label:"ICONMAP_POLLS",gray:e+"polls.svg",white:e+"polls-white.svg",uxIcon:"oj-ux-ico-radio-set"},Remote_Component:{label:"ICONMAP_REMOTE_COMPONENT",gray:e+"remote-component.svg",white:e+"remote-component-white.svg",uxIcon:"oj-ux-ico-chevron-circle-up-alt"},RSS_Template_Component:{label:"ICONMAP_RSS_TEMPLATE",gray:e+"field-editor.svg",white:e+"field-editor-white.svg",uxIcon:"oj-ux-ico-rss"},Section_Layout:{label:"ICONMAP_SECTION_LAYOUT",gray:e+"section-layout.svg",white:e+"section-layout-white.svg",uxIcon:"oj-ux-ico-layout-3-col"},Slider:{label:"ICONMAP_SLIDER",gray:e+"slider.svg",white:e+"slider-white.svg",uxIcon:"oj-ux-ico-slider"},Slug:{label:"ICONMAP_SLUG",gray:e+"slug.svg",white:e+"slug-white.svg",uxIcon:"oj-ux-ico-slug"},Statistic:{label:"ICONMAP_STATISTIC",gray:e+"statistic.svg",white:e+"statistic-white.svg",uxIcon:"oj-ux-ico-chart-pie"},Summary_Block_1:{label:"ICONMAP_SUMMARY_BLOCK_1",gray:e+"summary-block-1.svg",white:e+"summary-block-1-white.svg",uxIcon:"oj-ux-ico-summary"},Summary_Block_2:{label:"ICONMAP_SUMMARY_BLOCK_2",gray:e+"summary-block-2.svg",white:e+"summary-block-2-white.svg",uxIcon:"oj-ux-ico-summary-block"},Tabs:{label:"ICONMAP_TABS",gray:e+"tabs.svg",white:e+"tabs-white.svg",uxIcon:"oj-ux-ico-tab-panel"},Timeline:{label:"ICONMAP_TIMELINE",gray:e+"timeline.svg",white:e+"timeline-white.svg",uxIcon:"oj-ux-ico-timeline"},VBCS_Component:{label:"ICONMAP_VBCS_COMPONENT",gray:e+"vbcs-component.svg",white:e+"vbcs-component-white.svg",uxIcon:"oj-ux-ico-developer-tools"}},jobs:{Publishing_Job:{label:"ICONMAP_PUBLISHING_JOB",white:e+"Publishing_Job.svg",uxIcon:"oj-ux-ico-briefcase"},Scheduled_Publishing_Job:{label:"ICONMAP_SCHEDULED_PUBLISHING_JOB",white:e+"Scheduled_Publishing_Job.svg",uxIcon:"oj-ux-ico-briefcase-clock"},Rendition_Job:{label:"ICONMAP_RENDITION_JOB",white:e+"Rendition_Job.svg",uxIcon:"oj-ux-ico-code"}},siteplans:{Site_Plan:{label:"ICONMAP_SITE_PLAN",white:e+"Publishing_Job.svg",uxIcon:"oj-ux-ico-site-plan"}}},docs.common.IconMap})),define("docs/mixins/FavoritesCache",["jquery","underscore","core/util/Globals","core/dialog/MessageDialog","core/util/Service","core/util/Jsonify","core/util/ErrorMsg","core/util/Logger","core/util/Session","core/view/MessageBar","core/util/FeatureFlags"],(function(e,t,docs,i,n,o){"use strict";var s=docs.common.Globals;return docs.mixins.FavoritesCache={loadCache:function(i){if(!docs.common.Session.isAnonymous()&&!s.isAppLink){this.cacheInProgress=!0;var a=n.formatServiceUrl("FLD_BROWSE_FAVORITES");a+="&doCombinedBrowse=1&combinedStartRow="+i;var r,l=[],c=this;e.ajax(a,{type:"get",async:!0,success:function(e){r=e.LocalData.TotalChildItemsCount,l=o.parse_FLD_BROWSE_FAVORITES(e),0===i&&(c.favorites={}),t(l).each((function(e){c.favorites[e]=!0;var t="favorites:"+e;docs.events.trigger(t)}));var n=Object.keys(c.favorites).length;r>n?c.loadCache(n):c.cacheInProgress=!1},error:function(e,t,i){c.cacheInProgress=!1,e.responseData?(c.cacheInProgress=!1,new docs.views.MessageBar({messageText:docs.i18n.t("GET_FAVORITE_FAILED_MSG"),messageType:"error"}),e.errorHandler=!0):docs.common.Logger("Favorites").error(t+i)}})}},isItemInCache:function(e){return!(!this.favorites||!0!==this.favorites[e])},isCacheLoaded:function(){return!!this.favorites},getCache:function(){return this.favorites},add:function(e){this.favorites||(this.favorites={}),this.favorites[e]=!0},remove:function(e){this.favorites&&delete this.favorites[e]},isCacheInProgress:function(){return this.cacheInProgress},isFavorite:function(e){return this.isCacheLoaded()||this.isCacheInProgress()||this.loadCache(0),this.isItemInCache(e.get("id"))},addFavorite:function(t,o){var s=n.getServiceParamsForPost("ADD_FAVORITES"),a=o.isFolder?"fFolderGUID:":"fFileGUID:";s.data.items=a+o.get("id");var r=this;e.ajax(s.url,{type:"POST",data:s.data,success:function(){r.add(o.get("id")),o.set("favorite",!0,{silent:!0});var e="favorites:"+o.get("id");docs.events.trigger(e),docs.events.trigger("containerItem:refreshSelection",o)},error:function(e,t,n){e.responseData&&(new docs.views.MessageBar({messageText:docs.i18n.t("ADD_FAVORITE_FAILED_MSG",o.get("name")),messageType:"error",commands:[{text:docs.i18n.t("WEBBAR_SHOW_DETAILS"),id:"detailsButton",click:function(){e.responseData.LocalData.itemName=o.get("name"),i.show({title:docs.i18n.t("WEBBAR_SHOW_DETAILS"),message:docs.common.ErrorMsg.getErrorMessageFromSet(r.addFavoriteErrors,n,e.responseData),defaultButton:"ok"})}}]}),e.errorHandled=!0)}})},deleteFavorite:function(t,o){var s=n.getServiceParamsForPost("DELETE_FAVORITES"),a=o.isFolder?"fFolderGUID:":"fFileGUID:";s.data.items=a+o.get("id");var r=this;e.ajax(s.url,{type:"POST",data:s.data,success:function(){r.remove(o.get("id")),o.set("favorite",!1,{silent:!0});var e="favorites:"+o.get("id");docs.events.trigger(e),docs.events.trigger("containerItem:refreshSelection",o),t.collection&&t.collection.container.isFavorites&&t.collection.remove(o)},error:function(e,t,n){e.responseData&&new docs.views.MessageBar({messageText:docs.i18n.t("DELETE_FAVORITE_FAILED_MSG",o.get("name")),messageType:"error",commands:[{text:docs.i18n.t("WEBBAR_SHOW_DETAILS"),id:"detailsButton",click:function(){e.responseData.LocalData.itemName=o.get("name"),i.show({title:docs.i18n.t("WEBBAR_SHOW_DETAILS"),message:docs.common.ErrorMsg.getErrorMessageFromSet(r.deleteFavoriteErrors,n,e.responseData),defaultButton:"ok"})}}]})}})},addFavoriteErrors:{csFldUnableToAddFavorites:{causes:{csSecurityValidationFailed:{causes:{csFldDoesNotExist:{formatString:"ACTION_ADD_FAVORITE_DELETED",responseArgs:["LocalData.itemName"]}}},csFldDoesNotExist:{formatString:"ACTION_ADD_FAVORITE_DELETED",responseArgs:["LocalData.itemName"]},csCloudItemInsufficientPrivileges:{formatString:"ACTION_ADD_FAVORITE_INSUFFICIENT_PREVILEGE",responseArgs:["LocalData.itemName"]}}},defaultMsg:{formatString:"GENERIC_ADD_FAVORITE_ERROR",responseArgs:["LocalData.itemName"]}},deleteFavoriteErrors:{csFldUnableToDeleteFavorites:{causes:{csSecurityValidationFailed:{causes:{csFldDoesNotExist:{formatString:"ACTION_DELETE_FAVORITE_DELETED",responseArgs:["LocalData.itemName"]}}},csFldDoesNotExist:{formatString:"ACTION_DELETE_FAVORITE_DELETED",responseArgs:["LocalData.itemName"]},csCloudItemInsufficientPrivileges:{formatString:"ACTION_DELETE_FAVORITE_INSUFFICIENT_PREVILEGE",responseArgs:["LocalData.itemName"]}}},defaultMsg:{formatString:"GENERIC_DELETE_FAVORITE_ERROR",responseArgs:["LocalData.itemName"]}}},docs.mixins.FavoritesCache})),define("docs/mixins/FavoritesMixin",["jquery","underscore","core/util/Globals","docs/mixins/FavoritesCache","common/site/SitesUtils"],(function(e,t,docs,i,n){"use strict";var o=docs.common.Globals;return docs.mixins.FavoritesMixin={favoriteButtonItemClass:"folderview-favorite-button",favoriteButtonContainerClass:"current-folderview-favorite-button",favoriteButtonItemSelector:function(){return"."+this.favoriteButtonItemClass},favoriteButtonContainerSelector:function(){return"."+this.favoriteButtonContainerClass},favoriteItemEvents:function(){var e={};return this.isFavoritesEnabled()&&(e["click "+this.favoriteButtonItemSelector()]="favoriteItemClickHandler",e["keydown "+this.favoriteButtonItemSelector()]="favoriteItemKeyDownHandler"),e},favoriteContainerEvents:function(){var e={};return this.isFavoritesEnabled()&&(e["click "+this.favoriteButtonContainerSelector()]="favoriteContainerClickHandler"),e},registerFavoritesListener:function(){this._registerFavoritesListener(this.updateFavorite)},registerContainerFavoritesListener:function(){this._registerFavoritesListener(this.updateContainerFavorite)},_registerFavoritesListener:function(e){if(this.isFavoritesEnabled()){var t="favorites:"+this.model.get("id");this.listenTo(docs.events,t,e)}},isFavorite:function(e){return this.isFavoritesEnabled()&&i.isFavorite(e)},updateFavorite:function(){this._updateFavorite(this.favoriteButtonItemSelector())},updateContainerFavorite:function(){this._updateFavorite(this.favoriteButtonContainerSelector())},_updateFavorite:function(e){this.isFavoritesEnabled()&&(this.model.set("favoritesEnabled",!0),this.isFavorite(this.model)?(this.model.set("favorite",!0,{silent:!0}),this.$(e).find(".star").addClass("active"),this.$(e).attr("title",docs.i18n.t("ACTION_DELETE_FAVORITE")).attr("aria-label",docs.i18n.t("ACTION_DELETE_FAVORITE_ITEM_TT",t.unescape(this.model.get("name"))))):(this.model.set("favorite",!1,{silent:!0}),this.$(e).find(".star").removeClass("active"),this.$(e).attr("title",docs.i18n.t("ACTION_ADD_FAVORITE")).attr("aria-label",docs.i18n.t("ACTION_ADD_FAVORITE_ITEM_TT",t.unescape(this.model.get("name")))))),t.isFunction(this.updateAriaLabel)&&this.updateAriaLabel()},setupItemFavoriteButton:function(e){e?this.$(this.favoriteButtonItemSelector()).remove():this.updateFavorite()},setupContainerFavoriteButton:function(e,t){var i=this.$(this.favoriteButtonContainerSelector());t?i.remove():(0===i.length&&e.append(this.favoriteContainerButtonMarkup()),this.updateContainerFavorite())},favoriteContainerClickHandler:t.debounce((function(e){e&&(e.stopPropagation(),e.preventDefault()),this.toggleFavorite(this.model)}),500,!0),favoriteItemKeyDownHandler:function(t){if(t.keyCode===e.ui.keyCode.ENTER||t.keyCode===e.ui.keyCode.SPACE){var i=this.containerItemfromRowEl(t.target);return this.toggleFavorite(i),!1}},favoriteItemClickHandler:function(t){var i=this.containerItemfromRowEl(t.target),n=this.getSelection();return e(t.target).toggleClass("active"),1===n.length&&n[0].id===i.id?this.toggleFavoriteFromSelection(n):(this.rowClick(t),1===(n=this.getSelection()).length?this.toggleFavoriteFromSelection(n):0===n.length&&t.target&&(i=this.$(".containerview-item #"+t.target.id).closest("li"))&&this.toggleFavoriteFromSelection(i)),!1},toggleFavoriteFromSelection:function(e){var t=this.collection.where({id:e[0].id})[0];this.toggleFavorite(t)},toggleFavorite:function(e){e.get("favorite")?i.deleteFavorite(this,e):i.addFavorite(this,e)},favoriteItemButtonMarkup:function(){return this.isFavoritesEnabled()?'<span class="containerview-indicator"><button class="containerview-item-button favorite '+this.favoriteButtonItemClass+'"><span class="ui-icon favorite star"></span></button></span>':""},favoriteContainerButtonMarkup:function(){return this.isFavoritesEnabled()?'<button class="'+this.favoriteButtonContainerClass+' ws-toolbar-button never-text">'+docs.i18n.t("FAVORITES")+"</button>":""},isFavoritesEnabled:function(e){return!(o.isAppLink||o.isPublicLink||n.isSites(e)||this.disableFavorites)}},docs.mixins.FavoritesMixin})),define("docs/container/tableview/ActionsTableCellView.template",["underscore"],(function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="<span class='containerview-table-cell actions-cell rowView'>  <span class=\"containerview-buttons\">    ",hideScheduledJob||(__p+='    <span class="containerview-action">      <button class="containerview-card-button containerview-item-button" title="'+(null==(__t=i18n.t("PUBLISHING_JOB_SCHEDULED_LATER_TT"))?"":_.escape(__t))+'">        <span class="ui-icon-scheduled-job '+(null==(__t=isAssetScheduledToPublish?"show":"")?"":_.escape(__t))+'"></span>      </button>    </span>    '),__p+="    ",hideReservation||(__p+='    <span class="containerview-indicator"><span class="ui-icon ui-icon-lock folderview-reserved" title="'+(null==(__t=reserveTooltip)?"":_.escape(__t))+'"></span></span>    '),__p+='    <span class="containerview-table-conversation-action"><span class="containerview-indicator folderview-conversation-pinned-placeholder"></span></span>    ',hideAssetLock||(__p+='      <span class="containerview-action">        <button class="containerview-card-button containerview-item-button asset-lock-icon ws-toolbar-button '+(null==(__t=isAssetLocked?"show":"")?"":_.escape(__t))+'" title="'+(null==(__t=assetLockTitle&&!_.isEmpty(assetLockTitle)?assetLockTitle:i18n.t("ASSET_STATUS_LOCKED_BY_YOU"))?"":_.escape(__t))+'">          <span class="ui-icon ui-icon-lock"></span>        </button>      </span>    '),__p+="    ",hideDownload||(__p+="      ",isFolder||showEmptyDownload?__p+='      <span class="containerview-action"><span class="empty"></span></span>      ':__p+='      <span class="containerview-action">        <button class="containerview-item-button folderview-download-button ws-toolbar-button" title="'+(null==(__t=i18n.t("GENERAL_CMD_DOWNLOAD"))?"":_.escape(__t))+'">          <span class="ui-icon ui-icon-athena-download"></span>        </button>      </span>      ',__p+="    "),__p+="    ",hideShare||(__p+='    <span class="containerview-action action-share-button">      <button class="containerview-item-button folderview-share-button ws-toolbar-button">        <span class="ui-icon ui-icon-athena-share"></span>      </button>    </span>    '),__p+="    ",hidePreview||(__p+='    <span class="containerview-action">      <button class="containerview-card-button containerview-item-button preview-button ws-toolbar-button" title="'+(null==(__t=i18n.t("ACTION_PREVIEW"))?"":_.escape(__t))+'">        <span class="ui-icon ui-icon-preview"></span>      </button>    </span>    '),__p+="  </span></span>";return __p}})),define("docs/container/tableview/ActionsTableCellView",["jquery","underscore","backbone","core/util/Globals","common/mixin/ConversationsMixin","docs/mixins/FavoritesMixin","core/util/FeatureFlags","core/util/Session","docs/container/tableview/ActionsTableCellView.template"],(function(e,t,i,docs,n,o,s,a,r){"use strict";var l=docs.common.Globals;return i.View.extend(t.extend({initialize:function(e){return this.options=e||{},this},render:function(){var e="";if(this.options.model.isAssetLocked&&this.options.model.isAssetLocked()){var i=this.options.model.get("lockInfo").data,n=i.lockedBy===a.getUserLogin()?docs.i18n.t("YOU"):i.lockedBy;e=docs.i18n.t("LOCKED_BY",n)}this.setElement(r({i18n:docs.i18n,model:this.model,reserveTooltip:this.options.parentView.renderData.reserveTooltip,hideReservation:this.options.column.hideReservation||!1,isFolder:this.options.column.isFolder&&this.options.column.isFolder(this.model),hideDownload:this.options.column.hideDownload&&this.options.column.hideDownload(this.model),hideAssetLock:this.options.column.hideAssetLock||!1,hideScheduledJob:this.options.column.hideScheduledJob||!1,isAssetScheduledToPublish:this.options.model.get("scheduled"),isAssetLocked:!(!this.options.model.get("lockInfo")||!this.options.model.get("lockInfo").data)&&this.options.model.get("lockInfo").data.isLocked,showEmptyDownload:this.options.column.showEmptyDownload&&this.options.column.showEmptyDownload(this.model),hideShare:t.isFunction(this.options.column.hideShare)?this.options.column.hideShare(this.model):this.options.column.hideShare||!1,hidePreview:!(this.options&&this.options.actions&&this.options.actions.preview)||this.options.column.hidePreview,assetLockTitle:e})),this.options.column.displayClass&&this.$el.addClass(this.options.column.displayClass);var o=this.$(".containerview-buttons");return l.isAppLink?o.find(".containerview-table-conversation-action").remove():o.append(this.getConversationIndicatorMarkup(this.options.column.convActionOptions)),this.options&&this.options.actions&&this.options.actions.favorite&&!this.options.column.hideFavorite&&o.append(this.favoriteItemButtonMarkup()),this}},o,n))})),define("docs/container/tableview/StatusTableCellView.template",["underscore"],(function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="<span class='containerview-table-cell rowView compact'>   <span class=\"containerview-buttons\">      <div class='containerview-badge'>        <div class =\"active-status "+(null==(__t=activeClick)?"":_.escape(__t))+'" data-active="'+(null==(__t=active)?"":_.escape(__t))+'" tabindex="0"  role="button" aria-label="'+(null==(__t=activeLabel)?"":_.escape(__t))+'" title="'+(null==(__t=activeLabelTT)?"":_.escape(__t))+'">          <div class="status-icon '+(null==(__t=iconClass)?"":_.escape(__t))+'"><div class="status-area-label visuallyhidden">'+(null==(__t=activeLabel)?"":_.escape(__t))+"</div></div>        </div>      </div>    </span></span>";return __p}})),define("docs/container/tableview/StatusTableCellView",["jquery","underscore","backbone","core/util/Globals","common/mixin/ConversationsMixin","docs/mixins/FavoritesMixin","docs/container/tableview/StatusTableCellView.template"],(function(e,t,i,docs,n,o,s){"use strict";return i.View.extend(t.extend({initialize:function(e){return this.options=e||{},this},render:function(){var e=this.options.parentView.renderData;return e.activeClick=!this.options.column.disableClick&&this.model.isAllowedAction("publish")?"active-status-click":"",this.setElement(s(t.extend(e,{i18n:docs.i18n,model:this.model}))),this}},o,n))})),define("docs/folderview/view/FolderItemView",["jquery","underscore","core/util/Globals","core/util/Utils","common/site/SitesUtils","common/container/view/ContainerItemView","common/mixin/ConversationsMixin","docs/mixins/FavoritesMixin","core/util/FeatureFlags"],(function(e,t,docs,i,n){"use strict";var o=docs.common.Globals;return docs.views.FolderItemView=docs.views.ContainerItemView.extend(t.extend({initialize:function(e){return docs.views.ContainerItemView.prototype.initialize.call(this,e),this.registerFavoritesListener(),this},getRenderData:function(e){var s=e||{};if(s.rowClass="folderview-fldrrow",this.model.get("flags")&&this.model.get("flags").isInTrash&&(s.isTrashSiteItem=n.isSites(this.model)&&!t.isUndefined(this.model.get("scsFlags")),s.isTrashSiteItem&&(s.rowClass="folderview-sitestrashrow")),s.isTrashSiteItem){switch(this.model.get("application")){case"framework.site":s.errorImg=o.staticRoot+"images/site_thumb.png",s.capsuleText=docs.i18n.t("SITE_ITEM_ROW");break;case"framework.site.theme":s.errorImg=o.staticRoot+"images/theme_thumb.png",s.capsuleText=docs.i18n.t("THEME_ITEM_ROW");break;case"framework.site.app":s.errorImg=o.staticRoot+"images/app_thumb.png",s.capsuleText=docs.i18n.t("APP_ITEM_ROW");break;case"framework.site.template":s.errorImg=o.staticRoot+"images/template_thumb.png",s.capsuleText=docs.i18n.t("TEMPLATE_ITEM_ROW");break;case"framework.site.variant":s.errorImg=o.staticRoot+"images/update_thumb.png",s.capsuleText=docs.i18n.t("UPDATE_ITEM_ROW")}var a=this.getUpdateInfo(!0);if(s.updateDate=a.updateDate,s.updateText=a.updateText,docs.common.Globals.isSitesAdmin&&"sites"==this.options.urlParams.fragment&&!this.cardView&&!this.compactView){var r=i.isYou(this.model,"createdBy");s.ownedBy=r?docs.i18n.t("OWNED_BY_YOU"):docs.i18n.t("OWNED_BY",this.model.get("createdByName"))}}return s},renderItemButtons:function(){var e=this.getConversationIndicatorMarkup();return this.options.actions&&!this.options.actions.favorite||(e+=this.favoriteItemButtonMarkup()),e},configureItemButtons:function(e){this.setupItemConversationIndicator(this.model.get("flags").isInTrash||o.isPublicLink||o.isAppLink,e),this.setupItemFavoriteButton(this.model.get("flags").isInTrash||o.isPublicLink||o.isAppLink||this.model.get("application").startsWith("framework.site"));var i=this.$(".folderview-share-button");if(this.model.collection.container.isFavorites)i.after('<span class="empty">'),i.remove();else{var n=this.contextActions.hasActions(this.model,["action_share","action_links"]);n.action_share?i.attr("title",docs.i18n.t("ACTION_SHARE")).attr("aria-label",docs.i18n.t("ACTION_SHARE_FOLDER_TT",t.unescape(this.model.get("name")))):n.action_links?i.attr("title",docs.i18n.t("ACTION_LINKS")).attr("aria-label",docs.i18n.t("ACTION_LINKS_FOLDER_TOOLTIP",t.unescape(this.model.get("name")))):(i.after('<span class="empty">'),i.remove())}},flagsChanged:function(){docs.views.ContainerItemView.prototype.flagsChanged.call(this)},postRender:function(){this.options.needWrite&&!this.model.isAllowedAction("fileWrite")&&this.$el.addClass("containerview-noselect")},getAriaLabel:function(){var e=docs.i18n.t("FOLDERVIEW_FOLDER_ROW"),t=this.renderData&&this.renderData.isTrashSiteItem;return t&&(e=this.renderData.capsuleText),e+=" "+this.model.get("name"),this.model.get("description")&&(e+=" "+this.model.get("description")),e+=this.getAriaShareStatus(),this.isFavorite(this.model)&&(e+=" "+docs.i18n.t("IS_YOUR_FAVORITE")),e+=this.getConversationAriaLabel(),t?(e+=" "+this.getUpdateInfo(!0).updateText,this.renderData&&this.renderData.ownedBy&&(e+=" "+this.renderData.ownedBy)):e+=" "+i.getStatusDisplay(this.model,{dateOnlyAfterDaySpan:!0,showModified:this.options.tableView}),e},getAriaShareStatus:function(){return this.renderData&&this.renderData.isTrashSiteItem?"":this.model.isSharedByYou()?" "+docs.i18n.t("FOLDERVIEW_SHARED_BY_YOU"):this.model.isOwned()?"":" "+docs.i18n.t("FOLDERVIEW_SHARED_WITH_YOU")}},docs.mixins.FavoritesMixin,docs.mixins.ConversationsMixin)),docs.views.FolderItemView})),define("docs/folderview/view/FileItemView",["jquery","underscore","core/util/Globals","core/util/Utils","core/util/Thumbs","common/container/view/ContainerItemView","common/mixin/ConversationsMixin","docs/mixins/FavoritesMixin"],(function(e,t,docs,i,n,o,s,a){"use strict";var r=docs.common.Globals;return docs.views.FileItemView=o.extend(t.extend({initialize:function(e){return o.prototype.initialize.call(this,e),this.registerFavoritesListener(),this},renderItemButtons:function(){var e=this.getConversationIndicatorMarkup();return this.options.actions&&!this.options.actions.favorite||(e+=this.favoriteItemButtonMarkup()),e},configureItemButtons:function(e){this.setupItemConversationIndicator(this.model.get("flags").isInTrash||r.isPublicLink||r.isAppLink,e),this.setupItemFavoriteButton(this.model.get("flags").isInTrash||r.isPublicLink||r.isAppLink||this.model.get("application").startsWith("framework.site"));var i=this.$(".folderview-download-button"),n=this.$(".folderview-share-button");if(this.model.collection.container.isFavorites)i.after('<span class="empty">'),i.remove(),n.after('<span class="empty">'),n.remove();else{var o=this.contextActions.hasActions(this.model,["action_download","action_links"]);o.action_download?i.attr("title",docs.i18n.t("ACTION_DOWNLOAD")).attr("aria-label",docs.i18n.t("ACTION_DOWNLOAD_FILE_TT",t.unescape(this.model.name()))):(i.after('<span class="empty">'),i.remove()),o.action_links?n.attr("title",docs.i18n.t("ACTION_LINKS")).attr("aria-label",docs.i18n.t("ACTION_LINKS_FILE_TOOLTIP",t.unescape(this.model.name()))):(n.after('<span class="empty">'),n.remove())}},getRenderData:function(e){this.model.set("size_display",i.getBytesDisplay(this.model.get("size")));var o=e||{};o.verDisp="("+docs.i18n.t("FILEVIEW_REV",parseInt(this.model.get("revision"),10))+")",o.verDispLink=!r.isPublicUser&&this.options.sidebar&&this.options.sidebar.properties;var s=parseInt(this.model.get("revision"),10);return o.verTitle=o.verDispLink?docs.i18n.t("ACTION_VERS_TITLE",docs.i18n.t("FILEVIEW_REV",s)):docs.i18n.t("FILEVIEW_ARIA_REV",s),o.reserveTooltip=this.getReserveTooltip(),o.errorImg=this.model.getThumbnailUrl(this.largeThumbs,this.realThumbs,this.gridView,!0),o.thumbDetails=n.getThumbDetails(this.model.get("extension"),t.isFunction(this.model.getVirusScanOptions)?this.model.getVirusScanOptions():{}),o},postRender:function(){var e=parseInt(this.model.get("revision"),10),t=parseInt(this.model.get("latestRevision"),10),i=parseInt(this.model.get("lastRevision"),10);e<=1&&(isNaN(t)||1===t)&&(isNaN(i)||1===i)&&this.$(".containerview-revision, .containerview-card-revision").hide(),"shared"===this.model.get("source")&&this.$el.addClass("folderview-sharedto")},getReserveTooltip:function(){var t=this.model.get("reservedBy"),n=t&&t===r.userid,o="";return(n||t&&!n)&&(o=r.isPublicLink?docs.i18n.t("RESERVED_PUBLIC_LINK_TT"):this.options.tableView?i.getStatusDisplay(this.model,{dateOnlyAfterDaySpan:!0}):n?docs.i18n.t("RESERVED_BY_YOU_TT"):docs.i18n.t("RESERVED_BY_OTHER_TT",this.model.get("reservedByName"))),o=e("<div>"+o+"</div>").text()},getAriaLabel:function(){var e=this.model.isVirusScanInfected&&this.model.isVirusScanInfected()?docs.i18n.t("INFECTED_WITH_VIRUS")+" ":"";return e+=docs.i18n.t("FOLDERVIEW_FILE_ROW"),e+=" "+this.model.name(),!this.options.tableView&&this.model.get("description")&&(e+=" "+this.model.get("description")),e+=" "+docs.i18n.t("FILEVIEW_ARIA_REV",parseInt(this.model.get("revision"),10)),e+=" "+i.getBytesDisplay(this.model.get("size")),this.options.tableView&&(e+=" "+docs.i18n.t("TYPE"),e+=" "+this.model.get("extension")),e+=" "+this.getReserveTooltip(),this.isFavorite(this.model)&&(e+=" "+docs.i18n.t("IS_YOUR_FAVORITE")),e+=this.getConversationAriaLabel(),e+=" "+i.getStatusDisplay(this.model,{dateOnlyAfterDaySpan:!0,showModified:this.options.tableView})}},a,s)),docs.views.FileItemView})),define("docs/folderview/view/DocumentTableRowView",["jquery","underscore","core/util/Globals","core/util/Utils","common/container/tableview/ContainerTableRowView","common/container/tableview/ContainerTableCellView","common/container/tableview/VersionTableCellView","docs/container/tableview/ActionsTableCellView","docs/folderview/view/FolderItemView","docs/folderview/view/FileItemView","docs/mixins/FavoritesMixin","common/mixin/ConversationsMixin"],(function(e,t,docs,i,n,o,s,a,r,l,c,h){"use strict";var d=docs.common.Globals,u=n.extend(t.extend({initialize:function(e){return this.model.isFolder?this.baseItemView=r:this.baseItemView=l,n.prototype.initialize.call(this,e),this.registerFavoritesListener(),this},getRenderData:function(e){return this.baseItemView.prototype.getRenderData.call(this,e)},getAriaLabel:function(){return this.baseItemView.prototype.getAriaLabel.call(this)},getAriaShareStatus:function(){return this.baseItemView.prototype.getAriaShareStatus.call(this)},getReserveTooltip:function(){return this.baseItemView.prototype.getReserveTooltip.call(this)},configureItemButtons:function(e){this.baseItemView.prototype.configureItemButtons.call(this,e)}},c,h),{sizeColumn:{name:"size",label:docs.i18n.t("PROP_SIZE"),ContainerTableCellView:o,getValue:function(e){return e.isFile?i.getBytesDisplay(e.get("size")):""},width:"72px",priority:4},typeColumn:{base:n.typeColumn,width:"50px",getValue:function(e){return e.isFile?e.get("extension"):""},className:"containerview-capsule-text",priority:5},lastUpdatedColumn:{base:n.lastUpdatedColumn,width:"172px",priority:1},lastUpdatedByColumn:{base:n.lastUpdatedByColumn,width:"158px",priority:2},versionColumn:{name:"version",label:docs.i18n.t("PROP_VERSION"),ContainerTableCellView:s,getValue:function(e,t){return t.parentView.renderData.verDisp&&t.parentView.renderData.verDisp.replace(/[\(\)]/g,"")||""},getTitle:function(e,t){return t.parentView.renderData.verTitle||""},width:"42px",priority:3},actionsColumn:{name:"actions",label:"",ContainerTableCellView:a,width:function(e){return d.isPublicLink?"64px":d.isAppLink||e.isFavorites||e.collection&&e.collection.container.isFavorites?"108px":"196px"},hideShare:function(e){return e.collection.container.isFavorites||!1},hideDownload:function(e){return e.collection.container.isFavorites||!1},hideAssetLock:!0,hidePreview:!0,hideScheduledJob:!0,isFolder:function(e){return e.isFolder},priority:6},tableColumns:function(){var e=n.buildTableColumns([n.nameColumn,u.versionColumn,u.lastUpdatedColumn,u.lastUpdatedByColumn,u.sizeColumn,u.typeColumn,u.actionsColumn]);return d.isPublicLink&&e.splice(3,1),e}});return u})),define("docs/folderview/view/TrashTableRowView",["jquery","underscore","common/container/tableview/ContainerTableRowView","docs/folderview/view/DocumentTableRowView"],(function(e,t,i,n){"use strict";var o=n.extend(t.extend({}),{dateDeletedColumn:{base:i.lastUpdatedColumn,name:"dateDeleted",label:docs.i18n.t("SORT_DELETED"),tooltip:docs.i18n.t("SORT_DELETED_TOOLTIP"),priority:1},deletedByColumn:{base:i.lastUpdatedByColumn,name:"deletedBy",label:docs.i18n.t("SORT_DELETED_BY"),priority:2},tableColumns:function(){return i.buildTableColumns([i.nameColumn,n.versionColumn,o.dateDeletedColumn,o.deletedByColumn,n.sizeColumn,n.typeColumn])}});return o})),define("common-docs-view2-15b22b9.cache",(function(){}));